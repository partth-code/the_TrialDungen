var bm=Object.defineProperty;var wf=E=>{throw TypeError(E)};var Gm=(E,v,m)=>v in E?bm(E,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):E[v]=m;var wt=(E,v,m)=>Gm(E,typeof v!="symbol"?v+"":v,m),Dh=(E,v,m)=>v.has(E)||wf("Cannot "+m);var Z=(E,v,m)=>(Dh(E,v,"read from private field"),m?m.call(E):v.get(E)),lt=(E,v,m)=>v.has(E)?wf("Cannot add the same private member more than once"):v instanceof WeakSet?v.add(E):v.set(E,m),rt=(E,v,m,P)=>(Dh(E,v,"write to private field"),P?P.call(E,m):v.set(E,m),m),xt=(E,v,m)=>(Dh(E,v,"access private method"),m);(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))P(w);new MutationObserver(w=>{for(const F of w)if(F.type==="childList")for(const c of F.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&P(c)}).observe(document,{childList:!0,subtree:!0});function m(w){const F={};return w.integrity&&(F.integrity=w.integrity),w.referrerPolicy&&(F.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?F.credentials="include":w.crossOrigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function P(w){if(w.ep)return;w.ep=!0;const F=m(w);fetch(w.href,F)}})();function Um(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var mo={exports:{}},Vm=mo.exports,If;function Wm(){return If||(If=1,function(E,v){(function(P,w){E.exports=w()})(Vm,()=>(()=>{var m={50792:c=>{var S=Object.prototype.hasOwnProperty,t="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(t=!1));function g(e,s,h){this.fn=e,this.context=s,this.once=h||!1}function a(e,s,h,i,l){if(typeof h!="function")throw new TypeError("The listener must be a function");var u=new g(h,i||e,l),f=t?t+s:s;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],u]:e._events[f].push(u):(e._events[f]=u,e._eventsCount++),e}function n(e,s){--e._eventsCount===0?e._events=new o:delete e._events[s]}function r(){this._events=new o,this._eventsCount=0}r.prototype.eventNames=function(){var s=[],h,i;if(this._eventsCount===0)return s;for(i in h=this._events)S.call(h,i)&&s.push(t?i.slice(1):i);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(h)):s},r.prototype.listeners=function(s){var h=t?t+s:s,i=this._events[h];if(!i)return[];if(i.fn)return[i.fn];for(var l=0,u=i.length,f=new Array(u);l<u;l++)f[l]=i[l].fn;return f},r.prototype.listenerCount=function(s){var h=t?t+s:s,i=this._events[h];return i?i.fn?1:i.length:0},r.prototype.emit=function(s,h,i,l,u,f){var d=t?t+s:s;if(!this._events[d])return!1;var p=this._events[d],x=arguments.length,y,T;if(p.fn){switch(p.once&&this.removeListener(s,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,i),!0;case 4:return p.fn.call(p.context,h,i,l),!0;case 5:return p.fn.call(p.context,h,i,l,u),!0;case 6:return p.fn.call(p.context,h,i,l,u,f),!0}for(T=1,y=new Array(x-1);T<x;T++)y[T-1]=arguments[T];p.fn.apply(p.context,y)}else{var C=p.length,A;for(T=0;T<C;T++)switch(p[T].once&&this.removeListener(s,p[T].fn,void 0,!0),x){case 1:p[T].fn.call(p[T].context);break;case 2:p[T].fn.call(p[T].context,h);break;case 3:p[T].fn.call(p[T].context,h,i);break;case 4:p[T].fn.call(p[T].context,h,i,l);break;default:if(!y)for(A=1,y=new Array(x-1);A<x;A++)y[A-1]=arguments[A];p[T].fn.apply(p[T].context,y)}}return!0},r.prototype.on=function(s,h,i){return a(this,s,h,i,!1)},r.prototype.once=function(s,h,i){return a(this,s,h,i,!0)},r.prototype.removeListener=function(s,h,i,l){var u=t?t+s:s;if(!this._events[u])return this;if(!h)return n(this,u),this;var f=this._events[u];if(f.fn)f.fn===h&&(!l||f.once)&&(!i||f.context===i)&&n(this,u);else{for(var d=0,p=[],x=f.length;d<x;d++)(f[d].fn!==h||l&&!f[d].once||i&&f[d].context!==i)&&p.push(f[d]);p.length?this._events[u]=p.length===1?p[0]:p:n(this,u)}return this},r.prototype.removeAllListeners=function(s){var h;return s?(h=t?t+s:s,this._events[h]&&n(this,h)):(this._events=new o,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=t,r.EventEmitter=r,c.exports=r},11517:(c,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38829),g=function(a,n,r,e){for(var s=a[0],h=1;h<a.length;h++){var i=a[h];o(i,s,n,r,e),s=i}return a};c.exports=g},80318:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"angle",n,r,e,s)};c.exports=g},60757:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){for(var a=0;a<t.length;a++){var n=t[a];o.call(g,n)}return t};c.exports=S},69927:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){g===void 0&&(g=0);for(var a=g;a<t.length;a++){var n=t[a],r=!0;for(var e in o)n[e]!==o[e]&&(r=!1);if(r)return n}return null};c.exports=S},32265:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){g===void 0&&(g=0);for(var a=t.length-1;a>=g;a--){var n=t[a],r=!0;for(var e in o)n[e]!==o[e]&&(r=!1);if(r)return n}return null};c.exports=S},94420:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(11879),g=t(60461),a=t(95540),n=t(29747),r=t(41481),e=new r({sys:{queueDepthSort:n,events:{once:n}}},0,0,1,1).setOrigin(0,0),s=function(h,i){i===void 0&&(i={});var l=i.hasOwnProperty("width"),u=i.hasOwnProperty("height"),f=a(i,"width",-1),d=a(i,"height",-1),p=a(i,"cellWidth",1),x=a(i,"cellHeight",p),y=a(i,"position",g.TOP_LEFT),T=a(i,"x",0),C=a(i,"y",0),A=0,R=0,M=f*p,L=d*x;e.setPosition(T,C),e.setSize(p,x);for(var I=0;I<h.length;I++)if(o(h[I],e,y),l&&f===-1)e.x+=p;else if(u&&d===-1)e.y+=x;else if(u&&!l){if(R+=x,e.y+=x,R===L&&(R=0,A+=p,e.y=C,e.x+=p,A===M))break}else if(A+=p,e.x+=p,A===M&&(A=0,R+=x,e.x=T,e.y+=x,R===L))break;return h};c.exports=s},41721:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"alpha",n,r,e,s)};c.exports=g},67285:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"x",n,r,e,s)};c.exports=g},9074:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"x",n,e,h,i),o(a,"y",r,s,h,i)};c.exports=g},75222:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"y",n,r,e,s)};c.exports=g},22983:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g===void 0&&(g=0),a===void 0&&(a=6.28);for(var n=g,r=(a-g)/t.length,e=o.x,s=o.y,h=o.radius,i=0;i<t.length;i++)t[i].x=e+h*Math.cos(n),t[i].y=s+h*Math.sin(n),n+=r;return t};c.exports=S},95253:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g===void 0&&(g=0),a===void 0&&(a=6.28);for(var n=g,r=(a-g)/t.length,e=o.width/2,s=o.height/2,h=0;h<t.length;h++)t[h].x=o.x+e*Math.cos(n),t[h].y=o.y+s*Math.sin(n),n+=r;return t};c.exports=S},88505:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15258),g=t(26708),a=function(n,r,e){var s;e?s=g(r,e,n.length):s=o(r,n.length);for(var h=0;h<n.length;h++){var i=n[h],l=s[h];i.x=l.x,i.y=l.y}return n};c.exports=a},41346:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14649),g=t(86003),a=t(49498),n=function(r,e,s){s===void 0&&(s=0);var h=o(e,!1,r.length);s>0?g(h,s):s<0&&a(h,Math.abs(s));for(var i=0;i<r.length;i++)r[i].x=h[i].x,r[i].y=h[i].y;return r};c.exports=n},11575:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84993),g=function(a,n,r){var e=o({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},r),s=o({x1:n.x2,y1:n.y2,x2:n.x3,y2:n.y3},r),h=o({x1:n.x3,y1:n.y3,x2:n.x1,y2:n.y1},r);e.pop(),s.pop(),h.pop(),e=e.concat(s,h);for(var i=e.length/a.length,l=0,u=0;u<a.length;u++){var f=a[u],d=e[Math.floor(l)];f.x=d.x,f.y=d.y,l+=i}return a};c.exports=g},29953:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){for(var a=0;a<t.length;a++){var n=t[a];n.anims&&n.anims.play(o,g)}return t};c.exports=S},66979:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r){a===void 0&&(a=0),n===void 0&&(n=0),r===void 0&&(r=1);var e,s=0,h=t.length;if(r===1)for(e=n;e<h;e++)t[e][o]+=g+s*a,s++;else for(e=n;e>=0;e--)t[e][o]+=g+s*a,s++;return t};c.exports=S},43967:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r){a===void 0&&(a=0),n===void 0&&(n=0),r===void 0&&(r=1);var e,s=0,h=t.length;if(r===1)for(e=n;e<h;e++)t[e][o]=g+s*a,s++;else for(e=n;e>=0;e--)t[e][o]=g+s*a,s++;return t};c.exports=S},88926:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28176),g=function(a,n){for(var r=0;r<a.length;r++)o(n,a[r]);return a};c.exports=g},33286:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(24820),g=function(a,n){for(var r=0;r<a.length;r++)o(n,a[r]);return a};c.exports=g},96e3:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65822),g=function(a,n){for(var r=0;r<a.length;r++)o(n,a[r]);return a};c.exports=g},28789:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26597),g=function(a,n){for(var r=0;r<a.length;r++)o(n,a[r]);return a};c.exports=g},97154:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90260),g=function(a,n){for(var r=0;r<a.length;r++)o(n,a[r]);return a};c.exports=g},20510:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"rotation",n,r,e,s)};c.exports=g},91051:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1163),g=t(20339),a=function(n,r,e){for(var s=r.x,h=r.y,i=0;i<n.length;i++){var l=n[i];o(l,s,h,e,Math.max(1,g(l.x,l.y,s,h)))}return n};c.exports=a},76332:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1163),g=function(a,n,r,e){var s=n.x,h=n.y;if(e===0)return a;for(var i=0;i<a.length;i++)o(a[i],s,h,r,e);return a};c.exports=g},61619:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"scaleX",n,r,e,s)};c.exports=g},94868:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"scaleX",n,e,h,i),o(a,"scaleY",r,s,h,i)};c.exports=g},95532:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,n,r,e,s){return o(a,"scaleY",n,r,e,s)};c.exports=g},8689:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"alpha",n,r,e,s)};c.exports=g},2645:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e){return o(a,"blendMode",n,0,r,e)};c.exports=g},32372:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"depth",n,r,e,s)};c.exports=g},85373:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){for(var a=0;a<t.length;a++)t[a].setInteractive(o,g);return t};c.exports=S},81583:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"originX",n,e,h,i),o(a,"originY",r,s,h,i),a.forEach(function(l){l.updateDisplayOrigin()}),a};c.exports=g},79939:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"rotation",n,r,e,s)};c.exports=g},2699:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"scaleX",n,e,h,i),o(a,"scaleY",r,s,h,i)};c.exports=g},98739:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"scaleX",n,r,e,s)};c.exports=g},98476:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"scaleY",n,r,e,s)};c.exports=g},6207:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"scrollFactorX",n,e,h,i),o(a,"scrollFactorY",r,s,h,i)};c.exports=g},6607:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"scrollFactorX",n,r,e,s)};c.exports=g},72248:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"scrollFactorY",n,r,e,s)};c.exports=g},14036:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){for(var r=0;r<t.length;r++)t[r].setTint(o,g,a,n);return t};c.exports=S},50159:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e){return o(a,"visible",n,0,r,e)};c.exports=g},77597:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"x",n,r,e,s)};c.exports=g},83194:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s,h,i){return r==null&&(r=n),o(a,"x",n,e,h,i),o(a,"y",r,s,h,i)};c.exports=g},67678:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,n,r,e,s){return o(a,"y",n,r,e,s)};c.exports=g},35850:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s){e===void 0&&(e=0),s===void 0&&(s=new o);var h,i,l=a.length;if(l===1)h=a[0].x,i=a[0].y,a[0].x=n,a[0].y=r;else{var u=1,f=0;e===0&&(f=l-1,u=l-2),h=a[f].x,i=a[f].y,a[f].x=n,a[f].y=r;for(var d=0;d<l;d++)if(!(u>=l||u===-1)){var p=a[u],x=p.x,y=p.y;p.x=h,p.y=i,h=x,i=y,e===0?u--:u++}}return s.x=h,s.y=i,s};c.exports=g},8628:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33680),g=function(a){return o(a)};c.exports=g},21837:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7602),g=function(a,n,r,e,s){s===void 0&&(s=!1);var h=Math.abs(e-r)/a.length,i;if(s)for(i=0;i<a.length;i++)a[i][n]+=o(i*h,r,e);else for(i=0;i<a.length;i++)a[i][n]=o(i*h,r,e);return a};c.exports=g},21910:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54261),g=function(a,n,r,e,s){s===void 0&&(s=!1);var h=Math.abs(e-r)/a.length,i;if(s)for(i=0;i<a.length;i++)a[i][n]+=o(i*h,r,e);else for(i=0;i<a.length;i++)a[i][n]=o(i*h,r,e);return a};c.exports=g},62054:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){if(n===void 0&&(n=!1),t.length===0)return t;if(t.length===1)return n?t[0][o]+=(a+g)/2:t[0][o]=(a+g)/2,t;var r=Math.abs(a-g)/(t.length-1),e;if(n)for(e=0;e<t.length;e++)t[e][o]+=e*r+g;else for(e=0;e<t.length;e++)t[e][o]=e*r+g;return t};c.exports=S},79815:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=0;o<t.length;o++)t[o].visible=!t[o].visible;return t};c.exports=S},39665:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a,n,r){r===void 0&&(r=0);for(var e=0;e<a.length;e++){var s=a[e];s.x=o(s.x,n.left-r,n.right+r),s.y=o(s.y,n.top-r,n.bottom+r)}return a};c.exports=g},61061:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AlignTo:t(11517),Angle:t(80318),Call:t(60757),GetFirst:t(69927),GetLast:t(32265),GridAlign:t(94420),IncAlpha:t(41721),IncX:t(67285),IncXY:t(9074),IncY:t(75222),PlaceOnCircle:t(22983),PlaceOnEllipse:t(95253),PlaceOnLine:t(88505),PlaceOnRectangle:t(41346),PlaceOnTriangle:t(11575),PlayAnimation:t(29953),PropertyValueInc:t(66979),PropertyValueSet:t(43967),RandomCircle:t(88926),RandomEllipse:t(33286),RandomLine:t(96e3),RandomRectangle:t(28789),RandomTriangle:t(97154),Rotate:t(20510),RotateAround:t(91051),RotateAroundDistance:t(76332),ScaleX:t(61619),ScaleXY:t(94868),ScaleY:t(95532),SetAlpha:t(8689),SetBlendMode:t(2645),SetDepth:t(32372),SetHitArea:t(85373),SetOrigin:t(81583),SetRotation:t(79939),SetScale:t(2699),SetScaleX:t(98739),SetScaleY:t(98476),SetScrollFactor:t(6207),SetScrollFactorX:t(6607),SetScrollFactorY:t(72248),SetTint:t(14036),SetVisible:t(50159),SetX:t(77597),SetXY:t(83194),SetY:t(67678),ShiftPosition:t(35850),Shuffle:t(8628),SmootherStep:t(21910),SmoothStep:t(21837),Spread:t(62054),ToggleVisible:t(79815),WrapInRectangle:t(39665)}},42099:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(74943),n=t(81957),r=t(41138),e=t(35154),s=t(90126),h=new g({initialize:function(l,u,f){this.manager=l,this.key=u,this.type="frame",this.frames=this.getFrames(l.textureManager,e(f,"frames",[]),e(f,"defaultTextureKey",null),e(f,"sortFrames",!0)),this.frameRate=e(f,"frameRate",null),this.duration=e(f,"duration",null),this.msPerFrame,this.skipMissedFrames=e(f,"skipMissedFrames",!0),this.delay=e(f,"delay",0),this.repeat=e(f,"repeat",0),this.repeatDelay=e(f,"repeatDelay",0),this.yoyo=e(f,"yoyo",!1),this.showBeforeDelay=e(f,"showBeforeDelay",!1),this.showOnStart=e(f,"showOnStart",!1),this.hideOnComplete=e(f,"hideOnComplete",!1),this.randomFrame=e(f,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(i,l,u,f){u===null&&f===null?(i.frameRate=24,i.duration=24/l*1e3):u&&f===null?(i.duration=u,i.frameRate=l/(u/1e3)):(i.frameRate=f,i.duration=l/f*1e3),i.msPerFrame=1e3/i.frameRate},addFrame:function(i){return this.addFrameAt(this.frames.length,i)},addFrameAt:function(i,l){var u=this.getFrames(this.manager.textureManager,l);if(u.length>0){if(i===0)this.frames=u.concat(this.frames);else if(i===this.frames.length)this.frames=this.frames.concat(u);else{var f=this.frames.slice(0,i),d=this.frames.slice(i);this.frames=f.concat(u,d)}this.updateFrameSequence()}return this},checkFrame:function(i){return i>=0&&i<this.frames.length},getFirstTick:function(i){i.accumulator=0,i.nextTick=i.currentFrame.duration?i.currentFrame.duration:i.msPerFrame},getFrameAt:function(i){return this.frames[i]},getFrames:function(i,l,u,f){f===void 0&&(f=!0);var d=[],p,x,y=1,T,C;if(typeof l=="string"){if(C=l,!i.exists(C))return console.warn('Texture "%s" not found',C),d;var A=i.get(C),R=A.getFrameNames();f&&s(R),l=[],R.forEach(function(B){l.push({key:C,frame:B})})}if(!Array.isArray(l)||l.length===0)return d;for(T=0;T<l.length;T++){var M=l[T],L=e(M,"key",u);if(L){var I=e(M,"frame",0),O=i.getFrame(L,I);if(!O){console.warn('Texture "%s" not found',L);continue}x=new r(L,I,y,O),x.duration=e(M,"duration",0),x.isFirst=!p,p&&(p.nextFrame=x,x.prevFrame=p),d.push(x),p=x,y++}}if(d.length>0){x.isLast=!0,x.nextFrame=d[0],d[0].prevFrame=x;var D=1/(d.length-1);for(T=0;T<d.length;T++)d[T].progress=T*D}return d},getNextTick:function(i){i.accumulator-=i.nextTick,i.nextTick=i.currentFrame.duration?i.currentFrame.duration:i.msPerFrame},getFrameByProgress:function(i){return i=o(i,0,1),n(i,this.frames,"progress")},nextFrame:function(i){var l=i.currentFrame;l.isLast?i.yoyo?this.handleYoyoFrame(i,!1):i.repeatCounter>0?i.inReverse&&i.forward?i.forward=!1:this.repeatAnimation(i):i.complete():this.updateAndGetNextTick(i,l.nextFrame)},handleYoyoFrame:function(i,l){if(l||(l=!1),i.inReverse===!l&&i.repeatCounter>0){(i.repeatDelay===0||i.pendingRepeat)&&(i.forward=l),this.repeatAnimation(i);return}if(i.inReverse!==l&&i.repeatCounter===0){i.complete();return}i.forward=l;var u=l?i.currentFrame.nextFrame:i.currentFrame.prevFrame;this.updateAndGetNextTick(i,u)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(i){var l=i.currentFrame;l.isFirst?i.yoyo?this.handleYoyoFrame(i,!0):i.repeatCounter>0?i.inReverse&&!i.forward?this.repeatAnimation(i):(i.forward=!0,this.repeatAnimation(i)):i.complete():this.updateAndGetNextTick(i,l.prevFrame)},updateAndGetNextTick:function(i,l){i.setCurrentFrame(l),this.getNextTick(i)},removeFrame:function(i){var l=this.frames.indexOf(i);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(i){return this.frames.splice(i,1),this.updateFrameSequence(),this},repeatAnimation:function(i){if(i._pendingStop===2){if(i._pendingStopValue===0)return i.stop();i._pendingStopValue--}i.repeatDelay>0&&!i.pendingRepeat?(i.pendingRepeat=!0,i.accumulator-=i.nextTick,i.nextTick+=i.repeatDelay):(i.repeatCounter--,i.forward?i.setCurrentFrame(i.currentFrame.nextFrame):i.setCurrentFrame(i.currentFrame.prevFrame),i.isPlaying&&(this.getNextTick(i),i.handleRepeat()))},toJSON:function(){var i={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){i.frames.push(l.toJSON())}),i},updateFrameSequence:function(){for(var i=this.frames.length,l=1/(i-1),u,f=0;f<i;f++)u=this.frames[f],u.index=f+1,u.isFirst=!1,u.isLast=!1,u.progress=f*l,f===0?(u.isFirst=!0,i===1?(u.isLast=!0,u.nextFrame=u,u.prevFrame=u):(u.isLast=!1,u.prevFrame=this.frames[i-1],u.nextFrame=this.frames[f+1])):f===i-1&&i>1?(u.isLast=!0,u.prevFrame=this.frames[i-2],u.nextFrame=this.frames[0]):i>1&&(u.prevFrame=this.frames[f-1],u.nextFrame=this.frames[f+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});c.exports=h},41138:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s,h){h===void 0&&(h=!1),this.textureKey=n,this.textureFrame=r,this.index=e,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=h},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});c.exports=g},60848:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42099),g=t(83419),a=t(90330),n=t(50792),r=t(74943),e=t(8443),s=t(95540),h=t(35154),i=t(36383),l=t(20283),u=t(41836),f=new g({Extends:n,initialize:function(p){n.call(this),this.game=p,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",p.events.once(e.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(e.DESTROY,this.destroy,this)},addMix:function(d,p,x){var y=this.anims,T=this.mixes,C=typeof d=="string"?d:d.key,A=typeof p=="string"?p:p.key;if(y.has(C)&&y.has(A)){var R=T.get(C);R||(R={}),R[A]=x,T.set(C,R)}return this},removeMix:function(d,p){var x=this.mixes,y=typeof d=="string"?d:d.key,T=x.get(y);if(T)if(p){var C=typeof p=="string"?p:p.key;T.hasOwnProperty(C)&&delete T[C]}else p||x.delete(y);return this},getMix:function(d,p){var x=this.mixes,y=typeof d=="string"?d:d.key,T=typeof p=="string"?p:p.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(d,p){return this.anims.has(d)?(console.warn("Animation key exists: "+d),this):(p.key=d,this.anims.set(d,p),this.emit(r.ADD_ANIMATION,d,p),this)},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,p,x){var y=[],T=this.game.cache.json.get(d);if(!T)return console.warn("No Aseprite data found for: "+d),y;var C=this,A=h(T,"meta",null),R=h(T,"frames",null);if(A&&R){var M=h(A,"frameTags",[]);M.forEach(function(L){var I=[],O=s(L,"name",null),D=s(L,"from",0),B=s(L,"to",0),V=s(L,"direction","forward");if(O&&(!p||p&&p.indexOf(O)>-1)){for(var W=0,Y=D;Y<=B;Y++){var X=Y.toString(),U=R[X];if(U){var z=s(U,"duration",i.MAX_SAFE_INTEGER);I.push({key:d,frame:X,duration:z}),W+=z}}V==="reverse"&&(I=I.reverse());var G={key:O,frames:I,duration:W,yoyo:V==="pingpong"},b;x?x.anims&&(b=x.anims.create(G)):b=C.create(G),b&&y.push(b)}})}return y},create:function(d){var p=d.key,x=!1;return p&&(x=this.get(p),x?console.warn("AnimationManager key already exists: "+p):(x=new o(this,p,d),this.anims.set(p,x),this.emit(r.ADD_ANIMATION,p,x))),x},fromJSON:function(d,p){p===void 0&&(p=!1),p&&this.anims.clear(),typeof d=="string"&&(d=JSON.parse(d));var x=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var y=0;y<d.anims.length;y++)x.push(this.create(d.anims[y]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&d.type==="frame"&&x.push(this.create(d));return x},generateFrameNames:function(d,p){var x=h(p,"prefix",""),y=h(p,"start",0),T=h(p,"end",0),C=h(p,"suffix",""),A=h(p,"zeroPad",0),R=h(p,"outputArray",[]),M=h(p,"frames",!1);if(!this.textureManager.exists(d))return console.warn('Texture "%s" not found',d),R;var L=this.textureManager.get(d);if(!L)return R;var I;if(p)for(M||(M=l(y,T)),I=0;I<M.length;I++){var O=x+u(M[I],A,"0",1)+C;L.has(O)?R.push({key:d,frame:O}):console.warn('Frame "%s" not found in texture "%s"',O,d)}else for(M=L.getFrameNames(),I=0;I<M.length;I++)R.push({key:d,frame:M[I]});return R},generateFrameNumbers:function(d,p){var x=h(p,"start",0),y=h(p,"end",-1),T=h(p,"first",!1),C=h(p,"outputArray",[]),A=h(p,"frames",!1);if(!this.textureManager.exists(d))return console.warn('Texture "%s" not found',d),C;var R=this.textureManager.get(d);if(!R)return C;T&&R.has(T)&&C.push({key:d,frame:T}),A||(y===-1&&(y=R.frameTotal-2),A=l(x,y));for(var M=0;M<A.length;M++){var L=A[M];R.has(L)?C.push({key:d,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,d)}return C},get:function(d){return this.anims.get(d)},getAnimsFromTexture:function(d){for(var p=this.textureManager.get(d),x=p.key,y=this.anims.getArray(),T=[],C=0;C<y.length;C++)for(var A=y[C],R=A.frames,M=0;M<R.length;M++)if(R[M].textureKey===x){T.push(A.key);break}return T},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(r.PAUSE_ALL)),this},play:function(d,p){Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++)p[x].anims.play(d);return this},staggerPlay:function(d,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(p)||(p=[p]);var T=p.length;y||T--;for(var C=0;C<p.length;C++){var A=x<0?Math.abs(x)*(T-C):x*C;p[C].anims.playAfterDelay(d,A)}return this},remove:function(d){var p=this.get(d);return p&&(this.emit(r.REMOVE_ANIMATION,d,p),this.anims.delete(d),this.removeMix(d)),p},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(r.RESUME_ALL)),this},toJSON:function(d){var p={anims:[],globalTimeScale:this.globalTimeScale};return d!==void 0&&d!==""?p.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(x,y){p.anims.push(y.toJSON())}),p},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});c.exports=f},9674:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42099),g=t(30976),a=t(83419),n=t(90330),r=t(74943),e=t(95540),s=new a({initialize:function(i){this.parent=i,this.animationManager=i.scene.sys.anims,this.animationManager.on(r.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(h){var i=this.parent;if(h===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(h)||(h=[h]);for(var l=0;l<h.length;l++){var u=h[l];this.nextAnim?this.nextAnimsQueue.push(u):this.nextAnim=u}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(h){this.isPlaying&&this.stop();var i=this.animationManager,l=typeof h=="string"?h:e(h,"key",null),u=this.exists(l)?this.get(l):i.get(l);if(!u)console.warn("Missing animation: "+l);else{this.currentAnim=u;var f=u.getTotalFrames(),d=e(h,"frameRate",u.frameRate),p=e(h,"duration",u.duration);u.calculateDuration(this,f,p,d),this.delay=e(h,"delay",u.delay),this.repeat=e(h,"repeat",u.repeat),this.repeatDelay=e(h,"repeatDelay",u.repeatDelay),this.yoyo=e(h,"yoyo",u.yoyo),this.showBeforeDelay=e(h,"showBeforeDelay",u.showBeforeDelay),this.showOnStart=e(h,"showOnStart",u.showOnStart),this.hideOnComplete=e(h,"hideOnComplete",u.hideOnComplete),this.skipMissedFrames=e(h,"skipMissedFrames",u.skipMissedFrames),this.randomFrame=e(h,"randomFrame",u.randomFrame),this.timeScale=e(h,"timeScale",this.timeScale);var x=e(h,"startFrame",0);x>f&&(x=0),this.randomFrame&&(x=g(0,f-1));var y=u.frames[x];x===0&&!this.forward&&(y=u.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(h){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),h!==void 0&&this.setCurrentFrame(h),this.parent},resume:function(h){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),h!==void 0&&this.setCurrentFrame(h),this.parent},playAfterDelay:function(h,i){if(!this.isPlaying)this.delayCounter=i,this.play(h,!0);else{var l=this.nextAnim,u=this.nextAnimsQueue;l&&u.unshift(l),this.nextAnim=h,this._pendingStop=1,this._pendingStopValue=i}return this.parent},playAfterRepeat:function(h,i){if(i===void 0&&(i=1),!this.isPlaying)this.play(h);else{var l=this.nextAnim,u=this.nextAnimsQueue;l&&u.unshift(l),this.repeatCounter!==-1&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=h,this._pendingStop=2,this._pendingStopValue=i}return this.parent},play:function(h,i){i===void 0&&(i=!1);var l=this.currentAnim,u=this.parent,f=typeof h=="string"?h:h.key;if(i&&this.isPlaying&&l.key===f)return u;if(l&&this.isPlaying){var d=this.animationManager.getMix(l.key,h);if(d>0)return this.playAfterDelay(h,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h)},playReverse:function(h,i){i===void 0&&(i=!1);var l=typeof h=="string"?h:h.key;return i&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h))},startAnimation:function(h){this.load(h);var i=this.currentAnim,l=this.parent;return i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(r.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(r.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(r.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(r.ANIMATION_COMPLETE,r.ANIMATION_COMPLETE_KEY)},emitEvents:function(h,i){var l=this.currentAnim;if(l){var u=this.currentFrame,f=this.parent,d=u.textureFrame;f.emit(h,l,u,f,d),i&&f.emit(i+l.key,l,u,f,d)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var h=this.currentFrame;if(!h)return 0;var i=h.progress;return this.inReverse&&(i*=-1),i},setProgress:function(h){return this.forward||(h=1-h),this.setCurrentFrame(this.currentAnim.getFrameByProgress(h)),this.parent},setRepeat:function(h){return this.repeatCounter=h===-1?Number.MAX_VALUE:h,this.parent},globalRemove:function(h,i){i===void 0&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(h,i){h===void 0&&(h=!1),i===void 0&&(i=!1);var l=this.currentAnim,u=this.parent;return l?(i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(r.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!h,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):u},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(h)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(h)}return this.parent},stopAfterDelay:function(h){return this._pendingStop=1,this._pendingStopValue=h,this.parent},stopAfterRepeat:function(h){return h===void 0&&(h=1),this.repeatCounter!==-1&&h>this.repeatCounter&&(h=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=h,this.parent},stopOnFrame:function(h){return this._pendingStop=3,this._pendingStopValue=h,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(h,i){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=i*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var u=0;do this.forward?l.nextFrame(this):l.previousFrame(this),u++;while(this.isPlaying&&this.accumulator>this.nextTick&&u<60)}}},setCurrentFrame:function(h){var i=this.parent;return this.currentFrame=h,i.texture=h.frame.texture,i.frame=h.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),h.setAlpha&&(i.alpha=h.alpha),i.setSizeToFrame(),i._originComponent&&(h.frame.customPivot?i.setOrigin(h.frame.pivotX,h.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(r.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===h&&this.stop()),i},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(h){return this.anims?this.anims.get(h):null},exists:function(h){return this.anims?this.anims.has(h):!1},create:function(h){var i=h.key,l=!1;return i&&(l=this.get(i),l?console.warn("Animation key already exists: "+i):(l=new o(this,i,h),this.anims||(this.anims=new n),this.anims.set(i,l))),l},createFromAseprite:function(h,i){return this.animationManager.createFromAseprite(h,i,this.parent)},generateFrameNames:function(h,i){return this.animationManager.generateFrameNames(h,i)},generateFrameNumbers:function(h,i){return this.animationManager.generateFrameNumbers(h,i)},remove:function(h){var i=this.get(h);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(h)),i},destroy:function(){this.animationManager.off(r.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});c.exports=s},57090:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},25312:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationcomplete"},89580:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationcomplete-"},52860:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationrepeat"},63850:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationrestart"},99085:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationstart"},28087:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationstop"},1794:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="animationupdate"},52562:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pauseall"},57953:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},68339:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resumeall"},74943:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD_ANIMATION:t(57090),ANIMATION_COMPLETE:t(25312),ANIMATION_COMPLETE_KEY:t(89580),ANIMATION_REPEAT:t(52860),ANIMATION_RESTART:t(63850),ANIMATION_START:t(99085),ANIMATION_STOP:t(28087),ANIMATION_UPDATE:t(1794),PAUSE_ALL:t(52562),REMOVE_ANIMATION:t(57953),RESUME_ALL:t(68339)}},60421:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Animation:t(42099),AnimationFrame:t(41138),AnimationManager:t(60848),AnimationState:t(9674),Events:t(74943)}},2161:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(90330),a=t(50792),n=t(24736),r=new o({initialize:function(){this.entries=new g,this.events=new a},add:function(e,s){return this.entries.set(e,s),this.events.emit(n.ADD,this,e,s),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var s=this.get(e);return s&&(this.entries.delete(e),this.events.emit(n.REMOVE,this,e,s.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});c.exports=r},24047:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2161),g=t(83419),a=t(8443),n=new g({initialize:function(e){this.game=e,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(r){return this.custom.hasOwnProperty(r)||(this.custom[r]=new o),this.custom[r]},destroy:function(){for(var r=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<r.length;e++)this[r[e]].destroy(),this[r[e]]=null;for(var s in this.custom)this.custom[s].destroy();this.custom=null,this.game=null}});c.exports=n},51464:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},59261:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},24736:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:t(51464),REMOVE:t(59261)}},83388:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BaseCache:t(2161),CacheManager:t(24047),Events:t(24736)}},71911:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(39506),n=t(50792),r=t(19715),e=t(87841),s=t(61340),h=t(80333),i=t(26099),l=new o({Extends:n,Mixins:[g.AlphaSingle,g.Visible],initialize:function(f,d,p,x){f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=0),x===void 0&&(x=0),n.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new e,this.dirty=!0,this._x=f,this._y=d,this._width=p,this._height=x,this._bounds=new e,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new s,this.transparent=!0,this.backgroundColor=h("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new i(p/2,x/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(u){this.renderList.push(u)},setOrigin:function(u,f){return u===void 0&&(u=.5),f===void 0&&(f=u),this.originX=u,this.originY=f,this},getScroll:function(u,f,d){d===void 0&&(d=new i);var p=this.width*.5,x=this.height*.5;return d.x=u-p,d.y=f-x,this.useBounds&&(d.x=this.clampX(d.x),d.y=this.clampY(d.y)),d},centerOnX:function(u){var f=this.width*.5;return this.midPoint.x=u,this.scrollX=u-f,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(u){var f=this.height*.5;return this.midPoint.y=u,this.scrollY=u-f,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(u,f){return this.centerOnX(u),this.centerOnY(f),this},centerToBounds:function(){if(this.useBounds){var u=this._bounds,f=this.width*.5,d=this.height*.5;this.midPoint.set(u.centerX,u.centerY),this.scrollX=u.centerX-f,this.scrollY=u.centerY-d}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(u){if(this.disableCull)return u;var f=this.matrix.matrix,d=f[0],p=f[1],x=f[2],y=f[3],T=d*y-p*x;if(!T)return u;var C=f[4],A=f[5],R=this.scrollX,M=this.scrollY,L=this.width,I=this.height,O=this.y,D=O+I,B=this.x,V=B+L,W=this.culledObjects,Y=u.length;T=1/T,W.length=0;for(var X=0;X<Y;++X){var U=u[X];if(!U.hasOwnProperty("width")||U.parentContainer){W.push(U);continue}var z=U.width,G=U.height,b=U.x-R*U.scrollFactorX-z*U.originX,H=U.y-M*U.scrollFactorY-G*U.originY,j=b*d+H*x+C,$=b*p+H*y+A,k=(b+z)*d+(H+G)*x+C,Q=(b+z)*p+(H+G)*y+A;k>B&&j<V&&Q>O&&$<D&&W.push(U)}return W},getWorldPoint:function(u,f,d){d===void 0&&(d=new i);var p=this.matrix.matrix,x=p[0],y=p[1],T=p[2],C=p[3],A=p[4],R=p[5],M=x*C-y*T;if(!M)return d.x=u,d.y=f,d;M=1/M;var L=C*M,I=-y*M,O=-T*M,D=x*M,B=(T*R-C*A)*M,V=(y*A-x*R)*M,W=Math.cos(this.rotation),Y=Math.sin(this.rotation),X=this.zoomX,U=this.zoomY,z=this.scrollX,G=this.scrollY,b=u+(z*W-G*Y)*X,H=f+(z*Y+G*W)*U;return d.x=b*L+H*O+B,d.y=b*I+H*D+V,d},ignore:function(u){var f=this.id;Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++){var p=u[d];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=f}return this},clampX:function(u){var f=this._bounds,d=this.displayWidth,p=f.x+(d-this.width)/2,x=Math.max(p,p+f.width-d);return u<p?u=p:u>x&&(u=x),u},clampY:function(u){var f=this._bounds,d=this.displayHeight,p=f.y+(d-this.height)/2,x=Math.max(p,p+f.height-d);return u<p?u=p:u>x&&(u=x),u},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(u){return u===void 0&&(u=0),this.rotation=a(u),this},setBackgroundColor:function(u){return u===void 0&&(u="rgba(0,0,0,0)"),this.backgroundColor=h(u),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(u,f,d,p,x){return x===void 0&&(x=!1),this._bounds.setTo(u,f,d,p),this.dirty=!0,this.useBounds=!0,x?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(u){u===void 0&&(u=new e);var f=this._bounds;return u.setTo(f.x,f.y,f.width,f.height),u},setName:function(u){return u===void 0&&(u=""),this.name=u,this},setPosition:function(u,f){return f===void 0&&(f=u),this.x=u,this.y=f,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setRoundPixels:function(u){return this.roundPixels=u,this},setScene:function(u,f){f===void 0&&(f=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=u,this.isSceneCamera=f;var d=u.sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(u,f){return f===void 0&&(f=u),this.scrollX=u,this.scrollY=f,this},setSize:function(u,f){return f===void 0&&(f=u),this.width=u,this.height=f,this},setViewport:function(u,f,d,p){return this.x=u,this.y=f,this.width=d,this.height=p,this},setZoom:function(u,f){return u===void 0&&(u=1),f===void 0&&(f=u),u===0&&(u=.001),f===0&&(f=.001),this.zoomX=u,this.zoomY=f,this},setMask:function(u,f){return f===void 0&&(f=!0),this.mask=u,this._maskCamera=f?this.cameraManager.default:this,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var u={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(u.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),u},update:function(){},setIsSceneCamera:function(u){return this.isSceneCamera=u,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var u=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,f=this.sceneManager;u&&!this._customViewport?f.customViewports++:!u&&this._customViewport&&f.customViewports--,this.dirty=!0,this._customViewport=u}},destroy:function(){this.emit(r.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(u){this._x=u,this.updateSystem()}},y:{get:function(){return this._y},set:function(u){this._y=u,this.updateSystem()}},width:{get:function(){return this._width},set:function(u){this._width=u,this.updateSystem()}},height:{get:function(){return this._height},set:function(u){this._height=u,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(u){u!==this._scrollX&&(this._scrollX=u,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(u){u!==this._scrollY&&(this._scrollY=u,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(u){this._zoomX=u,this._zoomY=u,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(u){this._zoomX=u,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(u){this._zoomY=u,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});c.exports=l},38058:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71911),g=t(67502),a=t(45319),n=t(83419),r=t(31401),e=t(20052),s=t(19715),h=t(28915),i=t(87841),l=t(26099),u=new n({Extends:o,Mixins:[r.PostPipeline],initialize:function(d,p,x,y){o.call(this,d,p,x,y),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new e.Fade(this),this.flashEffect=new e.Flash(this),this.shakeEffect=new e.Shake(this),this.panEffect=new e.Pan(this),this.rotateToEffect=new e.RotateTo(this),this.zoomEffect=new e.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(f,d){if(f===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=f,this.deadzone.height=d):this.deadzone=new i(0,0,f,d),this._follow){var p=this.width/2,x=this.height/2,y=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(y,T),this.scrollX=y-p,this.scrollY=T-x}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(f,d,p,x,y,T){return this.fadeEffect.start(!1,f,d,p,x,!0,y,T)},fadeOut:function(f,d,p,x,y,T){return this.fadeEffect.start(!0,f,d,p,x,!0,y,T)},fadeFrom:function(f,d,p,x,y,T,C){return this.fadeEffect.start(!1,f,d,p,x,y,T,C)},fade:function(f,d,p,x,y,T,C){return this.fadeEffect.start(!0,f,d,p,x,y,T,C)},flash:function(f,d,p,x,y,T,C){return this.flashEffect.start(f,d,p,x,y,T,C)},shake:function(f,d,p,x,y){return this.shakeEffect.start(f,d,p,x,y)},pan:function(f,d,p,x,y,T,C){return this.panEffect.start(f,d,p,x,y,T,C)},rotateTo:function(f,d,p,x,y,T,C){return this.rotateToEffect.start(f,d,p,x,y,T,C)},zoomTo:function(f,d,p,x,y,T){return this.zoomEffect.start(f,d,p,x,y,T)},preRender:function(){this.renderList.length=0;var f=this.width,d=this.height,p=f*.5,x=d*.5,y=this.zoomX,T=this.zoomY,C=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(y)&&Number.isInteger(T);var A=f*this.originX,R=d*this.originY,M=this._follow,L=this.deadzone,I=this.scrollX,O=this.scrollY;L&&g(L,this.midPoint.x,this.midPoint.y);var D=!1;if(M&&!this.panEffect.isRunning){var B=this.lerp,V=M.x-this.followOffset.x,W=M.y-this.followOffset.y;L?(V<L.x?I=h(I,I-(L.x-V),B.x):V>L.right&&(I=h(I,I+(V-L.right),B.x)),W<L.y?O=h(O,O-(L.y-W),B.y):W>L.bottom&&(O=h(O,O+(W-L.bottom),B.y))):(I=h(I,V-A,B.x),O=h(O,W-R,B.y)),D=!0}this.roundPixels&&(I=Math.floor(I),O=Math.floor(O)),this.useBounds&&(I=this.clampX(I),O=this.clampY(O)),this.scrollX=I,this.scrollY=O;var Y=I+p,X=O+x;this.midPoint.set(Y,X);var U=Math.floor(f/y+.5),z=Math.floor(d/T+.5),G=Math.floor(Y-U/2+.5),b=Math.floor(X-z/2+.5);this.worldView.setTo(G,b,U,z),C.applyITRS(Math.floor(this.x+A+.5),Math.floor(this.y+R+.5),this.rotation,y,T),C.translate(-A,-R),this.shakeEffect.preRender(),D&&this.emit(s.FOLLOW_UPDATE,this,M)},setLerp:function(f,d){return f===void 0&&(f=1),d===void 0&&(d=f),this.lerp.set(f,d),this},setFollowOffset:function(f,d){return f===void 0&&(f=0),d===void 0&&(d=0),this.followOffset.set(f,d),this},startFollow:function(f,d,p,x,y,T){d===void 0&&(d=!1),p===void 0&&(p=1),x===void 0&&(x=p),y===void 0&&(y=0),T===void 0&&(T=y),this._follow=f,this.roundPixels=d,p=a(p,0,1),x=a(x,0,1),this.lerp.set(p,x),this.followOffset.set(y,T);var C=this.width/2,A=this.height/2,R=f.x-y,M=f.y-T;return this.midPoint.set(R,M),this.scrollX=R-C,this.scrollY=M-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(f,d){this.visible&&(this.rotateToEffect.update(f,d),this.panEffect.update(f,d),this.zoomEffect.update(f,d),this.shakeEffect.update(f,d),this.flashEffect.update(f,d),this.fadeEffect.update(f,d))},destroy:function(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});c.exports=u},32743:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38058),g=t(83419),a=t(95540),n=t(37277),r=t(37303),e=t(97480),s=t(44594),h=new g({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(s.BOOT,this.boot,this),l.sys.events.on(s.START,this.start,this)},boot:function(){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,i.scale.width,i.scale.height).setScene(this.scene),i.game.scale.on(e.RESIZE,this.onResize,this),this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){if(!this.main){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(s.UPDATE,this.update,this),l.once(s.SHUTDOWN,this.shutdown,this)},add:function(i,l,u,f,d,p){i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=this.scene.sys.scale.width),f===void 0&&(f=this.scene.sys.scale.height),d===void 0&&(d=!1),p===void 0&&(p="");var x=new o(i,l,u,f);return x.setName(p),x.setScene(this.scene),x.setRoundPixels(this.roundPixels),x.id=this.getNextID(),this.cameras.push(x),d&&(this.main=x),x},addExisting:function(i,l){l===void 0&&(l=!1);var u=this.cameras.indexOf(i);return u===-1?(i.id=this.getNextID(),i.setRoundPixels(this.roundPixels),this.cameras.push(i),l&&(this.main=i),i):null},getNextID:function(){for(var i=this.cameras,l=1,u=0;u<32;u++){for(var f=!1,d=0;d<i.length;d++){var p=i[d];if(p&&p.id===l){f=!0;continue}}if(f)l=l<<1;else return l}return 0},getTotal:function(i){i===void 0&&(i=!1);for(var l=0,u=this.cameras,f=0;f<u.length;f++){var d=u[f];(!i||i&&d.visible)&&l++}return l},fromJSON:function(i){Array.isArray(i)||(i=[i]);for(var l=this.scene.sys.scale.width,u=this.scene.sys.scale.height,f=0;f<i.length;f++){var d=i[f],p=a(d,"x",0),x=a(d,"y",0),y=a(d,"width",l),T=a(d,"height",u),C=this.add(p,x,y,T);C.name=a(d,"name",""),C.zoom=a(d,"zoom",1),C.rotation=a(d,"rotation",0),C.scrollX=a(d,"scrollX",0),C.scrollY=a(d,"scrollY",0),C.roundPixels=a(d,"roundPixels",!1),C.visible=a(d,"visible",!0);var A=a(d,"backgroundColor",!1);A&&C.setBackgroundColor(A);var R=a(d,"bounds",null);if(R){var M=a(R,"x",0),L=a(R,"y",0),I=a(R,"width",l),O=a(R,"height",u);C.setBounds(M,L,I,O)}}return this},getCamera:function(i){for(var l=this.cameras,u=0;u<l.length;u++)if(l[u].name===i)return l[u];return null},getCamerasBelowPointer:function(i){for(var l=this.cameras,u=i.x,f=i.y,d=[],p=0;p<l.length;p++){var x=l[p];x.visible&&x.inputEnabled&&r(x,u,f)&&d.unshift(x)}return d},remove:function(i,l){l===void 0&&(l=!0),Array.isArray(i)||(i=[i]);for(var u=0,f=this.cameras,d=0;d<i.length;d++){var p=f.indexOf(i[d]);p!==-1&&(l?f[p].destroy():f[p].renderList=[],f.splice(p,1),u++)}return!this.main&&f[0]&&(this.main=f[0]),u},render:function(i,l){for(var u=this.scene,f=this.cameras,d=0;d<f.length;d++){var p=f[d];if(p.visible&&p.alpha>0){p.preRender();var x=this.getVisibleChildren(l.getChildren(),p);i.render(u,x,p)}}},getVisibleChildren:function(i,l){return i.filter(function(u){return u.willRender(l)})},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(i,l){for(var u=0;u<this.cameras.length;u++)this.cameras[u].update(i,l)},onResize:function(i,l,u,f,d){for(var p=0;p<this.cameras.length;p++){var x=this.cameras[p];x._x===0&&x._y===0&&x._width===f&&x._height===d&&x.setSize(l.width,l.height)}},resize:function(i,l){for(var u=0;u<this.cameras.length;u++)this.cameras[u].setSize(i,l)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var l=this.systems.events;l.off(s.UPDATE,this.update,this),l.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(s.START,this.start,this),this.systems.events.off(s.DESTROY,this.destroy,this),this.systems.game.scale.off(e.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});n.register("CameraManager",h,"cameras"),c.exports=h},5020:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),n=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,e,s,h,i,l,u,f){if(r===void 0&&(r=!0),e===void 0&&(e=1e3),s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=!1),u===void 0&&(u=null),f===void 0&&(f=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=r,this.progress=0,this.red=s,this.green=h,this.blue=i,this.alpha=r?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=u,this._onUpdateScope=f;var d=r?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(d,this.camera,this,e,s,h,i),this.camera},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(r){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera,h=this.red/255,i=this.green/255,l=this.blue/255;return r.drawFillRect(s.x,s.y,s.width,s.height,e(l,i,h,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var r=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(r,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=n},10662:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),n=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(r,e,s,h,i,l,u){return r===void 0&&(r=250),e===void 0&&(e=255),s===void 0&&(s=255),h===void 0&&(h=255),i===void 0&&(i=!1),l===void 0&&(l=null),u===void 0&&(u=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,this.red=e,this.green=s,this.blue=h,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=u,this.camera.emit(a.FLASH_START,this.camera,this,r,e,s,h),this.camera)},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(r){if(!this.isRunning)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning)return!1;var s=this.camera,h=this.red/255,i=this.green/255,l=this.blue/255;return r.drawFillRect(s.x,s.y,s.width,s.height,e(l,i,h,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=n},20359:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(62640),n=t(19715),r=t(26099),e=new g({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=new r,this.current=new r,this.destination=new r,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,h,i,l,u,f,d){i===void 0&&(i=1e3),l===void 0&&(l=a.Linear),u===void 0&&(u=!1),f===void 0&&(f=null),d===void 0&&(d=this.camera.scene);var p=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(s,h),p.getScroll(s,h,this.current),typeof l=="string"&&a.hasOwnProperty(l)?this.ease=a[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=d,this.camera.emit(n.PAN_START,this.camera,this,i,s,h)),p},update:function(s,h){if(this.isRunning){this._elapsed+=h;var i=o(this._elapsed/this.duration,0,1);this.progress=i;var l=this.camera;if(this._elapsed<this.duration){var u=this.ease(i);l.getScroll(this.destination.x,this.destination.y,this.current);var f=this.source.x+(this.current.x-this.source.x)*u,d=this.source.y+(this.current.y-this.source.y)*u;l.setScroll(f,d),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,i,f,d)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,i,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});c.exports=e},34208:(c,S,t)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),n=t(62640),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,s,h,i,l,u,f){h===void 0&&(h=1e3),i===void 0&&(i=n.Linear),l===void 0&&(l=!1),u===void 0&&(u=null),f===void 0&&(f=this.camera.scene),s===void 0&&(s=!1),this.shortestPath=s;var d=e;e<0?(d=-1*e,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;d=d-Math.floor(d/p)*p;var x=this.camera;if(!l&&this.isRunning)return x;if(this.isRunning=!0,this.duration=h,this.progress=0,this.source=x.rotation,this.destination=d,typeof i=="string"&&n.hasOwnProperty(i)?this.ease=n[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=f,this.shortestPath){var y=0,T=0;this.destination>this.source?y=Math.abs(this.destination-this.source):y=Math.abs(this.destination+p)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+p)-this.destination,y<T?this.clockwise=!0:y>T&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,h,d),x},update:function(e,s){if(this.isRunning){this._elapsed+=s;var h=o(this._elapsed/this.duration,0,1);this.progress=h;var i=this.camera;if(this._elapsed<this.duration){var l=this.ease(h);this.current=i.rotation;var u=0,f=360*Math.PI/180,d=this.destination,p=this.current;this.clockwise===!1&&(d=this.current,p=this.destination),d>=p?u=Math.abs(d-p):u=Math.abs(d+f)-p;var x=0;this.clockwise?x=i.rotation+u*l:x=i.rotation-u*l,i.rotation=x,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,h,x)}else i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,h,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});c.exports=r},30330:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),n=t(26099),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new n,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,s,h,i,l){return e===void 0&&(e=100),s===void 0&&(s=.05),h===void 0&&(h=!1),i===void 0&&(i=null),l===void 0&&(l=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof s=="number"?this.intensity.set(s):this.intensity.set(s.x,s.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=l,this.camera.emit(a.SHAKE_START,this.camera,this,e,s),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,s){if(this.isRunning)if(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var h=this.intensity,i=this.camera.width,l=this.camera.height,u=this.camera.zoom;this._offsetX=(Math.random()*h.x*i*2-h.x*i)*u,this._offsetY=(Math.random()*h.y*l*2-h.y*l)*u,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});c.exports=r},45641:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(62640),n=t(19715),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,s,h,i,l,u){s===void 0&&(s=1e3),h===void 0&&(h=a.Linear),i===void 0&&(i=!1),l===void 0&&(l=null),u===void 0&&(u=this.camera.scene);var f=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source=f.zoom,this.destination=e,typeof h=="string"&&a.hasOwnProperty(h)?this.ease=a[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=u,this.camera.emit(n.ZOOM_START,this.camera,this,s,e)),f},update:function(e,s){this.isRunning&&(this._elapsed+=s,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});c.exports=r},20052:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Fade:t(5020),Flash:t(10662),Pan:t(20359),Shake:t(30330),RotateTo:t(34208),Zoom:t(45641)}},16438:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameradestroy"},32726:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeincomplete"},87807:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeinstart"},45917:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeoutcomplete"},95666:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerafadeoutstart"},47056:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameraflashcomplete"},91261:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="cameraflashstart"},45047:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="followupdate"},81927:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerapancomplete"},74264:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerapanstart"},54419:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},79330:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},93183:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerarotatecomplete"},80112:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerarotatestart"},62252:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerashakecomplete"},86017:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerashakestart"},539:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerazoomcomplete"},51892:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="camerazoomstart"},19715:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DESTROY:t(16438),FADE_IN_COMPLETE:t(32726),FADE_IN_START:t(87807),FADE_OUT_COMPLETE:t(45917),FADE_OUT_START:t(95666),FLASH_COMPLETE:t(47056),FLASH_START:t(91261),FOLLOW_UPDATE:t(45047),PAN_COMPLETE:t(81927),PAN_START:t(74264),POST_RENDER:t(54419),PRE_RENDER:t(79330),ROTATE_COMPLETE:t(93183),ROTATE_START:t(80112),SHAKE_COMPLETE:t(62252),SHAKE_START:t(86017),ZOOM_COMPLETE:t(539),ZOOM_START:t(51892)}},87969:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Camera:t(38058),BaseCamera:t(71911),CameraManager:t(32743),Effects:t(20052),Events:t(19715)}},63091:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=new o({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=g(r,"speed",null);typeof e=="number"?(this.speedX=e,this.speedY=e):(this.speedX=g(r,"speed.x",0),this.speedY=g(r,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(n){return this.camera=n,this},update:function(n){if(this.active){n===void 0&&(n=1);var r=this.camera;this.up&&this.up.isDown?r.scrollY-=this.speedY*n|0:this.down&&this.down.isDown&&(r.scrollY+=this.speedY*n|0),this.left&&this.left.isDown?r.scrollX-=this.speedX*n|0:this.right&&this.right.isDown&&(r.scrollX+=this.speedX*n|0),this.zoomIn&&this.zoomIn.isDown?(r.zoom-=this.zoomSpeed,r.zoom<this.minZoom&&(r.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(r.zoom+=this.zoomSpeed,r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});c.exports=a},58818:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=new o({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=g(r,"acceleration",null);typeof e=="number"?(this.accelX=e,this.accelY=e):(this.accelX=g(r,"acceleration.x",0),this.accelY=g(r,"acceleration.y",0)),this.dragX=0,this.dragY=0;var s=g(r,"drag",null);typeof s=="number"?(this.dragX=s,this.dragY=s):(this.dragX=g(r,"drag.x",0),this.dragY=g(r,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var h=g(r,"maxSpeed",null);typeof h=="number"?(this.maxSpeedX=h,this.maxSpeedY=h):(this.maxSpeedX=g(r,"maxSpeed.x",0),this.maxSpeedY=g(r,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(n){return this.camera=n,this},update:function(n){if(this.active){n===void 0&&(n=1);var r=this.camera;this._speedX>0?(this._speedX-=this.dragX*n,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*n,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*n,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*n,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(r.scrollX-=this._speedX*n|0),this._speedY!==0&&(r.scrollY-=this._speedY*n|0),this._zoom!==0&&(r.zoom+=this._zoom,r.zoom<this.minZoom?r.zoom=this.minZoom:r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});c.exports=a},38865:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={FixedKeyControl:t(63091),SmoothedKeyControl:t(58818)}},26638:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Controls:t(38865),Scene2D:t(87969)}},8054:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={VERSION:"3.87",LOG_VERSION:"v387",BlendModes:t(10312),ScaleModes:t(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};c.exports=o},69547:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8054),a=t(42363),n=t(82264),r=t(95540),e=t(35154),s=t(41212),h=t(29747),i=t(75508),l=t(36060),u=t(80333),f=new o({initialize:function(p){p===void 0&&(p={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff",T=e(p,"scale",null);this.width=e(T,"width",1024,p),this.height=e(T,"height",768,p),this.zoom=e(T,"zoom",1,p),this.parent=e(T,"parent",void 0,p),this.scaleMode=e(T,T?"mode":"scaleMode",0,p),this.expandParent=e(T,"expandParent",!0,p),this.autoRound=e(T,"autoRound",!1,p),this.autoCenter=e(T,"autoCenter",0,p),this.resizeInterval=e(T,"resizeInterval",500,p),this.fullscreenTarget=e(T,"fullscreenTarget",null,p),this.minWidth=e(T,"min.width",0,p),this.maxWidth=e(T,"max.width",0,p),this.minHeight=e(T,"min.height",0,p),this.maxHeight=e(T,"max.height",0,p),this.snapWidth=e(T,"snap.width",0,p),this.snapHeight=e(T,"snap.height",0,p),this.renderType=e(p,"type",g.AUTO),this.canvas=e(p,"canvas",null),this.context=e(p,"context",null),this.canvasStyle=e(p,"canvasStyle",null),this.customEnvironment=e(p,"customEnvironment",!1),this.sceneConfig=e(p,"scene",null),this.seed=e(p,"seed",[(Date.now()*Math.random()).toString()]),i.RND=new i.RandomDataGenerator(this.seed),this.gameTitle=e(p,"title",""),this.gameURL=e(p,"url","https://phaser.io/"+g.LOG_VERSION),this.gameVersion=e(p,"version",""),this.autoFocus=e(p,"autoFocus",!0),this.stableSort=e(p,"stableSort",-1),this.stableSort===-1&&(this.stableSort=n.browser.es2019?1:0),n.features.stableSort=this.stableSort,this.domCreateContainer=e(p,"dom.createContainer",!1),this.domPointerEvents=e(p,"dom.pointerEvents","none"),this.inputKeyboard=e(p,"input.keyboard",!0),this.inputKeyboardEventTarget=e(p,"input.keyboard.target",window),this.inputKeyboardCapture=e(p,"input.keyboard.capture",[]),this.inputMouse=e(p,"input.mouse",!0),this.inputMouseEventTarget=e(p,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(p,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(p,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(p,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(p,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(p,"input.touch",n.input.touch),this.inputTouchEventTarget=e(p,"input.touch.target",null),this.inputTouchCapture=e(p,"input.touch.capture",!0),this.inputActivePointers=e(p,"input.activePointers",1),this.inputSmoothFactor=e(p,"input.smoothFactor",0),this.inputWindowEvents=e(p,"input.windowEvents",!0),this.inputGamepad=e(p,"input.gamepad",!1),this.inputGamepadEventTarget=e(p,"input.gamepad.target",window),this.disableContextMenu=e(p,"disableContextMenu",!1),this.audio=e(p,"audio",{}),this.hideBanner=e(p,"banner",null)===!1,this.hidePhaser=e(p,"banner.hidePhaser",!1),this.bannerTextColor=e(p,"banner.text",y),this.bannerBackgroundColor=e(p,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(p,"fps",null),this.disablePreFX=e(p,"disablePreFX",!1),this.disablePostFX=e(p,"disablePostFX",!1);var C=e(p,"render",null);this.pipeline=e(C,"pipeline",null,p),this.autoMobilePipeline=e(C,"autoMobilePipeline",!0,p),this.defaultPipeline=e(C,"defaultPipeline",l.MULTI_PIPELINE,p),this.antialias=e(C,"antialias",!0,p),this.antialiasGL=e(C,"antialiasGL",!0,p),this.mipmapFilter=e(C,"mipmapFilter","",p),this.desynchronized=e(C,"desynchronized",!1,p),this.roundPixels=e(C,"roundPixels",!1,p),this.pixelArt=e(C,"pixelArt",this.zoom!==1,p),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(C,"transparent",!1,p),this.clearBeforeRender=e(C,"clearBeforeRender",!0,p),this.preserveDrawingBuffer=e(C,"preserveDrawingBuffer",!1,p),this.premultipliedAlpha=e(C,"premultipliedAlpha",!0,p),this.failIfMajorPerformanceCaveat=e(C,"failIfMajorPerformanceCaveat",!1,p),this.powerPreference=e(C,"powerPreference","default",p),this.batchSize=e(C,"batchSize",4096,p),this.maxTextures=e(C,"maxTextures",-1,p),this.maxLights=e(C,"maxLights",10,p);var A=e(p,"backgroundColor",0);this.backgroundColor=u(A),this.transparent&&(this.backgroundColor=u(0),this.backgroundColor.alpha=0),this.preBoot=e(p,"callbacks.preBoot",h),this.postBoot=e(p,"callbacks.postBoot",h),this.physics=e(p,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(p,"loader.baseURL",""),this.loaderPath=e(p,"loader.path",""),this.loaderMaxParallelDownloads=e(p,"loader.maxParallelDownloads",n.os.android?6:32),this.loaderCrossOrigin=e(p,"loader.crossOrigin",void 0),this.loaderResponseType=e(p,"loader.responseType",""),this.loaderAsync=e(p,"loader.async",!0),this.loaderUser=e(p,"loader.user",""),this.loaderPassword=e(p,"loader.password",""),this.loaderTimeout=e(p,"loader.timeout",0),this.loaderMaxRetries=e(p,"loader.maxRetries",2),this.loaderWithCredentials=e(p,"loader.withCredentials",!1),this.loaderImageLoadType=e(p,"loader.imageLoadType","XHR"),this.loaderLocalScheme=e(p,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=e(p,"fx.glow.quality",.1),this.glowFXDistance=e(p,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=e(p,"plugins",null),M=a.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:s(R)&&(this.installGlobalPlugins=r(R,"global",[]),this.installScenePlugins=r(R,"scene",[]),Array.isArray(R.default)?M=R.default:Array.isArray(R.defaultMerge)&&(M=M.concat(R.defaultMerge)))),this.defaultPlugins=M;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(p,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(p,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(p,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});c.exports=f},86054:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20623),g=t(27919),a=t(8054),n=t(89357),r=function(e){var s=e.config;if((s.customEnvironment||s.canvas)&&s.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==a.HEADLESS)if(s.renderType===a.AUTO&&(s.renderType=n.webGL?a.WEBGL:a.CANVAS),s.renderType===a.WEBGL){if(!n.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(s.renderType===a.CANVAS){if(!n.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+s.renderType);s.antialias||g.disableSmoothing();var h=e.scale.baseSize,i=h.width,l=h.height;if(s.canvas?(e.canvas=s.canvas,e.canvas.width=i,e.canvas.height=l):e.canvas=g.create(e,i,l,s.renderType),s.canvasStyle&&(e.canvas.style=s.canvasStyle),s.antialias||o.setCrisp(e.canvas),s.renderType!==a.HEADLESS){var u,f;u=t(68627),f=t(74797),s.renderType===a.WEBGL?e.renderer=new f(e):(e.renderer=new u(e),e.context=e.renderer.gameContext)}};c.exports=r},96391:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8054),g=function(a){var n=a.config;if(!n.hideBanner){var r="WebGL";n.renderType===o.CANVAS?r="Canvas":n.renderType===o.HEADLESS&&(r="Headless");var e=n.audio,s=a.device.audio,h;if(s.webAudio&&!e.disableWebAudio?h="Web Audio":e.noAudio||!s.webAudio&&!s.audioData?h="No Audio":h="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var i="",l=[i];if(Array.isArray(n.bannerBackgroundColor)){var u;n.bannerBackgroundColor.forEach(function(d){i=i.concat("%c "),l.push("background: "+d),u=d}),l[l.length-1]="color: "+n.bannerTextColor+"; background: "+u}else i=i.concat("%c "),l.push("color: "+n.bannerTextColor+"; background: "+n.bannerBackgroundColor);l.push("background: transparent"),n.gameTitle&&(i=i.concat(n.gameTitle),n.gameVersion&&(i=i.concat(" v"+n.gameVersion)),n.hidePhaser||(i=i.concat(" / ")));var f="";n.hidePhaser||(i=i.concat("Phaser v"+o.VERSION+f+" ("+r+" | "+h+")")),i=i.concat(" %c "+n.gameURL),l[0]=i,console.log.apply(console,l)}}};c.exports=g},50127:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=t(60848),a=t(24047),n=t(27919),r=t(83419),e=t(69547),s=t(83719),h=t(86054),i=t(45893),l=t(96391),u=t(82264),f=t(57264),d=t(50792),p=t(8443),x=t(7003),y=t(37277),T=t(77332),C=t(76531),A=t(60903),R=t(69442),M=t(17130),L=t(65898),I=t(51085),O=t(14747),D=new r({initialize:function(V){this.config=new e(V),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new d,this.anims=new g(this),this.textures=new M(this),this.cache=new a(this),this.registry=new i(this,new d),this.input=new x(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=u,this.scale=new C(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new L(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,f(this.boot.bind(this))},boot:function(){if(!y.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),h(this),s(this),l(this),o(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var B=this.events;B.on(p.HIDDEN,this.onHidden,this),B.on(p.VISIBLE,this.onVisible,this),B.on(p.BLUR,this.onBlur,this),B.on(p.FOCUS,this.onFocus,this)},step:function(B,V){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(p.PRE_STEP,B,V),W.emit(p.STEP,B,V),this.scene.update(B,V),W.emit(p.POST_STEP,B,V);var Y=this.renderer;Y.preRender(),W.emit(p.PRE_RENDER,Y,B,V),this.scene.render(Y),Y.postRender(),W.emit(p.POST_RENDER,Y,B,V)}},headlessStep:function(B,V){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(p.PRE_STEP,B,V),W.emit(p.STEP,B,V),this.scene.update(B,V),W.emit(p.POST_STEP,B,V),this.scene.isProcessing=!1,W.emit(p.PRE_RENDER,null,B,V),W.emit(p.POST_RENDER,null,B,V)}},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME,this.loop.pauseDuration)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(p.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,V){V===void 0&&(V=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=V},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(n.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});c.exports=D},65898:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=t(29747),n=t(43092),r=new o({initialize:function(s,h){this.game=s,this.raf=new n,this.started=!1,this.running=!1,this.minFps=g(h,"min",5),this.targetFps=g(h,"target",60),this.fpsLimit=g(h,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=g(h,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(h,"deltaHistory",10),this.panicMax=g(h,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(h,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=Math.min(this._target,this.deltaHistory[s]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e;var h=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(h,this.forceSetTimeOut,this._target)},smoothDelta:function(e){var s=this.deltaIndex,h=this.deltaHistory,i=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,e=Math.min(e,this._target)),e>this._min&&(e=h[s],e=Math.min(e,this._min)),h[s]=e,this.deltaIndex++,this.deltaIndex>=i&&(this.deltaIndex=0);for(var l=0,u=0;u<i;u++)l+=h[u];return l/=i,l},updateFPS:function(e){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0},stepLimitFPS:function(e){this.now=e;var s=Math.max(0,e-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta+=s,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(e,this.delta),this.delta=0),this.lastTime=e,this.frame++},step:function(e){this.now=e;var s=Math.max(0,e-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta=s,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.callback(e,s),this.lastTime=e,this.frame++},tick:function(){var e=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(e):this.step(e)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){e===void 0&&(e=!1);var s=window.performance.now();if(!this.running){e&&(this.startTime+=-this.lastTime+(this.lastTime+s));var h=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(h,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});c.exports=r},51085:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8443),g=function(a){var n,r=a.events;if(document.hidden!==void 0)n="visibilitychange";else{var e=["webkit","moz","ms"];e.forEach(function(h){document[h+"Hidden"]!==void 0&&(document.hidden=function(){return document[h+"Hidden"]},n=h+"visibilitychange")})}var s=function(h){document.hidden||h.type==="pause"?r.emit(o.HIDDEN):r.emit(o.VISIBLE)};n&&document.addEventListener(n,s,!1),window.onblur=function(){r.emit(o.BLUR)},window.onfocus=function(){r.emit(o.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};c.exports=g},97217:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="blur"},47548:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},19814:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="contextlost"},68446:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},41700:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="focus"},25432:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="hidden"},65942:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},59211:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},47789:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="poststep"},39066:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},460:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prestep"},16175:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},42331:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},11966:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="step"},32969:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="systemready"},94830:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="visible"},8443:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BLUR:t(97217),BOOT:t(47548),CONTEXT_LOST:t(19814),DESTROY:t(68446),FOCUS:t(41700),HIDDEN:t(25432),PAUSE:t(65942),POST_RENDER:t(59211),POST_STEP:t(47789),PRE_RENDER:t(39066),PRE_STEP:t(460),READY:t(16175),RESUME:t(42331),STEP:t(11966),SYSTEM_READY:t(32969),VISIBLE:t(94830)}},42857:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Config:t(69547),CreateRenderer:t(86054),DebugHeader:t(96391),Events:t(8443),TimeStep:t(65898),VisibilityHandler:t(51085)}},99584:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(5290),g=t(27919),a=t(35154),n=function(r){var e=a(r,"data",[]),s=a(r,"canvas",null),h=a(r,"palette",o),i=a(r,"pixelWidth",1),l=a(r,"pixelHeight",i),u=a(r,"resizeCanvas",!0),f=a(r,"clearCanvas",!0),d=a(r,"preRender",null),p=a(r,"postRender",null),x=Math.floor(Math.abs(e[0].length*i)),y=Math.floor(Math.abs(e.length*l));s||(s=g.create2D(this,x,y),u=!1,f=!1),u&&(s.width=x,s.height=y);var T=s.getContext("2d",{willReadFrequently:!0});f&&T.clearRect(0,0,x,y),d&&d(s,T);for(var C=0;C<e.length;C++)for(var A=e[C],R=0;R<A.length;R++){var M=A[R];M!=="."&&M!==" "&&(T.fillStyle=h[M],T.fillRect(R*i,C*l,i,l))}return p&&p(s,T),s};c.exports=n},15822:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GenerateTexture:t(99584),Palettes:t(57763)}},5290:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ARNE16:t(5290),C64:t(23816),CGA:t(9866),JMP:t(77552),MSX:t(92259)}},46728:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36316),a=t(80021),n=t(26099),r=new o({Extends:a,initialize:function(s,h,i,l){a.call(this,"CubicBezierCurve"),Array.isArray(s)&&(l=new n(s[6],s[7]),i=new n(s[4],s[5]),h=new n(s[2],s[3]),s=new n(s[0],s[1])),this.p0=s,this.p1=h,this.p2=i,this.p3=l},getStartPoint:function(e){return e===void 0&&(e=new n),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,s){s===void 0&&(s=new n);var h=this.p0,i=this.p1,l=this.p2,u=this.p3;return s.set(g(e,h.x,i.x,l.x,u.x),g(e,h.y,i.y,l.y,u.y))},draw:function(e,s){s===void 0&&(s=32);var h=this.getPoints(s);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var i=1;i<h.length;i++)e.lineTo(h[i].x,h[i].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(e){var s=e.points,h=new n(s[0],s[1]),i=new n(s[2],s[3]),l=new n(s[4],s[5]),u=new n(s[6],s[7]);return new r(h,i,l,u)},c.exports=r},80021:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(19217),a=t(87841),n=t(26099),r=new o({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new n,this._tmpVec2B=new n},draw:function(e,s){return s===void 0&&(s=32),e.strokePoints(this.getPoints(s))},getBounds:function(e,s){e||(e=new a),s===void 0&&(s=16);var h=this.getLength();s>h&&(s=h/2);var i=Math.max(1,Math.round(h/s));return g(this.getSpacedPoints(i),e)},getDistancePoints:function(e){var s=this.getLength(),h=Math.max(1,s/e);return this.getSpacedPoints(h)},getEndPoint:function(e){return e===void 0&&(e=new n),this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s=[],h,i=this.getPoint(0,this._tmpVec2A),l=0;s.push(0);for(var u=1;u<=e;u++)h=this.getPoint(u/e,this._tmpVec2B),l+=h.distance(i),s.push(l),i.copy(h);return this.cacheArcLengths=s,s},getPointAt:function(e,s){var h=this.getUtoTmapping(e);return this.getPoint(h,s)},getPoints:function(e,s,h){h===void 0&&(h=[]),e||(s?e=this.getLength()/s:e=this.defaultDivisions);for(var i=0;i<=e;i++)h.push(this.getPoint(i/e));return h},getRandomPoint:function(e){return e===void 0&&(e=new n),this.getPoint(Math.random(),e)},getSpacedPoints:function(e,s,h){h===void 0&&(h=[]),e||(s?e=this.getLength()/s:e=this.defaultDivisions);for(var i=0;i<=e;i++){var l=this.getUtoTmapping(i/e,null,e);h.push(this.getPoint(l))}return h},getStartPoint:function(e){return e===void 0&&(e=new n),this.getPointAt(0,e)},getTangent:function(e,s){s===void 0&&(s=new n);var h=1e-4,i=e-h,l=e+h;return i<0&&(i=0),l>1&&(l=1),this.getPoint(i,this._tmpVec2A),this.getPoint(l,s),s.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,s){var h=this.getUtoTmapping(e);return this.getTangent(h,s)},getTFromDistance:function(e,s){return e<=0?0:this.getUtoTmapping(0,e,s)},getUtoTmapping:function(e,s,h){var i=this.getLengths(h),l=0,u=i.length,f;s?f=Math.min(s,i[u-1]):f=e*i[u-1];for(var d=0,p=u-1,x;d<=p;)if(l=Math.floor(d+(p-d)/2),x=i[l]-f,x<0)d=l+1;else if(x>0)p=l-1;else{p=l;break}if(l=p,i[l]===f)return l/(u-1);var y=i[l],T=i[l+1],C=T-y,A=(f-y)/C;return(l+A)/(u-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});c.exports=r},73825:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(39506),n=t(35154),r=t(43396),e=t(26099),s=new o({Extends:g,initialize:function(i,l,u,f,d,p,x,y){if(typeof i=="object"){var T=i;i=n(T,"x",0),l=n(T,"y",0),u=n(T,"xRadius",0),f=n(T,"yRadius",u),d=n(T,"startAngle",0),p=n(T,"endAngle",360),x=n(T,"clockwise",!1),y=n(T,"rotation",0)}else f===void 0&&(f=u),d===void 0&&(d=0),p===void 0&&(p=360),x===void 0&&(x=!1),y===void 0&&(y=0);g.call(this,"EllipseCurve"),this.p0=new e(i,l),this._xRadius=u,this._yRadius=f,this._startAngle=a(d),this._endAngle=a(p),this._clockwise=x,this._rotation=a(y)},getStartPoint:function(h){return h===void 0&&(h=new e),this.getPoint(0,h)},getResolution:function(h){return h*2},getPoint:function(h,i){i===void 0&&(i=new e);for(var l=Math.PI*2,u=this._endAngle-this._startAngle,f=Math.abs(u)<Number.EPSILON;u<0;)u+=l;for(;u>l;)u-=l;u<Number.EPSILON&&(f?u=0:u=l),this._clockwise&&!f&&(u===l?u=-l:u=u-l);var d=this._startAngle+h*u,p=this.p0.x+this._xRadius*Math.cos(d),x=this.p0.y+this._yRadius*Math.sin(d);if(this._rotation!==0){var y=Math.cos(this._rotation),T=Math.sin(this._rotation),C=p-this.p0.x,A=x-this.p0.y;p=C*y-A*T+this.p0.x,x=C*T+A*y+this.p0.y}return i.set(p,x)},setXRadius:function(h){return this.xRadius=h,this},setYRadius:function(h){return this.yRadius=h,this},setWidth:function(h){return this.xRadius=h/2,this},setHeight:function(h){return this.yRadius=h/2,this},setStartAngle:function(h){return this.startAngle=h,this},setEndAngle:function(h){return this.endAngle=h,this},setClockwise:function(h){return this.clockwise=h,this},setRotation:function(h){return this.rotation=h,this},x:{get:function(){return this.p0.x},set:function(h){this.p0.x=h}},y:{get:function(){return this.p0.y},set:function(h){this.p0.y=h}},xRadius:{get:function(){return this._xRadius},set:function(h){this._xRadius=h}},yRadius:{get:function(){return this._yRadius},set:function(h){this._yRadius=h}},startAngle:{get:function(){return r(this._startAngle)},set:function(h){this._startAngle=a(h)}},endAngle:{get:function(){return r(this._endAngle)},set:function(h){this._endAngle=a(h)}},clockwise:{get:function(){return this._clockwise},set:function(h){this._clockwise=h}},angle:{get:function(){return r(this._rotation)},set:function(h){this._rotation=a(h)}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=h}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:r(this._startAngle),endAngle:r(this._endAngle),clockwise:this._clockwise,rotation:r(this._rotation)}}});s.fromJSON=function(h){return new s(h)},c.exports=s},33951:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(19217),n=t(87841),r=t(26099),e=new o({Extends:g,initialize:function(h,i){g.call(this,"LineCurve"),Array.isArray(h)&&(i=new r(h[2],h[3]),h=new r(h[0],h[1])),this.p0=h,this.p1=i,this.arcLengthDivisions=1},getBounds:function(s){return s===void 0&&(s=new n),a([this.p0,this.p1],s)},getStartPoint:function(s){return s===void 0&&(s=new r),s.copy(this.p0)},getResolution:function(s){return s===void 0&&(s=1),s},getPoint:function(s,h){return h===void 0&&(h=new r),s===1?h.copy(this.p1):(h.copy(this.p1).subtract(this.p0).scale(s).add(this.p0),h)},getPointAt:function(s,h){return this.getPoint(s,h)},getTangent:function(s,h){return h===void 0&&(h=new r),h.copy(this.p1).subtract(this.p0).normalize(),h},getUtoTmapping:function(s,h,i){var l;if(h){var u=this.getLengths(i),f=u[u.length-1],d=Math.min(h,f);l=d/f}else l=s;return l},draw:function(s){return s.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});e.fromJSON=function(s){var h=s.points,i=new r(h[0],h[1]),l=new r(h[2],h[3]);return new e(i,l)},c.exports=e},14744:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(32112),n=t(26099),r=new o({Extends:g,initialize:function(s,h,i){g.call(this,"QuadraticBezierCurve"),Array.isArray(s)&&(i=new n(s[4],s[5]),h=new n(s[2],s[3]),s=new n(s[0],s[1])),this.p0=s,this.p1=h,this.p2=i},getStartPoint:function(e){return e===void 0&&(e=new n),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,s){s===void 0&&(s=new n);var h=this.p0,i=this.p1,l=this.p2;return s.set(a(e,h.x,i.x,l.x),a(e,h.y,i.y,l.y))},draw:function(e,s){s===void 0&&(s=32);var h=this.getPoints(s);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var i=1;i<h.length;i++)e.lineTo(h[i].x,h[i].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(e){var s=e.points,h=new n(s[0],s[1]),i=new n(s[2],s[3]),l=new n(s[4],s[5]);return new r(h,i,l)},c.exports=r},42534:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87842),g=t(83419),a=t(80021),n=t(26099),r=new g({Extends:a,initialize:function(s){s===void 0&&(s=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(e){for(var s=0;s<e.length;s++){var h=new n;typeof e[s]=="number"?(h.x=e[s],h.y=e[s+1],s++):Array.isArray(e[s])?(h.x=e[s][0],h.y=e[s][1]):(h.x=e[s].x,h.y=e[s].y),this.points.push(h)}return this},addPoint:function(e,s){var h=new n(e,s);return this.points.push(h),h},getStartPoint:function(e){return e===void 0&&(e=new n),e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,s){s===void 0&&(s=new n);var h=this.points,i=(h.length-1)*e,l=Math.floor(i),u=i-l,f=h[l===0?l:l-1],d=h[l],p=h[l>h.length-2?h.length-1:l+1],x=h[l>h.length-3?h.length-1:l+2];return s.set(o(u,f.x,d.x,p.x,x.x),o(u,f.y,d.y,p.y,x.y))},toJSON:function(){for(var e=[],s=0;s<this.points.length;s++)e.push(this.points[s].x),e.push(this.points[s].y);return{type:this.type,points:e}}});r.fromJSON=function(e){return new r(e.points)},c.exports=r},25410:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Path:t(46669),MoveTo:t(68618),CubicBezier:t(46728),Curve:t(80021),Ellipse:t(73825),Line:t(33951),QuadraticBezier:t(14744),Spline:t(42534)}},68618:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(r,e){this.active=!1,this.p0=new g(r,e)},getPoint:function(n,r){return r===void 0&&(r=new g),r.copy(this.p0)},getPointAt:function(n,r){return this.getPoint(n,r)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});c.exports=a},46669:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(46728),a=t(73825),n=t(39429),r=t(33951),e=t(68618),s=t(14744),h=t(87841),i=t(42534),l=t(26099),u=t(36383),f=new o({initialize:function(p,x){p===void 0&&(p=0),x===void 0&&(x=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,x)},add:function(d){return this.curves.push(d),this},circleTo:function(d,p,x){return p===void 0&&(p=!1),this.ellipseTo(d,d,0,360,p,x)},closePath:function(){var d=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return d.equals(p)||this.curves.push(new r(p,d)),this},cubicBezierTo:function(d,p,x,y,T,C){var A=this.getEndPoint(),R,M,L;return d instanceof l?(R=d,M=p,L=x):(R=new l(x,y),M=new l(T,C),L=new l(d,p)),this.add(new g(A,R,M,L))},quadraticBezierTo:function(d,p,x,y){var T=this.getEndPoint(),C,A;return d instanceof l?(C=d,A=p):(C=new l(x,y),A=new l(d,p)),this.add(new s(T,C,A))},draw:function(d,p){for(var x=0;x<this.curves.length;x++){var y=this.curves[x];y.active&&y.draw(d,p)}return d},ellipseTo:function(d,p,x,y,T,C){var A=new a(0,0,d,p,x,y,T,C),R=this.getEndPoint(this._tmpVec2A),M=A.getStartPoint(this._tmpVec2B);return R.subtract(M),A.x=R.x,A.y=R.y,this.add(A)},fromJSON:function(d){this.curves=[],this.cacheLengths=[],this.startPoint.set(d.x,d.y),this.autoClose=d.autoClose;for(var p=0;p<d.curves.length;p++){var x=d.curves[p];switch(x.type){case"LineCurve":this.add(r.fromJSON(x));break;case"EllipseCurve":this.add(a.fromJSON(x));break;case"SplineCurve":this.add(i.fromJSON(x));break;case"CubicBezierCurve":this.add(g.fromJSON(x));break;case"QuadraticBezierCurve":this.add(s.fromJSON(x));break}}return this},getBounds:function(d,p){d===void 0&&(d=new h),p===void 0&&(p=16),d.x=Number.MAX_VALUE,d.y=Number.MAX_VALUE;for(var x=new h,y=u.MIN_SAFE_INTEGER,T=u.MIN_SAFE_INTEGER,C=0;C<this.curves.length;C++){var A=this.curves[C];A.active&&(A.getBounds(x,p),d.x=Math.min(d.x,x.x),d.y=Math.min(d.y,x.y),y=Math.max(y,x.right),T=Math.max(T,x.bottom))}return d.right=y,d.bottom=T,d},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var d=[],p=0,x=0;x<this.curves.length;x++)p+=this.curves[x].getLength(),d.push(p);return this.cacheLengths=d,d},getCurveAt:function(d){for(var p=d*this.getLength(),x=this.getCurveLengths(),y=0;y<x.length;){if(x[y]>=p)return this.curves[y];y++}return null},getEndPoint:function(d){return d===void 0&&(d=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,d):d.copy(this.startPoint),d},getLength:function(){var d=this.getCurveLengths();return d[d.length-1]},getPoint:function(d,p){p===void 0&&(p=new l);for(var x=d*this.getLength(),y=this.getCurveLengths(),T=0;T<y.length;){if(y[T]>=x){var C=y[T]-x,A=this.curves[T],R=A.getLength(),M=R===0?0:1-C/R;return A.getPointAt(M,p)}T++}return null},getPoints:function(d,p){!d&&!p&&(d=this.defaultDivisions);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(C.active)for(var A=C.getResolution(d),R=C.getPoints(A,p),M=0;M<R.length;M++){var L=R[M];y&&y.equals(L)||(x.push(L),y=L)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(d){return d===void 0&&(d=new l),this.getPoint(Math.random(),d)},getSpacedPoints:function(d){d===void 0&&(d=40);for(var p=[],x=0;x<=d;x++)p.push(this.getPoint(x/d));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(d){return d===void 0&&(d=new l),d.copy(this.startPoint)},getTangent:function(d,p){p===void 0&&(p=new l);for(var x=d*this.getLength(),y=this.getCurveLengths(),T=0;T<y.length;){if(y[T]>=x){var C=y[T]-x,A=this.curves[T],R=A.getLength(),M=R===0?0:1-C/R;return A.getTangentAt(M,p)}T++}return null},lineTo:function(d,p){d instanceof l?this._tmpVec2B.copy(d):typeof d=="object"?this._tmpVec2B.setFromObject(d):this._tmpVec2B.set(d,p);var x=this.getEndPoint(this._tmpVec2A);return this.add(new r([x.x,x.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(d){return d.unshift(this.getEndPoint()),this.add(new i(d))},moveTo:function(d,p){return d instanceof l?this.add(new e(d.x,d.y)):this.add(new e(d,p))},toJSON:function(){for(var d=[],p=0;p<this.curves.length;p++)d.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:d}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});n.register("path",function(d,p){return new f(d,p)}),c.exports=f},45893:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(24882),a=new o({initialize:function(r,e){this.parent=r,this.events=e,e||(this.events=r.events?r.events:r),this.list={},this.values={},this._frozen=!1,!r.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(n){var r=this.list;if(Array.isArray(n)){for(var e=[],s=0;s<n.length;s++)e.push(r[n[s]]);return e}else return r[n]},getAll:function(){var n={};for(var r in this.list)this.list.hasOwnProperty(r)&&(n[r]=this.list[r]);return n},query:function(n){var r={};for(var e in this.list)this.list.hasOwnProperty(e)&&e.match(n)&&(r[e]=this.list[e]);return r},set:function(n,r){if(this._frozen)return this;if(typeof n=="string")return this.setValue(n,r);for(var e in n)this.setValue(e,n[e]);return this},inc:function(n,r){if(this._frozen)return this;r===void 0&&(r=1);var e=this.get(n);return e===void 0&&(e=0),this.set(n,e+r),this},toggle:function(n){return this._frozen?this:(this.set(n,!this.get(n)),this)},setValue:function(n,r){if(this._frozen)return this;if(this.has(n))this.values[n]=r;else{var e=this,s=this.list,h=this.events,i=this.parent;Object.defineProperty(this.values,n,{enumerable:!0,configurable:!0,get:function(){return s[n]},set:function(l){if(!e._frozen){var u=s[n];s[n]=l,h.emit(g.CHANGE_DATA,i,n,l,u),h.emit(g.CHANGE_DATA_KEY+n,i,l,u)}}}),s[n]=r,h.emit(g.SET_DATA,i,n,r)}return this},each:function(n,r){for(var e=[this.parent,null,void 0],s=1;s<arguments.length;s++)e.push(arguments[s]);for(var h in this.list)e[1]=h,e[2]=this.list[h],n.apply(r,e);return this},merge:function(n,r){r===void 0&&(r=!0);for(var e in n)n.hasOwnProperty(e)&&(r||!r&&!this.has(e))&&this.setValue(e,n[e]);return this},remove:function(n){if(this._frozen)return this;if(Array.isArray(n))for(var r=0;r<n.length;r++)this.removeValue(n[r]);else return this.removeValue(n);return this},removeValue:function(n){if(this.has(n)){var r=this.list[n];delete this.list[n],delete this.values[n],this.events.emit(g.REMOVE_DATA,this.parent,n,r)}return this},pop:function(n){var r=void 0;return!this._frozen&&this.has(n)&&(r=this.list[n],delete this.list[n],delete this.values[n],this.events.emit(g.REMOVE_DATA,this.parent,n,r)),r},has:function(n){return this.list.hasOwnProperty(n)},setFreeze:function(n){return this._frozen=n,this},reset:function(){for(var n in this.list)delete this.list[n],delete this.values[n];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(n){this._frozen=!!n}},count:{get:function(){var n=0;for(var r in this.list)this.list[r]!==void 0&&n++;return n}}});c.exports=a},63646:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45893),a=t(37277),n=t(44594),r=new o({Extends:g,initialize:function(s){g.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(n.BOOT,this.boot,this),s.sys.events.on(n.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",r,"data"),c.exports=r},10700:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="changedata"},93608:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="changedata-"},60883:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},69780:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedata"},22166:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="setdata"},24882:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CHANGE_DATA:t(10700),CHANGE_DATA_KEY:t(93608),DESTROY:t(60883),REMOVE_DATA:t(69780),SET_DATA:t(22166)}},44965:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DataManager:t(45893),DataManagerPlugin:t(63646),Events:t(24882)}},7098:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84148),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var n=document.createElement("audio"),r=!!n.canPlayType;try{if(r){var e=function(i,l){var u=n.canPlayType("audio/"+i).replace(/^no$/,"");return l?!!(u||n.canPlayType("audio/"+l).replace(/^no$/,"")):!!u};if(g.ogg=e('ogg; codecs="vorbis"'),g.opus=e('ogg; codecs="opus"',"opus"),g.mp3=e("mpeg"),g.wav=e("wav"),g.m4a=e("x-m4a"),g.aac=e("aac"),g.flac=e("flac","x-flac"),g.webm=e('webm; codecs="vorbis"'),n.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(o.edge)g.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),h=parseInt(RegExp.$2,10);(s===10&&h>=11||s>10)&&(g.dolby=!0)}}}}catch{}return g}c.exports=a()},84148:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function a(){var n=navigator.userAgent;return/Edg\/\d+/.test(n)?(g.edge=!0,g.es2019=!0):/OPR/.test(n)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(n)&&!o.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(n)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(n)&&o.iOS?(g.mobileSafari=!0,g.es2019=!0):/MSIE (\d+\.\d+);/.test(n)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(n)&&!o.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(n)&&(g.silk=!0),g}c.exports=a()},89289:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",h=new Image;return h.onload=function(){var i=new Image;i.onload=function(){var l=o.create2D(i,6),u=l.getContext("2d",{willReadFrequently:!0});if(u.globalCompositeOperation="multiply",u.drawImage(h,0,0),u.drawImage(i,2,0),!u.getImageData(2,0,1,1))return!1;var f=u.getImageData(2,0,1,1).data;o.remove(i),g.supportNewBlendModes=f[0]===255&&f[1]===0&&f[2]===0},i.src=e+"/wCKxvRF"+s},h.src=e+"AP804Oa6"+s,!1}function n(){var e=o.create2D(this,2),s=e.getContext("2d",{willReadFrequently:!0});s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var h=s.getImageData(0,0,1,1);if(h===null)return!1;s.putImageData(h,1,0);var i=s.getImageData(1,0,1,1),l=i.data[0]===h.data[0]&&i.data[1]===h.data[1]&&i.data[2]===h.data[2]&&i.data[3]===h.data[3];return o.remove(this),l}function r(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=a(),g.supportInverseAlpha=n()),g}c.exports=r()},89357:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g=t(84148),a=t(27919),n={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function r(){var s=new ArrayBuffer(4),h=new Uint8Array(s),i=new Uint32Array(s);return h[0]=161,h[1]=178,h[2]=195,h[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function e(){if(typeof importScripts=="function")return n;n.canvas=!!window.CanvasRenderingContext2D;try{n.localStorage=!!localStorage.getItem}catch{n.localStorage=!1}n.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,n.fileSystem=!!window.requestFileSystem;var s=!1,h=function(){if(window.WebGLRenderingContext)try{var i=a.createWebGL(this),l=i.getContext("webgl")||i.getContext("experimental-webgl"),u=a.create2D(this),f=u.getContext("2d",{willReadFrequently:!0}),d=f.createImageData(1,1);return s=d.data instanceof Uint8ClampedArray,a.remove(i),a.remove(u),!!l}catch{return!1}return!1};return n.webGL=h(),n.worker=!!window.Worker,n.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,n.getUserMedia=n.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(n.getUserMedia=!1),!o.iOS&&(g.ie||g.firefox||g.chrome)&&(n.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(n.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(n.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(n.littleEndian=r()),n.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&n.littleEndian!==null&&s,n}c.exports=e()},91639:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return S;var o,g="Fullscreen",a="FullScreen",n=["request"+g,"request"+a,"webkitRequest"+g,"webkitRequest"+a,"msRequest"+g,"msRequest"+a,"mozRequest"+a,"mozRequest"+g];for(o=0;o<n.length;o++)if(document.documentElement[n[o]]){S.available=!0,S.request=n[o];break}var r=["cancel"+a,"exit"+g,"webkitCancel"+a,"webkitExit"+g,"msCancel"+a,"msExit"+g,"mozCancel"+a,"mozExit"+g];if(S.available){for(o=0;o<r.length;o++)if(document[r[o]]){S.cancel=r[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(S.keyboard=!0),Object.defineProperty(S,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),S}c.exports=t()},31784:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84148),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}c.exports=a()},25892:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return S;var o=navigator.userAgent;/Windows/.test(o)?S.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(S.iOS=!0,S.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),S.iOSVersion=parseInt(RegExp.$1,10)):S.macOS=!0:/Android/.test(o)?S.android=!0:/Linux/.test(o)?S.linux=!0:/iP[ao]d|iPhone/i.test(o)?(S.iOS=!0,navigator.appVersion.match(/OS (\d+)/),S.iOSVersion=parseInt(RegExp.$1,10),S.iPhone=o.toLowerCase().indexOf("iphone")!==-1,S.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?S.kindle=!0:/CrOS/.test(o)&&(S.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(S.android=!1,S.iOS=!1,S.macOS=!1,S.windows=!0,S.windowsPhone=!0);var g=/Silk/.test(o);return(S.windows||S.macOS||S.linux&&!g||S.chromeOS)&&(S.desktop=!0),(S.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(S.desktop=!1),navigator.standalone&&(S.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(S.cordova=!0),window.ejecta!==void 0&&(S.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(S.node=!0),S.node&&typeof process.versions=="object"&&(S.nodeWebkit=!!process.versions["node-webkit"],S.electron=!!process.versions.electron),/Crosswalk/.test(o)&&(S.crosswalk=!0),S.pixelRatio=window.devicePixelRatio||1,S}c.exports=t()},43267:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function a(){if(typeof importScripts=="function")return g;var n=document.createElement("video"),r=!!n.canPlayType,e=/^no$/;try{r&&(n.canPlayType('video/ogg; codecs="theora"').replace(e,"")&&(g.ogg=!0),n.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(e,"")&&(g.h264=!0,g.mp4=!0),n.canPlayType("video/x-m4v").replace(e,"")&&(g.m4v=!0),n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(e,"")&&(g.webm=!0),n.canPlayType('video/webm; codecs="vp9"').replace(e,"")&&(g.vp9=!0),n.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(e,"")&&(g.hls=!0))}catch{}return n.parentNode&&n.parentNode.removeChild(n),g.getVideoURL=function(s){Array.isArray(s)||(s=[s]);for(var h=0;h<s.length;h++){var i=o(s[h],"url",s[h]);if(i.indexOf("blob:")===0)return{url:i,type:""};var l;if(i.indexOf("data:")===0?l=i.split(",")[0].match(/\/(.*?);/):l=i.match(/\.([a-zA-Z0-9]+)($|\?)/),l=o(s[h],"type",l?l[1]:"").toLowerCase(),g[l])return{url:i,type:l}}return null},g}c.exports=a()},82264:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={os:t(25892),browser:t(84148),features:t(89357),input:t(31784),audio:t(7098),video:t(43267),fullscreen:t(91639),canvasFeatures:t(89289)}},89422:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new Float32Array(20),a=new o({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(n){return this._matrix.set(n),this._dirty=!0,this},reset:function(){var n=this._matrix;return n.fill(0),n[0]=1,n[6]=1,n[12]=1,n[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var n=this._data;return this._dirty&&(n.set(this._matrix),n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._dirty=!1),n},brightness:function(n,r){n===void 0&&(n=0),r===void 0&&(r=!1);var e=n;return this.multiply([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],r)},saturate:function(n,r){n===void 0&&(n=0),r===void 0&&(r=!1);var e=n*2/3+1,s=(e-1)*-.5;return this.multiply([e,s,s,0,0,s,e,s,0,0,s,s,e,0,0,0,0,0,1,0],r)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,r){n===void 0&&(n=0),r===void 0&&(r=!1),n=n/180*Math.PI;var e=Math.cos(n),s=Math.sin(n),h=.213,i=.715,l=.072;return this.multiply([h+e*(1-h)+s*-h,i+e*-i+s*-i,l+e*-l+s*(1-l),0,0,h+e*-h+s*.143,i+e*(1-i)+s*.14,l+e*-l+s*-.283,0,0,h+e*-h+s*-.787,i+e*-i+s*i,l+e*(1-l)+s*l,0,0,0,0,0,1,0],r)},grayscale:function(n,r){return n===void 0&&(n=1),r===void 0&&(r=!1),this.saturate(-n,r)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply(a.BLACK_WHITE,n)},contrast:function(n,r){n===void 0&&(n=0),r===void 0&&(r=!1);var e=n+1,s=-.5*(e-1);return this.multiply([e,0,0,0,s,0,e,0,0,s,0,0,e,0,s,0,0,0,1,0],r)},negative:function(n){return n===void 0&&(n=!1),this.multiply(a.NEGATIVE,n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply(a.DESATURATE_LUMINANCE,n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply(a.SEPIA,n)},night:function(n,r){return n===void 0&&(n=.1),r===void 0&&(r=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],r)},lsd:function(n){return n===void 0&&(n=!1),this.multiply(a.LSD,n)},brown:function(n){return n===void 0&&(n=!1),this.multiply(a.BROWN,n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply(a.VINTAGE,n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply(a.KODACHROME,n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply(a.TECHNICOLOR,n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply(a.POLAROID,n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply(a.SHIFT_BGR,n)},multiply:function(n,r){r===void 0&&(r=!1),r||this.reset();var e=this._matrix,s=g;return s.set(e),e.set([s[0]*n[0]+s[1]*n[5]+s[2]*n[10]+s[3]*n[15],s[0]*n[1]+s[1]*n[6]+s[2]*n[11]+s[3]*n[16],s[0]*n[2]+s[1]*n[7]+s[2]*n[12]+s[3]*n[17],s[0]*n[3]+s[1]*n[8]+s[2]*n[13]+s[3]*n[18],s[0]*n[4]+s[1]*n[9]+s[2]*n[14]+s[3]*n[19]+s[4],s[5]*n[0]+s[6]*n[5]+s[7]*n[10]+s[8]*n[15],s[5]*n[1]+s[6]*n[6]+s[7]*n[11]+s[8]*n[16],s[5]*n[2]+s[6]*n[7]+s[7]*n[12]+s[8]*n[17],s[5]*n[3]+s[6]*n[8]+s[7]*n[13]+s[8]*n[18],s[5]*n[4]+s[6]*n[9]+s[7]*n[14]+s[8]*n[19]+s[9],s[10]*n[0]+s[11]*n[5]+s[12]*n[10]+s[13]*n[15],s[10]*n[1]+s[11]*n[6]+s[12]*n[11]+s[13]*n[16],s[10]*n[2]+s[11]*n[7]+s[12]*n[12]+s[13]*n[17],s[10]*n[3]+s[11]*n[8]+s[12]*n[13]+s[13]*n[18],s[10]*n[4]+s[11]*n[9]+s[12]*n[14]+s[13]*n[19]+s[14],s[15]*n[0]+s[16]*n[5]+s[17]*n[10]+s[18]*n[15],s[15]*n[1]+s[16]*n[6]+s[17]*n[11]+s[18]*n[16],s[15]*n[2]+s[16]*n[7]+s[17]*n[12]+s[18]*n[17],s[15]*n[3]+s[16]*n[8]+s[17]*n[13]+s[18]*n[18],s[15]*n[4]+s[16]*n[9]+s[17]*n[14]+s[18]*n[19]+s[19]]),this._dirty=!0,this}});a.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],c.exports=a},51767:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(29747),a=new o({initialize:function(r,e,s){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(r,e,s)},set:function(n,r,e){return n===void 0&&(n=0),r===void 0&&(r=0),e===void 0&&(e=0),this._rgb=[n,r,e],this.onChange(),this},equals:function(n,r,e){var s=this._rgb;return s[0]===n&&s[1]===r&&s[2]===e},onChange:function(){this.dirty=!0;var n=this._rgb;this.onChangeCallback.call(this,n[0],n[1],n[2])},r:{get:function(){return this._rgb[0]},set:function(n){this._rgb[0]=n,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(n){this._rgb[1]=n,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(n){this._rgb[2]=n,this.onChange()}},destroy:function(){this.onChangeCallback=null}});c.exports=a},60461:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};c.exports=S},54312:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(35893),a=t(86327),n=t(88417),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)+h),a(e,o(s)+i),e};c.exports=r},46768:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(86327),n=t(385),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)-h),a(e,o(s)+i),e};c.exports=r},35827:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(86327),n=t(40136),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)+h),a(e,o(s)+i),e};c.exports=r},46871:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66786),g=t(35893),a=t(7702),n=function(r,e,s,h){return s===void 0&&(s=0),h===void 0&&(h=0),o(r,g(e)+s,a(e)+h),r};c.exports=n},5198:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(26541),a=t(20786),n=t(385),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)-h),a(e,o(s)+i),e};c.exports=r},11879:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=[];g[o.BOTTOM_CENTER]=t(54312),g[o.BOTTOM_LEFT]=t(46768),g[o.BOTTOM_RIGHT]=t(35827),g[o.CENTER]=t(46871),g[o.LEFT_CENTER]=t(5198),g[o.RIGHT_CENTER]=t(80503),g[o.TOP_CENTER]=t(89698),g[o.TOP_LEFT]=t(922),g[o.TOP_RIGHT]=t(21373),g[o.LEFT_BOTTOM]=g[o.BOTTOM_LEFT],g[o.LEFT_TOP]=g[o.TOP_LEFT],g[o.RIGHT_BOTTOM]=g[o.BOTTOM_RIGHT],g[o.RIGHT_TOP]=g[o.TOP_RIGHT];var a=function(n,r,e,s,h){return g[e](n,r,s,h)};c.exports=a},80503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(54380),a=t(20786),n=t(40136),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)+h),a(e,o(s)+i),e};c.exports=r},89698:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35893),g=t(17717),a=t(88417),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(s)+h),n(e,g(s)-i),e};c.exports=r},922:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(385),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(s)-h),n(e,g(s)-i),e};c.exports=r},21373:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(40136),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(s)+h),n(e,g(s)-i),e};c.exports=r},91660:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BottomCenter:t(54312),BottomLeft:t(46768),BottomRight:t(35827),Center:t(46871),LeftCenter:t(5198),QuickSet:t(11879),RightCenter:t(80503),TopCenter:t(89698),TopLeft:t(922),TopRight:t(21373)}},71926:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=t(79291),a={In:t(91660),To:t(16694)};a=g(!1,a,o),c.exports=a},21578:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(35893),a=t(88417),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(s)+h),n(e,o(s)+i),e};c.exports=r},10210:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(385),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(s)-h),n(e,o(s)+i),e};c.exports=r},82341:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(40136),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(s)+h),n(e,o(s)+i),e};c.exports=r},87958:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(86327),n=t(40136),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)-h),a(e,o(s)+i),e};c.exports=r},40080:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(26541),a=t(20786),n=t(40136),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)-h),a(e,o(s)+i),e};c.exports=r},88466:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(40136),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(s)-h),n(e,g(s)-i),e};c.exports=r},38829:(c,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=[];g[o.BOTTOM_CENTER]=t(21578),g[o.BOTTOM_LEFT]=t(10210),g[o.BOTTOM_RIGHT]=t(82341),g[o.LEFT_BOTTOM]=t(87958),g[o.LEFT_CENTER]=t(40080),g[o.LEFT_TOP]=t(88466),g[o.RIGHT_BOTTOM]=t(19211),g[o.RIGHT_CENTER]=t(34609),g[o.RIGHT_TOP]=t(48741),g[o.TOP_CENTER]=t(49440),g[o.TOP_LEFT]=t(81288),g[o.TOP_RIGHT]=t(61323);var a=function(n,r,e,s,h){return g[e](n,r,s,h)};c.exports=a},19211:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(86327),n=t(385),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)+h),a(e,o(s)+i),e};c.exports=r},34609:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(54380),a=t(20786),n=t(385),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,g(s)+h),a(e,o(s)+i),e};c.exports=r},48741:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(385),n=t(66737),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(s)+h),n(e,g(s)-i),e};c.exports=r},49440:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35893),g=t(17717),a=t(86327),n=t(88417),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,o(s)+h),a(e,g(s)-i),e};c.exports=r},81288:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(86327),n=t(385),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,o(s)-h),a(e,g(s)-i),e};c.exports=r},61323:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(86327),n=t(40136),r=function(e,s,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),n(e,o(s)+h),a(e,g(s)-i),e};c.exports=r},16694:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BottomCenter:t(21578),BottomLeft:t(10210),BottomRight:t(82341),LeftBottom:t(87958),LeftCenter:t(40080),LeftTop:t(88466),QuickSet:t(38829),RightBottom:t(19211),RightCenter:t(34609),RightTop:t(48741),TopCenter:t(49440),TopLeft:t(81288),TopRight:t(61323)}},66786:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(88417),g=t(20786),a=function(n,r,e){return o(n,r),g(n,e)};c.exports=a},62235:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y+t.height-t.height*t.originY};c.exports=S},72873:(c,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(54380),n=t(17717),r=t(87841),e=function(s,h){h===void 0&&(h=new r);var i=g(s),l=n(s);return h.x=i,h.y=l,h.width=a(s)-i,h.height=o(s)-l,h};c.exports=e},35893:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x-t.width*t.originX+t.width*.5};c.exports=S},7702:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y-t.height*t.originY+t.height*.5};c.exports=S},26541:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x-t.width*t.originX};c.exports=S},87431:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.width*t.originX};c.exports=S},46928:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.height*t.originY};c.exports=S},54380:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x+t.width-t.width*t.originX};c.exports=S},17717:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y-t.height*t.originY};c.exports=S},86327:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.y=o-t.height+t.height*t.originY,t};c.exports=S},88417:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.width*t.originX;return t.x=o+g-t.width*.5,t};c.exports=S},20786:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.height*t.originY;return t.y=o+g-t.height*.5,t};c.exports=S},385:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x=o+t.width*t.originX,t};c.exports=S},40136:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x=o-t.width+t.width*t.originX,t};c.exports=S},66737:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.y=o+t.height*t.originY,t};c.exports=S},58724:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CenterOn:t(66786),GetBottom:t(62235),GetBounds:t(72873),GetCenterX:t(35893),GetCenterY:t(7702),GetLeft:t(26541),GetOffsetX:t(87431),GetOffsetY:t(46928),GetRight:t(54380),GetTop:t(17717),SetBottom:t(86327),SetCenterX:t(88417),SetCenterY:t(20786),SetLeft:t(385),SetRight:t(40136),SetTop:t(66737)}},20623:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCrisp:function(t){var o=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return o.forEach(function(g){t.style["image-rendering"]=g}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};c.exports=S},27919:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8054),g=t(68703),a=[],n=!1,r=function(){var e=function(x,y,T,C,A){y===void 0&&(y=1),T===void 0&&(T=1),C===void 0&&(C=o.CANVAS),A===void 0&&(A=!1);var R,M=i(C);return M===null?(M={parent:x,canvas:document.createElement("canvas"),type:C},C===o.CANVAS&&a.push(M),R=M.canvas):(M.parent=x,R=M.canvas),A&&(M.parent=R),R.width=y,R.height=T,n&&C===o.CANVAS&&g.disable(R.getContext("2d",{willReadFrequently:!1})),R},s=function(x,y,T){return e(x,y,T,o.CANVAS)},h=function(x,y,T){return e(x,y,T,o.WEBGL)},i=function(x){if(x===void 0&&(x=o.CANVAS),x===o.WEBGL)return null;for(var y=0;y<a.length;y++){var T=a[y];if(!T.parent&&T.type===x)return T}return null},l=function(x){var y=x instanceof HTMLCanvasElement;a.forEach(function(T){(y&&T.canvas===x||!y&&T.parent===x)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},u=function(){var x=0;return a.forEach(function(y){y.parent&&x++}),x},f=function(){return a.length-u()},d=function(){n=!0},p=function(){n=!1};return{create2D:s,create:e,createWebGL:h,disableSmoothing:d,enableSmoothing:p,first:i,free:f,pool:a,remove:l,total:u}};c.exports=r()},68703:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="",t=function(){var o=function(r){for(var e=["i","webkitI","msI","mozI","oI"],s=0;s<e.length;s++){var h=e[s]+"mageSmoothingEnabled";if(h in r)return h}return null},g=function(r){return S===""&&(S=o(r)),S&&(r[S]=!0),r},a=function(r){return S===""&&(S=o(r)),S&&(r[S]=!1),r},n=function(r){return S!==null?r[S]:null};return{disable:a,enable:g,getPrefix:o,isEnabled:n}};c.exports=t()},65208:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o="none"),t.style.msTouchAction=o,t.style["ms-touch-action"]=o,t.style["touch-action"]=o,t};c.exports=S},91610:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(a){t.style[a+"user-select"]=o}),t.style["-webkit-touch-callout"]=o,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};c.exports=S},26253:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CanvasInterpolation:t(20623),CanvasPool:t(27919),Smoothing:t(68703),TouchAction:t(65208),UserSelect:t(91610)}},40987:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37589),a=t(1e3),n=t(7537),r=t(87837),e=new o({initialize:function(h,i,l,u){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(h,i,l,u)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(s,h,i,l,u){return l===void 0&&(l=255),u===void 0&&(u=!0),this._locked=!0,this.red=s,this.green=h,this.blue=i,this.alpha=l,this._locked=!1,this.update(u)},setGLTo:function(s,h,i,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=s,this.greenGL=h,this.blueGL=i,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(s){return this._locked=!0,this.red=s.r,this.green=s.g,this.blue=s.b,s.hasOwnProperty("a")&&(this.alpha=s.a),this._locked=!1,this.update(!0)},setFromHSV:function(s,h,i){return n(s,h,i,this)},update:function(s){if(s===void 0&&(s=!1),this._locked)return this;var h=this.r,i=this.g,l=this.b,u=this.a;return this._color=g(h,i,l),this._color32=a(h,i,l,u),this._rgba="rgba("+h+","+i+","+l+","+u/255+")",s&&r(h,i,l,this),this},updateHSV:function(){var s=this.r,h=this.g,i=this.b;return r(s,h,i,this),this},clone:function(){return new e(this.r,this.g,this.b,this.a)},gray:function(s){return this.setTo(s,s,s)},random:function(s,h){s===void 0&&(s=0),h===void 0&&(h=255);var i=Math.floor(s+Math.random()*(h-s)),l=Math.floor(s+Math.random()*(h-s)),u=Math.floor(s+Math.random()*(h-s));return this.setTo(i,l,u)},randomGray:function(s,h){s===void 0&&(s=0),h===void 0&&(h=255);var i=Math.floor(s+Math.random()*(h-s));return this.setTo(i,i,i)},saturate:function(s){return this.s+=s/100,this},desaturate:function(s){return this.s-=s/100,this},lighten:function(s){return this.v+=s/100,this},darken:function(s){return this.v-=s/100,this},brighten:function(s){var h=this.r,i=this.g,l=this.b;return h=Math.max(0,Math.min(255,h-Math.round(255*-(s/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(s/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(s/100)))),this.setTo(h,i,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(s){this.gl[0]=Math.min(Math.abs(s),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(s){this.gl[1]=Math.min(Math.abs(s),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(s){this.gl[2]=Math.min(Math.abs(s),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(s){this.gl[3]=Math.min(Math.abs(s),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(s){s=Math.floor(Math.abs(s)),this.r=Math.min(s,255),this.gl[0]=s/255,this.update(!0)}},green:{get:function(){return this.g},set:function(s){s=Math.floor(Math.abs(s)),this.g=Math.min(s,255),this.gl[1]=s/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(s){s=Math.floor(Math.abs(s)),this.b=Math.min(s,255),this.gl[2]=s/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(s){s=Math.floor(Math.abs(s)),this.a=Math.min(s,255),this.gl[3]=s/255,this.update()}},h:{get:function(){return this._h},set:function(s){this._h=s,n(s,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(s){this._s=s,n(this._h,s,this._v,this)}},v:{get:function(){return this._v},set:function(s){this._v=s,n(this._h,this._s,s,this)}}});c.exports=e},92728:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589),g=function(a){a===void 0&&(a=1024);var n=[],r=255,e,s=255,h=0,i=0;for(e=0;e<=r;e++)n.push({r:s,g:e,b:i,color:o(s,e,i)});for(h=255,e=r;e>=0;e--)n.push({r:e,g:h,b:i,color:o(e,h,i)});for(s=0,e=0;e<=r;e++,h--)n.push({r:s,g:h,b:e,color:o(s,h,e)});for(h=0,i=255,e=0;e<=r;e++,i--,s++)n.push({r:s,g:h,b:i,color:o(s,h,i)});if(a===1024)return n;var l=[],u=0,f=1024/a;for(e=0;e<a;e++)l.push(n[Math.floor(u)]),u+=f;return l};c.exports=g},91588:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(o.a=t>>>24),o};c.exports=S},62957:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=t.toString(16);return o.length===1?"0"+o:o};c.exports=S},37589:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t<<16|o<<8|g};c.exports=S},1e3:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return a<<24|t<<16|o<<8|g};c.exports=S},62183:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=t(89528),a=function(n,r,e){var s=e,h=e,i=e;if(r!==0){var l=e<.5?e*(1+r):e+r-e*r,u=2*e-l;s=g(u,l,n+1/3),h=g(u,l,n),i=g(u,l,n-1/3)}var f=new o;return f.setGLTo(s,h,i,1)};c.exports=a},27939:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7537),g=function(a,n){a===void 0&&(a=1),n===void 0&&(n=1);for(var r=[],e=0;e<=359;e++)r.push(o(e/359,a,n));return r};c.exports=g},7537:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589);function g(n,r,e,s){var h=(n+r*6)%6,i=Math.min(h,4-h,1);return Math.round(255*(s-s*e*Math.max(0,i)))}var a=function(n,r,e,s){r===void 0&&(r=1),e===void 0&&(e=1);var h=g(5,n,r,e),i=g(3,n,r,e),l=g(1,n,r,e);return s?s.setTo?s.setTo(h,i,l,s.alpha,!0):(s.r=h,s.g=i,s.b=l,s.color=o(h,i,l),s):{r:h,g:i,b:l,color:o(h,i,l)}};c.exports=a},70238:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){var n=new o;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,l,u,f){return l+l+u+u+f+f});var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(r){var e=parseInt(r[1],16),s=parseInt(r[2],16),h=parseInt(r[3],16);n.setTo(e,s,h)}return n};c.exports=g},89528:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?t+(o-t)*6*g:g<.5?o:g<.6666666666666666?t+(o-t)*(.6666666666666666-g)*6:t};c.exports=S},30100:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=t(90664),a=function(n){var r=g(n);return new o(r.r,r.g,r.b,r.a)};c.exports=a},90664:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};c.exports=S},13699:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28915),g=function(r,e,s,h,i,l,u,f){u===void 0&&(u=100),f===void 0&&(f=0);var d=f/u;return{r:o(r,h,d),g:o(e,i,d),b:o(s,l,d)}},a=function(r,e,s,h){return s===void 0&&(s=100),h===void 0&&(h=0),g(r.r,r.g,r.b,e.r,e.g,e.b,s,h)},n=function(r,e,s,h,i,l){return i===void 0&&(i=100),l===void 0&&(l=0),g(r.r,r.g,r.b,e,s,h,i,l)};c.exports={RGBWithRGB:g,ColorWithRGB:n,ColorWithColor:a}},68957:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){return new o(a.r,a.g,a.b,a.a)};c.exports=g},87388:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){var n=new o,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(r){var e=parseInt(r[1],10),s=parseInt(r[2],10),h=parseInt(r[3],10),i=r[4]!==void 0?parseFloat(r[4]):1;n.setTo(e,s,h,i*255)}return n};c.exports=g},87837:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){a===void 0&&(a={h:0,s:0,v:0}),t/=255,o/=255,g/=255;var n=Math.min(t,o,g),r=Math.max(t,o,g),e=r-n,s=0,h=r===0?0:e/r,i=r;return r!==n&&(r===t?s=(o-g)/e+(o<g?6:0):r===o?s=(g-t)/e+2:r===g&&(s=(t-o)/e+4),s/=6),a.hasOwnProperty("_h")?(a._h=s,a._s=h,a._v=i):(a.h=s,a.s=h,a.v=i),a};c.exports=S},75723:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62957),g=function(a,n,r,e,s){return e===void 0&&(e=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(a<<16)+(n<<8)+r).toString(16).slice(1,7):"0x"+o(e)+o(a)+o(n)+o(r)};c.exports=g},85386:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(40987),a=function(n,r){return n===void 0&&(n=0),r===void 0&&(r=255),new g(o(n,r),o(n,r),o(n,r))};c.exports=a},80333:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70238),g=t(30100),a=t(68957),n=t(87388),r=function(e){var s=typeof e;switch(s){case"string":return e.substr(0,3).toLowerCase()==="rgb"?n(e):o(e);case"number":return g(e);case"object":return a(e)}};c.exports=r},3956:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987);o.ColorSpectrum=t(92728),o.ColorToRGBA=t(91588),o.ComponentToHex=t(62957),o.GetColor=t(37589),o.GetColor32=t(1e3),o.HexStringToColor=t(70238),o.HSLToColor=t(62183),o.HSVColorWheel=t(27939),o.HSVToRGB=t(7537),o.HueToComponent=t(89528),o.IntegerToColor=t(30100),o.IntegerToRGB=t(90664),o.Interpolate=t(13699),o.ObjectToColor=t(68957),o.RandomRGB=t(85386),o.RGBStringToColor=t(87388),o.RGBToHSV=t(87837),o.RGBToString=t(75723),o.ValueToColor=t(80333),c.exports=o},27460:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Align:t(71926),BaseShader:t(73894),Bounds:t(58724),Canvas:t(26253),Color:t(3956),ColorMatrix:t(89422),Masks:t(69781),RGB:t(51767)}},6858:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39429),a=new o({initialize:function(r,e,s,h,i,l){e||(e=r.sys.make.image({x:s,y:h,key:i,frame:l,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(n){this.bitmapMask=n},preRenderWebGL:function(n,r,e){n.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,e)},postRenderWebGL:function(n,r,e){n.pipelines.BITMAPMASK_PIPELINE.endMask(this,r,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(n,r,e,s,h){return new a(this.scene,n,r,e,s,h)}),c.exports=a},80661:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,n,r){var e=a.gl;a.flush(),a.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:r}),this.applyStencil(a,r,!0),a.maskCount++},applyStencil:function(a,n,r){var e=a.gl,s=this.geometryMask,h=a.maskCount,i=255;e.colorMask(!1,!1,!1,!1),r?(e.stencilFunc(e.EQUAL,h,i),e.stencilOp(e.KEEP,e.KEEP,e.INCR),h++):(e.stencilFunc(e.EQUAL,h+1,i),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),this.level=h,s.renderWebGL(a,s,n),a.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),this.invertAlpha?e.stencilFunc(e.NOTEQUAL,h,i):e.stencilFunc(e.EQUAL,h,i)},postRenderWebGL:function(a){var n=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var r=a.currentMask;if(a.maskStack.length===0)r.mask=null,n.disable(n.STENCIL_TEST);else{var e=a.maskStack[a.maskStack.length-1];e.mask.applyStencil(a,e.camera,!1),a.currentCameraMask.mask!==e.mask?(r.mask=e.mask,r.camera=e.camera):r.mask=null}},preRenderCanvas:function(a,n,r){var e=this.geometryMask;a.currentContext.save(),e.renderCanvas(a,e,r,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});c.exports=g},69781:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BitmapMask:t(6858),GeometryMask:t(80661)}},73894:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s){(!r||r==="")&&(r=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!e||e==="")&&(e=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=n,this.fragmentSrc=r,this.vertexSrc=e,this.uniforms=s}});c.exports=g},40366:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g;if(o)typeof o=="string"?g=document.getElementById(o):typeof o=="object"&&o.nodeType===1&&(g=o);else if(t.parentElement||o===null)return t;return g||(g=document.body),g.appendChild(t),t};c.exports=S},83719:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=function(a){var n=a.config;if(!(!n.parent||!n.domCreateContainer)){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+n.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=r,o(r,n.parent)}};c.exports=g},57264:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var n=function(){document.removeEventListener("deviceready",n,!0),document.removeEventListener("DOMContentLoaded",n,!0),window.removeEventListener("load",n,!0),a()};document.body?o.cordova?document.addEventListener("deviceready",n,!1):(document.addEventListener("DOMContentLoaded",n,!0),window.addEventListener("load",n,!0)):window.setTimeout(n,20)};c.exports=g},57811:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!t)return window.innerHeight;var o=Math.abs(window.orientation),g={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),g.w=o===90?a.offsetHeight:window.innerWidth,g.h=o===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?g.h:g.w};c.exports=S},45818:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13560),g=function(a,n){var r=window.screen,e=r?r.orientation||r.mozOrientation||r.msOrientation:!1;if(e&&typeof e.type=="string")return e.type;if(typeof e=="string")return e;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return o.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return o.ORIENTATION.LANDSCAPE}else return n>a?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE};c.exports=g},74403:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o;return t!==""&&(typeof t=="string"?o=document.getElementById(t):t&&t.nodeType===1&&(o=t)),o||(o=document.body),o};c.exports=S},56836:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o="";try{if(window.DOMParser){var g=new DOMParser;o=g.parseFromString(t,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.loadXML(t)}catch{o=null}return!o||!o.documentElement||o.getElementsByTagName("parsererror").length?null:o};c.exports=S},35846:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){t.parentNode&&t.parentNode.removeChild(t)};c.exports=S},43092:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(29747),a=new o({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var r=this;this.step=function e(s){r.callback(s),r.isRunning&&(r.timeOutID=window.requestAnimationFrame(e))},this.stepTimeout=function e(){r.isRunning&&(r.timeOutID=window.setTimeout(e,r.delay)),r.callback(window.performance.now())}},start:function(n,r,e){this.isRunning||(this.callback=n,this.isSetTimeOut=r,this.delay=e,this.isRunning=!0,this.timeOutID=r?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});c.exports=a},84902:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={AddToDOM:t(40366),DOMContentLoaded:t(57264),GetInnerHeight:t(57811),GetScreenOrientation:t(45818),GetTarget:t(74403),ParseXML:t(56836),RemoveFromDOM:t(35846),RequestAnimationFrame:t(43092)};c.exports=o},47565:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(37277),n=new o({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",n,"events"),c.exports=n},93055:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={EventEmitter:t(47565)}},20122:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s){s===void 0&&(s=1),g.call(this,a.BARREL,e),this.amount=s}});c.exports=n},32251:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f){h===void 0&&(h=1),i===void 0&&(i=1),l===void 0&&(l=1),u===void 0&&(u=1),f===void 0&&(f=4),g.call(this,a.BLOOM,e),this.steps=f,this.offsetX=h,this.offsetY=i,this.blurStrength=l,this.strength=u,this.glcolor=[1,1,1],s!=null&&(this.color=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});c.exports=n},9047:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f){s===void 0&&(s=0),h===void 0&&(h=2),i===void 0&&(i=2),l===void 0&&(l=1),f===void 0&&(f=4),g.call(this,a.BLUR,e),this.quality=s,this.x=h,this.y=i,this.steps=f,this.strength=l,this.glcolor=[1,1,1],u!=null&&(this.color=u)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});c.exports=n},27885:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f,d){s===void 0&&(s=.5),h===void 0&&(h=1),i===void 0&&(i=.2),l===void 0&&(l=!1),u===void 0&&(u=1),f===void 0&&(f=1),d===void 0&&(d=1),g.call(this,a.BOKEH,e),this.radius=s,this.amount=h,this.contrast=i,this.isTiltShift=l,this.strength=d,this.blurX=u,this.blurY=f}});c.exports=n},12578:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u){s===void 0&&(s=8),l===void 0&&(l=1),u===void 0&&(u=.005),g.call(this,a.CIRCLE,e),this.scale=l,this.feather=u,this.thickness=s,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],h!=null&&(this.color=h),i!=null&&(this.backgroundColor=i)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundColor:{get:function(){var r=this.glcolor2;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor2;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(r){this.glcolor2[3]=r}}});c.exports=n},15802:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89422),a=t(14811),n=new o({Extends:g,initialize:function(e){g.call(this),this.type=a.COLOR_MATRIX,this.gameObject=e,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});c.exports=n},72898:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r){this.type=n,this.gameObject=r,this.active=!0},setActive:function(a){return this.active=a,this},destroy:function(){this.gameObject=null,this.active=!1}});c.exports=g},44553:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i){s===void 0&&(s="__WHITE"),h===void 0&&(h=.005),i===void 0&&(i=.005),g.call(this,a.DISPLACEMENT,e),this.x=h,this.y=i,this.glTexture,this.setTexture(s)},setTexture:function(r){var e=this.gameObject.scene.sys.textures.getFrame(r);return e&&(this.glTexture=e.glTexture),this}});c.exports=n},68531:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l){h===void 0&&(h=4),i===void 0&&(i=0),l===void 0&&(l=!1),g.call(this,a.GLOW,e),this.outerStrength=h,this.innerStrength=i,this.knockout=l,this.glcolor=[1,1,1,1],s!==void 0&&(this.color=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});c.exports=n},37102:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f,d,p){i===void 0&&(i=.2),l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=1),p===void 0&&(p=0),g.call(this,a.GRADIENT,e),this.alpha=i,this.size=p,this.fromX=l,this.fromY=u,this.toX=f,this.toY=d,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],s!=null&&(this.color1=s),h!=null&&(this.color2=h)},color1:{get:function(){var r=this.glcolor1;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor1;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}},color2:{get:function(){var r=this.glcolor2;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor2;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}}});c.exports=n},86886:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s){s===void 0&&(s=1),g.call(this,a.PIXELATE,e),this.amount=s}});c.exports=n},92322:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f,d){s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=.1),l===void 0&&(l=1),f===void 0&&(f=6),d===void 0&&(d=1),g.call(this,a.SHADOW,e),this.x=s,this.y=h,this.decay=i,this.power=l,this.glcolor=[0,0,0,1],this.samples=f,this.intensity=d,u!==void 0&&(this.color=u)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});c.exports=n},39563:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l){s===void 0&&(s=.5),h===void 0&&(h=.5),i===void 0&&(i=3),l===void 0&&(l=!1),g.call(this,a.SHINE,e),this.speed=s,this.lineWidth=h,this.gradient=i,this.reveal=l}});c.exports=n},56448:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l){s===void 0&&(s=.5),h===void 0&&(h=.5),i===void 0&&(i=.5),l===void 0&&(l=.5),g.call(this,a.VIGNETTE,e),this.x=s,this.y=h,this.radius=i,this.strength=l}});c.exports=n},38433:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),n=new o({Extends:g,initialize:function(e,s,h,i,l){s===void 0&&(s=.1),h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=!1),g.call(this,a.WIPE,e),this.progress=0,this.wipeWidth=s,this.direction=h,this.axis=i,this.reveal=l}});c.exports=n},14811:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};c.exports=S},66064:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(14811),a={Barrel:t(20122),Controller:t(72898),Bloom:t(32251),Blur:t(9047),Bokeh:t(27885),Circle:t(12578),ColorMatrix:t(15802),Displacement:t(44553),Glow:t(68531),Gradient:t(37102),Pixelate:t(86886),Shadow:t(92322),Shine:t(39563),Vignette:t(56448),Wipe:t(38433)};a=o(!1,a,g),c.exports=a},25305:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(23568),a=function(n,r,e){r.x=g(e,"x",0),r.y=g(e,"y",0),r.depth=g(e,"depth",0),r.flipX=g(e,"flipX",!1),r.flipY=g(e,"flipY",!1);var s=g(e,"scale",null);typeof s=="number"?r.setScale(s):s!==null&&(r.scaleX=g(s,"x",1),r.scaleY=g(s,"y",1));var h=g(e,"scrollFactor",null);typeof h=="number"?r.setScrollFactor(h):h!==null&&(r.scrollFactorX=g(h,"x",1),r.scrollFactorY=g(h,"y",1)),r.rotation=g(e,"rotation",0);var i=g(e,"angle",null);i!==null&&(r.angle=i),r.alpha=g(e,"alpha",1);var l=g(e,"origin",null);if(typeof l=="number")r.setOrigin(l);else if(l!==null){var u=g(l,"x",.5),f=g(l,"y",.5);r.setOrigin(u,f)}r.blendMode=g(e,"blendMode",o.NORMAL),r.visible=g(e,"visible",!0);var d=g(e,"add",!0);return d&&n.sys.displayList.add(r),r.preUpdate&&n.sys.updateList.add(r),r};c.exports=a},13059:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23568),g=function(a,n){var r=o(n,"anims",null);if(r===null)return a;if(typeof r=="string")a.anims.play(r);else if(typeof r=="object"){var e=a.anims,s=o(r,"key",void 0);if(s){var h=o(r,"startFrame",void 0),i=o(r,"delay",0),l=o(r,"repeat",0),u=o(r,"repeatDelay",0),f=o(r,"yoyo",!1),d=o(r,"play",!1),p=o(r,"delayedPlay",0),x={key:s,delay:i,repeat:l,repeatDelay:u,yoyo:f,startFrame:h};d?e.play(x):p>0?e.playAfterDelay(x,p):e.load(x)}}return a};c.exports=g},8050:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(73162),a=t(37277),n=t(51708),r=t(44594),e=t(19186),s=new o({Extends:g,initialize:function(i){g.call(this,i),this.sortChildrenFlag=!1,this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},addChildCallback:function(h){h.displayList&&h.displayList!==this&&h.removeFromDisplayList(),h.parentContainer&&h.parentContainer.remove(h),h.displayList||(this.queueDepthSort(),h.displayList=this,h.emit(n.ADDED_TO_SCENE,h,this.scene),this.events.emit(r.ADDED_TO_SCENE,h,this.scene))},removeChildCallback:function(h){this.queueDepthSort(),h.displayList=null,h.emit(n.REMOVED_FROM_SCENE,h,this.scene),this.events.emit(r.REMOVED_FROM_SCENE,h,this.scene)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(e(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(h,i){return h._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var h=this.list;h.length;)h[0].destroy(!0);this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",s,"displayList"),c.exports=s},95643:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(53774),a=t(45893),n=t(50792),r=t(51708),e=t(44594),s=new o({Extends:n,initialize:function(i,l){n.call(this),this.scene=i,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this),i.sys.queueDepthSort()},setActive:function(h){return this.active=h,this},setName:function(h){return this.name=h,this},setState:function(h){return this.state=h,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(h,i){return this.data||(this.data=new a(this)),this.data.set(h,i),this},incData:function(h,i){return this.data||(this.data=new a(this)),this.data.inc(h,i),this},toggleData:function(h){return this.data||(this.data=new a(this)),this.data.toggle(h),this},getData:function(h){return this.data||(this.data=new a(this)),this.data.get(h)},setInteractive:function(h,i,l){return this.scene.sys.input.enable(this,h,i,l),this},disableInteractive:function(h){return h===void 0&&(h=!1),this.scene.sys.input.disable(this,h),this},removeInteractive:function(h){return h===void 0&&(h=!1),this.scene.sys.input.clear(this),h&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(h){var i=this.displayList&&this.displayList.active?this.displayList.willRender(h):!0;return!(!i||s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},getIndexList:function(){for(var h=this,i=this.parentContainer,l=[];i&&(l.unshift(i.getIndex(h)),h=i,i.parentContainer);)i=i.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(h)):l.unshift(this.scene.sys.displayList.getIndex(h)),l},addToDisplayList:function(h){return h===void 0&&(h=this.scene.sys.displayList),this.displayList&&this.displayList!==h&&this.removeFromDisplayList(),h.exists(this)||(this.displayList=h,h.add(this,!0),h.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),h.events.emit(e.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var h=this.displayList||this.scene.sys.displayList;return h&&h.exists(this)&&(h.remove(this,!0),h.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),h.events.emit(e.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var h=null;return this.parentContainer?h=this.parentContainer.list:this.displayList&&(h=this.displayList.list),h},destroy:function(h){!this.scene||this.ignoreDestroy||(h===void 0&&(h=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(r.DESTROY,this,h),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});s.RENDER_MASK=15,c.exports=s},44603:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),n=new o({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});n.register=function(r,e){n.prototype.hasOwnProperty(r)||(n.prototype[r]=e)},n.remove=function(r){n.prototype.hasOwnProperty(r)&&delete n.prototype[r]},g.register("GameObjectCreator",n,"make"),c.exports=n},39429:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),n=new o({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(r){return(r.renderCanvas||r.renderWebGL)&&this.displayList.add(r),r.preUpdate&&this.updateList.add(r),r},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});n.register=function(r,e){n.prototype.hasOwnProperty(r)||(n.prototype[r]=e)},n.remove=function(r){n.prototype.hasOwnProperty(r)&&delete n.prototype[r]},g.register("GameObjectFactory",n,"add"),c.exports=n},91296:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=new o,a=new o,n=new o,r={camera:g,sprite:a,calc:n},e=function(s,h,i){var l=g,u=a,f=n;return u.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),l.copyFrom(h.matrix),i?(l.multiplyWithOffset(i,-h.scrollX*s.scrollFactorX,-h.scrollY*s.scrollFactorY),u.e=s.x,u.f=s.y):(u.e-=h.scrollX*s.scrollFactorX,u.f-=h.scrollY*s.scrollFactorY),l.multiply(u,f),r};c.exports=e},45027:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(25774),a=t(37277),n=t(44594),r=new o({Extends:g,initialize:function(s){g.call(this),this.checkQueue=!0,this.scene=s,this.systems=s.sys,s.sys.events.once(n.BOOT,this.boot,this),s.sys.events.on(n.START,this.start,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(n.PRE_UPDATE,this.update,this),e.on(n.UPDATE,this.sceneUpdate,this),e.once(n.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,s){for(var h=this._active,i=h.length,l=0;l<i;l++){var u=h[l];u.active&&u.preUpdate.call(u,e,s)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var s=this.systems.events;s.off(n.PRE_UPDATE,this.update,this),s.off(n.UPDATE,this.sceneUpdate,this),s.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",r,"updateList"),c.exports=r},3217:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r,e,s,h,i,l,u,f,d,p){var x=g.x-o.displayOriginX+n,y=g.y-o.displayOriginY+r,T=x+g.w,C=y+g.h,A=e.a,R=e.b,M=e.c,L=e.d,I=e.e,O=e.f,D=x*A+y*M+I,B=x*R+y*L+O,V=x*A+C*M+I,W=x*R+C*L+O,Y=T*A+C*M+I,X=T*R+C*L+O,U=T*A+y*M+I,z=T*R+y*L+O;s&&(D=Math.round(D),B=Math.round(B),V=Math.round(V),W=Math.round(W),Y=Math.round(Y),X=Math.round(X),U=Math.round(U),z=Math.round(z)),t.batchQuad(o,D,B,V,W,Y,X,U,z,a.u0,a.v0,a.u1,a.v1,h,i,l,u,f,d,p)};c.exports=S},53048:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){if(g===void 0&&(g=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var n=t.text,r=n.length,e=t.maxWidth,s=t.wordWrapCharCode,h=Number.MAX_VALUE,i=Number.MAX_VALUE,l=0,u=0,f=t.fontData.chars,d=t.fontData.lineHeight,p=t.letterSpacing,x=t.lineSpacing,y=0,T=0,C=0,A=null,R=t._align,M=0,L=0,I=t.fontSize/t.fontData.size,O=I*t.scaleX,D=I*t.scaleY,B=null,V=0,W=[],Y=Number.MAX_VALUE,X=0,U=0,z=0,G,b,H,j=[],$=[],k=null,Q=function(kt,ne){for(var Ut=0,zt=0;zt<kt.length;zt++){var Zt=kt.charCodeAt(zt),ae=ne.chars[Zt];ae&&(Ut+=ae.xAdvance)}return Ut*O};if(e>0){H=n.split(`
`);var _=[];for(G=0;G<H.length;G++){var tt=H[G],et="",it="",ot="",nt="";for(b=0;b<tt.length;b++)if(C=tt.charCodeAt(b),et+=tt[b],C===s||b===tt.length-1){nt=ot+et;var ut=Q(nt,t.fontData);ut<=e?ot=nt:(it=it.slice(0,-1),it+=(it?`
`:"")+ot,ot=et),et=""}it=it.slice(0,-1),it+=(it?`
`:"")+ot,_.push(it)}n=_.join(`
`),a.wrappedText=n,r=n.length}var ct=0;for(G=0;G<r;G++){if(C=n.charCodeAt(G),C===10){k!==null&&(j.push({word:k.word,i:k.i,x:k.x*O,y:k.y*D,w:k.w*O,h:k.h*D}),k=null),B=null,W[U]=z,z>X&&(X=z),z<Y&&(Y=z),U++,z=0,y=0,T=(d+x)*U;continue}if(A=f[C],!!A){if(M=y,L=T,B!==null){var pt=A.kerning[V];M+=pt!==void 0?pt:0}h>M&&(h=M),i>L&&(i=L);var mt=M+A.xAdvance,ht=L+d;l<mt&&(l=mt),u<ht&&(u=ht);var ft=A.xOffset+A.xAdvance+(pt!==void 0?pt:0);C===s?k!==null&&(j.push({word:k.word,i:k.i,x:k.x*O,y:k.y*D,w:k.w*O,h:k.h*D}),k=null):(k===null&&(k={word:"",i:ct,x:y,y:T,w:0,h:d}),k.word=k.word.concat(n[G]),k.w+=ft),$.push({i:ct,idx:G,char:n[G],code:C,x:(A.xOffset+M)*I,y:(A.yOffset+T)*I,w:A.width*I,h:A.height*I,t:T*I,r:mt*I,b:d*I,line:U,glyph:A}),y+=A.xAdvance+p+(pt!==void 0?pt:0),B=A,V=C,z=mt*I,ct++}}if(k!==null&&j.push({word:k.word,i:k.i,x:k.x*O,y:k.y*D,w:k.w*O,h:k.h*D}),W[U]=z,z>X&&(X=z),z<Y&&(Y=z),R>0)for(var dt=0;dt<$.length;dt++){var Ct=$[dt];if(R===1){var Lt=(X-W[Ct.line])/2;Ct.x+=Lt,Ct.r+=Lt}else if(R===2){var Xt=X-W[Ct.line];Ct.x+=Xt,Ct.r+=Xt}}var Mt=a.local,It=a.global;return H=a.lines,Mt.x=h*I,Mt.y=i*I,Mt.width=l*I,Mt.height=u*I,It.x=t.x-t._displayOriginX+h*O,It.y=t.y-t._displayOriginY+i*D,It.width=l*O,It.height=u*D,H.shortest=Y,H.longest=X,H.lengths=W,o&&(Mt.x=Math.ceil(Mt.x),Mt.y=Math.ceil(Mt.y),Mt.width=Math.ceil(Mt.width),Mt.height=Math.ceil(Mt.height),It.x=Math.ceil(It.x),It.y=Math.ceil(It.y),It.width=Math.ceil(It.width),It.height=Math.ceil(It.height),H.shortest=Math.ceil(Y),H.longest=Math.ceil(X)),g&&(t._displayOriginX=t.originX*Mt.width,t._displayOriginY=t.originY*Mt.height,It.x=t.x-t._displayOriginX*t.scaleX,It.y=t.y-t._displayOriginY*t.scaleY,o&&(It.x=Math.ceil(It.x),It.y=Math.ceil(It.y))),a.words=j,a.characters=$,a.lines.height=d,a.scale=I,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a};c.exports=S},61327:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21859),g=function(a,n,r,e,s,h,i){var l=a.sys.textures.get(r),u=l.get(e),f=a.sys.cache.xml.get(s);if(u&&f){var d=o(f,u,h,i,l);return a.sys.cache.bitmapFont.add(n,{data:d,texture:r,frame:e,fromAtlas:!0}),!0}else return!1};c.exports=g},6925:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=function(a,n){var r=n.width,e=n.height,s=Math.floor(r/2),h=Math.floor(e/2),i=o(n,"chars","");if(i!==""){var l=o(n,"image",""),u=a.sys.textures.getFrame(l),f=u.cutX,d=u.cutY,p=u.source.width,x=u.source.height,y=o(n,"offset.x",0),T=o(n,"offset.y",0),C=o(n,"spacing.x",0),A=o(n,"spacing.y",0),R=o(n,"lineSpacing",0),M=o(n,"charsPerRow",null);M===null&&(M=p/r,M>i.length&&(M=i.length));for(var L=y,I=T,O={retroFont:!0,font:l,size:r,lineHeight:e+R,chars:{}},D=0,B=0;B<i.length;B++){var V=i.charCodeAt(B),W=(f+L)/p,Y=(d+I)/x,X=(f+L+r)/p,U=(d+I+e)/x;O.chars[V]={x:L,y:I,width:r,height:e,centerX:s,centerY:h,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:W,v0:Y,u1:X,v1:U},D++,D===M?(D=0,L=y,I+=e+A):L+=r+C}var z={data:O,frame:null,texture:l};return z}};c.exports=g},21859:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(o,g){return parseInt(o.getAttribute(g),10)}var t=function(o,g,a,n,r){a===void 0&&(a=0),n===void 0&&(n=0);var e=g.cutX,s=g.cutY,h=g.source.width,i=g.source.height,l=g.sourceIndex,u={},f=o.getElementsByTagName("info")[0],d=o.getElementsByTagName("common")[0];u.font=f.getAttribute("face"),u.size=S(f,"size"),u.lineHeight=S(d,"lineHeight")+n,u.chars={};var p=o.getElementsByTagName("char"),x=g!==void 0&&g.trimmed;if(x)var y=g.height,T=g.width;for(var C=0;C<p.length;C++){var A=p[C],R=S(A,"id"),M=String.fromCharCode(R),L=S(A,"x"),I=S(A,"y"),O=S(A,"width"),D=S(A,"height");x&&(L<T&&(T=L),I<y&&(y=I)),x&&y!==0&&T!==0&&(L-=g.x,I-=g.y);var B=(e+L)/h,V=(s+I)/i,W=(e+L+O)/h,Y=(s+I+D)/i;if(u.chars[R]={x:L,y:I,width:O,height:D,centerX:Math.floor(O/2),centerY:Math.floor(D/2),xOffset:S(A,"xoffset"),yOffset:S(A,"yoffset"),xAdvance:S(A,"xadvance")+a,data:{},kerning:{},u0:B,v0:V,u1:W,v1:Y},r&&O!==0&&D!==0){var X=r.add(M,l,L,I,O,D);X&&X.setUVs(O,D,B,V,W,Y)}}var U=o.getElementsByTagName("kerning");for(C=0;C<U.length;C++){var z=U[C],G=S(z,"first"),b=S(z,"second"),H=S(z,"amount");u.chars[b].kerning[G]=H}return u};c.exports=t},196:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87662),g=t(79291),a={Parse:t(6925)};a=g(!1,a,o),c.exports=a},87662:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};c.exports=S},2638:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(83419),a=t(12310),n=new g({Extends:o,Mixins:[a],initialize:function(e,s,h,i,l,u,f){o.call(this,e,s,h,i,l,u,f),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(r,e){return this.cropWidth=r,this.cropHeight=e,this},setDisplayCallback:function(r){return this.displayCallback=r,this},setScrollX:function(r){return this.scrollX=r,this},setScrollY:function(r){return this.scrollY=r,this}});c.exports=n},86741:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20926),g=function(a,n,r,e){var s=n._text,h=s.length,i=a.currentContext;if(!(h===0||!o(a,i,n,r,e))){r.addToRenderList(n);var l=n.fromAtlas?n.frame:n.texture.frames.__BASE,u=n.displayCallback,f=n.callbackData,d=n.fontData.chars,p=n.fontData.lineHeight,x=n._letterSpacing,y=0,T=0,C=0,A=null,R=0,M=0,L=0,I=0,O=0,D=0,B=null,V=0,W=n.frame.source.image,Y=l.cutX,X=l.cutY,U=0,z=0,G=n._fontSize/n.fontData.size,b=n._align,H=0,j=0;n.getTextBounds(!1);var $=n._bounds.lines;b===1?j=($.longest-$.lengths[0])/2:b===2&&(j=$.longest-$.lengths[0]),i.translate(-n.displayOriginX,-n.displayOriginY);var k=r.roundPixels;n.cropWidth>0&&n.cropHeight>0&&(i.beginPath(),i.rect(0,0,n.cropWidth,n.cropHeight),i.clip());for(var Q=0;Q<h;Q++){if(z=G,U=0,C=s.charCodeAt(Q),C===10){H++,b===1?j=($.longest-$.lengths[H])/2:b===2&&(j=$.longest-$.lengths[H]),y=0,T+=p,B=null;continue}if(A=d[C],!!A){if(R=Y+A.x,M=X+A.y,L=A.width,I=A.height,O=A.xOffset+y-n.scrollX,D=A.yOffset+T-n.scrollY,B!==null){var _=A.kerning[V];O+=_!==void 0?_:0}if(u){f.index=Q,f.charCode=C,f.x=O,f.y=D,f.scale=z,f.rotation=U,f.data=A.data;var tt=u(f);O=tt.x,D=tt.y,z=tt.scale,U=tt.rotation}O*=z,D*=z,O+=j,y+=A.xAdvance+x+(_!==void 0?_:0),B=A,V=C,!(L===0||I===0||C===32)&&(k&&(O=Math.round(O),D=Math.round(D)),i.save(),i.translate(O,D),i.rotate(U),i.scale(z,z),i.drawImage(W,R,M,L,I,0,0,L,I),i.restore())}}i.restore()}};c.exports=g},11164:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2638),g=t(25305),a=t(44603),n=t(23568);a.register("dynamicBitmapText",function(r,e){r===void 0&&(r={});var s=n(r,"font",""),h=n(r,"text",""),i=n(r,"size",!1),l=new o(this.scene,0,0,s,h,i);return e!==void 0&&(r.add=e),g(this.scene,l,r),l})},72566:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2638),g=t(39429);g.register("dynamicBitmapText",function(a,n,r,e,s){return this.displayList.add(new o(this.scene,a,n,r,e,s))})},12310:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(73482),a=t(86741),c.exports={renderWebGL:g,renderCanvas:a}},73482:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(61340),a=t(70554),n=new g,r=function(e,s,h,i){var l=s.text,u=l.length;if(u!==0){h.addToRenderList(s);var f=e.pipelines.set(s.pipeline,s),d=o(s,h,i);e.pipelines.preBatch(s);var p=d.sprite,x=d.calc,y=n,T=s.cropWidth>0||s.cropHeight>0;T&&(f.flush(),e.pushScissor(x.tx,x.ty,s.cropWidth*x.scaleX,s.cropHeight*x.scaleY));var C=s.frame,A=C.glTexture,R=s.tintFill,M=a.getTintAppendFloatAlpha(s.tintTopLeft,h.alpha*s._alphaTL),L=a.getTintAppendFloatAlpha(s.tintTopRight,h.alpha*s._alphaTR),I=a.getTintAppendFloatAlpha(s.tintBottomLeft,h.alpha*s._alphaBL),O=a.getTintAppendFloatAlpha(s.tintBottomRight,h.alpha*s._alphaBR),D=f.setGameObject(s),B=0,V=0,W=0,Y=0,X=s.letterSpacing,U,z=0,G=0,b,H=s.scrollX,j=s.scrollY,$=s.fontData,k=$.chars,Q=$.lineHeight,_=s.fontSize/$.size,tt=0,et=s._align,it=0,ot=0,nt=s.getTextBounds(!1);s.maxWidth>0&&(l=nt.wrappedText,u=l.length);var ut=s._bounds.lines;et===1?ot=(ut.longest-ut.lengths[0])/2:et===2&&(ot=ut.longest-ut.lengths[0]);for(var ct=h.roundPixels,pt=s.displayCallback,mt=s.callbackData,ht=0;ht<u;ht++){if(W=l.charCodeAt(ht),W===10){it++,et===1?ot=(ut.longest-ut.lengths[it])/2:et===2&&(ot=ut.longest-ut.lengths[it]),B=0,V+=Q,b=null;continue}if(U=k[W],!!U){z=U.width,G=U.height;var ft=U.xOffset+B-H,dt=U.yOffset+V-j;if(b!==null){var Ct=U.kerning[Y]||0;ft+=Ct,B+=Ct}if(B+=U.xAdvance+X,b=U,Y=W,!(z===0||G===0||W===32)){if(_=s.fontSize/s.fontData.size,tt=0,pt){mt.color=0,mt.tint.topLeft=M,mt.tint.topRight=L,mt.tint.bottomLeft=I,mt.tint.bottomRight=O,mt.index=ht,mt.charCode=W,mt.x=ft,mt.y=dt,mt.scale=_,mt.rotation=tt,mt.data=U.data;var Lt=pt(mt);ft=Lt.x,dt=Lt.y,_=Lt.scale,tt=Lt.rotation,Lt.color?(M=Lt.color,L=Lt.color,I=Lt.color,O=Lt.color):(M=Lt.tint.topLeft,L=Lt.tint.topRight,I=Lt.tint.bottomLeft,O=Lt.tint.bottomRight),M=a.getTintAppendFloatAlpha(M,h.alpha*s._alphaTL),L=a.getTintAppendFloatAlpha(L,h.alpha*s._alphaTR),I=a.getTintAppendFloatAlpha(I,h.alpha*s._alphaBL),O=a.getTintAppendFloatAlpha(O,h.alpha*s._alphaBR)}ft*=_,dt*=_,ft-=s.displayOriginX,dt-=s.displayOriginY,ft+=ot,y.applyITRS(ft,dt,tt,_,_),x.multiply(y,p);var Xt=U.u0,Mt=U.v0,It=U.u1,kt=U.v1,ne=z,Ut=G,zt=p.e,Zt=p.f,ae=Ut*p.c+p.e,we=Ut*p.d+p.f,fi=ne*p.a+Ut*p.c+p.e,Ze=ne*p.b+Ut*p.d+p.f,di=ne*p.a+p.e,Ne=ne*p.b+p.f;ct&&(zt=Math.round(zt),Zt=Math.round(Zt),ae=Math.round(ae),we=Math.round(we),fi=Math.round(fi),Ze=Math.round(Ze),di=Math.round(di),Ne=Math.round(Ne)),f.shouldFlush(6)&&(f.flush(),D=f.setGameObject(s)),f.batchQuad(s,zt,Zt,ae,we,fi,Ze,di,Ne,Xt,Mt,It,kt,M,L,I,O,R,A,D)}}}T&&(f.flush(),e.popScissor()),e.pipelines.postBatch(s)}};c.exports=r},22186:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(31401),n=t(95643),r=t(53048),e=t(61327),s=t(21859),h=t(87841),i=t(18658),l=new o({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,i],initialize:function(f,d,p,x,y,T,C){y===void 0&&(y=""),C===void 0&&(C=0),n.call(this,f,"BitmapText"),this.font=x;var A=this.scene.sys.cache.bitmapFont.get(x);if(!A)throw new Error("Invalid BitmapText key: "+x);this.fontData=A.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=C,this._bounds=r(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=A.fromAtlas,this.setTexture(A.texture,A.frame),this.setPosition(d,p),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(y)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(u){return this._fontSize=u,this._dirty=!0,this},setLetterSpacing:function(u){return u===void 0&&(u=0),this._letterSpacing=u,this._dirty=!0,this},setLineSpacing:function(u){return u===void 0&&(u=0),this.lineSpacing=u,this},setText:function(u){return!u&&u!==0&&(u=""),Array.isArray(u)&&(u=u.join(`
`)),u!==this.text&&(this._text=u.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(u,f,d,p){return u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=.5),this.dropShadowX=u,this.dropShadowY=f,this.dropShadowColor=d,this.dropShadowAlpha=p,this},setCharacterTint:function(u,f,d,p,x,y,T){u===void 0&&(u=0),f===void 0&&(f=1),d===void 0&&(d=!1),p===void 0&&(p=-1),x===void 0&&(x=p,y=p,T=p);var C=this.text.length;f===-1&&(f=C),u<0&&(u=C+u),u=g(u,0,C-1);for(var A=g(u+f,u,C),R=this.charColors,M=u;M<A;M++){var L=R[M];if(p===-1)R[M]=null;else{var I=d?1:0;L?(L.tintEffect=I,L.tintTL=p,L.tintTR=x,L.tintBL=y,L.tintBR=T):R[M]={tintEffect:I,tintTL:p,tintTR:x,tintBL:y,tintBR:T}}}return this},setWordTint:function(u,f,d,p,x,y,T){f===void 0&&(f=1);for(var C=this.getTextBounds(),A=C.words,R=typeof u=="number",M=0,L=0;L<A.length;L++){var I=A[L];if((R&&L===u||!R&&I.word===u)&&(this.setCharacterTint(I.i,I.word.length,d,p,x,y,T),M++,M===f))return this}return this},getTextBounds:function(u){var f=this._bounds;return(this._dirty||u||this.scaleX!==f.scaleX||this.scaleY!==f.scaleY)&&(r(this,u,!0,f),this._dirty=!1),f},getCharacterAt:function(u,f,d){for(var p=this.getLocalPoint(u,f,null,d),x=this.getTextBounds(),y=x.characters,T=new h,C=0;C<y.length;C++){var A=y[C];if(T.setTo(A.x,A.t,A.r-A.x,A.b),T.contains(p.x,p.y))return A}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(u,f,d){f===void 0&&(f=this._fontSize),d===void 0&&(d=this._align);var p=this.scene.sys.cache.bitmapFont.get(u);return p&&(this.font=u,this.fontData=p.data,this._fontSize=f,this._align=d,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),r(this,!1,!0,this._bounds)),this},setMaxWidth:function(u,f){return this._maxWidth=u,this._dirty=!0,f!==void 0&&(this.wordWrapCharCode=f),this},align:{set:function(u){this._align=u,this._dirty=!0},get:function(){return this._align}},text:{set:function(u){this.setText(u)},get:function(){return this._text}},fontSize:{set:function(u){this._fontSize=u,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(u){this._letterSpacing=u,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(u){this._lineSpacing=u,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(u){this._maxWidth=u,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var u=a.ToJSON(this),f={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return u.data=f,u},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=e,l.ParseXMLBitmapFont=s,c.exports=l},37289:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20926),g=function(a,n,r,e){var s=n._text,h=s.length,i=a.currentContext;if(!(h===0||!o(a,i,n,r,e))){r.addToRenderList(n);var l=n.fromAtlas?n.frame:n.texture.frames.__BASE,u=n.fontData.chars,f=n.fontData.lineHeight,d=n._letterSpacing,p=n._lineSpacing,x=0,y=0,T=0,C=null,A=0,R=0,M=0,L=0,I=0,O=0,D=null,B=0,V=l.source.image,W=l.cutX,Y=l.cutY,X=n._fontSize/n.fontData.size,U=n._align,z=0,G=0,b=n.getTextBounds(!1);n.maxWidth>0&&(s=b.wrappedText,h=s.length);var H=n._bounds.lines;U===1?G=(H.longest-H.lengths[0])/2:U===2&&(G=H.longest-H.lengths[0]),i.translate(-n.displayOriginX,-n.displayOriginY);for(var j=r.roundPixels,$=0;$<h;$++){if(T=s.charCodeAt($),T===10){z++,U===1?G=(H.longest-H.lengths[z])/2:U===2&&(G=H.longest-H.lengths[z]),x=0,y+=f+p,D=null;continue}if(C=u[T],!!C){if(A=W+C.x,R=Y+C.y,M=C.width,L=C.height,I=C.xOffset+x,O=C.yOffset+y,D!==null){var k=C.kerning[B];I+=k!==void 0?k:0}I*=X,O*=X,I+=G,x+=C.xAdvance+d+(k!==void 0?k:0),D=C,B=T,!(M===0||L===0||T===32)&&(j&&(I=Math.round(I),O=Math.round(O)),i.save(),i.translate(I,O),i.scale(X,X),i.drawImage(V,A,R,M,L,0,0,M,L),i.restore())}}i.restore()}};c.exports=g},57336:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(25305),a=t(44603),n=t(23568),r=t(35154);a.register("bitmapText",function(e,s){e===void 0&&(e={});var h=r(e,"font",""),i=n(e,"text",""),l=n(e,"size",!1),u=r(e,"align",0),f=new o(this.scene,0,0,h,i,l,u);return s!==void 0&&(e.add=s),g(this.scene,f,e),f})},34914:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(39429);g.register("bitmapText",function(a,n,r,e,s,h){return this.displayList.add(new o(this.scene,a,n,r,e,s,h))})},18658:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(33590),a=t(37289),c.exports={renderWebGL:g,renderCanvas:a}},33590:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3217),g=t(91296),a=t(70554),n=function(r,e,s,h){var i=e._text,l=i.length;if(l!==0){s.addToRenderList(e);var u=r.pipelines.set(e.pipeline,e),f=g(e,s,h).calc;r.pipelines.preBatch(e);var d=s.roundPixels,p=s.alpha,x=e.charColors,y=e.tintFill,T=a.getTintAppendFloatAlpha,C=T(e.tintTopLeft,p*e._alphaTL),A=T(e.tintTopRight,p*e._alphaTR),R=T(e.tintBottomLeft,p*e._alphaBL),M=T(e.tintBottomRight,p*e._alphaBR),L=e.frame.glTexture,I=u.setGameObject(e),O=e.getTextBounds(!1),D,B,V,W=O.characters,Y=e.dropShadowX,X=e.dropShadowY,U=Y!==0||X!==0;if(U){var z=e.dropShadowColor,G=e.dropShadowAlpha,b=T(z,p*G*e._alphaTL),H=T(z,p*G*e._alphaTR),j=T(z,p*G*e._alphaBL),$=T(z,p*G*e._alphaBR);for(D=0;D<W.length;D++)B=W[D],V=B.glyph,!(B.code===32||V.width===0||V.height===0)&&o(u,e,B,V,Y,X,f,d,b,H,j,$,1,L,I)}for(D=0;D<W.length;D++)if(B=W[D],V=B.glyph,!(B.code===32||V.width===0||V.height===0))if(u.shouldFlush(6)&&(u.flush(),I=u.setGameObject(e)),x[B.i]){var k=x[B.i],Q=k.tintEffect,_=T(k.tintTL,p*e._alphaTL),tt=T(k.tintTR,p*e._alphaTR),et=T(k.tintBL,p*e._alphaBL),it=T(k.tintBR,p*e._alphaBR);o(u,e,B,V,0,0,f,d,_,tt,et,it,Q,L,I)}else o(u,e,B,V,0,0,f,d,C,A,R,M,y,L,I);r.pipelines.postBatch(e)}};c.exports=n},6107:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(48011),g=t(46590),a=t(83419),n=t(31401),r=t(4327),e=t(95643),s=t(73162),h=new a({Extends:e,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.Texture,n.Transform,n.Visible,o],initialize:function(l,u,f,d,p){e.call(this,l,"Blitter"),this.setTexture(d,p),this.setPosition(u,f),this.initPipeline(),this.initPostPipeline(),this.children=new s,this.renderList=[],this.dirty=!1},create:function(i,l,u,f,d){f===void 0&&(f=!0),d===void 0&&(d=this.children.length),u===void 0?u=this.frame:u instanceof r||(u=this.texture.get(u));var p=new g(this,i,l,u,f);return this.children.addAt(p,d,!1),this.dirty=!0,p},createFromCallback:function(i,l,u,f){for(var d=this.createMultiple(l,u,f),p=0;p<d.length;p++){var x=d[p];i.call(this,x,p)}return d},createMultiple:function(i,l,u){l===void 0&&(l=this.frame.name),u===void 0&&(u=!0),Array.isArray(l)||(l=[l]);var f=[],d=this;return l.forEach(function(p){for(var x=0;x<i;x++)f.push(d.create(0,0,p,u))}),f},childCanRender:function(i){return i.visible&&i.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});c.exports=h},72396:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=o.getRenderList();if(n.length!==0){var r=t.currentContext,e=g.alpha*o.alpha;if(e!==0){g.addToRenderList(o),r.globalCompositeOperation=t.blendModes[o.blendMode],r.imageSmoothingEnabled=!o.frame.source.scaleMode;var s=o.x-g.scrollX*o.scrollFactorX,h=o.y-g.scrollY*o.scrollFactorY;r.save(),a&&a.copyToContext(r);for(var i=g.roundPixels,l=0;l<n.length;l++){var u=n[l],f=u.flipX||u.flipY,d=u.frame,p=d.canvasData,x=d.x,y=d.y,T=1,C=1,A=u.alpha*e;A!==0&&(r.globalAlpha=A,f?(u.flipX&&(T=-1,x-=p.width),u.flipY&&(C=-1,y-=p.height),p.width>0&&p.height>0&&(r.save(),r.translate(u.x+s,u.y+h),r.scale(T,C),r.drawImage(d.source.image,p.x,p.y,p.width,p.height,x,y,p.width,p.height),r.restore())):(i&&(x=Math.round(x),y=Math.round(y)),p.width>0&&p.height>0&&r.drawImage(d.source.image,p.x,p.y,p.width,p.height,x+u.x+s,y+u.y+h,p.width,p.height)))}r.restore()}}};c.exports=S},9403:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6107),g=t(25305),a=t(44603),n=t(23568);a.register("blitter",function(r,e){r===void 0&&(r={});var s=n(r,"key",null),h=n(r,"frame",null),i=new o(this.scene,0,0,s,h);return e!==void 0&&(r.add=e),g(this.scene,i,r),i})},12709:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6107),g=t(39429);g.register("blitter",function(a,n,r,e){return this.displayList.add(new o(this.scene,a,n,r,e))})},48011:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99485),a=t(72396),c.exports={renderWebGL:g,renderCanvas:a}},99485:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=t(70554),a=new o,n=function(r,e,s,h){var i=e.getRenderList(),l=s.alpha*e.alpha;if(!(i.length===0||l===0)){s.addToRenderList(e);var u=r.pipelines.set(this.pipeline,e),f=s.scrollX*e.scrollFactorX,d=s.scrollY*e.scrollFactorY,p=a.copyFrom(s.matrix);h&&(p.multiplyWithOffset(h,-f,-d),f=0,d=0);var x=e.x-f,y=e.y-d,T=-1,C=!1,A=s.roundPixels;r.pipelines.preBatch(e);for(var R=0;R<i.length;R++){var M=i[R],L=M.frame,I=M.alpha*l;if(I!==0){var O=L.width,D=L.height,B=x+M.x+L.x,V=y+M.y+L.y;M.flipX&&(O*=-1,B+=L.width),M.flipY&&(D*=-1,V+=L.height);var W=p.setQuad(B,V,B+O,V+D,A),Y=g.getTintAppendFloatAlpha(M.tint,I);if(L.sourceIndex!==T){var X=u.setGameObject(e,L);T=L.sourceIndex}u.batchQuad(e,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],L.u0,L.v0,L.u1,L.v1,Y,Y,Y,Y,C,L.glTexture,X)&&(T=-1)}}r.pipelines.postBatch(e)}};c.exports=n},46590:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(4327),a=new o({initialize:function(r,e,s,h,i){this.parent=r,this.x=e,this.y=s,this.frame=h,this.data={},this.tint=16777215,this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(n){return n===void 0?this.frame=this.parent.frame:n instanceof g&&n.texture===this.parent.texture?this.frame=n:this.frame=this.parent.texture.get(n),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(n,r,e){return this.x=n,this.y=r,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,e&&this.setFrame(e),this},setPosition:function(n,r){return this.x=n,this.y=r,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,r){return this.flipX=n,this.flipY=r,this},setVisible:function(n){return this.visible=n,this},setAlpha:function(n){return this.alpha=n,this},setTint:function(n){return this.tint=n,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(n){this.parent.dirty|=this._visible!==n,this._visible=n}},alpha:{get:function(){return this._alpha},set:function(n){this.parent.dirty|=this._alpha>0!=n>0,this._alpha=n}}});c.exports=a},16005:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(n,r,e,s){return n===void 0&&(n=1),r===void 0?this.alpha=n:(this._alphaTL=o(n,0,1),this._alphaTR=o(r,0,1),this._alphaBL=o(e,0,1),this._alphaBR=o(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(n){var r=o(n,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(n){var r=o(n,0,1);this._alphaTL=r,r!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(n){var r=o(n,0,1);this._alphaTR=r,r!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(n){var r=o(n,0,1);this._alphaBL=r,r!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(n){var r=o(n,0,1);this._alphaBR=r,r!==0&&(this.renderFlags|=g)}}};c.exports=a},88509:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(n){return n===void 0&&(n=1),this.alpha=n,this},alpha:{get:function(){return this._alpha},set:function(n){var r=o(n,0,1);this._alpha=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}}};c.exports=a},90065:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=o[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};c.exports=g},94215:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,o){return this.width=t,this.height=o,this},setDisplaySize:function(t,o){return this.displayWidth=t,this.displayHeight=o,this}};c.exports=S},61683:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={texture:null,frame:null,isCropped:!1,setCrop:function(t,o,g,a){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,o,g,a,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};c.exports=S},89272:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37105),g={_depth:0,depth:{get:function(){return this._depth},set:function(a){this.displayList&&this.displayList.queueDepthSort(),this._depth=a}},setDepth:function(a){return a===void 0&&(a=0),this.depth=a,this},setToTop:function(){var a=this.getDisplayList();return a&&o.BringToTop(a,this),this},setToBack:function(){var a=this.getDisplayList();return a&&o.SendToBack(a,this),this},setAbove:function(a){var n=this.getDisplayList();return n&&a&&o.MoveAbove(n,this,a),this},setBelow:function(a){var n=this.getDisplayList();return n&&a&&o.MoveBelow(n,this,a),this}};c.exports=g},47059:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(66064),a=t(19133),n=new o({initialize:function(e,s){this.gameObject=e,this.isPost=s,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(r){return r===void 0&&(r=0),this.padding=r,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(r){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,r!==void 0&&(this.padding=r),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var r=this.list,e=0;e<r.length;e++)r[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(r){var e;if(this.isPost){var s=this.gameObject.getPostPipeline(String(r.type));for(Array.isArray(s)||(s=[s]),e=0;e<s.length;e++){var h=s[e];if(h.controller===r){this.gameObject.removePostPipeline(h),r.destroy();break}}}else{var i=this.list;for(e=0;e<i.length;e++)i[e]===r&&(a(i,e),r.destroy())}return this.gameObject},disable:function(r){return r===void 0&&(r=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,r&&this.clear(),this.gameObject},add:function(r,e){if(this.isPost){var s=String(r.type);this.gameObject.setPostPipeline(s,e);var h=this.gameObject.getPostPipeline(s);if(h)return Array.isArray(h)&&(h=h.pop()),h&&(h.controller=r),r}else return this.enabled||this.enable(),this.list.push(r),r},addGlow:function(r,e,s,h,i,l){return this.add(new g.Glow(this.gameObject,r,e,s,h),{quality:i,distance:l})},addShadow:function(r,e,s,h,i,l,u){return this.add(new g.Shadow(this.gameObject,r,e,s,h,i,l,u))},addPixelate:function(r){return this.add(new g.Pixelate(this.gameObject,r))},addVignette:function(r,e,s,h){return this.add(new g.Vignette(this.gameObject,r,e,s,h))},addShine:function(r,e,s,h){return this.add(new g.Shine(this.gameObject,r,e,s,h))},addBlur:function(r,e,s,h,i,l){return this.add(new g.Blur(this.gameObject,r,e,s,h,i,l))},addGradient:function(r,e,s,h,i,l,u,f){return this.add(new g.Gradient(this.gameObject,r,e,s,h,i,l,u,f))},addBloom:function(r,e,s,h,i,l){return this.add(new g.Bloom(this.gameObject,r,e,s,h,i,l))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(r,e,s,h,i){return this.add(new g.Circle(this.gameObject,r,e,s,h,i))},addBarrel:function(r){return this.add(new g.Barrel(this.gameObject,r))},addDisplacement:function(r,e,s){return this.add(new g.Displacement(this.gameObject,r,e,s))},addWipe:function(r,e,s){return this.add(new g.Wipe(this.gameObject,r,e,s))},addReveal:function(r,e,s){return this.add(new g.Wipe(this.gameObject,r,e,s,!0))},addBokeh:function(r,e,s){return this.add(new g.Bokeh(this.gameObject,r,e,s))},addTiltShift:function(r,e,s,h,i,l){return this.add(new g.Bokeh(this.gameObject,r,e,s,!0,h,i,l))},destroy:function(){this.clear(),this.gameObject=null}});c.exports=n},54434:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,o){return this.flipX=t,this.flipY=o,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};c.exports=S},8004:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(11520),a=t(26099),n={prepareBoundsOutput:function(r,e){if(e===void 0&&(e=!1),this.rotation!==0&&g(r,this.x,this.y,this.rotation),e&&this.parentContainer){var s=this.parentContainer.getBoundsTransformMatrix();s.transformPoint(r.x,r.y,r)}return r},getCenter:function(r,e){return r===void 0&&(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getTopLeft:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopCenter:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopRight:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getLeftCenter:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getRightCenter:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getBottomLeft:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomCenter:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomRight:function(r,e){return r||(r=new a),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBounds:function(r){r===void 0&&(r=new o);var e,s,h,i,l,u,f,d;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(r),p.transformPoint(r.x,r.y,r),e=r.x,s=r.y,this.getTopRight(r),p.transformPoint(r.x,r.y,r),h=r.x,i=r.y,this.getBottomLeft(r),p.transformPoint(r.x,r.y,r),l=r.x,u=r.y,this.getBottomRight(r),p.transformPoint(r.x,r.y,r),f=r.x,d=r.y}else this.getTopLeft(r),e=r.x,s=r.y,this.getTopRight(r),h=r.x,i=r.y,this.getBottomLeft(r),l=r.x,u=r.y,this.getBottomRight(r),f=r.x,d=r.y;return r.x=Math.min(e,h,l,f),r.y=Math.min(s,i,u,d),r.width=Math.max(e,h,l,f)-r.x,r.height=Math.max(s,i,u,d)-r.y,r}};c.exports=n},8573:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6858),g=t(80661),a={mask:null,setMask:function(n){return this.mask=n,this},clearMask:function(n){return n===void 0&&(n=!1),n&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(n,r,e,s,h){return n===void 0&&(this.texture||this.shader||this.geom)&&(n=this),new o(this.scene,n,r,e,s,h)},createGeometryMask:function(n){return n===void 0&&(this.type==="Graphics"||this.geom)&&(n=this),new g(this.scene,n)}};c.exports=a},27387:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,o){return t===void 0&&(t=.5),o===void 0&&(o=t),this.originX=t,this.originY=o,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,o){return t===void 0&&(t=0),o===void 0&&(o=t),this.displayOriginX=t,this.displayOriginY=o,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};c.exports=S},37640:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39506),g=t(57355),a=t(35154),n=t(86353),r=t(26099),e={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:n.PLAYING_FORWARD,setPath:function(s,h){h===void 0&&(h=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=s,h&&this.startFollow(h),this},setRotateToPath:function(s,h){return h===void 0&&(h=0),this.rotateToPath=s,this.pathRotationOffset=h,this},isFollowing:function(){var s=this.pathTween;return s&&s.isPlaying()},startFollow:function(s,h){s===void 0&&(s={}),h===void 0&&(h=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof s=="number"&&(s={duration:s}),s.from=a(s,"from",0),s.to=a(s,"to",1);var l=g(s,"positionOnPath",!1);this.rotateToPath=g(s,"rotateToPath",!1),this.pathRotationOffset=a(s,"rotationOffset",0);var u=a(s,"startAt",h);if(u&&(s.onStart=function(d){var p=d.data[0];p.progress=u,p.elapsed=p.duration*u;var x=p.ease(p.progress);p.current=p.start+(p.end-p.start)*x,p.setTargetValue()}),this.pathOffset||(this.pathOffset=new r(this.x,this.y)),this.pathVector||(this.pathVector=new r),this.pathDelta||(this.pathDelta=new r),this.pathDelta.reset(),s.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(s),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=n.PLAYING_FORWARD,this.rotateToPath){var f=this.path.getPoint(.1);this.rotation=Math.atan2(f.y-this.y,f.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=s,this},pauseFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.pause(),this},resumeFollow:function(){var s=this.pathTween;return s&&s.isPaused()&&s.resume(),this},stopFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this},pathUpdate:function(){var s=this.pathTween;if(s&&s.data){var h=s.data[0],i=this.pathDelta,l=this.pathVector;if(i.copy(l).negate(),h.state===n.COMPLETE){this.path.getPoint(h.end,l),i.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(h.state!==n.PLAYING_FORWARD&&h.state!==n.PLAYING_BACKWARD)return;this.path.getPoint(s.getValue(),l),i.add(l),l.add(this.pathOffset);var u=this.x,f=this.y;this.setPosition(l.x,l.y);var d=this.x-u,p=this.y-f;if(d===0&&p===0)return;if(h.state!==this._prevDirection){this._prevDirection=h.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,d)+o(this.pathRotationOffset))}}};c.exports=e},72699:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(a){this.pipelineData={};var n=this.scene.sys.renderer;if(!n)return!1;var r=n.pipelines;if(r){a===void 0&&(a=r.default);var e=r.get(a);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}return!1},setPipeline:function(a,n,r){var e=this.scene.sys.renderer;if(!e)return this;var s=e.pipelines;if(s){var h=s.get(a);h&&(this.pipeline=h),n&&(this.pipelineData=r?o(n):n)}return this},setPipelineData:function(a,n){var r=this.pipelineData;return n===void 0?delete r[a]:r[a]=n,this},resetPipeline:function(a){return a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,a&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};c.exports=g},17581:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g=t(47059),a=t(19133),n={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(r){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),r&&(this.preFX=new g(this,!1))},setPostPipeline:function(r,e,s){var h=this.scene.sys.renderer;if(!h)return this;var i=h.pipelines;if(i){Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var u=i.getPostPipeline(r[l],this,e);u&&this.postPipelines.push(u)}e&&(this.postPipelineData=s?o(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(r,e){var s=this.postPipelineData;return e===void 0?delete s[r]:s[r]=e,this},getPostPipeline:function(r){for(var e=typeof r=="string",s=this.postPipelines,h=[],i=0;i<s.length;i++){var l=s[i];(e&&l.name===r||!e&&l instanceof r)&&h.push(l)}return h.length===1?h[0]:h},resetPostPipeline:function(r){r===void 0&&(r=!1);for(var e=this.postPipelines,s=0;s<e.length;s++)e[s].destroy();this.postPipelines=[],this.hasPostPipeline=!1,r&&(this.postPipelineData={})},removePostPipeline:function(r){for(var e=typeof r=="string",s=this.postPipelines,h=s.length-1;h>=0;h--){var i=s[h];(e&&i.name===r||!e&&i===r)&&(i.destroy(),a(s,h))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};c.exports=n},80227:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,o){return o===void 0&&(o=t),this.scrollFactorX=t,this.scrollFactorY=o,this}};c.exports=S},16736:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setSize:function(t,o){return this.width=t,this.height=o,this},setDisplaySize:function(t,o){return this.displayWidth=t,this.displayHeight=o,this}};c.exports=S},37726:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4327),g=8,a={texture:null,frame:null,isCropped:!1,setTexture:function(n,r,e,s){return this.texture=this.scene.sys.textures.get(n),this.setFrame(r,e,s)},setFrame:function(n,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),n instanceof o?(this.texture=this.scene.sys.textures.get(n.texture.key),this.frame=n):this.frame=this.texture.get(n),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};c.exports=a},79812:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4327),g=8,a={texture:null,frame:null,isCropped:!1,setCrop:function(n,r,e,s){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,r,e,s,this.flipX,this.flipY);else{var h=n;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(n,r){return this.texture=this.scene.sys.textures.get(n),this.setFrame(r)},setFrame:function(n,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),n instanceof o?(this.texture=this.scene.sys.textures.get(n.texture.key),this.frame=n):this.frame=this.texture.get(n),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};c.exports=a},27472:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,o,g,a){return t===void 0&&(t=16777215),o===void 0&&(o=t,g=t,a=t),this.tintTopLeft=t,this.tintTopRight=o,this.tintBottomLeft=g,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(t,o,g,a){return this.setTint(t,o,g,a),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};c.exports=S},53774:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(o.textureKey=t.texture.key,o.frameKey=t.frame.name),o};c.exports=S},16901:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(61340),a=t(85955),n=t(86554),r=t(30954),e=t(26099),s=4,h={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(i){this._scaleX=i,this._scaleY=i,i===0?this.renderFlags&=~s:this.renderFlags|=s}},scaleX:{get:function(){return this._scaleX},set:function(i){this._scaleX=i,i===0?this.renderFlags&=~s:this._scaleY!==0&&(this.renderFlags|=s)}},scaleY:{get:function(){return this._scaleY},set:function(i){this._scaleY=i,i===0?this.renderFlags&=~s:this._scaleX!==0&&(this.renderFlags|=s)}},angle:{get:function(){return r(this._rotation*o.RAD_TO_DEG)},set:function(i){this.rotation=r(i)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(i){this._rotation=n(i)}},setPosition:function(i,l,u,f){return i===void 0&&(i=0),l===void 0&&(l=i),u===void 0&&(u=0),f===void 0&&(f=0),this.x=i,this.y=l,this.z=u,this.w=f,this},copyPosition:function(i){return i.x!==void 0&&(this.x=i.x),i.y!==void 0&&(this.y=i.y),i.z!==void 0&&(this.z=i.z),i.w!==void 0&&(this.w=i.w),this},setRandomPosition:function(i,l,u,f){return i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=this.scene.sys.scale.width),f===void 0&&(f=this.scene.sys.scale.height),this.x=i+Math.random()*u,this.y=l+Math.random()*f,this},setRotation:function(i){return i===void 0&&(i=0),this.rotation=i,this},setAngle:function(i){return i===void 0&&(i=0),this.angle=i,this},setScale:function(i,l){return i===void 0&&(i=1),l===void 0&&(l=i),this.scaleX=i,this.scaleY=l,this},setX:function(i){return i===void 0&&(i=0),this.x=i,this},setY:function(i){return i===void 0&&(i=0),this.y=i,this},setZ:function(i){return i===void 0&&(i=0),this.z=i,this},setW:function(i){return i===void 0&&(i=0),this.w=i,this},getLocalTransformMatrix:function(i){return i===void 0&&(i=new g),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(i,l){i===void 0&&(i=new g);var u=this.parentContainer;if(!u)return this.getLocalTransformMatrix(i);for(l||(l=new g),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);u;)l.applyITRS(u.x,u.y,u._rotation,u._scaleX,u._scaleY),l.multiply(i,i),u=u.parentContainer;return i},getLocalPoint:function(i,l,u,f){u||(u=new e),f||(f=this.scene.sys.cameras.main);var d=f.scrollX,p=f.scrollY,x=i+d*this.scrollFactorX-d,y=l+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(x,y,u):a(x,y,this.x,this.y,this.rotation,this.scaleX,this.scaleY,u),this._originComponent&&(u.x+=this._displayOriginX,u.y+=this._displayOriginY),u},getParentRotation:function(){for(var i=0,l=this.parentContainer;l;)i+=l.rotation,l=l.parentContainer;return i}};c.exports=h},61340:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36383),a=t(26099),n=new o({initialize:function(e,s,h,i,l,u){e===void 0&&(e=1),s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=1),l===void 0&&(l=0),u===void 0&&(u=0),this.matrix=new Float32Array([e,s,h,i,l,u,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(r){this.matrix[0]=r}},b:{get:function(){return this.matrix[1]},set:function(r){this.matrix[1]=r}},c:{get:function(){return this.matrix[2]},set:function(r){this.matrix[2]=r}},d:{get:function(){return this.matrix[3]},set:function(r){this.matrix[3]=r}},e:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},f:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},tx:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},ty:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var r=this.matrix,e=r[0],s=r[1],h=r[2],i=r[3];return e||s?s>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):h||i?g.TAU-(i>0?Math.acos(-h/this.scaleY):-Math.acos(h/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var r=this.matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,this},translate:function(r,e){var s=this.matrix;return s[4]=s[0]*r+s[2]*e+s[4],s[5]=s[1]*r+s[3]*e+s[5],this},scale:function(r,e){var s=this.matrix;return s[0]*=r,s[1]*=r,s[2]*=e,s[3]*=e,this},rotate:function(r){var e=Math.sin(r),s=Math.cos(r),h=this.matrix,i=h[0],l=h[1],u=h[2],f=h[3];return h[0]=i*s+u*e,h[1]=l*s+f*e,h[2]=i*-e+u*s,h[3]=l*-e+f*s,this},multiply:function(r,e){var s=this.matrix,h=r.matrix,i=s[0],l=s[1],u=s[2],f=s[3],d=s[4],p=s[5],x=h[0],y=h[1],T=h[2],C=h[3],A=h[4],R=h[5],M=e===void 0?s:e.matrix;return M[0]=x*i+y*u,M[1]=x*l+y*f,M[2]=T*i+C*u,M[3]=T*l+C*f,M[4]=A*i+R*u+d,M[5]=A*l+R*f+p,M},multiplyWithOffset:function(r,e,s){var h=this.matrix,i=r.matrix,l=h[0],u=h[1],f=h[2],d=h[3],p=h[4],x=h[5],y=e*l+s*f+p,T=e*u+s*d+x,C=i[0],A=i[1],R=i[2],M=i[3],L=i[4],I=i[5];return h[0]=C*l+A*f,h[1]=C*u+A*d,h[2]=R*l+M*f,h[3]=R*u+M*d,h[4]=L*l+I*f+y,h[5]=L*u+I*d+T,this},transform:function(r,e,s,h,i,l){var u=this.matrix,f=u[0],d=u[1],p=u[2],x=u[3],y=u[4],T=u[5];return u[0]=r*f+e*p,u[1]=r*d+e*x,u[2]=s*f+h*p,u[3]=s*d+h*x,u[4]=i*f+l*p+y,u[5]=i*d+l*x+T,this},transformPoint:function(r,e,s){s===void 0&&(s={x:0,y:0});var h=this.matrix,i=h[0],l=h[1],u=h[2],f=h[3],d=h[4],p=h[5];return s.x=r*i+e*u+d,s.y=r*l+e*f+p,s},invert:function(){var r=this.matrix,e=r[0],s=r[1],h=r[2],i=r[3],l=r[4],u=r[5],f=e*i-s*h;return r[0]=i/f,r[1]=-s/f,r[2]=-h/f,r[3]=e/f,r[4]=(h*u-i*l)/f,r[5]=-(e*u-s*l)/f,this},copyFrom:function(r){var e=this.matrix;return e[0]=r.a,e[1]=r.b,e[2]=r.c,e[3]=r.d,e[4]=r.e,e[5]=r.f,this},copyFromArray:function(r){var e=this.matrix;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],this},copyToContext:function(r){var e=this.matrix;return r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),r},setToContext:function(r){return r.setTransform(this),r},copyToArray:function(r){var e=this.matrix;return r===void 0?r=[e[0],e[1],e[2],e[3],e[4],e[5]]:(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},setTransform:function(r,e,s,h,i,l){var u=this.matrix;return u[0]=r,u[1]=e,u[2]=s,u[3]=h,u[4]=i,u[5]=l,this},decomposeMatrix:function(){var r=this.decomposedMatrix,e=this.matrix,s=e[0],h=e[1],i=e[2],l=e[3],u=s*l-h*i;if(r.translateX=e[4],r.translateY=e[5],s||h){var f=Math.sqrt(s*s+h*h);r.rotation=h>0?Math.acos(s/f):-Math.acos(s/f),r.scaleX=f,r.scaleY=u/f}else if(i||l){var d=Math.sqrt(i*i+l*l);r.rotation=Math.PI*.5-(l>0?Math.acos(-i/d):-Math.acos(i/d)),r.scaleX=u/d,r.scaleY=d}else r.rotation=0,r.scaleX=0,r.scaleY=0;return r},applyITRS:function(r,e,s,h,i){var l=this.matrix,u=Math.sin(s),f=Math.cos(s);return l[4]=r,l[5]=e,l[0]=f*h,l[1]=u*h,l[2]=-u*i,l[3]=f*i,this},applyInverse:function(r,e,s){s===void 0&&(s=new a);var h=this.matrix,i=h[0],l=h[1],u=h[2],f=h[3],d=h[4],p=h[5],x=1/(i*f+u*-l);return s.x=f*x*r+-u*x*e+(p*u-d*f)*x,s.y=i*x*e+-l*x*r+(-p*i+d*l)*x,s},setQuad:function(r,e,s,h,i,l){i===void 0&&(i=!1),l===void 0&&(l=this.quad);var u=this.matrix,f=u[0],d=u[1],p=u[2],x=u[3],y=u[4],T=u[5],C=r*f+e*p+y,A=r*d+e*x+T,R=r*f+h*p+y,M=r*d+h*x+T,L=s*f+h*p+y,I=s*d+h*x+T,O=s*f+e*p+y,D=s*d+e*x+T;if(i){var B=Math.floor(C+.5),V=Math.floor(A+.5),W=B-C,Y=V-A;l[0]=B,l[1]=V,l[2]=R+W,l[3]=M+Y,l[4]=L+W,l[5]=I+Y,l[6]=O+W,l[7]=D+Y}else l[0]=C,l[1]=A,l[2]=R,l[3]=M,l[4]=L,l[5]=I,l[6]=O,l[7]=D;return l},getX:function(r,e){return r*this.a+e*this.c+this.e},getY:function(r,e){return r*this.b+e*this.d+this.f},getXRound:function(r,e,s){var h=this.getX(r,e);return s&&(h=Math.floor(h+.5)),h},getYRound:function(r,e,s){var h=this.getY(r,e);return s&&(h=Math.floor(h+.5)),h},getCSSMatrix:function(){var r=this.matrix;return"matrix("+r[0]+","+r[1]+","+r[2]+","+r[3]+","+r[4]+","+r[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});c.exports=n},59715:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=S):(this._visible=!1,this.renderFlags&=~S)}},setVisible:function(o){return this.visible=o,this}};c.exports=t},31401:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Alpha:t(16005),AlphaSingle:t(88509),BlendMode:t(90065),ComputedSize:t(94215),Crop:t(61683),Depth:t(89272),Flip:t(54434),FX:t(47059),GetBounds:t(8004),Mask:t(8573),Origin:t(27387),PathFollower:t(37640),Pipeline:t(72699),PostPipeline:t(17581),ScrollFactor:t(80227),Size:t(16736),Texture:t(37726),TextureCrop:t(79812),Tint:t(27472),ToJSON:t(53774),Transform:t(16901),TransformMatrix:t(61340),Visible:t(59715)}},31559:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37105),g=t(10312),a=t(83419),n=t(31401),r=t(51708),e=t(95643),s=t(87841),h=t(29959),i=t(36899),l=t(26099),u=new n.TransformMatrix,f=new a({Extends:e,Mixins:[n.AlphaSingle,n.BlendMode,n.ComputedSize,n.Depth,n.Mask,n.PostPipeline,n.Transform,n.Visible,h],initialize:function(p,x,y,T){e.call(this,p,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new n.TransformMatrix,this._sortKey="",this._sysEvents=p.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(x,y),this.setBlendMode(g.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(d){return d===void 0&&(d=!0),this.exclusive=d,this},getBounds:function(d){if(d===void 0&&(d=new s),d.setTo(this.x,this.y,0,0),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix(),x=p.transformPoint(this.x,this.y);d.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new s,C=!1;d.setEmpty();for(var A=0;A<y.length;A++){var R=y[A];R.getBounds&&(R.getBounds(T),C?i(T,d,d):(d.setTo(T.x,T.y,T.width,T.height),C=!0))}}return d},addHandler:function(d){d.once(r.DESTROY,this.onChildDestroyed,this),this.exclusive&&(d.parentContainer&&d.parentContainer.remove(d),d.parentContainer=this,d.removeFromDisplayList(),d.addedToScene())},removeHandler:function(d){d.off(r.DESTROY,this.remove,this),this.exclusive&&(d.parentContainer=null,d.removedFromScene(),d.addToDisplayList())},pointToContainer:function(d,p){p===void 0&&(p=new l),this.parentContainer?this.parentContainer.pointToContainer(d,p):(p.x=d.x,p.y=d.y);var x=u;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(d.x,d.y,p),p},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(u,this.localTransform)},add:function(d){return o.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,p){return o.AddAt(this.list,d,p,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,p){return d?(p===void 0&&(p=function(x,y){return x[d]-y[d]}),o.StableSort(this.list,p),this):this},getByName:function(d){return o.GetFirst(this.list,"name",d)},getRandom:function(d,p){return o.GetRandom(this.list,d,p)},getFirst:function(d,p,x,y){return o.GetFirst(this.list,d,p,x,y)},getAll:function(d,p,x,y){return o.GetAll(this.list,d,p,x,y)},count:function(d,p,x,y){return o.CountAllMatching(this.list,d,p,x,y)},swap:function(d,p){return o.Swap(this.list,d,p),this},moveTo:function(d,p){return o.MoveTo(this.list,d,p),this},moveAbove:function(d,p){return o.MoveAbove(this.list,d,p),this},moveBelow:function(d,p){return o.MoveBelow(this.list,d,p),this},remove:function(d,p){var x=o.Remove(this.list,d,this.removeHandler,this);if(p&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(d,p){var x=o.RemoveAt(this.list,d,this.removeHandler,this);return p&&x&&x.destroy(),this},removeBetween:function(d,p,x){var y=o.RemoveBetween(this.list,d,p,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(d){var p=this.list;if(d){for(var x=0;x<p.length;x++)p[x]&&p[x].scene&&(p[x].off(r.DESTROY,this.onChildDestroyed,this),p[x].destroy());this.list=[]}else o.RemoveBetween(p,0,p.length,this.removeHandler,this);return this},bringToTop:function(d){return o.BringToTop(this.list,d),this},sendToBack:function(d){return o.SendToBack(this.list,d),this},moveUp:function(d){return o.MoveUp(this.list,d),this},moveDown:function(d){return o.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(d,p,x){var y=o.Replace(this.list,d,p);return y&&(this.addHandler(p),this.removeHandler(d),x&&d.destroy()),this},exists:function(d){return this.list.indexOf(d)>-1},setAll:function(d,p,x,y){return o.SetAll(this.list,d,p,x,y),this},each:function(d,p){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],d.apply(p,x);return this},iterate:function(d,p){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],d.apply(p,x);return this},setScrollFactor:function(d,p,x){return p===void 0&&(p=d),x===void 0&&(x=!1),this.scrollFactorX=d,this.scrollFactorY=p,x&&(o.SetAll(this.list,"scrollFactorX",d),o.SetAll(this.list,"scrollFactorY",p)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(d){o.Remove(this.list,d),this.exclusive&&(d.parentContainer=null,d.removedFromScene())}});c.exports=f},53584:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o);var n=o.list;if(n.length!==0){var r=o.localTransform;a?(r.loadIdentity(),r.multiply(a),r.translate(o.x,o.y),r.rotate(o.rotation),r.scale(o.scaleX,o.scaleY)):r.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var e=o.blendMode!==-1;e||t.setBlendMode(0);var s=o._alpha,h=o.scrollFactorX,i=o.scrollFactorY;o.mask&&o.mask.preRenderCanvas(t,null,g);for(var l=0;l<n.length;l++){var u=n[l];if(u.willRender(g)){var f=u.alpha,d=u.scrollFactorX,p=u.scrollFactorY;!e&&u.blendMode!==t.currentBlendMode&&t.setBlendMode(u.blendMode),u.setScrollFactor(d*h,p*i),u.setAlpha(f*s),u.renderCanvas(t,u,g,r),u.setAlpha(f),u.setScrollFactor(d,p)}}o.mask&&o.mask.postRenderCanvas(t)}};c.exports=S},77143:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(31559),a=t(44603),n=t(23568),r=t(95540);a.register("container",function(e,s){e===void 0&&(e={});var h=n(e,"x",0),i=n(e,"y",0),l=r(e,"children",null),u=new g(this.scene,h,i,l);return s!==void 0&&(e.add=s),o(this.scene,u,e),u})},24961:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31559),g=t(39429);g.register("container",function(a,n,r){return this.displayList.add(new o(this.scene,a,n,r))})},29959:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(72249),a=t(53584),c.exports={renderWebGL:g,renderCanvas:a}},72249:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o);var n=o.list,r=n.length;if(r!==0){var e=o.localTransform;a?(e.loadIdentity(),e.multiply(a),e.translate(o.x,o.y),e.rotate(o.rotation),e.scale(o.scaleX,o.scaleY)):e.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),t.pipelines.preBatch(o);var s=o.blendMode!==-1;s||t.setBlendMode(0);for(var h=o.alpha,i=o.scrollFactorX,l=o.scrollFactorY,u=0;u<r;u++){var f=n[u];if(f.willRender(g)){var d,p,x,y;if(f.alphaTopLeft!==void 0)d=f.alphaTopLeft,p=f.alphaTopRight,x=f.alphaBottomLeft,y=f.alphaBottomRight;else{var T=f.alpha;d=T,p=T,x=T,y=T}var C=f.scrollFactorX,A=f.scrollFactorY;!s&&f.blendMode!==t.currentBlendMode&&t.setBlendMode(f.blendMode);var R=f.mask;R&&R.preRenderWebGL(t,f,g);var M=f.type;M!==t.currentType&&(t.newType=!0,t.currentType=M),t.nextTypeMatch=u<r-1?n[u+1].type===t.currentType:!1,f.setScrollFactor(C*i,A*l),f.setAlpha(d*h,p*h,x*h,y*h),f.renderWebGL(t,f,g,e,o),f.setAlpha(d,p,x,y),f.setScrollFactor(C,A),R&&R.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(o)}};c.exports=S},47407:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(441),n=t(95643),r=t(41212),e=t(35846),s=t(44594),h=t(61369),i=new o({Extends:n,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,a],initialize:function(u,f,d,p,x,y){n.call(this,u,"DOMElement"),this.parent=u.sys.game.domContainer,this.cache=u.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new h,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(f,d),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),x,y):this.createElement(p,x,y):p&&this.setElement(p,x,y),u.sys.events.on(s.SLEEP,this.handleSceneEvent,this),u.sys.events.on(s.WAKE,this.handleSceneEvent,this),u.sys.events.on(s.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(l){var u=this.node,f=u.style;u&&(f.display=l.settings.visible?"block":"none")},setSkew:function(l,u){return l===void 0&&(l=0),u===void 0&&(u=l),this.skewX=l,this.skewY=u,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var u=0;u<l.length;u++)this.node.addEventListener(l[u],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var u=0;u<l.length;u++)this.node.removeEventListener(l[u],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,u,f){return this.setElement(document.createElement(l),u,f)},setElement:function(l,u,f){this.removeElement();var d;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),d=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(d=l),!d)return this;if(this.node=d,u&&r(u))for(var p in u)d.style[p]=u[p];else typeof u=="string"&&(d.style=u);return d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent&&this.parent.appendChild(d),f&&(d.innerText=f),this.updateSize()},createFromCache:function(l,u){var f=this.cache.get(l);return f&&this.createFromHTML(f,u),this},createFromHTML:function(l,u){u===void 0&&(u="div"),this.removeElement();var f=document.createElement(u);return this.node=f,f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",f.phaser=this,this.parent&&this.parent.appendChild(f),f.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(e(this.node),this.node=null),this},updateSize:function(){var l=this.node,u=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=u.width||0,this.displayHeight=u.height||0,this},getChildByProperty:function(l,u){if(this.node){for(var f=this.node.querySelectorAll("*"),d=0;d<f.length;d++)if(f[d][l]===u)return f[d]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preRender:function(){var l=this.parentContainer,u=this.node;u&&l&&!l.willRender()&&(u.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(s.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(s.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(s.PRE_RENDER,this.preRender,this)}});c.exports=i},49381:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(47407),g=t(95643),a=t(61340),n=new a,r=new a,e=new a,s=function(h,i,l,u){if(i.node){var f=i.node.style,d=i.scene.sys.settings;if(!f||!d.visible||g.RENDER_MASK!==i.renderFlags||i.cameraFilter!==0&&i.cameraFilter&l.id||i.parentContainer&&!i.parentContainer.willRender()){f.display="none";return}var p=i.parentContainer,x=l.alpha*i.alpha;p&&(x*=p.alpha);var y=n,T=r,C=e,A=0,R=0,M="0%",L="0%";u?(A=i.width*i.scaleX*i.originX,R=i.height*i.scaleY*i.originY,T.applyITRS(i.x-A,i.y-R,i.rotation,i.scaleX,i.scaleY),y.copyFrom(l.matrix),y.multiplyWithOffset(u,-l.scrollX*i.scrollFactorX,-l.scrollY*i.scrollFactorY),T.e=i.x-A,T.f=i.y-R,y.multiply(T,C)):(A=i.width*i.originX,R=i.height*i.originY,T.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),y.copyFrom(l.matrix),M=100*i.originX+"%",L=100*i.originY+"%",T.e-=l.scrollX*i.scrollFactorX,T.f-=l.scrollY*i.scrollFactorY,y.multiply(T,C),C.e-=A,C.f-=R),i.transformOnly||(f.display="block",f.opacity=x,f.zIndex=i._depth,f.pointerEvents=i.pointerEvents,f.mixBlendMode=o[i._blendMode]),f.transform=C.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",f.transformOrigin=M+" "+L}};c.exports=s},2611:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3069),g=t(39429);g.register("dom",function(a,n,r,e,s){var h=new o(this.scene,a,n,r,e,s);return this.displayList.add(h),h})},441:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(49381),a=t(49381),c.exports={renderWebGL:g,renderCanvas:a}},62980:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addedtoscene"},41337:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},44947:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedfromscene"},49358:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},35163:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="created"},97249:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="error"},19483:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="locked"},56059:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},26772:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="metadata"},64437:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="playing"},83411:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="play"},75780:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seeked"},67799:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seeking"},63500:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stalled"},55541:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},53208:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="textureready"},4992:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="unlocked"},12:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="unsupported"},51708:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADDED_TO_SCENE:t(62980),DESTROY:t(41337),REMOVED_FROM_SCENE:t(44947),VIDEO_COMPLETE:t(49358),VIDEO_CREATED:t(35163),VIDEO_ERROR:t(97249),VIDEO_LOCKED:t(19483),VIDEO_LOOP:t(56059),VIDEO_METADATA:t(26772),VIDEO_PLAY:t(83411),VIDEO_PLAYING:t(64437),VIDEO_SEEKED:t(75780),VIDEO_SEEKING:t(67799),VIDEO_STALLED:t(63500),VIDEO_STOP:t(55541),VIDEO_TEXTURE:t(53208),VIDEO_UNLOCKED:t(4992),VIDEO_UNSUPPORTED:t(12)}},42421:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(64993),r=new o({Extends:a,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,n],initialize:function(s){a.call(this,s,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});c.exports=r},70217:()=>{},56315:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42421),g=t(39429);g.register("extern",function(){var a=new o(this.scene);return this.displayList.add(a),a})},64993:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(80287),a=t(70217),c.exports={renderWebGL:g,renderCanvas:a}},80287:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,n,r,e){a.pipelines.clear();var s=o(n,r,e).calc;n.render.call(n,a,r,s),a.pipelines.rebind()};c.exports=g},85592:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71911),g=t(83419),a=t(85592),n=t(31401),r=t(8497),e=t(95643),s=t(95540),h=t(35154),i=t(36383),l=t(84503),u=new g({Extends:e,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.Transform,n.Visible,n.ScrollFactor,l],initialize:function(d,p){var x=h(p,"x",0),y=h(p,"y",0);e.call(this,d,"Graphics"),this.setPosition(x,y),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(p)},setDefaultStyles:function(f){return h(f,"lineStyle",null)&&(this.defaultStrokeWidth=h(f,"lineStyle.width",1),this.defaultStrokeColor=h(f,"lineStyle.color",16777215),this.defaultStrokeAlpha=h(f,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),h(f,"fillStyle",null)&&(this.defaultFillColor=h(f,"fillStyle.color",16777215),this.defaultFillAlpha=h(f,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(f,d,p){return p===void 0&&(p=1),this.commandBuffer.push(a.LINE_STYLE,f,d,p),this._lineWidth=f,this},fillStyle:function(f,d){return d===void 0&&(d=1),this.commandBuffer.push(a.FILL_STYLE,f,d),this},fillGradientStyle:function(f,d,p,x,y,T,C,A){return y===void 0&&(y=1),T===void 0&&(T=y),C===void 0&&(C=y),A===void 0&&(A=y),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,y,T,C,A,f,d,p,x),this},lineGradientStyle:function(f,d,p,x,y,T){return T===void 0&&(T=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,f,T,d,p,x,y),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(f){return this.fillCircle(f.x,f.y,f.radius)},strokeCircleShape:function(f){return this.strokeCircle(f.x,f.y,f.radius)},fillCircle:function(f,d,p){return this.beginPath(),this.arc(f,d,p,0,i.PI2),this.fillPath(),this},strokeCircle:function(f,d,p){return this.beginPath(),this.arc(f,d,p,0,i.PI2),this.strokePath(),this},fillRectShape:function(f){return this.fillRect(f.x,f.y,f.width,f.height)},strokeRectShape:function(f){return this.strokeRect(f.x,f.y,f.width,f.height)},fillRect:function(f,d,p,x){return this.commandBuffer.push(a.FILL_RECT,f,d,p,x),this},strokeRect:function(f,d,p,x){var y=this._lineWidth/2,T=f-y,C=f+y;return this.beginPath(),this.moveTo(f,d),this.lineTo(f,d+x),this.strokePath(),this.beginPath(),this.moveTo(f+p,d),this.lineTo(f+p,d+x),this.strokePath(),this.beginPath(),this.moveTo(T,d),this.lineTo(C+p,d),this.strokePath(),this.beginPath(),this.moveTo(T,d+x),this.lineTo(C+p,d+x),this.strokePath(),this},fillRoundedRect:function(f,d,p,x,y){y===void 0&&(y=20);var T=y,C=y,A=y,R=y;typeof y!="number"&&(T=s(y,"tl",20),C=s(y,"tr",20),A=s(y,"bl",20),R=s(y,"br",20));var M=T>=0,L=C>=0,I=A>=0,O=R>=0;return T=Math.abs(T),C=Math.abs(C),A=Math.abs(A),R=Math.abs(R),this.beginPath(),this.moveTo(f+T,d),this.lineTo(f+p-C,d),L?this.arc(f+p-C,d+C,C,-i.TAU,0):this.arc(f+p,d,C,Math.PI,i.TAU,!0),this.lineTo(f+p,d+x-R),O?this.arc(f+p-R,d+x-R,R,0,i.TAU):this.arc(f+p,d+x,R,-i.TAU,Math.PI,!0),this.lineTo(f+A,d+x),I?this.arc(f+A,d+x-A,A,i.TAU,Math.PI):this.arc(f,d+x,A,0,-i.TAU,!0),this.lineTo(f,d+T),M?this.arc(f+T,d+T,T,-Math.PI,-i.TAU):this.arc(f,d,T,i.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(f,d,p,x,y){y===void 0&&(y=20);var T=y,C=y,A=y,R=y,M=Math.min(p,x)/2;typeof y!="number"&&(T=s(y,"tl",20),C=s(y,"tr",20),A=s(y,"bl",20),R=s(y,"br",20));var L=T>=0,I=C>=0,O=A>=0,D=R>=0;return T=Math.min(Math.abs(T),M),C=Math.min(Math.abs(C),M),A=Math.min(Math.abs(A),M),R=Math.min(Math.abs(R),M),this.beginPath(),this.moveTo(f+T,d),this.lineTo(f+p-C,d),this.moveTo(f+p-C,d),I?this.arc(f+p-C,d+C,C,-i.TAU,0):this.arc(f+p,d,C,Math.PI,i.TAU,!0),this.lineTo(f+p,d+x-R),this.moveTo(f+p,d+x-R),D?this.arc(f+p-R,d+x-R,R,0,i.TAU):this.arc(f+p,d+x,R,-i.TAU,Math.PI,!0),this.lineTo(f+A,d+x),this.moveTo(f+A,d+x),O?this.arc(f+A,d+x-A,A,i.TAU,Math.PI):this.arc(f,d+x,A,0,-i.TAU,!0),this.lineTo(f,d+T),this.moveTo(f,d+T),L?this.arc(f+T,d+T,T,-Math.PI,-i.TAU):this.arc(f,d,T,i.TAU,0,!0),this.strokePath(),this},fillPointShape:function(f,d){return this.fillPoint(f.x,f.y,d)},fillPoint:function(f,d,p){return!p||p<1?p=1:(f-=p/2,d-=p/2),this.commandBuffer.push(a.FILL_RECT,f,d,p,p),this},fillTriangleShape:function(f){return this.fillTriangle(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)},strokeTriangleShape:function(f){return this.strokeTriangle(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)},fillTriangle:function(f,d,p,x,y,T){return this.commandBuffer.push(a.FILL_TRIANGLE,f,d,p,x,y,T),this},strokeTriangle:function(f,d,p,x,y,T){return this.commandBuffer.push(a.STROKE_TRIANGLE,f,d,p,x,y,T),this},strokeLineShape:function(f){return this.lineBetween(f.x1,f.y1,f.x2,f.y2)},lineBetween:function(f,d,p,x){return this.beginPath(),this.moveTo(f,d),this.lineTo(p,x),this.strokePath(),this},lineTo:function(f,d){return this.commandBuffer.push(a.LINE_TO,f,d),this},moveTo:function(f,d){return this.commandBuffer.push(a.MOVE_TO,f,d),this},strokePoints:function(f,d,p,x){d===void 0&&(d=!1),p===void 0&&(p=!1),x===void 0&&(x=f.length),this.beginPath(),this.moveTo(f[0].x,f[0].y);for(var y=1;y<x;y++)this.lineTo(f[y].x,f[y].y);return d&&this.lineTo(f[0].x,f[0].y),p&&this.closePath(),this.strokePath(),this},fillPoints:function(f,d,p,x){d===void 0&&(d=!1),p===void 0&&(p=!1),x===void 0&&(x=f.length),this.beginPath(),this.moveTo(f[0].x,f[0].y);for(var y=1;y<x;y++)this.lineTo(f[y].x,f[y].y);return d&&this.lineTo(f[0].x,f[0].y),p&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(f,d){d===void 0&&(d=32);var p=f.getPoints(d);return this.strokePoints(p,!0)},strokeEllipse:function(f,d,p,x,y){y===void 0&&(y=32);var T=new r(f,d,p,x),C=T.getPoints(y);return this.strokePoints(C,!0)},fillEllipseShape:function(f,d){d===void 0&&(d=32);var p=f.getPoints(d);return this.fillPoints(p,!0)},fillEllipse:function(f,d,p,x,y){y===void 0&&(y=32);var T=new r(f,d,p,x),C=T.getPoints(y);return this.fillPoints(C,!0)},arc:function(f,d,p,x,y,T,C){return T===void 0&&(T=!1),C===void 0&&(C=0),this.commandBuffer.push(a.ARC,f,d,p,x,y,T,C),this},slice:function(f,d,p,x,y,T,C){return T===void 0&&(T=!1),C===void 0&&(C=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,f,d),this.commandBuffer.push(a.ARC,f,d,p,x,y,T,C),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(f,d){return this.commandBuffer.push(a.TRANSLATE,f,d),this},scaleCanvas:function(f,d){return this.commandBuffer.push(a.SCALE,f,d),this},rotateCanvas:function(f){return this.commandBuffer.push(a.ROTATE,f),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(f,d,p){var x=this.scene.sys,y=x.game.renderer;d===void 0&&(d=x.scale.width),p===void 0&&(p=x.scale.height),u.TargetCamera.setScene(this.scene),u.TargetCamera.setViewport(0,0,d,p),u.TargetCamera.scrollX=this.x,u.TargetCamera.scrollY=this.y;var T,C,A={willReadFrequently:!0};if(typeof f=="string")if(x.textures.exists(f)){T=x.textures.get(f);var R=T.getSourceImage();R instanceof HTMLCanvasElement&&(C=R.getContext("2d",A))}else T=x.textures.createCanvas(f,d,p),C=T.getSourceImage().getContext("2d",A);else f instanceof HTMLCanvasElement&&(C=f.getContext("2d",A));return C&&(this.renderCanvas(y,this,u.TargetCamera,null,C,!1),T&&T.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});u.TargetCamera=new o,c.exports=u},32768:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85592),g=t(20926),a=function(n,r,e,s,h,i){var l=r.commandBuffer,u=l.length,f=h||n.currentContext;if(!(u===0||!g(n,f,r,e,s))){e.addToRenderList(r);var d=1,p=1,x=0,y=0,T=1,C=0,A=0,R=0;f.beginPath();for(var M=0;M<u;++M){var L=l[M];switch(L){case o.ARC:f.arc(l[M+1],l[M+2],l[M+3],l[M+4],l[M+5],l[M+6]),M+=7;break;case o.LINE_STYLE:T=l[M+1],x=l[M+2],d=l[M+3],C=(x&16711680)>>>16,A=(x&65280)>>>8,R=x&255,f.strokeStyle="rgba("+C+","+A+","+R+","+d+")",f.lineWidth=T,M+=3;break;case o.FILL_STYLE:y=l[M+1],p=l[M+2],C=(y&16711680)>>>16,A=(y&65280)>>>8,R=y&255,f.fillStyle="rgba("+C+","+A+","+R+","+p+")",M+=2;break;case o.BEGIN_PATH:f.beginPath();break;case o.CLOSE_PATH:f.closePath();break;case o.FILL_PATH:i||f.fill();break;case o.STROKE_PATH:i||f.stroke();break;case o.FILL_RECT:i?f.rect(l[M+1],l[M+2],l[M+3],l[M+4]):f.fillRect(l[M+1],l[M+2],l[M+3],l[M+4]),M+=4;break;case o.FILL_TRIANGLE:f.beginPath(),f.moveTo(l[M+1],l[M+2]),f.lineTo(l[M+3],l[M+4]),f.lineTo(l[M+5],l[M+6]),f.closePath(),i||f.fill(),M+=6;break;case o.STROKE_TRIANGLE:f.beginPath(),f.moveTo(l[M+1],l[M+2]),f.lineTo(l[M+3],l[M+4]),f.lineTo(l[M+5],l[M+6]),f.closePath(),i||f.stroke(),M+=6;break;case o.LINE_TO:f.lineTo(l[M+1],l[M+2]),M+=2;break;case o.MOVE_TO:f.moveTo(l[M+1],l[M+2]),M+=2;break;case o.LINE_FX_TO:f.lineTo(l[M+1],l[M+2]),M+=5;break;case o.MOVE_FX_TO:f.moveTo(l[M+1],l[M+2]),M+=5;break;case o.SAVE:f.save();break;case o.RESTORE:f.restore();break;case o.TRANSLATE:f.translate(l[M+1],l[M+2]),M+=2;break;case o.SCALE:f.scale(l[M+1],l[M+2]),M+=2;break;case o.ROTATE:f.rotate(l[M+1]),M+=1;break;case o.GRADIENT_FILL_STYLE:M+=5;break;case o.GRADIENT_LINE_STYLE:M+=6;break}}f.restore()}};c.exports=a},87079:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(43831);o.register("graphics",function(a,n){a===void 0&&(a={}),n!==void 0&&(a.add=n);var r=new g(this.scene,a);return a.add&&this.scene.sys.displayList.add(r),r})},1201:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43831),g=t(39429);g.register("graphics",function(a){return this.displayList.add(new o(this.scene,a))})},84503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(77545),a=t(32768),a=t(32768),c.exports={renderWebGL:g,renderCanvas:a}},77545:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85592),g=t(91296),a=t(61340),n=t(70554),r=function(l,u,f){this.x=l,this.y=u,this.width=f},e=function(l,u,f){this.points=[],this.pointsLength=1,this.points[0]=new r(l,u,f)},s=[],h=new a,i=function(l,u,f,d){if(u.commandBuffer.length!==0){f.addToRenderList(u);var p=l.pipelines.set(u.pipeline,u);l.pipelines.preBatch(u);for(var x=g(u,f,d).calc,y=h.loadIdentity(),T=u.commandBuffer,C=f.alpha*u.alpha,A=1,R=p.fillTint,M=p.strokeTint,L=0,I=0,O=0,D=.01,B=Math.PI*2,V,W=[],Y=0,X=!0,U=null,z=n.getTintAppendFloatAlpha,G=0;G<T.length;G++)switch(V=T[G],V){case o.BEGIN_PATH:{W.length=0,U=null,X=!0;break}case o.CLOSE_PATH:{X=!1,U&&U.points.length&&U.points.push(U.points[0]);break}case o.FILL_PATH:{for(Y=0;Y<W.length;Y++)p.batchFillPath(W[Y].points,y,x);break}case o.STROKE_PATH:{for(Y=0;Y<W.length;Y++)p.batchStrokePath(W[Y].points,A,X,y,x);break}case o.LINE_STYLE:{A=T[++G];var b=T[++G],H=T[++G]*C,j=z(b,H);M.TL=j,M.TR=j,M.BL=j,M.BR=j;break}case o.FILL_STYLE:{var $=T[++G],k=T[++G]*C,Q=z($,k);R.TL=Q,R.TR=Q,R.BL=Q,R.BR=Q;break}case o.GRADIENT_FILL_STYLE:{var _=T[++G]*C,tt=T[++G]*C,et=T[++G]*C,it=T[++G]*C;R.TL=z(T[++G],_),R.TR=z(T[++G],tt),R.BL=z(T[++G],et),R.BR=z(T[++G],it);break}case o.GRADIENT_LINE_STYLE:{A=T[++G];var ot=T[++G]*C;M.TL=z(T[++G],ot),M.TR=z(T[++G],ot),M.BL=z(T[++G],ot),M.BR=z(T[++G],ot);break}case o.ARC:{var nt=0,ut=T[++G],ct=T[++G],pt=T[++G],mt=T[++G],ht=T[++G],ft=T[++G],dt=T[++G];for(ht-=mt,ft?ht<-B?ht=-B:ht>0&&(ht=-B+ht%B):ht>B?ht=B:ht<0&&(ht=B+ht%B),U===null&&(U=new e(ut+Math.cos(mt)*pt,ct+Math.sin(mt)*pt,A),W.push(U),nt+=D);nt<1+dt;)O=ht*nt+mt,L=ut+Math.cos(O)*pt,I=ct+Math.sin(O)*pt,U.points.push(new r(L,I,A)),nt+=D;O=ht+mt,L=ut+Math.cos(O)*pt,I=ct+Math.sin(O)*pt,U.points.push(new r(L,I,A));break}case o.FILL_RECT:{p.batchFillRect(T[++G],T[++G],T[++G],T[++G],y,x);break}case o.FILL_TRIANGLE:{p.batchFillTriangle(T[++G],T[++G],T[++G],T[++G],T[++G],T[++G],y,x);break}case o.STROKE_TRIANGLE:{p.batchStrokeTriangle(T[++G],T[++G],T[++G],T[++G],T[++G],T[++G],A,y,x);break}case o.LINE_TO:{U!==null?U.points.push(new r(T[++G],T[++G],A)):(U=new e(T[++G],T[++G],A),W.push(U));break}case o.MOVE_TO:{U=new e(T[++G],T[++G],A),W.push(U);break}case o.SAVE:{s.push(y.copyToArray());break}case o.RESTORE:{y.copyFromArray(s.pop());break}case o.TRANSLATE:{ut=T[++G],ct=T[++G],y.translate(ut,ct);break}case o.SCALE:{ut=T[++G],ct=T[++G],y.scale(ut,ct);break}case o.ROTATE:{y.rotate(T[++G]);break}}l.pipelines.postBatch(u)}};c.exports=i},26479:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61061),g=t(83419),a=t(51708),n=t(50792),r=t(46710),e=t(95540),s=t(35154),h=t(97022),i=t(41212),l=t(88492),u=t(35072),f=t(68287),d=new g({Extends:n,initialize:function(x,y,T){n.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?i(y[0])&&(T=y,y=null):i(y)&&(T=y,y=null),this.scene=x,this.children=new u,this.isParent=!0,this.type="Group",this.classType=e(T,"classType",f),this.name=e(T,"name",""),this.active=e(T,"active",!0),this.maxSize=e(T,"maxSize",-1),this.defaultKey=e(T,"defaultKey",null),this.defaultFrame=e(T,"defaultFrame",null),this.runChildUpdate=e(T,"runChildUpdate",!1),this.createCallback=e(T,"createCallback",null),this.removeCallback=e(T,"removeCallback",null),this.createMultipleCallback=e(T,"createMultipleCallback",null),this.internalCreateCallback=e(T,"internalCreateCallback",null),this.internalRemoveCallback=e(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(p,x,y,T,C,A){if(p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),A===void 0&&(A=!0),this.isFull())return null;var R=new this.classType(this.scene,p,x,y,T);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=C,R.setActive(A),this.add(R),R},createMultiple:function(p){if(this.isFull())return[];Array.isArray(p)||(p=[p]);var x=[];if(p[0].key)for(var y=0;y<p.length;y++){var T=this.createFromConfig(p[y]);x=x.concat(T)}return x},createFromConfig:function(p){if(this.isFull())return[];this.classType=e(p,"classType",this.classType);var x=e(p,"key",void 0),y=e(p,"frame",null),T=e(p,"visible",!0),C=e(p,"active",!0),A=[];if(x===void 0)return A;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var R=e(p,"repeat",0),M=e(p,"randomKey",!1),L=e(p,"randomFrame",!1),I=e(p,"yoyo",!1),O=e(p,"quantity",!1),D=e(p,"frameQuantity",1),B=e(p,"max",0),V=l(x,y,{max:B,qty:O||D,random:M,randomB:L,repeat:R,yoyo:I});p.createCallback&&(this.createCallback=p.createCallback),p.removeCallback&&(this.removeCallback=p.removeCallback),p.internalCreateCallback&&(this.internalCreateCallback=p.internalCreateCallback),p.internalRemoveCallback&&(this.internalRemoveCallback=p.internalRemoveCallback);for(var W=0;W<V.length;W++){var Y=this.create(0,0,V[W].a,V[W].b,T,C);if(!Y)break;A.push(Y)}if(h(p,"setXY")){var X=s(p,"setXY.x",0),U=s(p,"setXY.y",0),z=s(p,"setXY.stepX",0),G=s(p,"setXY.stepY",0);o.SetXY(A,X,U,z,G)}if(h(p,"setRotation")){var b=s(p,"setRotation.value",0),H=s(p,"setRotation.step",0);o.SetRotation(A,b,H)}if(h(p,"setScale")){var j=s(p,"setScale.x",1),$=s(p,"setScale.y",j),k=s(p,"setScale.stepX",0),Q=s(p,"setScale.stepY",0);o.SetScale(A,j,$,k,Q)}if(h(p,"setOrigin")){var _=s(p,"setOrigin.x",.5),tt=s(p,"setOrigin.y",_),et=s(p,"setOrigin.stepX",0),it=s(p,"setOrigin.stepY",0);o.SetOrigin(A,_,tt,et,it)}if(h(p,"setAlpha")){var ot=s(p,"setAlpha.value",1),nt=s(p,"setAlpha.step",0);o.SetAlpha(A,ot,nt)}if(h(p,"setDepth")){var ut=s(p,"setDepth.value",0),ct=s(p,"setDepth.step",0);o.SetDepth(A,ut,ct)}if(h(p,"setScrollFactor")){var pt=s(p,"setScrollFactor.x",1),mt=s(p,"setScrollFactor.y",pt),ht=s(p,"setScrollFactor.stepX",0),ft=s(p,"setScrollFactor.stepY",0);o.SetScrollFactor(A,pt,mt,ht,ft)}var dt=e(p,"hitArea",null),Ct=e(p,"hitAreaCallback",null);dt&&o.SetHitArea(A,dt,Ct);var Lt=e(p,"gridAlign",!1);return Lt&&o.GridAlign(A,Lt),this.createMultipleCallback&&this.createMultipleCallback.call(this,A),A},preUpdate:function(p,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(p,x)}},add:function(p,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(p),this.internalCreateCallback&&this.internalCreateCallback.call(this,p),this.createCallback&&this.createCallback.call(this,p),x&&(p.addToDisplayList(this.scene.sys.displayList),p.addToUpdateList()),p.on(a.DESTROY,this.remove,this),this)},addMultiple:function(p,x){if(x===void 0&&(x=!1),Array.isArray(p))for(var y=0;y<p.length;y++)this.add(p[y],x);return this},remove:function(p,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(p)?(this.children.delete(p),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,p),this.removeCallback&&this.removeCallback.call(this,p),p.off(a.DESTROY,this.remove,this),y?p.destroy():x&&(p.removeFromDisplayList(),p.removeFromUpdateList()),this):this},clear:function(p,x){p===void 0&&(p=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(a.DESTROY,this.remove,this),x?C.destroy():p&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(p){return this.children.contains(p)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(p,x,y,T){return r(this.children.entries,p,x,y,T)},getFirst:function(p,x,y,T,C,A,R){return this.getHandler(!0,1,p,x,y,T,C,A,R)},getFirstNth:function(p,x,y,T,C,A,R,M){return this.getHandler(!0,p,x,y,T,C,A,R,M)},getLast:function(p,x,y,T,C,A,R){return this.getHandler(!1,1,p,x,y,T,C,A,R)},getLastNth:function(p,x,y,T,C,A,R,M){return this.getHandler(!1,p,x,y,T,C,A,R,M)},getHandler:function(p,x,y,T,C,A,R,M,L){y===void 0&&(y=!1),T===void 0&&(T=!1);var I,O,D=0,B=this.children.entries;if(p)for(O=0;O<B.length;O++)if(I=B[O],I.active===y){if(D++,D===x)break}else I=null;else for(O=B.length-1;O>=0;O--)if(I=B[O],I.active===y){if(D++,D===x)break}else I=null;return I?(typeof C=="number"&&(I.x=C),typeof A=="number"&&(I.y=A),I):T?this.create(C,A,R,M,L):null},get:function(p,x,y,T,C){return this.getFirst(!1,!0,p,x,y,T,C)},getFirstAlive:function(p,x,y,T,C,A){return this.getFirst(!0,p,x,y,T,C,A)},getFirstDead:function(p,x,y,T,C,A){return this.getFirst(!1,p,x,y,T,C,A)},playAnimation:function(p,x){return o.PlayAnimation(this.children.entries,p,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(p){p===void 0&&(p=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===p&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var p=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-p},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},propertyValueSet:function(p,x,y,T,C){return o.PropertyValueSet(this.children.entries,p,x,y,T,C),this},propertyValueInc:function(p,x,y,T,C){return o.PropertyValueInc(this.children.entries,p,x,y,T,C),this},setX:function(p,x){return o.SetX(this.children.entries,p,x),this},setY:function(p,x){return o.SetY(this.children.entries,p,x),this},setXY:function(p,x,y,T){return o.SetXY(this.children.entries,p,x,y,T),this},incX:function(p,x){return o.IncX(this.children.entries,p,x),this},incY:function(p,x){return o.IncY(this.children.entries,p,x),this},incXY:function(p,x,y,T){return o.IncXY(this.children.entries,p,x,y,T),this},shiftPosition:function(p,x,y){return o.ShiftPosition(this.children.entries,p,x,y),this},angle:function(p,x){return o.Angle(this.children.entries,p,x),this},rotate:function(p,x){return o.Rotate(this.children.entries,p,x),this},rotateAround:function(p,x){return o.RotateAround(this.children.entries,p,x),this},rotateAroundDistance:function(p,x,y){return o.RotateAroundDistance(this.children.entries,p,x,y),this},setAlpha:function(p,x){return o.SetAlpha(this.children.entries,p,x),this},setTint:function(p,x,y,T){return o.SetTint(this.children.entries,p,x,y,T),this},setOrigin:function(p,x,y,T){return o.SetOrigin(this.children.entries,p,x,y,T),this},scaleX:function(p,x){return o.ScaleX(this.children.entries,p,x),this},scaleY:function(p,x){return o.ScaleY(this.children.entries,p,x),this},scaleXY:function(p,x,y,T){return o.ScaleXY(this.children.entries,p,x,y,T),this},setDepth:function(p,x){return o.SetDepth(this.children.entries,p,x),this},setBlendMode:function(p){return o.SetBlendMode(this.children.entries,p),this},setHitArea:function(p,x){return o.SetHitArea(this.children.entries,p,x),this},shuffle:function(){return o.Shuffle(this.children.entries),this},kill:function(p){this.children.contains(p)&&p.setActive(!1)},killAndHide:function(p){this.children.contains(p)&&(p.setActive(!1),p.setVisible(!1))},setVisible:function(p,x,y){return o.SetVisible(this.children.entries,p,x,y),this},toggleVisible:function(){return o.ToggleVisible(this.children.entries),this},destroy:function(p,x){p===void 0&&(p=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,p),this.scene=void 0,this.children=void 0)}});c.exports=d},94975:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(26479);o.register("group",function(a){return new g(this.scene,null,a)})},3385:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26479),g=t(39429);g.register("group",function(a,n){return this.updateList.add(new o(this.scene,a,n))})},88571:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(59819),r=new o({Extends:a,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,n],initialize:function(s,h,i,l,u){a.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,u),this.setPosition(h,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});c.exports=r},40652:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};c.exports=S},82459:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(88571);g.register("image",function(r,e){r===void 0&&(r={});var s=a(r,"key",null),h=a(r,"frame",null),i=new n(this.scene,0,0,s,h);return e!==void 0&&(r.add=e),o(this.scene,i,r),i})},2117:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(88571),g=t(39429);g.register("image",function(a,n,r,e){return this.displayList.add(new o(this.scene,a,n,r,e))})},59819:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99517),a=t(40652),c.exports={renderWebGL:g,renderCanvas:a}},99517:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o),this.pipeline.batchSprite(o,g,a)};c.exports=S},77856:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Events:t(51708),DisplayList:t(8050),GameObjectCreator:t(44603),GameObjectFactory:t(39429),UpdateList:t(45027),Components:t(31401),GetCalcMatrix:t(91296),BuildGameObject:t(25305),BuildGameObjectAnimation:t(13059),GameObject:t(95643),BitmapText:t(22186),Blitter:t(6107),Bob:t(46590),Container:t(31559),DOMElement:t(3069),DynamicBitmapText:t(2638),Extern:t(42421),Graphics:t(43831),Group:t(26479),Image:t(88571),Layer:t(93595),Particles:t(18404),PathFollower:t(1159),RenderTexture:t(591),RetroFont:t(196),Rope:t(77757),Sprite:t(68287),Text:t(50171),GetTextSize:t(14220),MeasureText:t(79557),TextStyle:t(35762),TileSprite:t(20839),Zone:t(41481),Video:t(18471),Shape:t(17803),Arc:t(23629),Curve:t(89),Ellipse:t(19921),Grid:t(30479),IsoBox:t(61475),IsoTriangle:t(16933),Line:t(57847),Polygon:t(24949),Rectangle:t(74561),Star:t(55911),Triangle:t(36931),Factories:{Blitter:t(12709),Container:t(24961),DOMElement:t(2611),DynamicBitmapText:t(72566),Extern:t(56315),Graphics:t(1201),Group:t(3385),Image:t(2117),Layer:t(20005),Particles:t(676),PathFollower:t(90145),RenderTexture:t(60505),Rope:t(96819),Sprite:t(46409),StaticBitmapText:t(34914),Text:t(68005),TileSprite:t(91681),Zone:t(84175),Video:t(89025),Arc:t(42563),Curve:t(40511),Ellipse:t(1543),Grid:t(34137),IsoBox:t(3933),IsoTriangle:t(49803),Line:t(2481),Polygon:t(64827),Rectangle:t(87959),Star:t(93697),Triangle:t(45245)},Creators:{Blitter:t(9403),Container:t(77143),DynamicBitmapText:t(11164),Graphics:t(87079),Group:t(94975),Image:t(82459),Layer:t(25179),Particles:t(92730),RenderTexture:t(34495),Rope:t(26209),Sprite:t(15567),StaticBitmapText:t(57336),Text:t(71259),TileSprite:t(14167),Zone:t(95261),Video:t(11511)}};o.Shader=t(20071),o.Mesh=t(4703),o.NineSlice=t(28103),o.PointLight=t(80321),o.Plane=t(33663),o.Factories.Shader=t(74177),o.Factories.Mesh=t(9225),o.Factories.NineSlice=t(47521),o.Factories.PointLight=t(71255),o.Factories.Plane=t(30985),o.Creators.Shader=t(54935),o.Creators.Mesh=t(20527),o.Creators.NineSlice=t(28279),o.Creators.PointLight=t(39829),o.Creators.Plane=t(56015),o.Light=t(41432),o.LightsManager=t(61356),o.LightsPlugin=t(88992),c.exports=o},93595:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(83419),a=t(31401),n=t(53774),r=t(45893),e=t(50792),s=t(51708),h=t(73162),i=t(33963),l=t(44594),u=t(19186),f=new g({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.PostPipeline,a.Visible,e,i],initialize:function(p,x){h.call(this,p),e.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),x&&this.add(x),p.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(d,p){return this.data||(this.data=new r(this)),this.data.set(d,p),this},incData:function(d,p){return this.data||(this.data=new r(this)),this.data.inc(d,p),this},toggleData:function(d){return this.data||(this.data=new r(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new r(this)),this.data.get(d)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(d){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,p=this.parentContainer,x=[];p&&(x.unshift(p.getIndex(d)),d=p,p.parentContainer);)p=p.parentContainer;return x.unshift(this.displayList.getIndex(d)),x},addChildCallback:function(d){var p=d.displayList;p&&p!==this&&d.removeFromDisplayList(),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(s.ADDED_TO_SCENE,d,this.scene),this.events.emit(l.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(s.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,d,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(u(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,p){return d._depth-p._depth},getChildren:function(){return this.list},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(s.ADDED_TO_SCENE,this,this.scene),d.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(s.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(d){if(!(!this.scene||this.ignoreDestroy)){this.emit(s.DESTROY,this);for(var p=this.list;p.length;)p[0].destroy(d);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});c.exports=f},2956:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=o.list;if(a.length!==0){o.depthSort();var n=o.blendMode!==-1;n||t.setBlendMode(0);var r=o._alpha;o.mask&&o.mask.preRenderCanvas(t,null,g);for(var e=0;e<a.length;e++){var s=a[e];if(s.willRender(g)){var h=s.alpha;!n&&s.blendMode!==t.currentBlendMode&&t.setBlendMode(s.blendMode),s.setAlpha(h*r),s.renderCanvas(t,s,g),s.setAlpha(h)}}o.mask&&o.mask.postRenderCanvas(t)}};c.exports=S},25179:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(93595),a=t(44603),n=t(23568);a.register("layer",function(r,e){r===void 0&&(r={});var s=n(r,"children",null),h=new g(this.scene,s);return e!==void 0&&(r.add=e),o(this.scene,h,r),h})},20005:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(93595),g=t(39429);g.register("layer",function(a){return this.displayList.add(new o(this.scene,a))})},33963:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(15869),a=t(2956),c.exports={renderWebGL:g,renderCanvas:a}},15869:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=o.list,n=a.length;if(n!==0){o.depthSort(),t.pipelines.preBatch(o);var r=o.blendMode!==-1;r||t.setBlendMode(0);for(var e=o.alpha,s=0;s<n;s++){var h=a[s];if(h.willRender(g)){var i,l,u,f;if(h.alphaTopLeft!==void 0)i=h.alphaTopLeft,l=h.alphaTopRight,u=h.alphaBottomLeft,f=h.alphaBottomRight;else{var d=h.alpha;i=d,l=d,u=d,f=d}!r&&h.blendMode!==t.currentBlendMode&&t.setBlendMode(h.blendMode);var p=h.mask;p&&p.preRenderWebGL(t,h,g);var x=h.type;x!==t.currentType&&(t.newType=!0,t.currentType=x),t.nextTypeMatch=s<n-1?a[s+1].type===t.currentType:!1,h.setAlpha(i*e,l*e,u*e,f*e),h.renderWebGL(t,h,g),h.setAlpha(i,l,u,f),p&&p.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(o)}};c.exports=S},41432:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=t(83419),a=t(31401),n=t(51767),r=t(70554),e=new g({Extends:o,Mixins:[a.Origin,a.ScrollFactor,a.Visible],initialize:function(h,i,l,u,f,d,p){o.call(this,h,i,l),this.color=new n(u,f,d),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(l)},displayWidth:{get:function(){return this.diameter},set:function(s){this.diameter=s}},displayHeight:{get:function(){return this.diameter},set:function(s){this.diameter=s}},width:{get:function(){return this.diameter},set:function(s){this.diameter=s}},height:{get:function(){return this.diameter},set:function(s){this.diameter=s}},willRender:function(s){return!(e.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&s.id)},setColor:function(s){var h=r.getFloatsFromUintRGB(s);return this.color.set(h[0],h[1],h[2]),this},setIntensity:function(s){return this.intensity=s,this},setRadius:function(s){return this.radius=s,this}});e.RENDER_MASK=15,c.exports=e},61356:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81491),g=t(83419),a=t(20339),n=t(41432),r=t(80321),e=t(51767),s=t(19133),h=t(19186),i=t(70554),l=new g({initialize:function(){this.lights=[],this.ambientColor=new e(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(u,f,d,p,x,y){return this.systems.displayList.add(new r(this.scene,u,f,d,p,x,y))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(u){for(var f=this.lights,d=u.worldView,p=[],x=0;x<f.length;x++){var y=f[x];y.willRender(u)&&o(y,d)&&p.push({light:y,distance:a(y.x,y.y,d.centerX,d.centerY)})}return p.length>this.maxLights&&(h(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(u,f){return u.distance>=f.distance},setAmbientColor:function(u){var f=i.getFloatsFromUintRGB(u);return this.ambientColor.set(f[0],f[1],f[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(u,f,d,p,x){u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=128),p===void 0&&(p=16777215),x===void 0&&(x=1);var y=i.getFloatsFromUintRGB(p),T=new n(u,f,d,y[0],y[1],y[2],x);return this.lights.push(T),T},removeLight:function(u){var f=this.lights.indexOf(u);return f>=0&&s(this.lights,f),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});c.exports=l},88992:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(61356),a=t(37277),n=t(44594),r=new o({Extends:g,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once(n.BOOT,this.boot,this),g.call(this)},boot:function(){var e=this.systems.events;e.on(n.SHUTDOWN,this.shutdown,this),e.on(n.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",r,"lights"),c.exports=r},4703:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(39506),n=t(83997),r=t(95643),e=t(34684),s=t(92515),h=t(91296),i=t(37867),l=t(29807),u=t(43396),f=t(19186),d=t(25836),p=t(39318),x=new o({Extends:r,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,l],initialize:function(T,C,A,R,M,L,I,O,D,B,V,W){C===void 0&&(C=0),A===void 0&&(A=0),R===void 0&&(R="__WHITE"),r.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new i,this.viewPosition=new d,this.viewMatrix=new i,this.projectionMatrix=new i,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Y=T.sys.renderer;this.setPosition(C,A),this.setTexture(R,M),this.setSize(Y.width,Y.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Y.width,Y.height),L&&this.addVertices(L,I,O,D,B,V,W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(d.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=d.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,A,R){return C===void 0&&(C=45),A===void 0&&(A=.01),R===void 0&&(R=1e3),this.fov=C,this.projectionMatrix.perspective(a(C),y/T,A,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,A){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),A===void 0&&(A=1e3),this.fov=0,this.projectionMatrix.ortho(-y,y,-T,T,C,A),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,A,R,M,L,I,O){var D=this.scene.sys.cache.obj.get(y),B;return D&&(B=e(D,this,T,C,A,R,M,L,I,O)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",y),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,A,R,M,L){var I=new p(y,T,C,A,R,M,L);return this.vertices.push(I),I},addFace:function(y,T,C){var A=new n(y,T,C);return this.faces.push(A),this.dirtyCache[9]=-1,A},addVertices:function(y,T,C,A,R,M,L){var I=s(y,T,C,A,R,M,L);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},hasFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var A=h(this,C).calc,R=this.faces,M=0;M<R.length;M++){var L=R[M];if(L.contains(y,T,A))return!0}return!1},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var A=h(this,C).calc,R=this.faces,M=[],L=0;L<R.length;L++){var I=R[L];I.contains(y,T,A)&&M.push(I)}return f(M,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,A=this.dirtyCache,R=y.x,M=y.y,L=y.z,I=T.x,O=T.y,D=T.z,B=C.x,V=C.y,W=C.z,Y=this.getFaceCount(),X=A[0],U=A[1],z=A[2],G=A[3],b=A[4],H=A[5],j=A[6],$=A[7],k=A[8],Q=A[9];return A[0]=R,A[1]=M,A[2]=L,A[3]=I,A[4]=O,A[5]=D,A[6]=B,A[7]=V,A[8]=W,A[9]=Y,X!==R||U!==M||z!==L||G!==I||b!==O||H!==D||j!==B||$!==V||k!==W||Q!==Y},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,A=this.viewMatrix,R=this.viewPosition;y[10]&&(A.identity(),A.translate(R),A.invert(),y[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var L=R.z,I=this.faces,O=0;O<I.length;O++)I[O].transformCoordinatesLocal(M,T,C,L);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,A=0;A<T.length;A++){var R=T[A],M=R.vertex1.tx,L=R.vertex1.ty,I=R.vertex2.tx,O=R.vertex2.ty,D=R.vertex3.tx,B=R.vertex3.ty;C.strokeTriangle(M,L,I,O,D,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(y){y===void 0&&(y={});var T=(function(C,A,R){for(var M=this.faces,L=0;L<M.length;L++){var I=M[L];if(I.contains(A,R))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,y,T),this},setTint:function(y){y===void 0&&(y=16777215);for(var T=this.vertices,C=0;C<T.length;C++)T[C].color=y;return this},uvScroll:function(y,T){for(var C=this.faces,A=0;A<C.length;A++)C[A].scrollUV(y,T);return this},uvScale:function(y,T){for(var C=this.faces,A=0;A<C.length;A++)C[A].scaleUV(y,T);return this},tint:{set:function(y){this.setTint(y)}},rotateX:{get:function(){return u(this.modelRotation.x)},set:function(y){this.modelRotation.x=a(y)}},rotateY:{get:function(){return u(this.modelRotation.y)},set:function(y){this.modelRotation.y=a(y)}},rotateZ:{get:function(){return u(this.modelRotation.z)},set:function(y){this.modelRotation.z=a(y)}}});c.exports=x},36488:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};c.exports=S},20527:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(35154),r=t(4703);g.register("mesh",function(e,s){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=n(e,"vertices",[]),u=n(e,"uvs",[]),f=n(e,"indicies",[]),d=n(e,"containsZ",!1),p=n(e,"normals",[]),x=n(e,"colors",16777215),y=n(e,"alphas",1),T=new r(this.scene,0,0,h,i,l,u,f,d,p,x,y);return s!==void 0&&(e.add=s),o(this.scene,T,e),T})},9225:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4703),g=t(39429);g.register("mesh",function(a,n,r,e,s,h,i,l,u,f,d){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i,l,u,f,d))})},29807:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(48833),a=t(36488),c.exports={renderWebGL:g,renderCanvas:a}},48833:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,n,r,e){var s=n.faces,h=s.length;if(h!==0){r.addToRenderList(n);var i=a.pipelines.set(n.pipeline,n),l=o(n,r,e).calc;a.pipelines.preBatch(n);for(var u=i.setGameObject(n),f=i.vertexViewF32,d=i.vertexViewU32,p=i.vertexCount*i.currentShader.vertexComponentCount-1,x=n.tintFill,y=[],T=n.debugCallback,C=l.a,A=l.b,R=l.c,M=l.d,L=l.e,I=l.f,O=n.viewPosition.z,D=n.hideCCW,B=r.roundPixels,V=r.alpha*n.alpha,W=0,Y=0;Y<h;Y++){var X=s[Y];X.isInView(r,D,O,V,C,A,R,M,L,I,B)&&(i.shouldFlush(3)&&(i.flush(),u=i.setGameObject(n),p=i.vertexCount*i.currentShader.vertexComponentCount-1),p=X.load(f,d,p,u,x),W++,i.vertexCount+=3,i.currentBatch.count=i.vertexCount-i.currentBatch.start,T&&y.push(X))}n.totalFrame+=W,T&&T.call(n,n,y),a.pipelines.postBatch(n)}};c.exports=g},28103:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(78023),r=t(39318),e=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,n],initialize:function(h,i,l,u,f,d,p,x,y,T,C){a.call(this,h,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var A=h.textures.getFrame(u,f);this.is3Slice=!T&&!C,A&&A.scale9&&(this.is3Slice=A.is3Slice);for(var R=this.is3Slice?18:54,M=0;M<R;M++)this.vertices.push(new r);this.setPosition(i,l),this.setTexture(u,f),this.setSlices(d,p,x,y,T,C,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(s,h,i,l,u,f,d){i===void 0&&(i=10),l===void 0&&(l=10),u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=!1);var p=this.frame,x=!1;if(this.is3Slice&&d&&u!==0&&f!==0&&(x=!0),x)console.warn("Cannot change 9 slice to 3 slice");else{if(p&&p.scale9&&!d){var y=p.data.scale9Borders,T=y.x,C=y.y;i=T,l=p.width-y.w-T,u=C,f=p.height-y.h-C,s===void 0&&(s=p.width),h===void 0&&(h=p.height)}else s===void 0&&(s=256),h===void 0&&(h=256);this._width=s,this._height=h,this.leftWidth=i,this.rightWidth=l,this.topHeight=u,this.bottomHeight=f,this.is3Slice&&(h=p.height,this._height=h,this.topHeight=h,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var s=this.leftWidth,h=this.rightWidth,i=this.topHeight,l=this.bottomHeight,u=this.frame.width,f=this.frame.height;this.updateQuadUVs(0,0,0,s/u,i/f),this.updateQuadUVs(6,s/u,0,1-h/u,i/f),this.updateQuadUVs(12,1-h/u,0,1,i/f),this.is3Slice||(this.updateQuadUVs(18,0,i/f,s/u,1-l/f),this.updateQuadUVs(24,s/u,i/f,1-h/u,1-l/f),this.updateQuadUVs(30,1-h/u,i/f,1,1-l/f),this.updateQuadUVs(36,0,1-l/f,s/u,1),this.updateQuadUVs(42,s/u,1-l/f,1-h/u,1),this.updateQuadUVs(48,1-h/u,1-l/f,1,1))},updateVertices:function(){var s=this.leftWidth,h=this.rightWidth,i=this.topHeight,l=this.bottomHeight,u=this.width,f=this.height;this.updateQuad(0,-.5,.5,-.5+s/u,.5-i/f),this.updateQuad(6,-.5+s/u,.5,.5-h/u,.5-i/f),this.updateQuad(12,.5-h/u,.5,.5,.5-i/f),this.is3Slice||(this.updateQuad(18,-.5,.5-i/f,-.5+s/u,-.5+l/f),this.updateQuad(24,-.5+s/u,.5-i/f,.5-h/u,-.5+l/f),this.updateQuad(30,.5-h/u,.5-i/f,.5,-.5+l/f),this.updateQuad(36,-.5,-.5+l/f,-.5+s/u,-.5),this.updateQuad(42,-.5+s/u,-.5+l/f,.5-h/u,-.5),this.updateQuad(48,.5-h/u,-.5+l/f,.5,-.5))},updateQuad:function(s,h,i,l,u){var f=this.width,d=this.height,p=this.originX,x=this.originY,y=this.vertices;y[s+0].resize(h,i,f,d,p,x),y[s+1].resize(h,u,f,d,p,x),y[s+2].resize(l,i,f,d,p,x),y[s+3].resize(h,u,f,d,p,x),y[s+4].resize(l,u,f,d,p,x),y[s+5].resize(l,i,f,d,p,x)},updateQuadUVs:function(s,h,i,l,u){var f=this.vertices,d=this.frame,p=d.u0,x=d.v0,y=d.u1,T=d.v1;if(p!==0||y!==1){var C=y-p;h=p+h*C,l=p+l*C}if(x!==0||T!==1){var A=T-x;i=x+i*A,u=x+u*A}f[s+0].setUVs(h,i),f[s+1].setUVs(h,u),f[s+2].setUVs(l,i),f[s+3].setUVs(h,u),f[s+4].setUVs(l,u),f[s+5].setUVs(l,i)},clearTint:function(){return this.setTint(16777215),this},setTint:function(s){return s===void 0&&(s=16777215),this.tint=s,this.tintFill=!1,this},setTintFill:function(s){return this.setTint(s),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(s){this._width=Math.max(s,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(s){this.is3Slice||(this._height=Math.max(s,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,h){this.width=s,this.height=h,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},setDisplaySize:function(s,h){return this.displayWidth=s,this.displayHeight=h,this},originX:{get:function(){return this._originX},set:function(s){this._originX=s,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(s){this._originY=s,this.updateVertices()}},setOrigin:function(s,h){return s===void 0&&(s=.5),h===void 0&&(h=s),this._originX=s,this._originY=h,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var s=this.frame.height;this._height=s,this.topHeight=s,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});c.exports=e},28279:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(35154),r=t(28103);g.register("nineslice",function(e,s){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=n(e,"width",256),u=n(e,"height",256),f=n(e,"leftWidth",10),d=n(e,"rightWidth",10),p=n(e,"topHeight",0),x=n(e,"bottomHeight",0),y=new r(this.scene,0,0,h,i,l,u,f,d,p,x);return s!==void 0&&(e.add=s),o(this.scene,y,e),y})},47521:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28103),g=t(39429);g.register("nineslice",function(a,n,r,e,s,h,i,l,u,f){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i,l,u,f))})},78023:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(52230),c.exports={renderWebGL:g,renderCanvas:a}},52230:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){var h=r.vertices,i=h.length;if(i!==0){e.addToRenderList(r);var l=n.pipelines.set(r.pipeline,r),u=o(r,e,s,!1).calc;n.pipelines.preBatch(r);var f=l.setGameObject(r),d=l.vertexViewF32,p=l.vertexViewU32,x=l.vertexCount*l.currentShader.vertexComponentCount-1,y=e.roundPixels,T=r.tintFill,C=e.alpha*r.alpha,A=g.getTintAppendFloatAlpha(r.tint,C),R=l.vertexAvailable(),M=-1;R<i&&(M=R);for(var L=0;L<i;L++){var I=h[L];L===M&&(l.flush(),f=l.setGameObject(r),x=0),d[++x]=u.getXRound(I.vx,I.vy,y),d[++x]=u.getYRound(I.vx,I.vy,y),d[++x]=I.u,d[++x]=I.v,d[++x]=f,d[++x]=T,p[++x]=A,l.vertexCount++,l.currentBatch.count=l.vertexCount-l.currentBatch.start}n.pipelines.postBatch(r)}};c.exports=a},76472:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(44777),a=t(37589),n=t(6113),r=t(91389),e=t(90664),s=new o({Extends:g,initialize:function(i){g.call(this,i,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var h=this.propertyValue,i=h,l=this.defaultEmit,u=this.defaultUpdate;if(this.method===9){this.start=h[0],this.ease=n("Linear"),this.interpolation=r("linear"),l=this.easedValueEmit,u=this.easeValueUpdate,i=h[0],this.active=!0;for(var f=0;f<h.length;f++){var d=e(h[f]);this.r.push(d.r),this.g.push(d.g),this.b.push(d.b)}}return this.onEmit=l,this.onUpdate=u,this.current=i,this},setEase:function(h){this.easeName=h,this.ease=n(h)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(h,i,l){var u=this.ease(l),f=this.interpolation(this.r,u),d=this.interpolation(this.g,u),p=this.interpolation(this.b,u),x=a(f,d,p);return this.current=x,x}});c.exports=s},44777:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(45319),a=t(83419),n=t(99472),r=t(6113),e=t(95540),s=t(91389),h=t(77720),i=t(15994),l=new a({initialize:function(f,d,p){p===void 0&&(p=!1),this.propertyKey=f,this.propertyValue=d,this.defaultValue=d,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(u,f){u===void 0&&(u={}),f&&(this.propertyKey=f),this.propertyValue=e(u,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(u){var f;switch(this.method){case 1:case 3:case 8:f=u;break;case 2:this.propertyValue.indexOf(u)>=0&&(f=u);break;case 4:var d=(this.end-this.start)/this.steps;f=h(u,d),this.counter=f;break;case 5:case 6:case 7:f=g(u,this.start,this.end);break;case 9:f=this.start[0];break}return this.current=f,this},getMethod:function(){var u=this.propertyValue;if(u===null)return 0;var f=typeof u;if(f==="number")return 1;if(Array.isArray(u))return 2;if(f==="function")return 3;if(f==="object"){if(this.hasBoth(u,"start","end"))return this.has(u,"steps")?4:5;if(this.hasBoth(u,"min","max"))return 6;if(this.has(u,"random"))return 7;if(this.hasEither(u,"onEmit","onUpdate"))return 8;if(this.hasEither(u,"values","interpolation"))return 9}return 0},setMethods:function(){var u=this.propertyValue,f=u,d=this.defaultEmit,p=this.defaultUpdate;switch(this.method){case 1:d=this.staticValueEmit;break;case 2:d=this.randomStaticValueEmit,f=u[0];break;case 3:this._onEmit=u,d=this.proxyEmit;break;case 4:this.start=u.start,this.end=u.end,this.steps=u.steps,this.counter=this.start,this.yoyo=this.has(u,"yoyo")?u.yoyo:!1,this.direction=0,d=this.steppedEmit,f=this.start;break;case 5:this.start=u.start,this.end=u.end;var x=this.has(u,"ease")?u.ease:"Linear";this.ease=r(x,u.easeParams),d=this.has(u,"random")&&u.random?this.randomRangedValueEmit:this.easedValueEmit,p=this.easeValueUpdate,f=this.start;break;case 6:this.start=u.min,this.end=u.max,d=this.has(u,"int")&&u.int?this.randomRangedIntEmit:this.randomRangedValueEmit,f=this.start;break;case 7:var y=u.random;Array.isArray(y)&&(this.start=y[0],this.end=y[1]),d=this.randomRangedIntEmit,f=this.start;break;case 8:this._onEmit=this.has(u,"onEmit")?u.onEmit:this.defaultEmit,this._onUpdate=this.has(u,"onUpdate")?u.onUpdate:this.defaultUpdate,d=this.proxyEmit,p=this.proxyUpdate;break;case 9:this.start=u.values;var T=this.has(u,"ease")?u.ease:"Linear";this.ease=r(T,u.easeParams),this.interpolation=s(u.interpolation),d=this.easedValueEmit,p=this.easeValueUpdate,f=this.start[0];break}return this.onEmit=d,this.onUpdate=p,this.current=f,this},has:function(u,f){return u.hasOwnProperty(f)},hasBoth:function(u,f,d){return u.hasOwnProperty(f)&&u.hasOwnProperty(d)},hasEither:function(u,f,d){return u.hasOwnProperty(f)||u.hasOwnProperty(d)},defaultEmit:function(u,f,d){return d},defaultUpdate:function(u,f,d,p){return p},proxyEmit:function(u,f,d){var p=this._onEmit(u,f,d);return this.current=p,p},proxyUpdate:function(u,f,d,p){var x=this._onUpdate(u,f,d,p);return this.current=x,x},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var u=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[u],this.current},randomRangedValueEmit:function(u,f){var d=n(this.start,this.end);return u&&u.data[f]&&(u.data[f].min=d,u.data[f].max=this.end),this.current=d,d},randomRangedIntEmit:function(u,f){var d=o(this.start,this.end);return u&&u.data[f]&&(u.data[f].min=d,u.data[f].max=this.end),this.current=d,d},steppedEmit:function(){var u=this.counter,f=u,d=(this.end-this.start)/this.steps;if(this.yoyo){var p;this.direction===0?(f+=d,f>=this.end&&(p=f-this.end,f=this.end-p,this.direction=1)):(f-=d,f<=this.start&&(p=this.start-f,f=this.start+p,this.direction=0)),this.counter=f}else this.counter=i(f+d,this.start,this.end);return this.current=u,u},easedValueEmit:function(u,f){if(u&&u.data[f]){var d=u.data[f];d.min=this.start,d.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(u,f,d){var p=u.data[f],x,y=this.ease(d);return this.interpolation?x=this.interpolation(this.start,y):x=(p.max-p.min)*y+p.min,this.current=x,x},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});c.exports=l},24502:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(20286),n=new o({Extends:a,initialize:function(e,s,h,i,l){if(typeof e=="object"){var u=e;e=g(u,"x",0),s=g(u,"y",0),h=g(u,"power",0),i=g(u,"epsilon",100),l=g(u,"gravity",50)}else e===void 0&&(e=0),s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=100),l===void 0&&(l=50);a.call(this,e,s,!0),this._gravity=l,this._power=h*l,this._epsilon=i*i},update:function(r,e){var s=this.x-r.x,h=this.y-r.y,i=s*s+h*h;if(i!==0){var l=Math.sqrt(i);i<this._epsilon&&(i=this._epsilon);var u=this._power*e/(i*l)*100;r.velocityX+=s*u,r.velocityY+=h*u}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(r){this._epsilon=r*r}},power:{get:function(){return this._power/this._gravity},set:function(r){this._power=r*this._gravity}},gravity:{get:function(){return this._gravity},set:function(r){var e=this.power;this._gravity=r,this.power=e}}});c.exports=n},56480:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(45319),a=t(83419),n=t(39506),r=t(87841),e=t(11520),s=t(26099),h=new a({initialize:function(l){this.emitter=l,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new s,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=l.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new o(this)),this.bounds=new r},emit:function(i,l,u,f,d,p){return this.emitter.emit(i,l,u,f,d,p)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(i,l){i===void 0&&(i=0),l===void 0&&(l=0),this.x=i,this.y=l},fire:function(i,l){var u=this.emitter,f=u.ops,d=u.getAnim();if(d?this.anims.play(d):(this.frame=u.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(u.getEmitZone(this),i===void 0?this.x+=f.x.onEmit(this,"x"):f.x.steps>0?this.x+=i+f.x.onEmit(this,"x"):this.x+=i,l===void 0?this.y+=f.y.onEmit(this,"y"):f.y.steps>0?this.y+=l+f.y.onEmit(this,"y"):this.y+=l,this.life=f.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=f.delay.onEmit(this,"delay"),this.holdCurrent=f.hold.onEmit(this,"hold"),this.scaleX=f.scaleX.onEmit(this,"scaleX"),this.scaleY=f.scaleY.active?f.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=f.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),u.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&u.getDeathZone(this))return this.lifeCurrent=0,!1;var p=f.speedX.onEmit(this,"speedX"),x=f.speedY.active?f.speedY.onEmit(this,"speedY"):p;if(u.radial){var y=n(f.angle.onEmit(this,"angle"));this.velocityX=Math.cos(y)*Math.abs(p),this.velocityY=Math.sin(y)*Math.abs(x)}else if(u.moveTo){var T=f.moveToX.onEmit(this,"moveToX"),C=f.moveToY.onEmit(this,"moveToY"),A=this.life/1e3;this.velocityX=(T-this.x)/A,this.velocityY=(C-this.y)/A}else this.velocityX=p,this.velocityY=x;return u.acceleration&&(this.accelerationX=f.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=f.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=f.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=f.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=f.bounce.onEmit(this,"bounce"),this.alpha=f.alpha.onEmit(this,"alpha"),f.color.active?this.tint=f.color.onEmit(this,"tint"):this.tint=f.tint.onEmit(this,"tint"),!0},update:function(i,l,u){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=i,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=i,!1;this.anims&&this.anims.update(0,i);var f=this.emitter,d=f.ops,p=1-this.lifeCurrent/this.life;if(this.lifeT=p,this.x=d.x.onUpdate(this,"x",p,this.x),this.y=d.y.onUpdate(this,"y",p,this.y),f.moveTo){var x=d.moveToX.onUpdate(this,"moveToX",p,f.moveToX),y=d.moveToY.onUpdate(this,"moveToY",p,f.moveToY),T=this.lifeCurrent/1e3;this.velocityX=(x-this.x)/T,this.velocityY=(y-this.y)/T}return this.computeVelocity(f,i,l,u,p),this.scaleX=d.scaleX.onUpdate(this,"scaleX",p,this.scaleX),d.scaleY.active?this.scaleY=d.scaleY.onUpdate(this,"scaleY",p,this.scaleY):this.scaleY=this.scaleX,this.angle=d.rotate.onUpdate(this,"rotate",p,this.angle),this.rotation=n(this.angle),f.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g(d.alpha.onUpdate(this,"alpha",p,this.alpha),0,1),d.color.active?this.tint=d.color.onUpdate(this,"color",p,this.tint):this.tint=d.tint.onUpdate(this,"tint",p,this.tint),this.lifeCurrent-=i,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(i,l,u,f,d){var p=i.ops,x=this.velocityX,y=this.velocityY,T=p.accelerationX.onUpdate(this,"accelerationX",d,this.accelerationX),C=p.accelerationY.onUpdate(this,"accelerationY",d,this.accelerationY),A=p.maxVelocityX.onUpdate(this,"maxVelocityX",d,this.maxVelocityX),R=p.maxVelocityY.onUpdate(this,"maxVelocityY",d,this.maxVelocityY);this.bounce=p.bounce.onUpdate(this,"bounce",d,this.bounce),x+=i.gravityX*u+T*u,y+=i.gravityY*u+C*u,x=g(x,-A,A),y=g(y,-R,R),this.velocityX=x,this.velocityY=y,this.x+=x*u,this.y+=y*u,i.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var M=0;M<f.length;M++){var L=f[M];L.active&&L.update(this,l,u,d)}},setSizeToFrame:function(){},getBounds:function(i){i===void 0&&(i=this.emitter.getWorldTransformMatrix());var l=Math.abs(i.scaleX)*this.scaleX,u=Math.abs(i.scaleY)*this.scaleY,f=this.x,d=this.y,p=this.rotation,x=this.frame.width*l/2,y=this.frame.height*u/2,T=this.bounds,C=new s(f-x,d-y),A=new s(f+x,d-y),R=new s(f-x,d+y),M=new s(f+x,d+y);return p!==0&&(e(C,f,d,p),e(A,f,d,p),e(R,f,d,p),e(M,f,d,p)),i.transformPoint(C.x,C.y,C),i.transformPoint(A.x,A.y,A),i.transformPoint(R.x,R.y,R),i.transformPoint(M.x,M.y,M),T.x=Math.min(C.x,A.x,R.x,M.x),T.y=Math.min(C.y,A.y,R.y,M.y),T.width=Math.max(C.x,A.x,R.x,M.x)-T.x,T.height=Math.max(C.y,A.y,R.y,M.y)-T.y,T},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});c.exports=h},69601:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(20286),a=t(87841),n=new o({Extends:g,initialize:function(e,s,h,i,l,u,f,d){l===void 0&&(l=!0),u===void 0&&(u=!0),f===void 0&&(f=!0),d===void 0&&(d=!0),g.call(this,e,s,!0),this.bounds=new a(e,s,h,i),this.collideLeft=l,this.collideRight=u,this.collideTop=f,this.collideBottom=d},update:function(r){var e=this.bounds,s=-r.bounce,h=r.worldPosition;h.x<e.x&&this.collideLeft?(r.x+=e.x-h.x,r.velocityX*=s):h.x>e.right&&this.collideRight&&(r.x-=h.x-e.right,r.velocityX*=s),h.y<e.y&&this.collideTop?(r.y+=e.y-h.y,r.velocityY*=s):h.y>e.bottom&&this.collideBottom&&(r.y-=h.y-e.bottom,r.velocityY*=s)}});c.exports=n},31600:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(53774),n=t(43459),r=t(26388),e=t(19909),s=t(76472),h=t(44777),i=t(20696),l=t(95643),u=t(95540),f=t(26546),d=t(24502),p=t(1985),x=t(97022),y=t(86091),T=t(73162),C=t(20074),A=t(269),R=t(56480),M=t(69601),L=t(68875),I=t(87841),O=t(59996),D=t(72905),B=t(90668),V=t(19186),W=t(61340),Y=t(26099),X=t(15994),U=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],z=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],G=new o({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,B],initialize:function(H,j,$,k,Q){l.call(this,H,"ParticleEmitter"),this.particleClass=R,this.config=null,this.ops={accelerationX:new h("accelerationX",0),accelerationY:new h("accelerationY",0),alpha:new h("alpha",1),angle:new h("angle",{min:0,max:360},!0),bounce:new h("bounce",0),color:new s("color"),delay:new h("delay",0,!0),hold:new h("hold",0,!0),lifespan:new h("lifespan",1e3,!0),maxVelocityX:new h("maxVelocityX",1e4),maxVelocityY:new h("maxVelocityY",1e4),moveToX:new h("moveToX",0),moveToY:new h("moveToY",0),quantity:new h("quantity",1,!0),rotate:new h("rotate",0),scaleX:new h("scaleX",1),scaleY:new h("scaleY",1),speedX:new h("speedX",0,!0),speedY:new h("speedY",0,!0),tint:new h("tint",16777215),x:new h("x",0),y:new h("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new Y,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new W,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new T(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(j,$),this.setTexture(k),Q&&this.setConfig(Q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(b){if(!b)return this;this.config=b;var H=0,j="",$=this.ops;for(H=0;H<z.length;H++)j=z[H],$[j].loadConfig(b);for(H=0;H<U.length;H++)j=U[H],x(b,j)&&(this[j]=u(b,j));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,x(b,"speed")&&($.speedX.loadConfig(b,"speed"),$.speedY.active=!1),(p(b,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),x(b,"scale")&&($.scaleX.loadConfig(b,"scale"),$.scaleY.active=!1),x(b,"callbackScope")){var k=u(b,"callbackScope",null);this.emitCallbackScope=k,this.deathCallbackScope=k}if(x(b,"emitZone")&&this.addEmitZone(b.emitZone),x(b,"deathZone")&&this.addDeathZone(b.deathZone),x(b,"bounds")){var Q=this.addParticleBounds(b.bounds);Q.collideLeft=u(b,"collideLeft",!0),Q.collideRight=u(b,"collideRight",!0),Q.collideTop=u(b,"collideTop",!0),Q.collideBottom=u(b,"collideBottom",!0)}return x(b,"followOffset")&&this.followOffset.setFromObject(u(b,"followOffset",0)),x(b,"texture")&&this.setTexture(b.texture),x(b,"frame")?this.setEmitterFrame(b.frame):x(b,"anim")&&this.setAnim(b.anim),x(b,"reserve")&&this.reserve(b.reserve),x(b,"advance")&&this.fastForward(b.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(i.START,this),this},updateConfig:function(b){return b&&(this.config?this.setConfig(A(this.config,b)):this.setConfig(b)),this},toJSON:function(){var b=a(this),H=0,j="";for(H=0;H<U.length;H++)j=U[H],b[j]=this[j];var $=this.ops;for(H=0;H<z.length;H++)j=z[H],$[j]&&(b[j]=$[j].toJSON());return $.speedY.active||(delete b.speedX,b.speed=$.speedX.toJSON()),this.scaleX===this.scaleY&&(delete b.scaleX,delete b.scaleY,b.scale=$.scaleX.toJSON()),b},resetCounters:function(b,H){var j=this.counters;j.fill(0),j[0]=b,H&&(j[5]=1)},startFollow:function(b,H,j,$){return H===void 0&&(H=0),j===void 0&&(j=0),$===void 0&&($=!1),this.follow=b,this.followOffset.set(H,j),this.trackVisible=$,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var b=this.frames,H=b.length,j;return H===1?j=b[0]:this.randomFrame?j=f(b):(j=b[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===H&&(this.currentFrame=0))),this.texture.get(j)},setEmitterFrame:function(b,H,j){H===void 0&&(H=!0),j===void 0&&(j=1),this.randomFrame=H,this.frameQuantity=j,this.currentFrame=0;var $=typeof b;if(this.frames.length=0,Array.isArray(b))this.frames=this.frames.concat(b);else if($==="string"||$==="number")this.frames.push(b);else if($==="object"){var k=b;b=u(k,"frames",null),b&&(this.frames=this.frames.concat(b));var Q=u(k,"cycle",!1);this.randomFrame=!Q,this.frameQuantity=u(k,"quantity",j)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var b=this.anims,H=b.length;if(H===0)return null;if(H===1)return b[0];if(this.randomAnim)return f(b);var j=b[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=X(this.currentAnim+1,0,H)),j},setAnim:function(b,H,j){H===void 0&&(H=!0),j===void 0&&(j=1),this.randomAnim=H,this.animQuantity=j,this.currentAnim=0;var $=typeof b;if(this.anims.length=0,Array.isArray(b))this.anims=this.anims.concat(b);else if($==="string")this.anims.push(b);else if($==="object"){var k=b;b=u(k,"anims",null),b&&(this.anims=this.anims.concat(b));var Q=u(k,"cycle",!1);this.randomAnim=!Q,this.animQuantity=u(k,"quantity",j)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(b){return b===void 0&&(b=!0),this.radial=b,this},addParticleBounds:function(b,H,j,$,k,Q,_,tt){if(typeof b=="object"){var et=b;b=et.x,H=et.y,j=x(et,"w")?et.w:et.width,$=x(et,"h")?et.h:et.height}return this.addParticleProcessor(new M(b,H,j,$,k,Q,_,tt))},setParticleSpeed:function(b,H){return H===void 0&&(H=b),this.ops.speedX.onChange(b),b===H?this.ops.speedY.active=!1:this.ops.speedY.onChange(H),this.radial=!0,this},setParticleScale:function(b,H){return b===void 0&&(b=1),H===void 0&&(H=b),this.ops.scaleX.onChange(b),this.ops.scaleY.onChange(H),this},setParticleGravity:function(b,H){return this.gravityX=b,this.gravityY=H,this},setParticleAlpha:function(b){return this.ops.alpha.onChange(b),this},setParticleTint:function(b){return this.ops.tint.onChange(b),this},setEmitterAngle:function(b){return this.ops.angle.onChange(b),this},setParticleLifespan:function(b){return this.ops.lifespan.onChange(b),this},setQuantity:function(b){return this.quantity=b,this},setFrequency:function(b,H){return this.frequency=b,this.flowCounter=b>0?b:0,H&&(this.quantity=H),this},addDeathZone:function(b){Array.isArray(b)||(b=[b]);for(var H,j=[],$=0;$<b.length;$++)if(H=b[$],H instanceof r)j.push(H);else if(typeof H.contains=="function")H=new r(H,!0),j.push(H);else{var k=u(H,"type","onEnter"),Q=u(H,"source",null);if(Q&&typeof Q.contains=="function"){var _=k==="onEnter";H=new r(Q,_),j.push(H)}}return this.deathZones=this.deathZones.concat(j),j},removeDeathZone:function(b){return D(this.deathZones,b),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(b){Array.isArray(b)||(b=[b]);for(var H,j=[],$=0;$<b.length;$++)if(H=b[$],H instanceof L||H instanceof e)j.push(H);else{var k=u(H,"source",null);if(k){var Q=u(H,"type","random");if(Q==="random"&&typeof k.getRandomPoint=="function")H=new L(k),j.push(H);else if(Q==="edge"&&typeof k.getPoints=="function"){var _=u(H,"quantity",1),tt=u(H,"stepRate",0),et=u(H,"yoyo",!1),it=u(H,"seamless",!0),ot=u(H,"total",-1);H=new e(k,_,tt,et,it,ot),j.push(H)}}}return this.emitZones=this.emitZones.concat(j),j},removeEmitZone:function(b){return D(this.emitZones,b),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(b){var H=this.emitZones,j=H.length;if(j!==0){var $=H[this.zoneIndex];$.getPoint(b),$.total>-1&&(this.zoneTotal++,this.zoneTotal===$.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===j&&(this.zoneIndex=0)))}},getDeathZone:function(b){for(var H=this.deathZones,j=0;j<H.length;j++){var $=H[j];if($.willKill(b))return this.emit(i.DEATH_ZONE,this,b,$),!0}return!1},setEmitZone:function(b){var H;return isFinite(b)?H=b:H=this.emitZones.indexOf(b),H>=0&&(this.zoneIndex=H),this},addParticleProcessor:function(b){return this.processors.exists(b)||(b.emitter&&b.emitter.removeParticleProcessor(b),this.processors.add(b),b.emitter=this),b},removeParticleProcessor:function(b){return this.processors.exists(b)&&(this.processors.remove(b,!0),b.emitter=null),b},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(b){return this.addParticleProcessor(new d(b))},reserve:function(b){var H=this.dead;if(this.maxParticles>0){var j=this.getParticleCount();j+b>this.maxParticles&&(b=this.maxParticles-(j+b))}for(var $=0;$<b;$++)H.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(b,H){return b===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof b=="function"&&(this.emitCallback=b,H&&(this.emitCallbackScope=H)),this},onParticleDeath:function(b,H){return b===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof b=="function"&&(this.deathCallback=b,H&&(this.deathCallbackScope=H)),this},killAll:function(){for(var b=this.dead,H=this.alive;H.length>0;)b.push(H.pop());return this},forEachAlive:function(b,H){for(var j=this.alive,$=j.length,k=0;k<$;k++)b.call(H,j[k],this);return this},forEachDead:function(b,H){for(var j=this.dead,$=j.length,k=0;k<$;k++)b.call(H,j[k],this);return this},start:function(b,H){return b===void 0&&(b=0),this.emitting||(b>0&&this.fastForward(b),this.emitting=!0,this.resetCounters(this.frequency,!0),H!==void 0&&(this.duration=Math.abs(H)),this.emit(i.START,this)),this},stop:function(b){return b===void 0&&(b=!1),this.emitting&&(this.emitting=!1,b&&this.killAll(),this.emit(i.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(b,H){return b===void 0&&(b=""),H===void 0&&(H=this.true),this.sortProperty=b,this.sortOrderAsc=H,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(b){return this.sortProperty!==""?b=this.depthSortCallback:b=null,this.sortCallback=b,this},depthSort:function(){return V(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(b,H){var j=this.sortProperty;return this.sortOrderAsc?b[j]-H[j]:H[j]-b[j]},flow:function(b,H,j){return H===void 0&&(H=1),this.emitting=!1,this.frequency=b,this.quantity=H,j!==void 0&&(this.stopAfter=j),this.start()},explode:function(b,H,j){this.frequency=-1,this.resetCounters(-1,!0);var $=this.emitParticle(b,H,j);return this.emit(i.EXPLODE,this,$),$},emitParticleAt:function(b,H,j){return this.emitParticle(j,b,H)},emitParticle:function(b,H,j){if(!this.atLimit()){b===void 0&&(b=this.ops.quantity.onEmit());for(var $=this.dead,k=this.stopAfter,Q=this.follow?this.follow.x+this.followOffset.x:H,_=this.follow?this.follow.y+this.followOffset.y:j,tt=0;tt<b;tt++){var et=$.pop();if(et||(et=new this.particleClass(this)),et.fire(Q,_)?(this.particleBringToTop?this.alive.push(et):this.alive.unshift(et),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,et,this)):this.dead.push(et),k>0&&(this.stopCounter++,this.stopCounter>=k)||this.atLimit())break}return et}},fastForward:function(b,H){H===void 0&&(H=1e3/60);var j=0;for(this.skipping=!0;j<Math.abs(b);)this.preUpdate(0,H),j+=H;return this.skipping=!1,this},preUpdate:function(b,H){H*=this.timeScale;var j=H/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var $=this.getProcessors(),k=this.alive,Q=this.dead,_=0,tt=[],et=k.length;for(_=0;_<et;_++){var it=k[_];it.update(H,j,$)&&tt.push({index:_,particle:it})}if(et=tt.length,et>0){var ot=this.deathCallback,nt=this.deathCallbackScope;for(_=et-1;_>=0;_--){var ut=tt[_];k.splice(ut.index,1),Q.push(ut.particle),ot&&ot.call(nt,ut.particle),ut.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&k.length===0&&(this.completeFlag=0,this.emit(i.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=H;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=H,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(b){for(var H=this.getWorldTransformMatrix(),j=this.alive,$=j.length,k=[],Q=0;Q<$;Q++){var _=j[Q];O(b,_.getBounds(H))&&k.push(_)}return k},getBounds:function(b,H,j,$){b===void 0&&(b=0),H===void 0&&(H=0),j===void 0&&(j=1e3/60),$===void 0&&($=new I);var k=this.getWorldTransformMatrix(),Q,_,tt=this.alive,et=!1;if($.setTo(0,0,0,0),H>0){var it=0;for(this.skipping=!0;it<Math.abs(H);){for(this.preUpdate(0,j),Q=0;Q<tt.length;Q++)_=tt[Q].getBounds(k),et?C($,_):(et=!0,n(_,$));it+=j}this.skipping=!1}else for(Q=0;Q<tt.length;Q++)_=tt[Q].getBounds(k),et?C($,_):(et=!0,n(_,$));return b>0&&y($,b,b),$},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(b){this.ops.x.onChange(b)}},particleY:{get:function(){return this.ops.y.current},set:function(b){this.ops.y.onChange(b)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(b){this.ops.accelerationX.onChange(b)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(b){this.ops.accelerationY.onChange(b)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(b){this.ops.maxVelocityX.onChange(b)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(b){this.ops.maxVelocityY.onChange(b)}},speed:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b),this.ops.speedY.onChange(b)}},speedX:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b)}},speedY:{get:function(){return this.ops.speedY.current},set:function(b){this.ops.speedY.onChange(b)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(b){this.ops.moveToX.onChange(b)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(b){this.ops.moveToY.onChange(b)}},bounce:{get:function(){return this.ops.bounce.current},set:function(b){this.ops.bounce.onChange(b)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(b){this.ops.scaleX.onChange(b)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(b){this.ops.scaleY.onChange(b)}},particleColor:{get:function(){return this.ops.color.current},set:function(b){this.ops.color.onChange(b)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(b){this.ops.color.setEase(b)}},particleTint:{get:function(){return this.ops.tint.current},set:function(b){this.ops.tint.onChange(b)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(b){this.ops.alpha.onChange(b)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(b){this.ops.lifespan.onChange(b)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(b){this.ops.angle.onChange(b)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(b){this.ops.rotate.onChange(b)}},quantity:{get:function(){return this.ops.quantity.current},set:function(b){this.ops.quantity.onChange(b)}},delay:{get:function(){return this.ops.delay.current},set:function(b){this.ops.delay.onChange(b)}},hold:{get:function(){return this.ops.hold.current},set:function(b){this.ops.hold.onChange(b)}},flowCounter:{get:function(){return this.counters[0]},set:function(b){this.counters[0]=b}},frameCounter:{get:function(){return this.counters[1]},set:function(b){this.counters[1]=b}},animCounter:{get:function(){return this.counters[2]},set:function(b){this.counters[2]=b}},elapsed:{get:function(){return this.counters[3]},set:function(b){this.counters[3]=b}},stopCounter:{get:function(){return this.counters[4]},set:function(b){this.counters[4]=b}},completeFlag:{get:function(){return this.counters[5]},set:function(b){this.counters[5]=b}},zoneIndex:{get:function(){return this.counters[6]},set:function(b){this.counters[6]=b}},zoneTotal:{get:function(){return this.counters[7]},set:function(b){this.counters[7]=b}},currentFrame:{get:function(){return this.counters[8]},set:function(b){this.counters[8]=b}},currentAnim:{get:function(){return this.counters[9]},set:function(b){this.counters[9]=b}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var b,H=this.ops;for(b=0;b<z.length;b++){var j=z[b];H[j].destroy()}for(b=0;b<this.alive.length;b++)this.alive[b].destroy();for(b=0;b<this.dead.length;b++)this.dead[b].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});c.exports=G},9871:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(59996),g=t(61340),a=new g,n=new g,r=new g,e=new g,s=function(h,i,l,u){var f=a,d=n,p=r,x=e;u?(x.loadIdentity(),x.multiply(u),x.translate(i.x,i.y),x.rotate(i.rotation),x.scale(i.scaleX,i.scaleY)):x.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var y=h.currentContext,T=l.roundPixels,C=l.alpha,A=i.alpha,R=i.alive,M=R.length,L=i.viewBounds;if(!(!i.visible||M===0||L&&!o(L,l.worldView))){i.sortCallback&&i.depthSort(),l.addToRenderList(i);var I=i.scrollFactorX,O=i.scrollFactorY;y.save(),y.globalCompositeOperation=h.blendModes[i.blendMode];for(var D=0;D<M;D++){var B=R[D],V=B.alpha*A*C;if(!(V<=0||B.scaleX===0||B.scaleY===0)){p.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),f.copyFrom(l.matrix),f.multiplyWithOffset(x,-l.scrollX*I,-l.scrollY*O),p.e=B.x,p.f=B.y,f.multiply(p,d);var W=B.frame,Y=W.canvasData;if(Y.width>0&&Y.height>0){var X=-W.halfWidth,U=-W.halfHeight;y.globalAlpha=V,y.save(),d.setToContext(y),T&&(X=Math.round(X),U=Math.round(U)),y.imageSmoothingEnabled=!W.source.scaleMode,y.drawImage(W.source.image,Y.x,Y.y,Y.width,Y.height,X,U,Y.width,Y.height),y.restore()}}}y.restore()}};c.exports=s},92730:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(95540),r=t(31600);g.register("particles",function(e,s){e===void 0&&(e={});var h=a(e,"key",null),i=n(e,"config",null),l=new r(this.scene,0,0,h);return s!==void 0&&(e.add=s),o(this.scene,l,e),i&&l.setConfig(i),l})},676:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(31600);o.register("particles",function(a,n,r,e){return a!==void 0&&typeof a=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,a,n,r,e))})},90668:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(21188),a=t(9871),c.exports={renderWebGL:g,renderCanvas:a}},21188:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(59996),g=t(61340),a=t(70554),n=new g,r=new g,e=new g,s=new g,h=function(i,l,u,f){var d=i.pipelines.set(l.pipeline),p=n,x=r,y=e,T=s;f?(T.loadIdentity(),T.multiply(f),T.translate(l.x,l.y),T.rotate(l.rotation),T.scale(l.scaleX,l.scaleY)):T.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var C=a.getTintAppendFloatAlpha,A=u.alpha,R=l.alpha;i.pipelines.preBatch(l);var M=l.alive,L=M.length,I=l.viewBounds;if(!(L===0||I&&!o(I,u.worldView))){l.sortCallback&&l.depthSort(),u.addToRenderList(l),p.copyFrom(u.matrix),p.multiplyWithOffset(T,-u.scrollX*l.scrollFactorX,-u.scrollY*l.scrollFactorY),i.setBlendMode(l.blendMode),l.mask&&(l.mask.preRenderWebGL(i,l,u),i.pipelines.set(l.pipeline));for(var O=l.tintFill,D,B,V=0;V<L;V++){var W=M[V],Y=W.alpha*R*A;if(!(Y<=0||W.scaleX===0||W.scaleY===0)){y.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.e=W.x,y.f=W.y,p.multiply(y,x);var X=W.frame;X.glTexture!==B&&(B=X.glTexture,D=d.setGameObject(l,X));var U=-X.halfWidth,z=-X.halfHeight,G=x.setQuad(U,z,U+X.width,z+X.height),b=C(W.tint,Y);d.shouldFlush(6)&&(d.flush(),D=d.setGameObject(l,X)),d.batchQuad(l,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],X.u0,X.v0,X.u1,X.v1,b,b,b,b,O,B,D)}}l.mask&&l.mask.postRenderWebGL(i,u),i.pipelines.postBatch(l)}};c.exports=h},20286:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e){n===void 0&&(n=0),r===void 0&&(r=0),e===void 0&&(e=!0),this.emitter,this.x=n,this.y=r,this.active=e},update:function(){},destroy:function(){this.emitter=null}});c.exports=g},9774:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},812:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="deathzone"},30522:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="explode"},96695:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},18677:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},20696:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COMPLETE:t(9774),DEATH_ZONE:t(812),EXPLODE:t(30522),START:t(96695),STOP:t(18677)}},18404:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={EmitterColorOp:t(76472),EmitterOp:t(44777),Events:t(20696),GravityWell:t(24502),Particle:t(56480),ParticleBounds:t(69601),ParticleEmitter:t(31600),ParticleProcessor:t(20286),Zones:t(21024)}},26388:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r){this.source=n,this.killOnEnter=r},willKill:function(a){var n=this.source.contains(a.x,a.y);return n&&this.killOnEnter||!n&&!this.killOnEnter}});c.exports=g},19909:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s,h,i){s===void 0&&(s=!1),h===void 0&&(h=!0),i===void 0&&(i=-1),this.source=n,this.points=[],this.quantity=r,this.stepRate=e,this.yoyo=s,this.counter=-1,this.seamless=h,this._length=0,this._direction=0,this.total=i,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],n=this.points[this.points.length-1];a.x===n.x&&a.y===n.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var n=this.points[this.counter];n&&(a.x=n.x,a.y=n.y)}});c.exports=g},68875:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(r){this.source=r,this._tempVec=new g,this.total=-1},getPoint:function(n){var r=this._tempVec;this.source.getRandomPoint(r),n.x=r.x,n.y=r.y}});c.exports=a},21024:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DeathZone:t(26388),EdgeZone:t(19909),RandomZone:t(68875)}},1159:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(68287),n=new o({Extends:a,Mixins:[g.PathFollower],initialize:function(e,s,h,i,l,u){a.call(this,e,h,i,l,u),this.path=s},preUpdate:function(r,e){this.anims.update(r,e),this.pathUpdate(r)}});c.exports=n},90145:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(1159);o.register("follower",function(a,n,r,e,s){var h=new g(this.scene,a,n,r,e,s);return this.displayList.add(h),this.updateList.add(h),h})},33663:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(48803),n=t(90664),r=t(4703),e=t(45650),s=new g({Extends:r,initialize:function(i,l,u,f,d,p,x,y){f||(f="__DEFAULT"),r.call(this,i,l,u,f,d),this.type="Plane",this.anims=new o(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(p,x,y),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(h,i,l){h===void 0&&(h=8),i===void 0&&(i=8),l===void 0&&(l=!1);var u=!1;return l&&(u=!0),this.gridWidth=h,this.gridHeight=i,this.isTiled=l,this.clear(),a({mesh:this,widthSegments:h,heightSegments:i,isOrtho:!1,tile:l,flipY:u}),this},setSizeToFrame:function(h){h===void 0&&(h=!0);var i=this.frame;if(this.setPerspective(this.width/i.width,this.height/i.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!h)return this;var l=this.gridWidth,u=this.gridHeight,f=this.vertices,d=i.u0,p=i.u1,x=i.v0,y=i.v1,T,C,A=0;if(this.isTiled)for(x=i.v1,y=i.v0,C=0;C<u;C++)for(T=0;T<l;T++)f[A++].setUVs(d,y),f[A++].setUVs(d,x),f[A++].setUVs(p,y),f[A++].setUVs(d,x),f[A++].setUVs(p,x),f[A++].setUVs(p,y);else{var R=l+1,M=u+1,L=p-d,I=y-x,O=[];for(C=0;C<M;C++)for(T=0;T<R;T++){var D=d+L*(T/l),B=x+I*(C/u);O.push(D,B)}for(C=0;C<u;C++)for(T=0;T<l;T++){var V=(T+R*C)*2,W=(T+R*(C+1))*2,Y=(T+1+R*(C+1))*2,X=(T+1+R*C)*2;f[A++].setUVs(O[V],O[V+1]),f[A++].setUVs(O[W],O[W+1]),f[A++].setUVs(O[X],O[X+1]),f[A++].setUVs(O[W],O[W+1]),f[A++].setUVs(O[Y],O[Y+1]),f[A++].setUVs(O[X],O[X+1])}}return this},setViewHeight:function(h){h===void 0&&(h=this.frame.height);var i=this.fov*(Math.PI/180);this.viewPosition.z=this.height/h/Math.tan(i/2),this.dirtyCache[10]=1},createCheckerboard:function(h,i,l,u,f){h===void 0&&(h=16777215),i===void 0&&(i=255),l===void 0&&(l=255),u===void 0&&(u=255),f===void 0&&(f=128);for(var d=n(h),p=n(i),x=[],y=0;y<16;y++)for(var T=0;T<16;T++)y<8&&T<8||y>7&&T>7?x.push(d.r,d.g,d.b,l):x.push(p.r,p.g,p.b,u);var C=this.scene.sys.textures.addUint8Array(e(),new Uint8Array(x),16,16);return this.removeCheckerboard(),this.setTexture(C),this.setSizeToFrame(),this.setViewHeight(f),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(h,i){return this.anims.play(h,i)},playReverse:function(h,i){return this.anims.playReverse(h,i)},playAfterDelay:function(h,i){return this.anims.playAfterDelay(h,i)},playAfterRepeat:function(h,i){return this.anims.playAfterRepeat(h,i)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},preUpdate:function(h,i){r.prototype.preUpdate.call(this,h,i),this.anims.update(h,i)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});c.exports=s},56015:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(13059),a=t(44603),n=t(23568),r=t(35154),e=t(33663);a.register("plane",function(s,h){s===void 0&&(s={});var i=n(s,"key",null),l=n(s,"frame",null),u=r(s,"width",8),f=r(s,"height",8),d=r(s,"tile",!1),p=new e(this.scene,0,0,i,l,u,f,d);h!==void 0&&(s.add=h);var x=r(s,"checkerboard",null);if(x){var y=r(x,"color1",16777215),T=r(x,"color2",255),C=r(x,"alpha1",255),A=r(x,"alpha2",255),R=r(x,"height",128);p.createCheckerboard(y,T,C,A,R)}return o(this.scene,p,s),g(p,s),p})},30985:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33663),g=t(39429);g.register("plane",function(a,n,r,e,s,h,i){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i))})},80321:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(30100),r=t(36060),e=t(67277),s=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,e],initialize:function(i,l,u,f,d,p,x){f===void 0&&(f=16777215),d===void 0&&(d=128),p===void 0&&(p=1),x===void 0&&(x=.1),a.call(this,i,"PointLight"),this.initPipeline(r.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(l,u),this.color=n(f),this.intensity=p,this.attenuation=x,this.width=d*2,this.height=d*2,this._radius=d},radius:{get:function(){return this._radius},set:function(h){this._radius=h,this.width=h*2,this.height=h*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});c.exports=s},39829:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(80321);g.register("pointlight",function(r,e){r===void 0&&(r={});var s=a(r,"color",16777215),h=a(r,"radius",128),i=a(r,"intensity",1),l=a(r,"attenuation",.1),u=new n(this.scene,0,0,s,h,i,l);return e!==void 0&&(r.add=e),o(this.scene,u,r),u})},71255:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(80321);o.register("pointlight",function(a,n,r,e,s,h){return this.displayList.add(new g(this.scene,a,n,r,e,s,h))})},67277:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(57787),c.exports={renderWebGL:g,renderCanvas:a}},57787:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,n,r,e){r.addToRenderList(n);var s=a.pipelines.set(n.pipeline),h=o(n,r,e).calc,i=n.width,l=n.height,u=-n._radius,f=-n._radius,d=u+i,p=f+l,x=h.getX(0,0),y=h.getY(0,0),T=h.getX(u,f),C=h.getY(u,f),A=h.getX(u,p),R=h.getY(u,p),M=h.getX(d,p),L=h.getY(d,p),I=h.getX(d,f),O=h.getY(d,f);a.pipelines.preBatch(n),s.batchPointLight(n,r,T,C,A,R,M,L,I,O,x,y),a.pipelines.postBatch(n)};c.exports=g},591:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(81320),a=t(88571),n=new o({Extends:a,initialize:function(e,s,h,i,l){s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=32),l===void 0&&(l=32);var u=new g(e.sys.textures,"",i,l);a.call(this,e,s,h,u),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(r,e){this.width=r,this.height=e,this.texture.setSize(r,e),this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=r,s.hitArea.height=e),this},resize:function(r,e){return this.setSize(r,e),this},saveTexture:function(r){var e=this.texture;return e.key=r,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(r,e,s,h,i,l){return this.texture.fill(r,e,s,h,i,l),this},clear:function(){return this.texture.clear(),this},stamp:function(r,e,s,h,i){return this.texture.stamp(r,e,s,h,i),this},erase:function(r,e,s){return this.texture.erase(r,e,s),this},draw:function(r,e,s,h,i){return this.texture.draw(r,e,s,h,i),this},drawFrame:function(r,e,s,h,i,l){return this.texture.drawFrame(r,e,s,h,i,l),this},repeat:function(r,e,s,h,i,l,u,f,d){return this.texture.repeat(r,e,s,h,i,l,u,f,d),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(r,e,s,h,i){return this.texture.batchDraw(r,e,s,h,i),this},batchDrawFrame:function(r,e,s,h,i,l){return this.texture.batchDrawFrame(r,e,s,h,i,l),this},endDraw:function(r){return this.texture.endDraw(r),this},snapshotArea:function(r,e,s,h,i,l,u){return this.texture.snapshotArea(r,e,s,h,i,l,u),this},snapshot:function(r,e,s){return this.snapshotArea(0,0,this.width,this.height,r,e,s)},snapshotPixel:function(r,e,s){return this.snapshotArea(r,e,1,1,s,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});c.exports=n},34495:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(591);g.register("renderTexture",function(r,e){r===void 0&&(r={});var s=a(r,"x",0),h=a(r,"y",0),i=a(r,"width",32),l=a(r,"height",32),u=new n(this.scene,s,h,i,l);return e!==void 0&&(r.add=e),o(this.scene,u,r),u})},60505:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(591);o.register("renderTexture",function(a,n,r,e){return this.displayList.add(new g(this.scene,a,n,r,e))})},77757:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31401),n=t(95643),r=t(36060),e=t(38745),s=t(26099),h=new g({Extends:n,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.PostPipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,e],initialize:function(l,u,f,d,p,x,y,T,C){d===void 0&&(d="__DEFAULT"),x===void 0&&(x=2),y===void 0&&(y=!0),n.call(this,l,"Rope"),this.anims=new o(this),this.points=x,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=d==="__DEFAULT",this.dirty=!1,this.horizontal=y,this._flipX=!1,this._flipY=!1,this._perp=new s,this.debugCallback=null,this.debugGraphic=null,this.setTexture(d,p),this.setPosition(u,f),this.setSizeToFrame(),this.initPipeline(r.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(x)&&this.resizeArrays(x.length),this.setPoints(x,T,C),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(i,l){var u=this.anims.currentFrame;this.anims.update(i,l),this.anims.currentFrame!==u&&(this.updateUVs(),this.updateVertices())},play:function(i,l,u){return this.anims.play(i,l,u),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(i,l,u){return i===void 0&&(i=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(i,l,u))},setVertical:function(i,l,u){return i===void 0&&(i=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(i,l,u)):this},setTintFill:function(i){return i===void 0&&(i=!1),this.tintFill=i,this},setAlphas:function(i,l){var u=this.points.length;if(u<1)return this;var f=this.alphas;i===void 0?i=[1]:!Array.isArray(i)&&l===void 0&&(i=[i]);var d,p=0;if(l!==void 0)for(d=0;d<u;d++)p=d*2,f[p]=i,f[p+1]=l;else if(i.length===u)for(d=0;d<u;d++)p=d*2,f[p]=i[d],f[p+1]=i[d];else{var x=i[0];for(d=0;d<u;d++)p=d*2,i.length>p&&(x=i[p]),f[p]=x,i.length>p+1&&(x=i[p+1]),f[p+1]=x}return this},setColors:function(i){var l=this.points.length;if(l<1)return this;var u=this.colors;i===void 0?i=[16777215]:Array.isArray(i)||(i=[i]);var f,d=0;if(i.length===l)for(f=0;f<l;f++)d=f*2,u[d]=i[f],u[d+1]=i[f];else{var p=i[0];for(f=0;f<l;f++)d=f*2,i.length>d&&(p=i[d]),u[d]=p,i.length>d+1&&(p=i[d+1]),u[d+1]=p}return this},setPoints:function(i,l,u){if(i===void 0&&(i=2),typeof i=="number"){var f=i;f<2&&(f=2),i=[];var d,p,x;if(this.horizontal)for(x=-this.frame.halfWidth,p=this.frame.width/(f-1),d=0;d<f;d++)i.push({x:x+d*p,y:0});else for(x=-this.frame.halfHeight,p=this.frame.height/(f-1),d=0;d<f;d++)i.push({x:0,y:x+d*p})}var y=i.length,T=this.points.length;return y<1?(console.warn("Rope: Not enough points given"),this):(y===1&&(i.unshift({x:0,y:0}),y++),T!==y&&this.resizeArrays(y),this.dirty=!0,this.points=i,this.updateUVs(),l!=null&&this.setColors(l),u!=null&&this.setAlphas(u),this)},updateUVs:function(){for(var i=this.uv,l=this.points.length,u=this.frame.u0,f=this.frame.v0,d=this.frame.u1,p=this.frame.v1,x=(d-u)/(l-1),y=(p-f)/(l-1),T=0;T<l;T++){var C=T*4,A,R,M,L;this.horizontal?(this._flipX?(A=d-T*x,M=d-T*x):(A=u+T*x,M=u+T*x),this._flipY?(R=p,L=f):(R=f,L=p)):(this._flipX?(A=u,M=d):(A=d,M=u),this._flipY?(R=p-T*y,L=p-T*y):(R=f+T*y,L=f+T*y)),i[C+0]=A,i[C+1]=R,i[C+2]=M,i[C+3]=L}return this},resizeArrays:function(i){var l=this.colors,u=this.alphas;this.vertices=new Float32Array(i*4),this.uv=new Float32Array(i*4),l=new Uint32Array(i*2),u=new Float32Array(i*2);for(var f=0;f<i*2;f++)l[f]=16777215,u[f]=1;return this.colors=l,this.alphas=u,this.dirty=!0,this},updateVertices:function(){var i=this._perp,l=this.points,u=this.vertices,f=l.length;if(this.dirty=!1,!(f<1)){for(var d,p=l[0],x=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,y=0;y<f;y++){var T=l[y],C=y*4;y<f-1?d=l[y+1]:d=T,i.x=d.y-p.y,i.y=-(d.x-p.x);var A=i.length();i.x/=A,i.y/=A,i.x*=x,i.y*=x,u[C]=T.x+i.x,u[C+1]=T.y+i.y,u[C+2]=T.x-i.x,u[C+3]=T.y-i.y,p=T}return this}},setDebug:function(i,l){return this.debugGraphic=i,!i&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(i,l,u){var f=i.debugGraphic,d=u[0],p=u[1],x=u[2],y=u[3];f.lineBetween(d,p,x,y);for(var T=4;T<l;T+=4){var C=u[T+0],A=u[T+1],R=u[T+2],M=u[T+3];f.lineBetween(d,p,C,A),f.lineBetween(x,y,R,M),f.lineBetween(x,y,C,A),f.lineBetween(C,A,R,M),d=C,p=A,x=R,y=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(i){return this._flipX=i,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(i){return this._flipY=i,this.updateUVs()}}});c.exports=h},95262:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};c.exports=S},26209:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(35154),r=t(77757);g.register("rope",function(e,s){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=a(e,"horizontal",!0),u=n(e,"points",void 0),f=n(e,"colors",void 0),d=n(e,"alphas",void 0),p=new r(this.scene,0,0,h,i,u,l,f,d);return s!==void 0&&(e.add=s),o(this.scene,p,e),p})},96819:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(77757),g=t(39429);g.register("rope",function(a,n,r,e,s,h,i,l){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i,l))})},38745:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(20439),a=t(95262),c.exports={renderWebGL:g,renderCanvas:a}},20439:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){e.addToRenderList(r);var h=n.pipelines.set(r.pipeline,r),i=o(r,e,s).calc,l=r.vertices,u=r.uv,f=r.colors,d=r.alphas,p=r.alpha,x=g.getTintAppendFloatAlpha,y=e.roundPixels,T=l.length,C=Math.floor(T*.5);h.flush(),n.pipelines.preBatch(r);var A=h.setGameObject(r),R=h.vertexViewF32,M=h.vertexViewU32,L=h.vertexCount*h.currentShader.vertexComponentCount-1,I=0,O=r.tintFill;r.dirty&&r.updateVertices();for(var D=r.debugCallback,B=[],V=0;V<T;V+=2){var W=l[V+0],Y=l[V+1],X=W*i.a+Y*i.c+i.e,U=W*i.b+Y*i.d+i.f;y&&(X=Math.round(X),U=Math.round(U)),R[++L]=X,R[++L]=U,R[++L]=u[V+0],R[++L]=u[V+1],R[++L]=A,R[++L]=O,M[++L]=x(f[I],e.alpha*(d[I]*p)),I++,D&&(B[V+0]=X,B[V+1]=U)}D&&D.call(r,r,T,B),h.vertexCount+=C,h.currentBatch.count=h.vertexCount-h.currentBatch.start,n.pipelines.postBatch(r)};c.exports=a},20071:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(95540),r=t(79291),e=t(61622),s=t(25479),h=t(61340),i=t(95428),l=t(92503),u=new o({Extends:a,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,s],initialize:function(d,p,x,y,T,C,A,R){x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=128),C===void 0&&(C=128),a.call(this,d,"Shader"),this.blendMode=-1,this.shader;var M=d.sys.renderer;this.renderer=M,this.gl=M.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=M.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=M.width,this._rendererHeight=M.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,y),this.setSize(T,C),this.setOrigin(.5,.5),this.setShader(p,A,R),this.renderer.on(l.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(f){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setRenderToTexture:function(f,d){if(!this.renderToTexture){var p=this.width,x=this.height,y=this.renderer;this.glTexture=y.createTextureFromSource(null,p,x,0),this.framebuffer=y.createFramebuffer(p,x,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=x,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),f&&(this.texture=this.scene.sys.textures.addGLTexture(f,this.glTexture))}return this.shader&&(y.pipelines.clear(),this.load(),this.flush(),y.pipelines.rebind()),this},setShader:function(f,d,p){if(this.renderer.contextLost)return this._deferSetShader={key:f,textures:d,textureData:p},this;if(d===void 0&&(d=[]),typeof f=="string"){var x=this.scene.sys.cache.shader;if(!x.has(f))return console.warn("Shader missing: "+f),this;this.shader=x.get(f)}else this.shader=f;var y=this.gl,T=this.renderer;this.program&&T.deleteProgram(this.program);var C=T.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);y.uniformMatrix4fv(y.getUniformLocation(C.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),y.uniformMatrix4fv(y.getUniformLocation(C.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(C.webGLProgram,"uResolution"),this.width,this.height),this.program=C;var A=new Date,R={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[A.getFullYear(),A.getMonth(),A.getDate(),A.getHours()*60*60+A.getMinutes()*60+A.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=r(!0,{},this.shader.uniforms,R):this.uniforms=R;for(var M=0;M<4;M++)d[M]&&this.setSampler2D("iChannel"+M,d[M],M,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(f){return this.pointer=f,this},projOrtho:function(f,d,p,x){if(this.renderer.contextLost){this._deferProjOrtho={left:f,right:d,bottom:p,top:x};return}var y=-1e3,T=1e3,C=1/(f-d),A=1/(p-x),R=1/(y-T),M=this.projectionMatrix;M[0]=-2*C,M[5]=-2*A,M[10]=2*R,M[12]=(f+d)*C,M[13]=(x+p)*A,M[14]=(T+y)*R;var L=this.program,I=this.gl,O=this.renderer;O.setProgram(L),I.uniformMatrix4fv(I.getUniformLocation(L.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=d,this._rendererHeight=p},initUniforms:function(){var f=this.renderer.glFuncMap,d=this.program;this._textureCount=0;for(var p in this.uniforms){var x=this.uniforms[p],y=x.type,T=f[y];x.uniformLocation=this.renderer.createUniformLocation(d,p),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(f,d,p,x,y,T){y===void 0&&(y=0),T===void 0&&(T={});var C=this.uniforms[f];return C.value=d,T.width=p,T.height=x,C.textureData=T,this._textureCount=y,this.initSampler2D(C),this},setSampler2D:function(f,d,p,x){p===void 0&&(p=0);var y=this.scene.sys.textures;if(y.exists(d)){var T=y.getFrame(d);if(T.glTexture&&T.glTexture.isRenderTexture)return this.setSampler2DBuffer(f,T.glTexture,T.width,T.height,p,x);var C=this.uniforms[f],A=T.source;C.textureKey=d,C.source=A.image,C.value=T.glTexture,A.isGLTexture&&(x||(x={}),x.width=A.width,x.height=A.height),x&&(C.textureData=x),this._textureCount=p,this.initSampler2D(C)}return this},setUniform:function(f,d){return e(this.uniforms,f,d),this},getUniform:function(f){return n(this.uniforms,f,null)},setChannel0:function(f,d){return this.setSampler2D("iChannel0",f,0,d)},setChannel1:function(f,d){return this.setSampler2D("iChannel1",f,1,d)},setChannel2:function(f,d){return this.setSampler2D("iChannel2",f,2,d)},setChannel3:function(f,d){return this.setSampler2D("iChannel3",f,3,d)},initSampler2D:function(f){if(f.value){var d=f.textureData;if(d&&!f.value.isRenderTexture){var p=this.gl,x=f.value,y=p[n(d,"magFilter","linear").toUpperCase()],T=p[n(d,"minFilter","linear").toUpperCase()],C=p[n(d,"wrapS","repeat").toUpperCase()],A=p[n(d,"wrapT","repeat").toUpperCase()],R=p[n(d,"format","rgba").toUpperCase()],M=n(d,"flipY",!1),L=n(d,"width",x.width),I=n(d,"height",x.height),O=n(d,"source",x.pixels);d.repeat&&(C=p.REPEAT,A=p.REPEAT),d.width&&(O=null),x.update(O,L,I,M,C,A,T,y,R)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var f=this.gl,d=this.uniforms,p,x,y,T,C,A=0;for(var R in d)p=d[R],y=p.glFunc,x=p.glValueLength,T=p.uniformLocation,C=p.value,C!==null&&(x===1?p.glMatrix?y.call(f,T.webGLUniformLocation,p.transpose,C):y.call(f,T.webGLUniformLocation,C):x===2?y.call(f,T.webGLUniformLocation,C.x,C.y):x===3?y.call(f,T.webGLUniformLocation,C.x,C.y,C.z):x===4?y.call(f,T.webGLUniformLocation,C.x,C.y,C.z,C.w):p.type==="sampler2D"&&(f.activeTexture(f.TEXTURE0+A),f.bindTexture(f.TEXTURE_2D,C.webGLTexture),f.uniform1i(T.webGLUniformLocation,A),A++))},load:function(f){var d=this.gl,p=this.width,x=this.height,y=this.renderer,T=this.program,C=this.viewMatrix;if(!this.renderToTexture){var A=-this._displayOriginX,R=-this._displayOriginY;C[0]=f[0],C[1]=f[1],C[4]=f[2],C[5]=f[3],C[8]=f[4],C[9]=f[5],C[12]=C[0]*A+C[4]*R,C[13]=C[1]*A+C[5]*R}d.useProgram(T.webGLProgram),d.uniformMatrix4fv(d.getUniformLocation(T.webGLProgram,"uViewMatrix"),!1,C),d.uniformMatrix4fv(d.getUniformLocation(T.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),d.uniform2f(d.getUniformLocation(T.webGLProgram,"uResolution"),this.width,this.height);var M=this.uniforms,L=M.resolution;L.value.x=p,L.value.y=x,M.time.value=y.game.loop.getDuration();var I=this.pointer;if(I){var O=M.mouse,D=I.x/p,B=1-I.y/x;O.value.x=D.toFixed(2),O.value.y=B.toFixed(2)}this.syncUniforms()},flush:function(){var f=this.width,d=this.height,p=this.program,x=this.gl,y=this.vertexBuffer,T=this.renderer,C=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(T.setFramebuffer(this.framebuffer),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT)),x.bindBuffer(x.ARRAY_BUFFER,y.webGLBuffer);var A=x.getAttribLocation(p.webGLProgram,"inPosition");A!==-1&&(x.enableVertexAttribArray(A),x.vertexAttribPointer(A,2,x.FLOAT,!1,C,0));var R=this.vertexViewF32;R[3]=d,R[4]=f,R[5]=d,R[8]=f,R[9]=d,R[10]=f;var M=6;x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,M*C)),x.drawArrays(x.TRIANGLES,0,M),this.renderToTexture&&T.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var f=this._deferSetShader.key,d=this._deferSetShader.textures,p=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(f,d,p)}if(this._deferProjOrtho!==null){var x=this._deferProjOrtho.left,y=this._deferProjOrtho.right,T=this._deferProjOrtho.bottom,C=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(x,y,T,C)}},preDestroy:function(){var f=this.renderer;f.off(l.RESTORE_WEBGL,this.onContextRestored,this),f.deleteProgram(this.program),f.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(f.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),i(this.uniforms,function(d){f.deleteUniformLocation(d.uniformLocation),d.uniformLocation=null})}});c.exports=u},80464:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};c.exports=S},54935:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(20071);g.register("shader",function(r,e){r===void 0&&(r={});var s=a(r,"key",null),h=a(r,"x",0),i=a(r,"y",0),l=a(r,"width",128),u=a(r,"height",128),f=new n(this.scene,s,h,i,l,u);return e!==void 0&&(r.add=e),o(this.scene,f,r),f})},74177:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20071),g=t(39429);g.register("shader",function(a,n,r,e,s,h,i){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i))})},25479:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(19257),a=t(80464),c.exports={renderWebGL:g,renderCanvas:a}},19257:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,n,r,e){if(n.shader){if(r.addToRenderList(n),a.pipelines.clear(),n.renderToTexture)n.load(),n.flush();else{var s=o(n,r,e).calc;(a.width!==n._rendererWidth||a.height!==n._rendererHeight)&&n.projOrtho(0,a.width,a.height,0),n.load(s.matrix),n.flush()}a.pipelines.rebind()}};c.exports=g},10441:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,n,r,e,s,h){for(var i=o.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*e),l=r.pathData,u=r.pathIndexes,f=0;f<u.length;f+=3){var d=u[f]*2,p=u[f+1]*2,x=u[f+2]*2,y=l[d+0]-s,T=l[d+1]-h,C=l[p+0]-s,A=l[p+1]-h,R=l[x+0]-s,M=l[x+1]-h,L=n.getX(y,T),I=n.getY(y,T),O=n.getX(C,A),D=n.getY(C,A),B=n.getX(R,M),V=n.getY(R,M);a.batchTri(r,L,I,O,D,B,V,0,0,1,1,i,i,i,2)}};c.exports=g},65960:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=g||o.fillColor,r=a||o.fillAlpha,e=(n&16711680)>>>16,s=(n&65280)>>>8,h=n&255;t.fillStyle="rgba("+e+","+s+","+h+","+r+")"};c.exports=S},75177:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=g||o.strokeColor,r=a||o.strokeAlpha,e=(n&16711680)>>>16,s=(n&65280)>>>8,h=n&255;t.strokeStyle="rgba("+e+","+s+","+h+","+r+")",t.lineWidth=o.lineWidth};c.exports=S},17803:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),n=t(23031),r=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(s,h,i){h===void 0&&(h="Shape"),a.call(this,s,h),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new n,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(e,s){return s===void 0&&(s=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=s,this.isFilled=!0),this},setStrokeStyle:function(e,s,h){return h===void 0&&(h=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=s,this.strokeAlpha=h,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,s){return this.width=e,this.height=s,this},setDisplaySize:function(e,s){return this.displayWidth=e,this.displayHeight=s,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});c.exports=r},34682:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,n,r,e,s){var h=a.strokeTint,i=o.getTintAppendFloatAlpha(n.strokeColor,n.strokeAlpha*r);h.TL=i,h.TR=i,h.BL=i,h.BR=i;var l=n.pathData,u=l.length-1,f=n.lineWidth,d=f/2,p=l[0]-e,x=l[1]-s;n.closePath||(u-=2);for(var y=2;y<u;y+=2){var T=l[y]-e,C=l[y+1]-s;a.batchLine(p,x,T,C,d,d,f,y-2,n.closePath?y===u-1:!1),p=T,x=C}};c.exports=g},23629:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13609),g=t(83419),a=t(39506),n=t(94811),r=t(96503),e=t(36383),s=t(17803),h=new g({Extends:s,Mixins:[o],initialize:function(l,u,f,d,p,x,y,T,C){u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=128),p===void 0&&(p=0),x===void 0&&(x=360),y===void 0&&(y=!1),s.call(this,l,"Arc",new r(0,0,d)),this._startAngle=p,this._endAngle=x,this._anticlockwise=y,this._iterations=.01,this.setPosition(u,f);var A=this.geom.radius*2;this.setSize(A,A),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(i){this._iterations=i,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(i){this.geom.radius=i;var l=i*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(i){this._startAngle=i,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(i){this._endAngle=i,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(i){this._anticlockwise=i,this.updateData()}},setRadius:function(i){return this.radius=i,this},setIterations:function(i){return i===void 0&&(i=.01),this.iterations=i,this},setStartAngle:function(i,l){return this._startAngle=i,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(i,l){return this._endAngle=i,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var i=this._iterations,l=i,u=this.geom.radius,f=a(this._startAngle),d=a(this._endAngle),p=this._anticlockwise,x=u,y=u;d-=f,p?d<-e.PI2?d=-e.PI2:d>0&&(d=-e.PI2+d%e.PI2):d>e.PI2?d=e.PI2:d<0&&(d=e.PI2+d%e.PI2);for(var T=[x+Math.cos(f)*u,y+Math.sin(f)*u],C;l<1;)C=d*l+f,T.push(x+Math.cos(C)*u,y+Math.sin(C)*u),l+=i;return C=d+f,T.push(x+Math.cos(C)*u,y+Math.sin(C)*u),T.push(x+Math.cos(f)*u,y+Math.sin(f)*u),this.pathIndexes=n(T),this.pathData=T,this}});c.exports=h},42542:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39506),g=t(65960),a=t(75177),n=t(20926),r=function(e,s,h,i){h.addToRenderList(s);var l=e.currentContext;if(n(e,l,s,h,i)){var u=s.radius;l.beginPath(),l.arc(u-s.originX*(u*2),u-s.originY*(u*2),u,o(s._startAngle),o(s._endAngle),s.anticlockwise),s.closePath&&l.closePath(),s.isFilled&&(g(l,s),l.fill()),s.isStroked&&(a(l,s),l.stroke()),l.restore()}};c.exports=r},42563:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23629),g=t(39429);g.register("arc",function(a,n,r,e,s,h,i,l){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i,l))}),g.register("circle",function(a,n,r,e,s){return this.displayList.add(new o(this.scene,a,n,r,0,360,!1,e,s))})},13609:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(41447),a=t(42542),c.exports={renderWebGL:g,renderCanvas:a}},41447:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(10441),a=t(34682),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=o(e,s,h),u=i.calcMatrix.copyFrom(l.calc),f=e._displayOriginX,d=e._displayOriginY,p=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&g(i,u,e,p,f,d),e.isStroked&&a(i,e,p,f,d),r.pipelines.postBatch(e)};c.exports=n},89:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(33141),a=t(94811),n=t(87841),r=t(17803),e=new o({Extends:r,Mixins:[g],initialize:function(h,i,l,u,f,d){i===void 0&&(i=0),l===void 0&&(l=0),r.call(this,h,"Curve",u),this._smoothness=32,this._curveBounds=new n,this.closePath=!1,this.setPosition(i,l),f!==void 0&&this.setFillStyle(f,d),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){var s=this._curveBounds,h=this._smoothness;this.geom.getBounds(s,h),this.setSize(s.width,s.height),this.updateDisplayOrigin();for(var i=[],l=this.geom.getPoints(h),u=0;u<l.length;u++)i.push(l[u].x,l[u].y);return i.push(l[0].x,l[0].y),this.pathIndexes=a(i),this.pathData=i,this}});c.exports=e},3170:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,f=e.pathData,d=f.length-1,p=f[0]-l,x=f[1]-u;i.beginPath(),i.moveTo(p,x),e.closePath||(d-=2);for(var y=2;y<d;y+=2){var T=f[y]-l,C=f[y+1]-u;i.lineTo(T,C)}e.closePath&&i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};c.exports=n},40511:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(89);o.register("curve",function(a,n,r,e,s){return this.displayList.add(new g(this.scene,a,n,r,e,s))})},33141:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(53987),a=t(3170),c.exports={renderWebGL:g,renderCanvas:a}},53987:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=g(e,s,h),u=i.calcMatrix.copyFrom(l.calc),f=e._displayOriginX+e._curveBounds.x,d=e._displayOriginY+e._curveBounds.y,p=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&o(i,u,e,p,f,d),e.isStroked&&a(i,e,p,f,d),r.pipelines.postBatch(e)};c.exports=n},19921:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94811),a=t(54205),n=t(8497),r=t(17803),e=new o({Extends:r,Mixins:[a],initialize:function(h,i,l,u,f,d,p){i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=128),f===void 0&&(f=128),r.call(this,h,"Ellipse",new n(u/2,f/2,u,f)),this._smoothness=64,this.setPosition(i,l),this.width=u,this.height=f,d!==void 0&&this.setFillStyle(d,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSize:function(s,h){return this.width=s,this.height=h,this.geom.setPosition(s/2,h/2),this.geom.setSize(s,h),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){for(var s=[],h=this.geom.getPoints(this._smoothness),i=0;i<h.length;i++)s.push(h[i].x,h[i].y);return s.push(h[0].x,h[0].y),this.pathIndexes=g(s),this.pathData=s,this}});c.exports=e},7930:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX,u=e._displayOriginY,f=e.pathData,d=f.length-1,p=f[0]-l,x=f[1]-u;i.beginPath(),i.moveTo(p,x),e.closePath||(d-=2);for(var y=2;y<d;y+=2){var T=f[y]-l,C=f[y+1]-u;i.lineTo(T,C)}i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};c.exports=n},1543:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19921),g=t(39429);g.register("ellipse",function(a,n,r,e,s,h){return this.displayList.add(new o(this.scene,a,n,r,e,s,h))})},54205:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(19467),a=t(7930),c.exports={renderWebGL:g,renderCanvas:a}},19467:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=g(e,s,h),u=i.calcMatrix.copyFrom(l.calc),f=e._displayOriginX,d=e._displayOriginY,p=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&o(i,u,e,p,f,d),e.isStroked&&a(i,e,p,f,d),r.pipelines.postBatch(e)};c.exports=n},30479:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(26015),n=new o({Extends:g,Mixins:[a],initialize:function(e,s,h,i,l,u,f,d,p,x,y){s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=128),l===void 0&&(l=128),u===void 0&&(u=32),f===void 0&&(f=32),g.call(this,e,"Grid",null),this.cellWidth=u,this.cellHeight=f,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(s,h),this.setSize(i,l),this.setFillStyle(d,p),x!==void 0&&this.setOutlineStyle(x,y),this.updateDisplayOrigin()},setFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showCells=!1:(this.fillColor=r,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showAltCells=!1:(this.altFillColor=r,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showOutline=!1:(this.outlineFillColor=r,this.outlineFillAlpha=e,this.showOutline=!0),this}});c.exports=n},49912:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=-e._displayOriginX,u=-e._displayOriginY,f=s.alpha*e.alpha,d=e.width,p=e.height,x=e.cellWidth,y=e.cellHeight,T=Math.ceil(d/x),C=Math.ceil(p/y),A=x,R=y,M=x-(T*x-d),L=y-(C*y-p),I=e.showCells,O=e.showAltCells,D=e.showOutline,B=0,V=0,W=0,Y=0,X=0;if(D&&(A--,R--,M===x&&M--,L===y&&L--),I&&e.fillAlpha>0)for(o(i,e),V=0;V<C;V++)for(O&&(W=V%2),B=0;B<T;B++){if(O&&W){W=0;continue}W++,Y=B<T-1?A:M,X=V<C-1?R:L,i.fillRect(l+B*x,u+V*y,Y,X)}if(O&&e.altFillAlpha>0)for(o(i,e,e.altFillColor,e.altFillAlpha*f),V=0;V<C;V++)for(O&&(W=V%2),B=0;B<T;B++){if(O&&!W){W=1;continue}W=0,Y=B<T-1?A:M,X=V<C-1?R:L,i.fillRect(l+B*x,u+V*y,Y,X)}if(D&&e.outlineFillAlpha>0){for(g(i,e,e.outlineFillColor,e.outlineFillAlpha*f),B=1;B<T;B++){var U=B*x;i.beginPath(),i.moveTo(U+l,u),i.lineTo(U+l,p+u),i.stroke()}for(V=1;V<C;V++){var z=V*y;i.beginPath(),i.moveTo(l,z+u),i.lineTo(l+d,z+u),i.stroke()}}i.restore()}};c.exports=n},34137:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(30479);o.register("grid",function(a,n,r,e,s,h,i,l,u,f){return this.displayList.add(new g(this.scene,a,n,r,e,s,h,i,l,u,f))})},26015:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(46161),a=t(49912),c.exports={renderWebGL:g,renderCanvas:a}},46161:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){e.addToRenderList(r);var h=n.pipelines.set(r.pipeline),i=o(r,e,s),l=h.calcMatrix.copyFrom(i.calc);l.translate(-r._displayOriginX,-r._displayOriginY);var u=e.alpha*r.alpha,f=r.width,d=r.height,p=r.cellWidth,x=r.cellHeight,y=Math.ceil(f/p),T=Math.ceil(d/x),C=p,A=x,R=p-(y*p-f),M=x-(T*x-d),L,I,O=r.showCells,D=r.showAltCells,B=r.showOutline,V=0,W=0,Y=0,X=0,U=0;if(B&&(C--,A--,R===p&&R--,M===x&&M--),n.pipelines.preBatch(r),O&&r.fillAlpha>0)for(L=h.fillTint,I=g.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*u),L.TL=I,L.TR=I,L.BL=I,L.BR=I,W=0;W<T;W++)for(D&&(Y=W%2),V=0;V<y;V++){if(D&&Y){Y=0;continue}Y++,X=V<y-1?C:R,U=W<T-1?A:M,h.batchFillRect(V*p,W*x,X,U)}if(D&&r.altFillAlpha>0)for(L=h.fillTint,I=g.getTintAppendFloatAlpha(r.altFillColor,r.altFillAlpha*u),L.TL=I,L.TR=I,L.BL=I,L.BR=I,W=0;W<T;W++)for(D&&(Y=W%2),V=0;V<y;V++){if(D&&!Y){Y=1;continue}Y=0,X=V<y-1?C:R,U=W<T-1?A:M,h.batchFillRect(V*p,W*x,X,U)}if(B&&r.outlineFillAlpha>0){var z=h.strokeTint,G=g.getTintAppendFloatAlpha(r.outlineFillColor,r.outlineFillAlpha*u);for(z.TL=G,z.TR=G,z.BL=G,z.BR=G,V=1;V<y;V++){var b=V*p;h.batchLine(b,0,b,d,1,1,1,0,!1)}for(W=1;W<T;W++){var H=W*x;h.batchLine(0,H,f,H,1,1,1,0,!1)}}n.pipelines.postBatch(r)};c.exports=a},61475:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99651),g=t(83419),a=t(17803),n=new g({Extends:a,Mixins:[o],initialize:function(e,s,h,i,l,u,f,d){s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=48),l===void 0&&(l=32),u===void 0&&(u=15658734),f===void 0&&(f=10066329),d===void 0&&(d=13421772),a.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=u,this.fillLeft=f,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(s,h),this.setSize(i,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setFaces:function(r,e,s){return r===void 0&&(r=!0),e===void 0&&(e=!0),s===void 0&&(s=!0),this.showTop=r,this.showLeft=e,this.showRight=s,this},setFillStyle:function(r,e,s){return this.fillTop=r,this.fillLeft=e,this.fillRight=s,this.isFilled=!0,this}});c.exports=n},11508:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(20926),a=function(n,r,e,s){e.addToRenderList(r);var h=n.currentContext;if(g(n,h,r,e,s)&&r.isFilled){var i=r.width,l=r.height,u=i/2,f=i/r.projection;r.showTop&&(o(h,r,r.fillTop),h.beginPath(),h.moveTo(-u,-l),h.lineTo(0,-f-l),h.lineTo(u,-l),h.lineTo(u,-1),h.lineTo(0,f-1),h.lineTo(-u,-1),h.lineTo(-u,-l),h.fill()),r.showLeft&&(o(h,r,r.fillLeft),h.beginPath(),h.moveTo(-u,0),h.lineTo(0,f),h.lineTo(0,f-l),h.lineTo(-u,-l),h.lineTo(-u,0),h.fill()),r.showRight&&(o(h,r,r.fillRight),h.beginPath(),h.moveTo(u,0),h.lineTo(0,f),h.lineTo(0,f-l),h.lineTo(u,-l),h.lineTo(u,0),h.fill()),h.restore()}};c.exports=a},3933:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(61475);o.register("isobox",function(a,n,r,e,s,h,i){return this.displayList.add(new g(this.scene,a,n,r,e,s,h,i))})},99651:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(68149),a=t(11508),c.exports={renderWebGL:g,renderCanvas:a}},68149:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){e.addToRenderList(r);var h=n.pipelines.set(r.pipeline),i=o(r,e,s),l=h.calcMatrix.copyFrom(i.calc),u=r.width,f=r.height,d=u/2,p=u/r.projection,x=e.alpha*r.alpha;if(r.isFilled){var y,T,C,A,R,M,L,I,O;n.pipelines.preBatch(r),r.showTop&&(y=g.getTintAppendFloatAlpha(r.fillTop,x),T=l.getX(-d,-f),C=l.getY(-d,-f),A=l.getX(0,-p-f),R=l.getY(0,-p-f),M=l.getX(d,-f),L=l.getY(d,-f),I=l.getX(0,p-f),O=l.getY(0,p-f),h.batchQuad(r,T,C,A,R,M,L,I,O,0,0,1,1,y,y,y,y,2)),r.showLeft&&(y=g.getTintAppendFloatAlpha(r.fillLeft,x),T=l.getX(-d,0),C=l.getY(-d,0),A=l.getX(0,p),R=l.getY(0,p),M=l.getX(0,p-f),L=l.getY(0,p-f),I=l.getX(-d,-f),O=l.getY(-d,-f),h.batchQuad(r,T,C,A,R,M,L,I,O,0,0,1,1,y,y,y,y,2)),r.showRight&&(y=g.getTintAppendFloatAlpha(r.fillRight,x),T=l.getX(d,0),C=l.getY(d,0),A=l.getX(0,p),R=l.getY(0,p),M=l.getX(0,p-f),L=l.getY(0,p-f),I=l.getX(d,-f),O=l.getY(d,-f),h.batchQuad(r,T,C,A,R,M,L,I,O,0,0,1,1,y,y,y,y,2)),n.pipelines.postBatch(r)}};c.exports=a},16933:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(60561),a=t(17803),n=new o({Extends:a,Mixins:[g],initialize:function(e,s,h,i,l,u,f,d,p){s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i=48),l===void 0&&(l=32),u===void 0&&(u=!1),f===void 0&&(f=15658734),d===void 0&&(d=10066329),p===void 0&&(p=13421772),a.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=f,this.fillLeft=d,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=u,this.isFilled=!0,this.setPosition(s,h),this.setSize(i,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setReversed:function(r){return this.isReversed=r,this},setFaces:function(r,e,s){return r===void 0&&(r=!0),e===void 0&&(e=!0),s===void 0&&(s=!0),this.showTop=r,this.showLeft=e,this.showRight=s,this},setFillStyle:function(r,e,s){return this.fillTop=r,this.fillLeft=e,this.fillRight=s,this.isFilled=!0,this}});c.exports=n},79590:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(20926),a=function(n,r,e,s){e.addToRenderList(r);var h=n.currentContext;if(g(n,h,r,e,s)&&r.isFilled){var i=r.width,l=r.height,u=i/2,f=i/r.projection,d=r.isReversed;r.showTop&&d&&(o(h,r,r.fillTop),h.beginPath(),h.moveTo(-u,-l),h.lineTo(0,-f-l),h.lineTo(u,-l),h.lineTo(0,f-l),h.fill()),r.showLeft&&(o(h,r,r.fillLeft),h.beginPath(),d?(h.moveTo(-u,-l),h.lineTo(0,f),h.lineTo(0,f-l)):(h.moveTo(-u,0),h.lineTo(0,f),h.lineTo(0,f-l)),h.fill()),r.showRight&&(o(h,r,r.fillRight),h.beginPath(),d?(h.moveTo(u,-l),h.lineTo(0,f),h.lineTo(0,f-l)):(h.moveTo(u,0),h.lineTo(0,f),h.lineTo(0,f-l)),h.fill()),h.restore()}};c.exports=a},49803:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(16933);o.register("isotriangle",function(a,n,r,e,s,h,i,l){return this.displayList.add(new g(this.scene,a,n,r,e,s,h,i,l))})},60561:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(51503),a=t(79590),c.exports={renderWebGL:g,renderCanvas:a}},51503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){e.addToRenderList(r);var h=n.pipelines.set(r.pipeline),i=o(r,e,s),l=h.calcMatrix.copyFrom(i.calc),u=r.width,f=r.height,d=u/2,p=u/r.projection,x=r.isReversed,y=e.alpha*r.alpha;if(r.isFilled){n.pipelines.preBatch(r);var T,C,A,R,M,L,I;if(r.showTop&&x){T=g.getTintAppendFloatAlpha(r.fillTop,y),C=l.getX(-d,-f),A=l.getY(-d,-f),R=l.getX(0,-p-f),M=l.getY(0,-p-f),L=l.getX(d,-f),I=l.getY(d,-f);var O=l.getX(0,p-f),D=l.getY(0,p-f);h.batchQuad(r,C,A,R,M,L,I,O,D,0,0,1,1,T,T,T,T,2)}r.showLeft&&(T=g.getTintAppendFloatAlpha(r.fillLeft,y),x?(C=l.getX(-d,-f),A=l.getY(-d,-f),R=l.getX(0,p),M=l.getY(0,p),L=l.getX(0,p-f),I=l.getY(0,p-f)):(C=l.getX(-d,0),A=l.getY(-d,0),R=l.getX(0,p),M=l.getY(0,p),L=l.getX(0,p-f),I=l.getY(0,p-f)),h.batchTri(r,C,A,R,M,L,I,0,0,1,1,T,T,T,2)),r.showRight&&(T=g.getTintAppendFloatAlpha(r.fillRight,y),x?(C=l.getX(d,-f),A=l.getY(d,-f),R=l.getX(0,p),M=l.getY(0,p),L=l.getX(0,p-f),I=l.getY(0,p-f)):(C=l.getX(d,0),A=l.getY(d,0),R=l.getX(0,p),M=l.getY(0,p),L=l.getX(0,p-f),I=l.getY(0,p-f)),h.batchTri(r,C,A,R,M,L,I,0,0,1,1,T,T,T,2)),n.pipelines.postBatch(r)}};c.exports=a},57847:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(23031),n=t(36823),r=new o({Extends:g,Mixins:[n],initialize:function(s,h,i,l,u,f,d,p,x){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=128),d===void 0&&(d=0),g.call(this,s,"Line",new a(l,u,f,d));var y=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(h,i),this.setSize(y,T),p!==void 0&&this.setStrokeStyle(1,p,x),this.updateDisplayOrigin()},setLineWidth:function(e,s){return s===void 0&&(s=e),this._startWidth=e,this._endWidth=s,this.lineWidth=e,this},setTo:function(e,s,h,i){return this.geom.setTo(e,s,h,i),this}});c.exports=r},17440:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(75177),g=t(20926),a=function(n,r,e,s){e.addToRenderList(r);var h=n.currentContext;if(g(n,h,r,e,s)){var i=r._displayOriginX,l=r._displayOriginY;r.isStroked&&(o(h,r),h.beginPath(),h.moveTo(r.geom.x1-i,r.geom.y1-l),h.lineTo(r.geom.x2-i,r.geom.y2-l),h.stroke()),h.restore()}};c.exports=a},2481:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(57847);o.register("line",function(a,n,r,e,s,h,i,l){return this.displayList.add(new g(this.scene,a,n,r,e,s,h,i,l))})},36823:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(77385),a=t(17440),c.exports={renderWebGL:g,renderCanvas:a}},77385:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(n,r,e,s){e.addToRenderList(r);var h=n.pipelines.set(r.pipeline),i=o(r,e,s);h.calcMatrix.copyFrom(i.calc);var l=r._displayOriginX,u=r._displayOriginY,f=e.alpha*r.alpha;if(n.pipelines.preBatch(r),r.isStroked){var d=h.strokeTint,p=g.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*f);d.TL=p,d.TR=p,d.BL=p,d.BR=p,h.batchLine(r.geom.x1-l,r.geom.y1-u,r.geom.x2-l,r.geom.y2-u,r._startWidth/2,r._endWidth/2,1,0,!1,i.sprite,i.camera)}n.pipelines.postBatch(r)};c.exports=a},24949:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90273),g=t(83419),a=t(94811),n=t(13829),r=t(25717),e=t(17803),s=t(5469),h=new g({Extends:e,Mixins:[o],initialize:function(l,u,f,d,p,x){u===void 0&&(u=0),f===void 0&&(f=0),e.call(this,l,"Polygon",new r(d));var y=n(this.geom);this.setPosition(u,f),this.setSize(y.width,y.height),p!==void 0&&this.setFillStyle(p,x),this.updateDisplayOrigin(),this.updateData()},smooth:function(i){i===void 0&&(i=1);for(var l=0;l<i;l++)s(this.geom);return this.updateData()},setTo:function(i){this.geom.setTo(i);var l=n(this.geom);return this.setSize(l.width,l.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var i=[],l=this.geom.points,u=0;u<l.length;u++)i.push(l[u].x,l[u].y);return i.push(l[0].x,l[0].y),this.pathIndexes=a(i),this.pathData=i,this}});c.exports=h},38710:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX,u=e._displayOriginY,f=e.pathData,d=f.length-1,p=f[0]-l,x=f[1]-u;i.beginPath(),i.moveTo(p,x),e.closePath||(d-=2);for(var y=2;y<d;y+=2){var T=f[y]-l,C=f[y+1]-u;i.lineTo(T,C)}e.closePath&&i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};c.exports=n},64827:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(24949);o.register("polygon",function(a,n,r,e,s){return this.displayList.add(new g(this.scene,a,n,r,e,s))})},90273:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(73695),a=t(38710),c.exports={renderWebGL:g,renderCanvas:a}},73695:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=g(e,s,h),u=i.calcMatrix.copyFrom(l.calc),f=e._displayOriginX,d=e._displayOriginY,p=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&o(i,u,e,p,f,d),e.isStroked&&a(i,e,p,f,d),r.pipelines.postBatch(e)};c.exports=n},74561:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87841),a=t(17803),n=t(95597),r=new o({Extends:a,Mixins:[n],initialize:function(s,h,i,l,u,f,d){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=128),u===void 0&&(u=128),a.call(this,s,"Rectangle",new g(0,0,l,u)),this.setPosition(h,i),this.setSize(l,u),f!==void 0&&this.setFillStyle(f,d),this.updateDisplayOrigin(),this.updateData()},setSize:function(e,s){this.width=e,this.height=s,this.geom.setSize(e,s),this.updateData(),this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=e,h.hitArea.height=s),this},updateData:function(){var e=[],s=this.geom,h=this._tempLine;return s.getLineA(h),e.push(h.x1,h.y1,h.x2,h.y2),s.getLineB(h),e.push(h.x2,h.y2),s.getLineC(h),e.push(h.x2,h.y2),s.getLineD(h),e.push(h.x2,h.y2),this.pathData=e,this}});c.exports=r},48682:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX,u=e._displayOriginY;e.isFilled&&(o(i,e),i.fillRect(-l,-u,e.width,e.height)),e.isStroked&&(g(i,e),i.beginPath(),i.rect(-l,-u,e.width,e.height),i.stroke()),i.restore()}};c.exports=n},87959:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(74561);o.register("rectangle",function(a,n,r,e,s,h){return this.displayList.add(new g(this.scene,a,n,r,e,s,h))})},95597:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(52059),a=t(48682),c.exports={renderWebGL:g,renderCanvas:a}},52059:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(34682),a=t(70554),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=o(e,s,h);i.calcMatrix.copyFrom(l.calc);var u=e._displayOriginX,f=e._displayOriginY,d=s.alpha*e.alpha;if(r.pipelines.preBatch(e),e.isFilled){var p=i.fillTint,x=a.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);p.TL=x,p.TR=x,p.BL=x,p.BR=x,i.batchFillRect(-u,-f,e.width,e.height)}e.isStroked&&g(i,e,d,u,f),r.pipelines.postBatch(e)};c.exports=n},55911:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81991),g=t(83419),a=t(94811),n=t(17803),r=new g({Extends:n,Mixins:[o],initialize:function(s,h,i,l,u,f,d,p){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=5),u===void 0&&(u=32),f===void 0&&(f=64),n.call(this,s,"Star",null),this._points=l,this._innerRadius=u,this._outerRadius=f,this.setPosition(h,i),this.setSize(f*2,f*2),d!==void 0&&this.setFillStyle(d,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],s=this._points,h=this._innerRadius,i=this._outerRadius,l=Math.PI/2*3,u=Math.PI/s,f=i,d=i;e.push(f,d+-i);for(var p=0;p<s;p++)e.push(f+Math.cos(l)*i,d+Math.sin(l)*i),l+=u,e.push(f+Math.cos(l)*h,d+Math.sin(l)*h),l+=u;return e.push(f,d+-i),this.pathIndexes=a(e),this.pathData=e,this}});c.exports=r},64272:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX,u=e._displayOriginY,f=e.pathData,d=f.length-1,p=f[0]-l,x=f[1]-u;i.beginPath(),i.moveTo(p,x),e.closePath||(d-=2);for(var y=2;y<d;y+=2){var T=f[y]-l,C=f[y+1]-u;i.lineTo(T,C)}i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};c.exports=n},93697:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55911),g=t(39429);g.register("star",function(a,n,r,e,s,h,i){return this.displayList.add(new o(this.scene,a,n,r,e,s,h,i))})},81991:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(57017),a=t(64272),c.exports={renderWebGL:g,renderCanvas:a}},57017:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=g(e,s,h),u=i.calcMatrix.copyFrom(l.calc),f=e._displayOriginX,d=e._displayOriginY,p=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&o(i,u,e,p,f,d),e.isStroked&&a(i,e,p,f,d),r.pipelines.postBatch(e)};c.exports=n},36931:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(16483),n=t(96195),r=new o({Extends:g,Mixins:[n],initialize:function(s,h,i,l,u,f,d,p,x,y,T){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=128),f===void 0&&(f=64),d===void 0&&(d=0),p===void 0&&(p=128),x===void 0&&(x=128),g.call(this,s,"Triangle",new a(l,u,f,d,p,x));var C=this.geom.right-this.geom.left,A=this.geom.bottom-this.geom.top;this.setPosition(h,i),this.setSize(C,A),y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,s,h,i,l,u){return this.geom.setTo(e,s,h,i,l,u),this.updateData()},updateData:function(){var e=[],s=this.geom,h=this._tempLine;return s.getLineA(h),e.push(h.x1,h.y1,h.x2,h.y2),s.getLineB(h),e.push(h.x2,h.y2),s.getLineC(h),e.push(h.x2,h.y2),this.pathData=e,this}});c.exports=r},85172:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),n=function(r,e,s,h){s.addToRenderList(e);var i=r.currentContext;if(a(r,i,e,s,h)){var l=e._displayOriginX,u=e._displayOriginY,f=e.geom.x1-l,d=e.geom.y1-u,p=e.geom.x2-l,x=e.geom.y2-u,y=e.geom.x3-l,T=e.geom.y3-u;i.beginPath(),i.moveTo(f,d),i.lineTo(p,x),i.lineTo(y,T),i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};c.exports=n},45245:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(36931);o.register("triangle",function(a,n,r,e,s,h,i,l,u,f){return this.displayList.add(new g(this.scene,a,n,r,e,s,h,i,l,u,f))})},96195:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(83253),a=t(85172),c.exports={renderWebGL:g,renderCanvas:a}},83253:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(34682),a=t(70554),n=function(r,e,s,h){s.addToRenderList(e);var i=r.pipelines.set(e.pipeline),l=o(e,s,h);i.calcMatrix.copyFrom(l.calc);var u=e._displayOriginX,f=e._displayOriginY,d=s.alpha*e.alpha;if(r.pipelines.preBatch(e),e.isFilled){var p=i.fillTint,x=a.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);p.TL=x,p.TR=x,p.BL=x,p.BR=x;var y=e.geom.x1-u,T=e.geom.y1-f,C=e.geom.x2-u,A=e.geom.y2-f,R=e.geom.x3-u,M=e.geom.y3-f;i.batchFillTriangle(y,T,C,A,R,M,l.sprite,l.camera)}e.isStroked&&g(i,e,d,u,f),r.pipelines.postBatch(e)};c.exports=n},68287:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31401),n=t(95643),r=t(92751),e=new g({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,r],initialize:function(h,i,l,u,f){n.call(this,h,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(u,f),this.setPosition(i,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,h){this.anims.update(s,h)},play:function(s,h){return this.anims.play(s,h)},playReverse:function(s,h){return this.anims.playReverse(s,h)},playAfterDelay:function(s,h){return this.anims.playAfterDelay(s,h)},playAfterRepeat:function(s,h){return this.anims.playAfterRepeat(s,h)},chain:function(s){return this.anims.chain(s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(s){return this.anims.stopAfterDelay(s)},stopAfterRepeat:function(s){return this.anims.stopAfterRepeat(s)},stopOnFrame:function(s){return this.anims.stopOnFrame(s)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});c.exports=e},76552:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};c.exports=S},15567:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(13059),a=t(44603),n=t(23568),r=t(68287);a.register("sprite",function(e,s){e===void 0&&(e={});var h=n(e,"key",null),i=n(e,"frame",null),l=new r(this.scene,0,0,h,i);return s!==void 0&&(e.add=s),o(this.scene,l,e),g(l,e),l})},46409:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(68287);o.register("sprite",function(a,n,r,e){return this.displayList.add(new g(this.scene,a,n,r,e))})},92751:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(9409),a=t(76552),c.exports={renderWebGL:g,renderCanvas:a}},9409:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g.addToRenderList(o),o.pipeline.batchSprite(o,g,a)};c.exports=S},14220:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=t.canvas,n=t.context,r=t.style,e=[],s=0,h=g.length;r.maxLines>0&&r.maxLines<g.length&&(h=r.maxLines),r.syncFont(a,n);for(var i=t.letterSpacing,l=0;l<h;l++){var u=r.strokeThickness;if(i===0)u+=n.measureText(g[l]).width;else{for(var f=g[l],d=0;d<f.length;d++)u+=n.measureText(f[d]).width;f.length>1&&(u+=i*(f.length-1))}r.wordWrap&&(u-=n.measureText(" ").width),e[l]=Math.ceil(u),s=Math.max(s,e[l])}var p=o.fontSize+r.strokeThickness,x=p*h,y=t.lineSpacing;return h>1&&(x+=y*(h-1)),{width:s,height:x,lines:h,lineWidths:e,lineSpacing:y,lineHeight:p}};c.exports=S},79557:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=function(a){var n=o.create(this),r=n.getContext("2d",{willReadFrequently:!0});a.syncFont(n,r);var e=r.measureText(a.testString);if("actualBoundingBoxAscent"in e){var s=e.actualBoundingBoxAscent,h=e.actualBoundingBoxDescent;return o.remove(n),{ascent:s,descent:h,fontSize:s+h}}var i=Math.ceil(e.width*a.baselineX),l=i,u=2*l;l=l*a.baselineY|0,n.width=i,n.height=u,r.fillStyle="#f00",r.fillRect(0,0,i,u),r.font=a._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(a.testString,0,l);var f={ascent:0,descent:0,fontSize:0},d=r.getImageData(0,0,i,u);if(!d)return f.ascent=l,f.descent=l+6,f.fontSize=f.ascent+f.descent,o.remove(n),f;var p=d.data,x=p.length,y=i*4,T,C,A=0,R=!1;for(T=0;T<l;T++){for(C=0;C<y;C+=4)if(p[A+C]!==255){R=!0;break}if(!R)A+=y;else break}for(f.ascent=l-T,A=x-y,R=!1,T=u;T>l;T--){for(C=0;C<y;C+=4)if(p[A+C]!==255){R=!0;break}if(!R)A-=y;else break}return f.descent=T-l,f.fontSize=f.ascent+f.descent,o.remove(n),f};c.exports=g},50171:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=t(27919),a=t(83419),n=t(31401),r=t(95643),e=t(14220),s=t(35154),h=t(35846),i=t(61771),l=t(35762),u=t(45650),f=new a({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,i],initialize:function(p,x,y,T,C){x===void 0&&(x=0),y===void 0&&(y=0),r.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(x,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context,this.style=new l(this,C),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=u(),this.texture=p.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(T),C&&C.padding&&this.setPadding(C.padding),C&&C.lineSpacing&&this.setLineSpacing(C.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(d){var p=this.style;if(p.wordWrapCallback){var x=p.wordWrapCallback.call(p.wordWrapCallbackScope,d,this);return Array.isArray(x)&&(x=x.join(`
`)),x}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(d,this.context,this.style.wordWrapWidth):this.basicWordWrap(d,this.context,this.style.wordWrapWidth):d},advancedWordWrap:function(d,p,x){for(var y="",T=d.replace(/ +/gi," ").split(this.splitRegExp),C=T.length,A=0;A<C;A++){var R=T[A],M="";R=R.replace(/^ *|\s*$/gi,"");var L=p.measureText(R).width;if(L<x){y+=R+`
`;continue}for(var I=x,O=R.split(" "),D=0;D<O.length;D++){var B=O[D],V=B+" ",W=p.measureText(V).width;if(W>I){if(D===0){for(var Y=V;Y.length&&(Y=Y.slice(0,-1),W=p.measureText(Y).width,!(W<=I)););if(!Y.length)throw new Error("wordWrapWidth < a single character");var X=B.substr(Y.length);O[D]=X,M+=Y}var U=O[D].length?D:D+1,z=O.slice(U).join(" ").replace(/[ \n]*$/gi,"");T.splice(A+1,0,z),C=T.length;break}else M+=V,I-=W}y+=M.replace(/[ \n]*$/gi,"")+`
`}return y=y.replace(/[\s|\n]*$/gi,""),y},basicWordWrap:function(d,p,x){for(var y="",T=d.split(this.splitRegExp),C=T.length-1,A=p.measureText(" ").width,R=0;R<=C;R++){for(var M=x,L=T[R].split(" "),I=L.length-1,O=0;O<=I;O++){var D=L[O],B=p.measureText(D).width,V=B;O<I&&(V+=A),V>M&&O>0&&(y+=`
`,M=x),y+=D,O<I?(y+=" ",M-=V):M-=B}R<C&&(y+=`
`)}return y},getWrappedText:function(d){d===void 0&&(d=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(d);return p.split(this.splitRegExp)},setText:function(d){return!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d!==this._text&&(this._text=d.toString(),this.updateText()),this},appendText:function(d,p){p===void 0&&(p=!0),!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d=d.toString();var x=this._text.concat(p?`
`+d:d);return x!==this._text&&(this._text=x,this.updateText()),this},setStyle:function(d){return this.style.setStyle(d)},setFont:function(d){return this.style.setFont(d)},setFontFamily:function(d){return this.style.setFontFamily(d)},setFontSize:function(d){return this.style.setFontSize(d)},setFontStyle:function(d){return this.style.setFontStyle(d)},setFixedSize:function(d,p){return this.style.setFixedSize(d,p)},setBackgroundColor:function(d){return this.style.setBackgroundColor(d)},setFill:function(d){return this.style.setFill(d)},setColor:function(d){return this.style.setColor(d)},setStroke:function(d,p){return this.style.setStroke(d,p)},setShadow:function(d,p,x,y,T,C){return this.style.setShadow(d,p,x,y,T,C)},setShadowOffset:function(d,p){return this.style.setShadowOffset(d,p)},setShadowColor:function(d){return this.style.setShadowColor(d)},setShadowBlur:function(d){return this.style.setShadowBlur(d)},setShadowStroke:function(d){return this.style.setShadowStroke(d)},setShadowFill:function(d){return this.style.setShadowFill(d)},setWordWrapWidth:function(d,p){return this.style.setWordWrapWidth(d,p)},setWordWrapCallback:function(d,p){return this.style.setWordWrapCallback(d,p)},setAlign:function(d){return this.style.setAlign(d)},setResolution:function(d){return this.style.setResolution(d)},setLineSpacing:function(d){return this.lineSpacing=d,this.updateText()},setLetterSpacing:function(d){return this.letterSpacing=d,this.updateText()},setPadding:function(d,p,x,y){if(typeof d=="object"){var T=d,C=s(T,"x",null);C!==null?(d=C,x=C):(d=s(T,"left",0),x=s(T,"right",d));var A=s(T,"y",null);A!==null?(p=A,y=A):(p=s(T,"top",0),y=s(T,"bottom",p))}else d===void 0&&(d=0),p===void 0&&(p=d),x===void 0&&(x=d),y===void 0&&(y=p);return this.padding.left=d,this.padding.top=p,this.padding.right=x,this.padding.bottom=y,this.updateText()},setMaxLines:function(d){return this.style.setMaxLines(d)},setRTL:function(d){d===void 0&&(d=!0);var p=this.style;return p.rtl===d?this:(p.rtl=d,d?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),p.align==="left"?p.align="right":p.align==="right"&&(p.align="left"),this)},updateText:function(){var d=this.canvas,p=this.context,x=this.style,y=x.resolution,T=x.metrics;x.syncFont(d,p);var C=this._text;(x.wordWrapWidth||x.wordWrapCallback)&&(C=this.runWordWrap(this._text));var A=C.split(this.splitRegExp),R=e(this,T,A),M=this.padding,L;x.fixedWidth===0?(this.width=R.width+M.left+M.right,L=R.width):(this.width=x.fixedWidth,L=this.width-M.left-M.right,L<R.width&&(L=R.width)),x.fixedHeight===0?this.height=R.height+M.top+M.bottom:this.height=x.fixedHeight;var I=this.width,O=this.height;this.updateDisplayOrigin(),I*=y,O*=y,I=Math.max(I,1),O=Math.max(O,1),d.width!==I||d.height!==O?(d.width=I,d.height=O,this.frame.setSize(I,O),x.syncFont(d,p),x.rtl&&(p.direction="rtl")):p.clearRect(0,0,I,O),p.save(),p.scale(y,y),x.backgroundColor&&(p.fillStyle=x.backgroundColor,p.fillRect(0,0,I,O)),x.syncStyle(d,p),p.translate(M.left,M.top);for(var D,B,V=0;V<R.lines;V++){if(D=x.strokeThickness/2,B=x.strokeThickness/2+V*R.lineHeight+T.ascent,V>0&&(B+=R.lineSpacing*V),x.rtl)D=I-D-M.left-M.right;else if(x.align==="right")D+=L-R.lineWidths[V];else if(x.align==="center")D+=(L-R.lineWidths[V])/2;else if(x.align==="justify"){var W=.85;if(R.lineWidths[V]/R.width>=W){var Y=R.width-R.lineWidths[V],X=p.measureText(" ").width,U=A[V].trim(),z=U.split(" ");Y+=(A[V].length-U.length)*X;for(var G=Math.floor(Y/X),b=0;G>0;)z[b]+=" ",b=(b+1)%(z.length-1||1),--G;A[V]=z.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B));var H=this.letterSpacing;if(x.strokeThickness&&H===0&&(x.syncShadow(p,x.shadowStroke),p.strokeText(A[V],D,B)),x.color)if(x.syncShadow(p,x.shadowFill),H!==0)for(var j=0,$=A[V].split(""),k=0;k<$.length;k++)x.strokeThickness&&(x.syncShadow(p,x.shadowStroke),p.strokeText($[k],D+j,B),x.syncShadow(p,x.shadowFill)),p.fillText($[k],D+j,B),j+=p.measureText($[k]).width+H;else p.fillText(A[V],D,B)}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0));var Q=this.input;return Q&&!Q.customHitArea&&(Q.hitArea.width=this.width,Q.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(d){this.setText(d)}},toJSON:function(){var d=n.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return d.data=p,d},preDestroy:function(){h(this.canvas),g.remove(this.canvas);var d=this.texture;d&&d.destroy()}});c.exports=f},79724:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o.width===0||o.height===0||(g.addToRenderList(o),t.batchSprite(o,o.frame,g,a))};c.exports=S},71259:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(50171);g.register("text",function(r,e){r===void 0&&(r={});var s=a(r,"text",""),h=a(r,"style",null),i=a(r,"padding",null);i!==null&&(h.padding=i);var l=new n(this.scene,0,0,s,h);return e!==void 0&&(r.add=e),o(this.scene,l,r),l.autoRound=a(r,"autoRound",!0),l.resolution=a(r,"resolution",1),l})},68005:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(50171),g=t(39429);g.register("text",function(a,n,r,e){return this.displayList.add(new o(this.scene,a,n,r,e))})},61771:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(34397),a=t(79724),c.exports={renderWebGL:g,renderCanvas:a}},35762:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23568),a=t(35154),n=t(79557),r={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},e=new o({initialize:function(h,i){this.parent=h,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0)},setStyle:function(s,h,i){h===void 0&&(h=!0),i===void 0&&(i=!1);for(var l in r){var u=i?r[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=a(s,r[l][0],u):s&&l==="fontSize"&&typeof s.fontSize=="number"?this[l]=s.fontSize.toString()+"px":this[l]=g(s,r[l][0],u)}var f=a(s,"font",null);f!==null&&this.setFont(f,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=a(s,"fill",null);d!==null&&(this.color=d);var p=a(s,"metrics",!1);return p?this.metrics={ascent:a(p,"ascent",0),descent:a(p,"descent",0),fontSize:a(p,"fontSize",0)}:(h||!this.metrics)&&(this.metrics=n(this)),h?this.parent.updateText():this.parent},syncFont:function(s,h){h.font=this._font},syncStyle:function(s,h){h.textBaseline="alphabetic",h.fillStyle=this.color,h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.lineCap="round",h.lineJoin="round"},syncShadow:function(s,h){h?(s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY,s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur):(s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowColor=0,s.shadowBlur=0)},update:function(s){return s&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=n(this)),this.parent.updateText()},setFont:function(s,h){h===void 0&&(h=!0);var i=s,l="",u="";if(typeof s!="string")i=a(s,"fontFamily","Courier"),l=a(s,"fontSize","16px"),u=a(s,"fontStyle","");else{var f=s.split(" "),d=0;u=f.length>2?f[d++]:"",l=f[d++]||"16px",i=f[d++]||"Courier"}return(i!==this.fontFamily||l!==this.fontSize||u!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=l,this.fontStyle=u,h&&this.update(!0)),this.parent},setFontFamily:function(s){return this.fontFamily!==s&&(this.fontFamily=s,this.update(!0)),this.parent},setFontStyle:function(s){return this.fontStyle!==s&&(this.fontStyle=s,this.update(!0)),this.parent},setFontSize:function(s){return typeof s=="number"&&(s=s.toString()+"px"),this.fontSize!==s&&(this.fontSize=s,this.update(!0)),this.parent},setTestString:function(s){return this.testString=s,this.update(!0)},setFixedSize:function(s,h){return this.fixedWidth=s,this.fixedHeight=h,s&&(this.parent.width=s),h&&(this.parent.height=h),this.update(!1)},setBackgroundColor:function(s){return this.backgroundColor=s,this.update(!1)},setFill:function(s){return this.color=s,this.update(!1)},setColor:function(s){return this.color=s,this.update(!1)},setResolution:function(s){return this.resolution=s,this.update(!1)},setStroke:function(s,h){return h===void 0&&(h=this.strokeThickness),s===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==s||this.strokeThickness!==h)&&(this.stroke=s,this.strokeThickness=h,this.update(!0)),this.parent},setShadow:function(s,h,i,l,u,f){return s===void 0&&(s=0),h===void 0&&(h=0),i===void 0&&(i="#000"),l===void 0&&(l=0),u===void 0&&(u=!1),f===void 0&&(f=!0),this.shadowOffsetX=s,this.shadowOffsetY=h,this.shadowColor=i,this.shadowBlur=l,this.shadowStroke=u,this.shadowFill=f,this.update(!1)},setShadowOffset:function(s,h){return s===void 0&&(s=0),h===void 0&&(h=s),this.shadowOffsetX=s,this.shadowOffsetY=h,this.update(!1)},setShadowColor:function(s){return s===void 0&&(s="#000"),this.shadowColor=s,this.update(!1)},setShadowBlur:function(s){return s===void 0&&(s=0),this.shadowBlur=s,this.update(!1)},setShadowStroke:function(s){return this.shadowStroke=s,this.update(!1)},setShadowFill:function(s){return this.shadowFill=s,this.update(!1)},setWordWrapWidth:function(s,h){return h===void 0&&(h=!1),this.wordWrapWidth=s,this.wordWrapUseAdvanced=h,this.update(!1)},setWordWrapCallback:function(s,h){return h===void 0&&(h=null),this.wordWrapCallback=s,this.wordWrapCallbackScope=h,this.update(!1)},setAlign:function(s){return s===void 0&&(s="left"),this.align=s,this.update(!1)},setMaxLines:function(s){return s===void 0&&(s=0),this.maxLines=s,this.update(!1)},getTextMetrics:function(){var s=this.metrics;return{ascent:s.ascent,descent:s.descent,fontSize:s.fontSize}},toJSON:function(){var s={};for(var h in r)s[h]=this[h];return s.metrics=this.getTextMetrics(),s},destroy:function(){this.parent=void 0}});c.exports=e},34397:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,n,r,e){if(!(n.width===0||n.height===0)){r.addToRenderList(n);var s=n.frame,h=s.width,i=s.height,l=o.getTintAppendFloatAlpha,u=a.pipelines.set(n.pipeline,n),f=u.setTexture2D(s.glTexture,n);u.batchTexture(n,s.glTexture,h,i,n.x,n.y,h/n.style.resolution,i/n.style.resolution,n.scaleX,n.scaleY,n.rotation,n.flipX,n.flipY,n.scrollFactorX,n.scrollFactorY,n.displayOriginX,n.displayOriginY,0,0,h,i,l(n.tintTopLeft,r.alpha*n._alphaTL),l(n.tintTopRight,r.alpha*n._alphaTR),l(n.tintBottomLeft,r.alpha*n._alphaBL),l(n.tintBottomRight,r.alpha*n._alphaBR),n.tintFill,0,0,r,e,!1,f)}};c.exports=g},20839:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(83419),a=t(31401),n=t(95643),r=t(98439),e=t(68703),s=t(56295),h=t(45650),i=t(26099),l=8,u=new g({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,s],initialize:function(d,p,x,y,T,C,A){var R=d.sys.renderer;n.call(this,d,"TileSprite");var M=d.sys.textures.get(C),L=M.get(A);L.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),M=d.sys.textures.get("__MISSING"),L=M.get()),M.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),M=d.sys.textures.get("__MISSING"),L=M.get()),!y||!T?(y=y||L.width,T=T||L.height):(y=Math.floor(y),T=Math.floor(T)),this._tilePosition=new i,this._tileScale=new i(1,1),this.dirty=!1,this.renderer=R,this.canvas=o.create(this,y,T),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=M,this.displayFrame=L,this._crop=this.resetCropObject(),this._textureKey=h(),this.texture=d.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=r(L.width),this.potHeight=r(L.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(p,x),this.setSize(y,T),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(f,d){return this.displayTexture=this.scene.sys.textures.get(f),this.setFrame(d)},setFrame:function(f){var d=this.displayTexture.get(f);return this.potWidth=r(d.width),this.potHeight=r(d.height),this.canvas.width=0,!d.cutWidth||!d.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=d,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(f,d){return f!==void 0&&(this.tilePositionX=f),d!==void 0&&(this.tilePositionY=d),this},setTileScale:function(f,d){return f===void 0&&(f=this.tileScaleX),d===void 0&&(d=f),this.tileScaleX=f,this.tileScaleY=d,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var f=this.displayFrame;if(f.source.isRenderTexture||f.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var d=this.fillContext,p=this.fillCanvas,x=this.potWidth,y=this.potHeight;(!this.renderer||!this.renderer.gl)&&(x=f.cutWidth,y=f.cutHeight),d.clearRect(0,0,x,y),p.width=x,p.height=y,d.drawImage(f.source.image,f.cutX,f.cutY,f.cutWidth,f.cutHeight,0,0,x,y),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=d.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var f=this.canvas;if((f.width!==this.width||f.height!==this.height)&&(f.width=this.width,f.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var d=this.context;this.scene.sys.game.config.antialias||e.disable(d);var p=this._tileScale.x,x=this._tileScale.y,y=this._tilePosition.x,T=this._tilePosition.y;d.clearRect(0,0,this.width,this.height),d.save(),d.scale(p,x),d.translate(-y,-T),d.fillStyle=this.fillPattern,d.fillRect(y,T,this.width/p,this.height/x),d.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var f=this.texture;f&&f.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(f){this._tilePosition.x=f,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(f){this._tilePosition.y=f,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(f){this._tileScale.x=f,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(f){this._tileScale.y=f,this.dirty=!0}}});c.exports=u},46992:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o.updateCanvas(),g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};c.exports=S},14167:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(20839);g.register("tileSprite",function(r,e){r===void 0&&(r={});var s=a(r,"x",0),h=a(r,"y",0),i=a(r,"width",512),l=a(r,"height",512),u=a(r,"key",""),f=a(r,"frame",""),d=new n(this.scene,s,h,i,l,u,f);return e!==void 0&&(r.add=e),o(this.scene,d,r),d})},91681:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20839),g=t(39429);g.register("tileSprite",function(a,n,r,e,s,h){return this.displayList.add(new o(this.scene,a,n,r,e,s,h))})},56295:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(18553),a=t(46992),c.exports={renderWebGL:g,renderCanvas:a}},18553:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,n,r,e){n.updateCanvas();var s=n.width,h=n.height;if(!(s===0||h===0)){r.addToRenderList(n);var i=o.getTintAppendFloatAlpha,l=a.pipelines.set(n.pipeline,n),u=l.setTexture2D(n.fillPattern,n);l.batchTexture(n,n.fillPattern,n.displayFrame.width*n.tileScaleX,n.displayFrame.height*n.tileScaleY,n.x,n.y,s,h,n.scaleX,n.scaleY,n.rotation,n.flipX,n.flipY,n.scrollFactorX,n.scrollFactorY,n.originX*s,n.originY*h,0,0,s,h,i(n.tintTopLeft,r.alpha*n._alphaTL),i(n.tintTopRight,r.alpha*n._alphaTR),i(n.tintBottomLeft,r.alpha*n._alphaBL),i(n.tintBottomRight,r.alpha*n._alphaBR),n.tintFill,n.tilePositionX%n.displayFrame.width/n.displayFrame.width,n.tilePositionY%n.displayFrame.height/n.displayFrame.height,r,e,!1,u)}};c.exports=g},18471:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(31401),n=t(51708),r=t(8443),e=t(95643),s=t(36383),h=t(14463),i=t(45650),l=t(10247),u=new g({Extends:e,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.TextureCrop,a.Tint,a.Transform,a.Visible,l],initialize:function(d,p,x,y){e.call(this,d,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=i(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var T=d.sys.game;this._device=T.device.video,this.setPosition(p,x),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),T.events.on(r.PAUSE,this.globalPause,this),T.events.on(r.RESUME,this.globalResume,this);var C=d.sys.sound;C&&C.on(h.GLOBAL_MUTE,this.globalMute,this),y&&this.load(y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(f){var d=this.scene.sys.cache.video.get(f);return d?(this.cacheKey=f,this.loadHandler(d.url,d.noAudio,d.crossOrigin)):console.warn("No video in cache for key: "+f),this},changeSource:function(f,d,p,x,y){d===void 0&&(d=!0),p===void 0&&(p=!1),this.cacheKey!==f&&(this.load(f),d&&this.play(p,x,y))},getVideoKey:function(){return this.cacheKey},loadURL:function(f,d,p){d===void 0&&(d=!1);var x=this._device.getVideoURL(f);return x?(this.cacheKey="",this.loadHandler(x.url,d,p)):console.warn("No supported video format found for "+f),this},loadMediaStream:function(f,d,p){return this.loadHandler(null,d,p,f)},loadHandler:function(f,d,p,x){d||(d=!1);var y=this.video;if(y?(this.removeLoadEventHandlers(),this.stop()):(y=document.createElement("video"),y.controls=!1,y.setAttribute("playsinline","playsinline"),y.setAttribute("preload","auto"),y.setAttribute("disablePictureInPicture","true")),d?(y.muted=!0,y.defaultMuted=!0,y.setAttribute("autoplay","autoplay")):(y.muted=!1,y.defaultMuted=!1,y.removeAttribute("autoplay")),p?y.setAttribute("crossorigin",p):y.removeAttribute("crossorigin"),x)if("srcObject"in y)try{y.srcObject=x}catch(C){if(C.name!=="TypeError")throw C;y.src=URL.createObjectURL(x)}else y.src=URL.createObjectURL(x);else y.src=f;this.retry=0,this.video=y,this._playCalled=!1,y.load(),this.addLoadEventHandlers();var T=this.scene.sys.textures.get(this._key);return this.setTexture(T),this},requestVideoFrame:function(f,d){var p=this.video;if(p){var x=d.width,y=d.height,T=this.videoTexture,C=this.videoTextureSource,A=!T||C.source!==p;A?(this._codePaused=p.paused,this._codeMuted=p.muted,T?(C.source=p,C.width=x,C.height=y,T.get().setSize(x,y)):(T=this.scene.sys.textures.create(this._key,p,x,y),T.add("__BASE",0,0,0,x,y),this.setTexture(T),this.videoTexture=T,this.videoTextureSource=T.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(n.VIDEO_TEXTURE,this,T)),this.setSizeToFrame(),this.updateDisplayOrigin()):C.update(),this.isStalled=!1,this.metadata=d;var R=d.mediaTime;A&&(this._lastUpdate=R,this.emit(n.VIDEO_CREATED,this,x,y),this.frameReady||(this.frameReady=!0,this.emit(n.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.emit(n.VIDEO_LOOP,this)):(this.stop(!1),this.emit(n.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(n.VIDEO_LOOP,this),this._lastUpdate=R,this._getFrame?(this.removeEventHandlers(),p.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(f,d,p){d===void 0&&(d=-1),p===void 0&&(p=s.MAX_SAFE_INTEGER);var x=this.video;return!x||this.isPlaying()?(x||console.warn("Video not loaded"),this):(f===void 0&&(f=x.loop),x.loop=f,this._markerIn=d,this._markerOut=p,this._playingMarker=d>-1&&p>d&&p<s.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=x.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var f=this.video;return!f||this.isPlaying()?(f||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=f.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var f=this.video;f&&(f.addEventListener("error",this._loadCallbackHandler),f.addEventListener("abort",this._loadCallbackHandler),f.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var f=this.video;f&&(f.removeEventListener("error",this._loadCallbackHandler),f.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var f=this.video;if(f){var d=this._callbacks;for(var p in d)f.addEventListener(p,d[p])}},removeEventHandlers:function(){var f=this.video;if(f){var d=this._callbacks;for(var p in d)f.removeEventListener(p,d[p])}},createPlayPromise:function(f){f===void 0&&(f=!0);var d=this.video,p=d.play();if(p!==void 0){var x=this.playSuccess.bind(this),y=this.playError.bind(this);if(!f){var T=this;y=function(){T.failedPlayAttempts++}}p.then(x).catch(y)}else d.addEventListener("playing",this._callbacks.legacy),f||this.failedPlayAttempts++},addMarker:function(f,d,p){return!isNaN(d)&&d>=0&&!isNaN(p)&&p>d&&(this.markers[f]=[d,p]),this},playMarker:function(f,d){var p=this.markers[f];return p&&this.play(d,p[0],p[1]),this},removeMarker:function(f){return delete this.markers[f],this},snapshot:function(f,d){return f===void 0&&(f=this.width),d===void 0&&(d=this.height),this.snapshotArea(0,0,this.width,this.height,f,d)},snapshotArea:function(f,d,p,x,y,T){f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=this.width),x===void 0&&(x=this.height),y===void 0&&(y=p),T===void 0&&(T=x);var C=this.video,A=this.snapshotTexture;return A?(A.setSize(y,T),C&&A.context.drawImage(C,f,d,p,x,0,0,y,T)):(A=this.scene.sys.textures.createCanvas(i(),y,T),this.snapshotTexture=A,C&&A.context.drawImage(C,f,d,p,x,0,0,y,T)),A.update()},saveSnapshotTexture:function(f){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,f):this.snapshotTexture=this.scene.sys.textures.createCanvas(f,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(n.VIDEO_UNLOCKED,this));var f=this.scene.sys.sound;f&&f.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(f){var d=f.name;d==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(n.VIDEO_LOCKED,this)):d==="NotSupportedError"?(this.stop(!1),this.emit(n.VIDEO_UNSUPPORTED,this,f)):(this.stop(!1),this.emit(n.VIDEO_ERROR,this,f))},legacyPlayHandler:function(){var f=this.video;f&&(this.playSuccess(),f.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(n.VIDEO_PLAYING,this)},loadErrorHandler:function(f){this.stop(!1),this.emit(n.VIDEO_ERROR,this,f)},metadataHandler:function(f){this.emit(n.VIDEO_METADATA,this,f)},setSizeToFrame:function(f){f||(f=this.frame),this.width=f.realWidth,this.height=f.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},stalledHandler:function(f){this.isStalled=!0,this.emit(n.VIDEO_STALLED,this,f)},completeHandler:function(){this._playCalled=!1,this.emit(n.VIDEO_COMPLETE,this)},preUpdate:function(f,d){var p=this.video;!p||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=d,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(f){var d=this.video;if(d){var p=d.duration;if(p!==1/0&&!isNaN(p)){var x=p*f;this.setCurrentTime(x)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(f){var d=this.video;if(d){if(typeof f=="string"){var p=f[0],x=parseFloat(f.substr(1));p==="+"?f=d.currentTime+x:p==="-"&&(f=d.currentTime-x)}d.currentTime=f}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(n.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(n.VIDEO_SEEKED,this)},getProgress:function(){var f=this.video;if(f){var d=f.duration;if(d!==1/0&&!isNaN(d))return f.currentTime/d}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(f){f===void 0&&(f=!0),this._codeMuted=f;var d=this.video;return d&&(d.muted=this._systemMuted?!0:f),this},isMuted:function(){return this._codeMuted},globalMute:function(f,d){this._systemMuted=d;var p=this.video;p&&(p.muted=this._codeMuted?!0:d)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(f){f===void 0&&(f=!0);var d=this.video;return this._codePaused=f,d&&!d.ended&&(f?d.paused||(this.removeEventHandlers(),d.pause()):f||(this._playCalled?d.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(f){return f===void 0&&(f=1),this.video&&(this.video.volume=o(f,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(f){return this.video&&(this.video.playbackRate=f),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(f){return f===void 0&&(f=!0),this.video&&(this.video.loop=f),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(f,d){return d===void 0&&(d=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,f),this.videoTextureSource.setFlipY(d)),this._key=f,this.flipY=d,!!this.videoTexture},stop:function(f){f===void 0&&(f=!0);var d=this.video;return d&&(this.removeEventHandlers(),d.cancelVideoFrameCallback(this._rfvCallbackId),d.pause()),this.retry=0,this._playCalled=!1,f&&this.emit(n.VIDEO_STOP,this),this},removeVideoElement:function(){var f=this.video;if(f){for(f.parentNode&&f.parentNode.removeChild(f);f.hasChildNodes();)f.removeChild(f.firstChild);f.removeAttribute("autoplay"),f.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var f=this.scene.sys.game.events;f.off(r.PAUSE,this.globalPause,this),f.off(r.RESUME,this.globalResume,this);var d=this.scene.sys.sound;d&&d.off(h.GLOBAL_MUTE,this.globalMute,this)}});c.exports=u},58352:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o.videoTexture&&(g.addToRenderList(o),t.batchSprite(o,o.frame,g,a))};c.exports=S},11511:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),n=t(18471);g.register("video",function(r,e){r===void 0&&(r={});var s=a(r,"key",null),h=new n(this.scene,0,0,s);return e!==void 0&&(r.add=e),o(this.scene,h,r),h})},89025:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(18471),g=t(39429);g.register("video",function(a,n,r){return this.displayList.add(new o(this.scene,a,n,r))})},10247:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(29849),a=t(58352),c.exports={renderWebGL:g,renderCanvas:a}},29849:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o.videoTexture&&(g.addToRenderList(o),o.pipeline.batchSprite(o,g,a))};c.exports=S},41481:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(96503),a=t(87902),n=t(83419),r=t(31401),e=t(95643),s=t(87841),h=t(37303),i=new n({Extends:e,Mixins:[r.Depth,r.GetBounds,r.Origin,r.Transform,r.ScrollFactor,r.Visible],initialize:function(u,f,d,p,x){p===void 0&&(p=1),x===void 0&&(x=p),e.call(this,u,"Zone"),this.setPosition(f,d),this.width=p,this.height=x,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,u,f){f===void 0&&(f=!0),this.width=l,this.height=u,this.updateDisplayOrigin();var d=this.input;return f&&d&&!d.customHitArea&&(d.hitArea.width=l,d.hitArea.height=u),this},setDisplaySize:function(l,u){return this.displayWidth=l,this.displayHeight=u,this},setCircleDropZone:function(l){return this.setDropZone(new g(0,0,l),a)},setRectangleDropZone:function(l,u){return this.setDropZone(new s(0,0,l,u),h)},setDropZone:function(l,u){return this.input||this.setInteractive(l,u,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,u,f){f.addToRenderList(u)},renderWebGL:function(l,u,f){f.addToRenderList(u)}});c.exports=i},95261:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(23568),a=t(41481);o.register("zone",function(n){var r=g(n,"x",0),e=g(n,"y",0),s=g(n,"width",1),h=g(n,"height",s);return new a(this.scene,r,e,s,h)})},84175:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41481),g=t(39429);g.register("zone",function(a,n,r,e){return this.displayList.add(new o(this.scene,a,n,r,e))})},95166:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};c.exports=S},96503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87902),a=t(26241),n=t(79124),r=t(23777),e=t(28176),s=new o({initialize:function(i,l,u){i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),this.type=r.CIRCLE,this.x=i,this.y=l,this._radius=u,this._diameter=u*2},contains:function(h,i){return g(this,h,i)},getPoint:function(h,i){return a(this,h,i)},getPoints:function(h,i,l){return n(this,h,i,l)},getRandomPoint:function(h){return e(this,h)},setTo:function(h,i,l){return this.x=h,this.y=i,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(h,i){return i===void 0&&(i=h),this.x=h,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(h){this._radius=h,this._diameter=h*2}},diameter:{get:function(){return this._diameter},set:function(h){this._diameter=h,this._radius=h*.5}},left:{get:function(){return this.x-this._radius},set:function(h){this.x=h+this._radius}},right:{get:function(){return this.x+this._radius},set:function(h){this.x=h-this._radius}},top:{get:function(){return this.y-this._radius},set:function(h){this.y=h+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(h){this.y=h-this._radius}}});c.exports=s},71562:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 2*(Math.PI*t.radius)};c.exports=S},92110:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r){return r===void 0&&(r=new o),r.x=a.x+a.radius*Math.cos(n),r.y=a.y+a.radius*Math.sin(n),r};c.exports=g},42250:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=function(a){return new o(a.x,a.y,a.radius)};c.exports=g},87902:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(t.radius>0&&o>=t.left&&o<=t.right&&g>=t.top&&g<=t.bottom){var a=(t.x-o)*(t.x-o),n=(t.y-g)*(t.y-g);return a+n<=t.radius*t.radius}else return!1};c.exports=S},5698:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=function(a,n){return o(a,n.x,n.y)};c.exports=g},70588:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=function(a,n){return o(a,n.x,n.y)&&o(a,n.right,n.y)&&o(a,n.x,n.bottom)&&o(a,n.right,n.bottom)};c.exports=g},26394:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x,t.y,t.radius)};c.exports=S},76278:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x===o.x&&t.y===o.y&&t.radius===o.radius};c.exports=S},2074:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n){return n===void 0&&(n=new o),n.x=a.left,n.y=a.top,n.width=a.diameter,n.height=a.diameter,n};c.exports=g},26241:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(92110),g=t(62945),a=t(36383),n=t(2141),r=function(e,s,h){h===void 0&&(h=new n);var i=g(s,0,a.PI2);return o(e,i,h)};c.exports=r},79124:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71562),g=t(92110),a=t(62945),n=t(36383),r=function(e,s,h,i){i===void 0&&(i=[]),!s&&h>0&&(s=o(e)/h);for(var l=0;l<s;l++){var u=a(l/s,0,n.PI2);i.push(g(e,u))}return i};c.exports=r},50884:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x+=o,t.y+=g,t};c.exports=S},39212:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x+=o.x,t.y+=o.y,t};c.exports=S},28176:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){n===void 0&&(n=new o);var r=2*Math.PI*Math.random(),e=Math.random()+Math.random(),s=e>1?2-e:e,h=s*Math.cos(r),i=s*Math.sin(r);return n.x=a.x+h*a.radius,n.y=a.y+i*a.radius,n};c.exports=g},88911:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503);o.Area=t(95166),o.Circumference=t(71562),o.CircumferencePoint=t(92110),o.Clone=t(42250),o.Contains=t(87902),o.ContainsPoint=t(5698),o.ContainsRect=t(70588),o.CopyFrom=t(26394),o.Equals=t(76278),o.GetBounds=t(2074),o.GetPoint=t(26241),o.GetPoints=t(79124),o.Offset=t(50884),o.OffsetPoint=t(39212),o.Random=t(28176),c.exports=o},23777:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};c.exports=S},78874:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};c.exports=S},92990:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=t.width/2,g=t.height/2,a=Math.pow(o-g,2)/Math.pow(o+g,2);return Math.PI*(o+g)*(1+3*a/(10+Math.sqrt(4-3*a)))};c.exports=S},79522:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r){r===void 0&&(r=new o);var e=a.width/2,s=a.height/2;return r.x=a.x+e*Math.cos(n),r.y=a.y+s*Math.sin(n),r};c.exports=g},58102:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8497),g=function(a){return new o(a.x,a.y,a.width,a.height)};c.exports=g},81154:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(t.width<=0||t.height<=0)return!1;var a=(o-t.x)/t.width,n=(g-t.y)/t.height;return a*=a,n*=n,a+n<.25};c.exports=S},46662:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81154),g=function(a,n){return o(a,n.x,n.y)};c.exports=g},1632:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81154),g=function(a,n){return o(a,n.x,n.y)&&o(a,n.right,n.y)&&o(a,n.x,n.bottom)&&o(a,n.right,n.bottom)};c.exports=g},65534:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x,t.y,t.width,t.height)};c.exports=S},8497:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(81154),a=t(90549),n=t(48320),r=t(23777),e=t(24820),s=new o({initialize:function(i,l,u,f){i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),this.type=r.ELLIPSE,this.x=i,this.y=l,this.width=u,this.height=f},contains:function(h,i){return g(this,h,i)},getPoint:function(h,i){return a(this,h,i)},getPoints:function(h,i,l){return n(this,h,i,l)},getRandomPoint:function(h){return e(this,h)},setTo:function(h,i,l,u){return this.x=h,this.y=i,this.width=l,this.height=u,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(h,i){return i===void 0&&(i=h),this.x=h,this.y=i,this},setSize:function(h,i){return i===void 0&&(i=h),this.width=h,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(h){this.x=h+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(h){this.y=h+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});c.exports=s},36146:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x===o.x&&t.y===o.y&&t.width===o.width&&t.height===o.height};c.exports=S},23694:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n){return n===void 0&&(n=new o),n.x=a.left,n.y=a.top,n.width=a.width,n.height=a.height,n};c.exports=g},90549:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79522),g=t(62945),a=t(36383),n=t(2141),r=function(e,s,h){h===void 0&&(h=new n);var i=g(s,0,a.PI2);return o(e,i,h)};c.exports=r},48320:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(92990),g=t(79522),a=t(62945),n=t(36383),r=function(e,s,h,i){i===void 0&&(i=[]),!s&&h>0&&(s=o(e)/h);for(var l=0;l<s;l++){var u=a(l/s,0,n.PI2);i.push(g(e,u))}return i};c.exports=r},73424:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x+=o,t.y+=g,t};c.exports=S},44808:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x+=o.x,t.y+=o.y,t};c.exports=S},24820:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){n===void 0&&(n=new o);var r=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return n.x=a.x+e*Math.cos(r)*a.width/2,n.y=a.y+e*Math.sin(r)*a.height/2,n};c.exports=g},49203:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8497);o.Area=t(78874),o.Circumference=t(92990),o.CircumferencePoint=t(79522),o.Clone=t(58102),o.Contains=t(81154),o.ContainsPoint=t(46662),o.ContainsRect=t(1632),o.CopyFrom=t(65534),o.Equals=t(36146),o.GetBounds=t(23694),o.GetPoint=t(90549),o.GetPoints=t(48320),o.Offset=t(73424),o.OffsetPoint=t(44808),o.Random=t(24820),c.exports=o},55738:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23777),g=t(79291),a={Circle:t(88911),Ellipse:t(49203),Intersects:t(91865),Line:t(2529),Mesh:t(73090),Point:t(43711),Polygon:t(58423),Rectangle:t(93232),Triangle:t(84435)};a=g(!1,a,o),c.exports=a},2044:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20339),g=function(a,n){return o(a.x,a.y,n.x,n.y)<=a.radius+n.radius};c.exports=g},81491:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=o.width/2,a=o.height/2,n=Math.abs(t.x-o.x-g),r=Math.abs(t.y-o.y-a),e=g+t.radius,s=a+t.radius;if(n>e||r>s)return!1;if(n<=g||r<=a)return!0;var h=n-g,i=r-a,l=h*h,u=i*i,f=t.radius*t.radius;return l+u<=f};c.exports=S},63376:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(2044),a=function(n,r,e){if(e===void 0&&(e=[]),g(n,r)){var s=n.x,h=n.y,i=n.radius,l=r.x,u=r.y,f=r.radius,d,p,x,y,T;if(h===u)T=(f*f-i*i-l*l+s*s)/(2*(s-l)),d=1,p=-2*u,x=l*l+T*T-2*l*T+u*u-f*f,y=p*p-4*d*x,y===0?e.push(new o(T,-p/(2*d))):y>0&&(e.push(new o(T,(-p+Math.sqrt(y))/(2*d))),e.push(new o(T,(-p-Math.sqrt(y))/(2*d))));else{var C=(s-l)/(h-u),A=(f*f-i*i-l*l+s*s-u*u+h*h)/(2*(h-u));d=C*C+1,p=2*h*C-2*A*C-2*s,x=s*s+h*h+A*A-i*i-2*h*A,y=p*p-4*d*x,y===0?(T=-p/(2*d),e.push(new o(T,A-T*C))):y>0&&(T=(-p+Math.sqrt(y))/(2*d),e.push(new o(T,A-T*C)),T=(-p-Math.sqrt(y))/(2*d),e.push(new o(T,A-T*C)))}}return e};c.exports=a},97439:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4042),g=t(81491),a=function(n,r,e){if(e===void 0&&(e=[]),g(n,r)){var s=r.getLineA(),h=r.getLineB(),i=r.getLineC(),l=r.getLineD();o(s,n,e),o(h,n,e),o(i,n,e),o(l,n,e)}return e};c.exports=a},4042:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(80462),a=function(n,r,e){if(e===void 0&&(e=[]),g(n,r)){var s=n.x1,h=n.y1,i=n.x2,l=n.y2,u=r.x,f=r.y,d=r.radius,p=i-s,x=l-h,y=s-u,T=h-f,C=p*p+x*x,A=2*(p*y+x*T),R=y*y+T*T-d*d,M=A*A-4*C*R,L,I;if(M===0){var O=-A/(2*C);L=s+O*p,I=h+O*x,O>=0&&O<=1&&e.push(new o(L,I))}else if(M>0){var D=(-A-Math.sqrt(M))/(2*C);L=s+D*p,I=h+D*x,D>=0&&D<=1&&e.push(new o(L,I));var B=(-A+Math.sqrt(M))/(2*C);L=s+B*p,I=h+B*x,B>=0&&B<=1&&e.push(new o(L,I))}}return e};c.exports=a},36100:(c,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=function(a,n,r,e){r===void 0&&(r=!1);var s=a.x1,h=a.y1,i=a.x2,l=a.y2,u=n.x1,f=n.y1,d=n.x2,p=n.y2,x=i-s,y=l-h,T=d-u,C=p-f,A=x*C-y*T;if(A===0)return null;var R,M,L;if(r){if(R=(x*(f-h)+y*(s-u))/(T*y-C*x),x!==0)M=(u+T*R-s)/x;else if(y!==0)M=(f+C*R-h)/y;else return null;if(M<0||R<0||R>1)return null;L=M}else{if(R=((u-s)*C-(f-h)*T)/A,M=((h-f)*x-(s-u)*y)/A,R<0||R>1||M<0||M>1)return null;L=R}return e===void 0&&(e=new o),e.set(s+x*L,h+y*L,L)};c.exports=g},3073:(c,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36100),g=t(23031),a=t(25836),n=new g,r=new a,e=function(s,h,i,l){i===void 0&&(i=!1),l===void 0&&(l=new a);var u=!1;l.set(),r.set();for(var f=h[h.length-1],d=0;d<h.length;d++){var p=h[d];n.setTo(f.x,f.y,p.x,p.y),f=p,o(s,n,i,r)&&(!u||r.z<l.z)&&(l.copy(r),u=!0)}return u?l:null};c.exports=e},56362:(c,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=t(61369),a=t(3073),n=new o,r=function(e,s,h,i){i===void 0&&(i=new g),Array.isArray(s)||(s=[s]);var l=!1;i.set(),n.set();for(var u=0;u<s.length;u++)a(e,s[u].points,h,n)&&(!l||n.z<i.z)&&(i.set(n.x,n.y,n.z,u),l=!0);return l?i:null};c.exports=r},60646:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(76112),a=t(92773),n=function(r,e,s){if(s===void 0&&(s=[]),a(r,e))for(var h=e.getLineA(),i=e.getLineB(),l=e.getLineC(),u=e.getLineD(),f=[new o,new o,new o,new o],d=[g(h,r,f[0]),g(i,r,f[1]),g(l,r,f[2]),g(u,r,f[3])],p=0;p<4;p++)d[p]&&s.push(f[p]);return s};c.exports=n},71147:(c,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61369),g=t(56362),a=t(23031),n=new a;function r(h,i,l,u,f){var d=Math.cos(h),p=Math.sin(h);n.setTo(i,l,i+d,l+p);var x=g(n,u,!0);x&&f.push(new o(x.x,x.y,h,x.w))}function e(h,i){return h.z-i.z}var s=function(h,i,l){Array.isArray(l)||(l=[l]);for(var u=[],f=[],d=0;d<l.length;d++)for(var p=l[d].points,x=0;x<p.length;x++){var y=Math.atan2(p[x].y-i,p[x].x-h);f.indexOf(y)===-1&&(r(y,h,i,l,u),r(y-1e-5,h,i,l,u),r(y+1e-5,h,i,l,u),f.push(y))}return u.sort(e)};c.exports=s},68389:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(59996),a=function(n,r,e){return e===void 0&&(e=new o),g(n,r)&&(e.x=Math.max(n.x,r.x),e.y=Math.max(n.y,r.y),e.width=Math.min(n.right,r.right)-e.x,e.height=Math.min(n.bottom,r.bottom)-e.y),e};c.exports=a},52784:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60646),g=t(59996),a=function(n,r,e){if(e===void 0&&(e=[]),g(n,r)){var s=n.getLineA(),h=n.getLineB(),i=n.getLineC(),l=n.getLineD();o(s,r,e),o(h,r,e),o(i,r,e),o(l,r,e)}return e};c.exports=a},26341:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89265),g=t(60646),a=function(n,r,e){if(e===void 0&&(e=[]),o(n,r)){var s=r.getLineA(),h=r.getLineB(),i=r.getLineC();g(s,n,e),g(h,n,e),g(i,n,e)}return e};c.exports=a},38720:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4042),g=t(67636),a=function(n,r,e){if(e===void 0&&(e=[]),g(n,r)){var s=n.getLineA(),h=n.getLineB(),i=n.getLineC();o(s,r,e),o(h,r,e),o(i,r,e)}return e};c.exports=a},13882:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(2822),a=t(76112),n=function(r,e,s){if(s===void 0&&(s=[]),g(r,e))for(var h=r.getLineA(),i=r.getLineB(),l=r.getLineC(),u=[new o,new o,new o],f=[a(h,e,u[0]),a(i,e,u[1]),a(l,e,u[2])],d=0;d<3;d++)f[d]&&s.push(u[d]);return s};c.exports=n},75636:(c,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82944),g=t(13882),a=function(n,r,e){if(e===void 0&&(e=[]),o(n,r)){var s=r.getLineA(),h=r.getLineB(),i=r.getLineC();g(n,s,e),g(n,h,e),g(n,i,e)}return e};c.exports=a},80462:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=t(2141),a=new g,n=function(r,e,s){if(s===void 0&&(s=a),o(e,r.x1,r.y1))return s.x=r.x1,s.y=r.y1,!0;if(o(e,r.x2,r.y2))return s.x=r.x2,s.y=r.y2,!0;var h=r.x2-r.x1,i=r.y2-r.y1,l=e.x-r.x1,u=e.y-r.y1,f=h*h+i*i,d=h,p=i;if(f>0){var x=(l*h+u*i)/f;d*=x,p*=x}s.x=r.x1+d,s.y=r.y1+p;var y=d*d+p*p;return y<=f&&d*h+p*i>=0&&o(e,s.x,s.y)};c.exports=n},76112:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=t.x1,n=t.y1,r=t.x2,e=t.y2,s=o.x1,h=o.y1,i=o.x2,l=o.y2;if(a===r&&n===e||s===i&&h===l)return!1;var u=(l-h)*(r-a)-(i-s)*(e-n);if(u===0)return!1;var f=((i-s)*(n-h)-(l-h)*(a-s))/u,d=((r-a)*(n-h)-(e-n)*(a-s))/u;return f<0||f>1||d<0||d>1?!1:(g&&(g.x=a+f*(r-a),g.y=n+f*(e-n)),!0)};c.exports=S},92773:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.x1,a=t.y1,n=t.x2,r=t.y2,e=o.x,s=o.y,h=o.right,i=o.bottom,l=0;if(g>=e&&g<=h&&a>=s&&a<=i||n>=e&&n<=h&&r>=s&&r<=i)return!0;if(g<e&&n>=e){if(l=a+(r-a)*(e-g)/(n-g),l>s&&l<=i)return!0}else if(g>h&&n<=h&&(l=a+(r-a)*(h-g)/(n-g),l>=s&&l<=i))return!0;if(a<s&&r>=s){if(l=g+(n-g)*(s-a)/(r-a),l>=e&&l<=h)return!0}else if(a>i&&r<=i&&(l=g+(n-g)*(i-a)/(r-a),l>=e&&l<=h))return!0;return!1};c.exports=S},16204:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){g===void 0&&(g=1);var a=o.x1,n=o.y1,r=o.x2,e=o.y2,s=t.x,h=t.y,i=(r-a)*(r-a)+(e-n)*(e-n);if(i===0)return!1;var l=((s-a)*(r-a)+(h-n)*(e-n))/i;if(l<0)return Math.sqrt((a-s)*(a-s)+(n-h)*(n-h))<=g;if(l>=0&&l<=1){var u=((n-h)*(r-a)-(a-s)*(e-n))/i;return Math.abs(u)*Math.sqrt(i)<=g}else return Math.sqrt((r-s)*(r-s)+(e-h)*(e-h))<=g};c.exports=S},14199:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16204),g=function(a,n){if(!o(a,n))return!1;var r=Math.min(n.x1,n.x2),e=Math.max(n.x1,n.x2),s=Math.min(n.y1,n.y2),h=Math.max(n.y1,n.y2);return a.x>=r&&a.x<=e&&a.y>=s&&a.y<=h};c.exports=g},59996:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.width<=0||t.height<=0||o.width<=0||o.height<=0?!1:!(t.right<o.x||t.bottom<o.y||t.x>o.right||t.y>o.bottom)};c.exports=S},89265:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(76112),g=t(37303),a=t(48653),n=t(77493),r=function(e,s){if(s.left>e.right||s.right<e.left||s.top>e.bottom||s.bottom<e.top)return!1;var h=s.getLineA(),i=s.getLineB(),l=s.getLineC();if(g(e,h.x1,h.y1)||g(e,h.x2,h.y2)||g(e,i.x1,i.y1)||g(e,i.x2,i.y2)||g(e,l.x1,l.y1)||g(e,l.x2,l.y2))return!0;var u=e.getLineA(),f=e.getLineB(),d=e.getLineC(),p=e.getLineD();if(o(h,u)||o(h,f)||o(h,d)||o(h,p)||o(i,u)||o(i,f)||o(i,d)||o(i,p)||o(l,u)||o(l,f)||o(l,d)||o(l,p))return!0;var x=n(e),y=a(s,x,!0);return y.length>0};c.exports=r},84411:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r){return r===void 0&&(r=0),!(o>t.right+r||g<t.left-r||a>t.bottom+r||n<t.top-r)};c.exports=S},67636:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80462),g=t(10690),a=function(n,r){return n.left>r.right||n.right<r.left||n.top>r.bottom||n.bottom<r.top?!1:!!(g(n,r.x,r.y)||o(n.getLineA(),r)||o(n.getLineB(),r)||o(n.getLineC(),r))};c.exports=a},2822:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(76112),g=function(a,n){return!!(a.contains(n.x1,n.y1)||a.contains(n.x2,n.y2)||o(a.getLineA(),n)||o(a.getLineB(),n)||o(a.getLineC(),n))};c.exports=g},82944:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(48653),g=t(71694),a=t(76112),n=function(r,e){if(r.left>e.right||r.right<e.left||r.top>e.bottom||r.bottom<e.top)return!1;var s=r.getLineA(),h=r.getLineB(),i=r.getLineC(),l=e.getLineA(),u=e.getLineB(),f=e.getLineC();if(a(s,l)||a(s,u)||a(s,f)||a(h,l)||a(h,u)||a(h,f)||a(i,l)||a(i,u)||a(i,f))return!0;var d=g(r),p=o(e,d,!0);return p.length>0||(d=g(e),p=o(r,d,!0),p.length>0)};c.exports=n},91865:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CircleToCircle:t(2044),CircleToRectangle:t(81491),GetCircleToCircle:t(63376),GetCircleToRectangle:t(97439),GetLineToCircle:t(4042),GetLineToLine:t(36100),GetLineToPoints:t(3073),GetLineToPolygon:t(56362),GetLineToRectangle:t(60646),GetRaysFromPointToPolygon:t(71147),GetRectangleIntersection:t(68389),GetRectangleToRectangle:t(52784),GetRectangleToTriangle:t(26341),GetTriangleToCircle:t(38720),GetTriangleToLine:t(13882),GetTriangleToTriangle:t(75636),LineToCircle:t(80462),LineToLine:t(76112),LineToRectangle:t(92773),PointToLine:t(16204),PointToLineSegment:t(14199),RectangleToRectangle:t(59996),RectangleToTriangle:t(89265),RectangleToValues:t(84411),TriangleToCircle:t(67636),TriangleToLine:t(2822),TriangleToTriangle:t(82944)}},91938:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};c.exports=S},84993:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){o===void 0&&(o=1),g===void 0&&(g=[]);var a=Math.round(t.x1),n=Math.round(t.y1),r=Math.round(t.x2),e=Math.round(t.y2),s=Math.abs(r-a),h=Math.abs(e-n),i=a<r?1:-1,l=n<e?1:-1,u=s-h;g.push({x:a,y:n});for(var f=1;!(a===r&&n===e);){var d=u<<1;d>-h&&(u-=h,a+=i),d<s&&(u+=s,n+=l),f%o===0&&g.push({x:a,y:n}),f++}return g};c.exports=S},36469:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=o-(t.x1+t.x2)/2,n=g-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=n,t.x2+=a,t.y2+=n,t};c.exports=S},31116:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23031),g=function(a){return new o(a.x1,a.y1,a.x2,a.y2)};c.exports=g},59944:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x1,t.y1,t.x2,t.y2)};c.exports=S},59220:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x1===o.x1&&t.y1===o.y1&&t.x2===o.x2&&t.y2===o.y2};c.exports=S},78177:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=function(a,n,r){r===void 0&&(r=n);var e=o(a),s=a.x2-a.x1,h=a.y2-a.y1;return n&&(a.x1=a.x1-s/e*n,a.y1=a.y1-h/e*n),r&&(a.x2=a.x2+s/e*r,a.y2=a.y2+h/e*r),a};c.exports=g},26708:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(52816),g=t(6113),a=t(2141),n=function(r,e,s,h,i){h===void 0&&(h=0),i===void 0&&(i=[]);var l=[],u=r.x1,f=r.y1,d=r.x2-u,p=r.y2-f,x=g(e,i),y,T,C=s-1;for(y=0;y<C;y++)T=x(y/C),l.push(new a(u+d*T,f+p*T));if(T=x(1),l.push(new a(u+d*T,f+p*T)),h>0){var A=l[0],R=[A];for(y=1;y<l.length-1;y++){var M=l[y];o(A,M)>=h&&(R.push(M),A=M)}var L=l[l.length-1];return o(A,L)<h&&R.pop(),R.push(L),R}else return l};c.exports=n},32125:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.x=(a.x1+a.x2)/2,n.y=(a.y1+a.y2)/2,n};c.exports=g},99569:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r){r===void 0&&(r=new o);var e=a.x1,s=a.y1,h=a.x2,i=a.y2,l=(h-e)*(h-e)+(i-s)*(i-s);if(l===0)return r;var u=((n.x-e)*(h-e)+(n.y-s)*(i-s))/l;return r.x=e+u*(h-e),r.y=s+u*(i-s),r};c.exports=g},34638:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=t(2141),n=function(r,e){e===void 0&&(e=new a);var s=g(r)-o.TAU;return e.x=Math.cos(s),e.y=Math.sin(s),e};c.exports=n},13151:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r){return r===void 0&&(r=new o),r.x=a.x1+(a.x2-a.x1)*n,r.y=a.y1+(a.y2-a.y1)*n,r};c.exports=g},15258:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(2141),a=function(n,r,e,s){s===void 0&&(s=[]),!r&&e>0&&(r=o(n)/e);for(var h=n.x1,i=n.y1,l=n.x2,u=n.y2,f=0;f<r;f++){var d=f/r,p=h+(l-h)*d,x=i+(u-i)*d;s.push(new g(p,x))}return s};c.exports=a},26408:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.x1,a=t.y1,n=t.x2,r=t.y2,e=(n-g)*(n-g)+(r-a)*(r-a);if(e===0)return!1;var s=((a-o.y)*(n-g)-(g-o.x)*(r-a))/e;return Math.abs(s)*Math.sqrt(e)};c.exports=S},98770:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.abs(t.y1-t.y2)};c.exports=S},35001:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};c.exports=S},23031:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(13151),a=t(15258),n=t(23777),r=t(65822),e=t(26099),s=new o({initialize:function(i,l,u,f){i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),this.type=n.LINE,this.x1=i,this.y1=l,this.x2=u,this.y2=f},getPoint:function(h,i){return g(this,h,i)},getPoints:function(h,i,l){return a(this,h,i,l)},getRandomPoint:function(h){return r(this,h)},setTo:function(h,i,l,u){return h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),this.x1=h,this.y1=i,this.x2=l,this.y2=u,this},setFromObjects:function(h,i){return this.x1=h.x,this.y1=h.y,this.x2=i.x,this.y2=i.y,this},getPointA:function(h){return h===void 0&&(h=new e),h.set(this.x1,this.y1),h},getPointB:function(h){return h===void 0&&(h=new e),h.set(this.x2,this.y2),h},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(h){this.x1<=this.x2?this.x1=h:this.x2=h}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(h){this.x1>this.x2?this.x1=h:this.x2=h}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(h){this.y1<=this.y2?this.y1=h:this.y2=h}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(h){this.y1>this.y2?this.y1=h:this.y2=h}}});c.exports=s},64795:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(15994),a=t(91938),n=function(r){var e=a(r)-o.TAU;return g(e,-Math.PI,Math.PI)};c.exports=n},52616:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=function(n){return Math.cos(g(n)-o.TAU)};c.exports=a},87231:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=function(n){return Math.sin(g(n)-o.TAU)};c.exports=a},89662:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x1+=o,t.y1+=g,t.x2+=o,t.y2+=g,t};c.exports=S},71165:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};c.exports=S},65822:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){n===void 0&&(n=new o);var r=Math.random();return n.x=a.x1+r*(a.x2-a.x1),n.y=a.y1+r*(a.y2-a.y1),n};c.exports=g},69777:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91938),g=t(64795),a=function(n,r){return 2*g(r)-Math.PI-o(n)};c.exports=a},39706:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64400),g=function(a,n){var r=(a.x1+a.x2)/2,e=(a.y1+a.y2)/2;return o(a,r,e,n)};c.exports=g},82585:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64400),g=function(a,n,r){return o(a,n.x,n.y,r)};c.exports=g},64400:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=Math.cos(a),r=Math.sin(a),e=t.x1-o,s=t.y1-g;return t.x1=e*n-s*r+o,t.y1=e*r+s*n+g,e=t.x2-o,s=t.y2-g,t.x2=e*n-s*r+o,t.y2=e*r+s*n+g,t};c.exports=S},62377:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){return t.x1=o,t.y1=g,t.x2=o+Math.cos(a)*n,t.y2=g+Math.sin(a)*n,t};c.exports=S},71366:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};c.exports=S},10809:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.abs(t.x1-t.x2)};c.exports=S},2529:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23031);o.Angle=t(91938),o.BresenhamPoints=t(84993),o.CenterOn=t(36469),o.Clone=t(31116),o.CopyFrom=t(59944),o.Equals=t(59220),o.Extend=t(78177),o.GetEasedPoints=t(26708),o.GetMidPoint=t(32125),o.GetNearestPoint=t(99569),o.GetNormal=t(34638),o.GetPoint=t(13151),o.GetPoints=t(15258),o.GetShortestDistance=t(26408),o.Height=t(98770),o.Length=t(35001),o.NormalAngle=t(64795),o.NormalX=t(52616),o.NormalY=t(87231),o.Offset=t(89662),o.PerpSlope=t(71165),o.Random=t(65822),o.ReflectAngle=t(69777),o.Rotate=t(39706),o.RotateAroundPoint=t(82585),o.RotateAroundXY=t(64400),o.SetToAngle=t(62377),o.Slope=t(71366),o.Width=t(10809),c.exports=o},83997:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87841),a=t(26099);function n(e,s,h,i){var l=e-h,u=s-i,f=l*l+u*u;return Math.sqrt(f)}var r=new o({initialize:function(s,h,i){this.vertex1=s,this.vertex2=h,this.vertex3=i,this.bounds=new g,this._inCenter=new a},getInCenter:function(e){e===void 0&&(e=!0);var s=this.vertex1,h=this.vertex2,i=this.vertex3,l,u,f,d,p,x;e?(l=s.x,u=s.y,f=h.x,d=h.y,p=i.x,x=i.y):(l=s.vx,u=s.vy,f=h.vx,d=h.vy,p=i.vx,x=i.vy);var y=n(p,x,f,d),T=n(l,u,p,x),C=n(f,d,l,u),A=y+T+C;return this._inCenter.set((l*y+f*T+p*C)/A,(u*y+d*T+x*C)/A)},contains:function(e,s,h){var i=this.vertex1,l=this.vertex2,u=this.vertex3,f=i.vx,d=i.vy,p=l.vx,x=l.vy,y=u.vx,T=u.vy;if(h){var C=h.a,A=h.b,R=h.c,M=h.d,L=h.e,I=h.f;f=i.vx*C+i.vy*R+L,d=i.vx*A+i.vy*M+I,p=l.vx*C+l.vy*R+L,x=l.vx*A+l.vy*M+I,y=u.vx*C+u.vy*R+L,T=u.vx*A+u.vy*M+I}var O=y-f,D=T-d,B=p-f,V=x-d,W=e-f,Y=s-d,X=O*O+D*D,U=O*B+D*V,z=O*W+D*Y,G=B*B+V*V,b=B*W+V*Y,H=X*G-U*U,j=H===0?0:1/H,$=(G*z-U*b)*j,k=(X*b-U*z)*j;return $>=0&&k>=0&&$+k<1},isCounterClockwise:function(e){var s=this.vertex1,h=this.vertex2,i=this.vertex3,l=(h.vx-s.vx)*(i.vy-s.vy)-(h.vy-s.vy)*(i.vx-s.vx);return e<=0?l>=0:l<0},load:function(e,s,h,i,l){return h=this.vertex1.load(e,s,h,i,l),h=this.vertex2.load(e,s,h,i,l),h=this.vertex3.load(e,s,h,i,l),h},transformCoordinatesLocal:function(e,s,h,i){return this.vertex1.transformCoordinatesLocal(e,s,h,i),this.vertex2.transformCoordinatesLocal(e,s,h,i),this.vertex3.transformCoordinatesLocal(e,s,h,i),this},updateBounds:function(){var e=this.vertex1,s=this.vertex2,h=this.vertex3,i=this.bounds;return i.x=Math.min(e.vx,s.vx,h.vx),i.y=Math.min(e.vy,s.vy,h.vy),i.width=Math.max(e.vx,s.vx,h.vx)-i.x,i.height=Math.max(e.vy,s.vy,h.vy)-i.y,this},isInView:function(e,s,h,i,l,u,f,d,p,x,y){this.update(i,l,u,f,d,p,x,y);var T=this.vertex1,C=this.vertex2,A=this.vertex3;if(T.ta<=0&&C.ta<=0&&A.ta<=0||s&&!this.isCounterClockwise(h))return!1;var R=this.bounds;R.x=Math.min(T.tx,C.tx,A.tx),R.y=Math.min(T.ty,C.ty,A.ty),R.width=Math.max(T.tx,C.tx,A.tx)-R.x,R.height=Math.max(T.ty,C.ty,A.ty)-R.y;var M=e.x+e.width,L=e.y+e.height;return R.width<=0||R.height<=0||e.width<=0||e.height<=0?!1:!(R.right<e.x||R.bottom<e.y||R.x>M||R.y>L)},scrollUV:function(e,s){return this.vertex1.scrollUV(e,s),this.vertex2.scrollUV(e,s),this.vertex3.scrollUV(e,s),this},scaleUV:function(e,s){return this.vertex1.scaleUV(e,s),this.vertex2.scaleUV(e,s),this.vertex3.scaleUV(e,s),this},setColor:function(e){return this.vertex1.color=e,this.vertex2.color=e,this.vertex3.color=e,this},update:function(e,s,h,i,l,u,f,d){return this.vertex1.update(s,h,i,l,u,f,d,e),this.vertex2.update(s,h,i,l,u,f,d,e),this.vertex3.update(s,h,i,l,u,f,d,e),this},translate:function(e,s){s===void 0&&(s=0);var h=this.vertex1,i=this.vertex2,l=this.vertex3;return h.x+=e,h.y+=s,i.x+=e,i.y+=s,l.x+=e,l.y+=s,this},x:{get:function(){return this.getInCenter().x},set:function(e){var s=this.getInCenter();this.translate(e-s.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var s=this.getInCenter();this.translate(0,e-s.y)}},alpha:{get:function(){var e=this.vertex1,s=this.vertex2,h=this.vertex3;return(e.alpha+s.alpha+h.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,s=this.vertex2,h=this.vertex3;return(e.vz+s.vz+h.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});c.exports=r},48803:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(95540),a=t(37867),n=t(25836),r=t(39318),e=new n,s=new n,h=new a,i=function(l){var u=g(l,"mesh"),f=g(l,"texture",null),d=g(l,"frame"),p=g(l,"width",1),x=g(l,"height",p),y=g(l,"widthSegments",1),T=g(l,"heightSegments",y),C=g(l,"x",0),A=g(l,"y",0),R=g(l,"z",0),M=g(l,"rotateX",0),L=g(l,"rotateY",0),I=g(l,"rotateZ",0),O=g(l,"zIsUp",!0),D=g(l,"isOrtho",u?u.dirtyCache[11]:!1),B=g(l,"colors",[16777215]),V=g(l,"alphas",[1]),W=g(l,"tile",!1),Y=g(l,"flipY",!1),X=g(l,"width",null),U={faces:[],verts:[]};e.set(C,A,R),s.set(M,L,I),h.fromRotationXYTranslation(s,e,O);var z;if(!f&&u)f=u.texture,d||(z=u.frame);else if(u&&typeof f=="string")f=u.scene.sys.textures.get(f);else if(!f)return U;z||(z=f.get(d)),!X&&D&&f&&u&&(p=z.width/u.height,x=z.height/u.height);var G=p/2,b=x/2,H=Math.floor(y),j=Math.floor(T),$=H+1,k=j+1,Q=p/H,_=x/j,tt=[],et=[],it,ot,nt=0,ut=1,ct=0,pt=1;z&&(nt=z.u0,ut=z.u1,Y?(ct=z.v1,pt=z.v0):(ct=z.v0,pt=z.v1));var mt=ut-nt,ht=pt-ct;for(ot=0;ot<k;ot++){var ft=ot*_-b;for(it=0;it<$;it++){var dt=it*Q-G;et.push(dt,-ft);var Ct=nt+mt*(it/H),Lt=ct+ht*(ot/j);tt.push(Ct,Lt)}}Array.isArray(B)||(B=[B]),Array.isArray(V)||(V=[V]);var Xt=0,Mt=0;for(ot=0;ot<j;ot++)for(it=0;it<H;it++){var It=(it+$*ot)*2,kt=(it+$*(ot+1))*2,ne=(it+1+$*(ot+1))*2,Ut=(it+1+$*ot)*2,zt=B[Mt],Zt=V[Xt],ae=new r(et[It],et[It+1],0,tt[It],tt[It+1],zt,Zt).transformMat4(h),we=new r(et[kt],et[kt+1],0,tt[kt],tt[kt+1],zt,Zt).transformMat4(h),fi=new r(et[Ut],et[Ut+1],0,tt[Ut],tt[Ut+1],zt,Zt).transformMat4(h),Ze=new r(et[kt],et[kt+1],0,tt[kt],tt[kt+1],zt,Zt).transformMat4(h),di=new r(et[ne],et[ne+1],0,tt[ne],tt[ne+1],zt,Zt).transformMat4(h),Ne=new r(et[Ut],et[Ut+1],0,tt[Ut],tt[Ut+1],zt,Zt).transformMat4(h);W&&(ae.setUVs(nt,pt),we.setUVs(nt,ct),fi.setUVs(ut,pt),Ze.setUVs(nt,ct),di.setUVs(ut,ct),Ne.setUVs(ut,pt)),Mt++,Mt===B.length&&(Mt=0),Xt++,Xt===V.length&&(Xt=0),U.verts.push(ae,we,fi,Ze,di,Ne),U.faces.push(new o(ae,we,fi),new o(Ze,di,Ne))}return u&&(u.faces=u.faces.concat(U.faces),u.vertices=u.vertices.concat(U.verts)),U};c.exports=i},34684:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(37867),a=t(25836),n=t(39318),r=new a,e=new a,s=new g,h=function(i,l,u,f,d,p,x,y,T,C){u===void 0&&(u=1),f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=!0);var A={faces:[],verts:[]},R=i.materials;r.set(f,d,p),e.set(x,y,T),s.fromRotationXYTranslation(e,r,C);for(var M=0;M<i.models.length;M++)for(var L=i.models[M],I=L.vertices,O=L.textureCoords,D=L.faces,B=0;B<D.length;B++){var V=D[B],W=V.vertices[0],Y=V.vertices[1],X=V.vertices[2],U=I[W.vertexIndex],z=I[Y.vertexIndex],G=I[X.vertexIndex],b=W.textureCoordsIndex,H=Y.textureCoordsIndex,j=X.textureCoordsIndex,$=b===-1?{u:0,v:1}:O[b],k=H===-1?{u:0,v:0}:O[H],Q=j===-1?{u:1,v:1}:O[j],_=16777215;V.material!==""&&R[V.material]&&(_=R[V.material]);var tt=new n(U.x*u,U.y*u,U.z*u,$.u,$.v,_).transformMat4(s),et=new n(z.x*u,z.y*u,z.z*u,k.u,k.v,_).transformMat4(s),it=new n(G.x*u,G.y*u,G.z*u,Q.u,Q.v,_).transformMat4(s);A.verts.push(tt,et,it),A.faces.push(new o(tt,et,it))}return l&&(l.faces=l.faces.concat(A.faces),l.vertices=l.vertices.concat(A.verts)),A};c.exports=h},92515:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(39318),a=function(n,r,e,s,h,i,l,u){if(s===void 0&&(s=!1),i===void 0&&(i=16777215),l===void 0&&(l=1),u===void 0&&(u=!1),n.length!==r.length&&!s){console.warn("GenerateVerts: vertices and uvs count not equal");return}var f={faces:[],vertices:[]},d,p,x,y,T,C,A,R,M,L,I,O=s?3:2,D=Array.isArray(i),B=Array.isArray(l);if(Array.isArray(e)&&e.length>0)for(d=0;d<e.length;d++){var V=e[d],W=e[d]*2,Y=e[d]*O;p=n[Y],x=n[Y+1],y=s?n[Y+2]:0,T=r[W],C=r[W+1],u&&(C=1-C),A=D?i[V]:i,R=B?l[V]:l,M=0,L=0,I=0,h&&(M=h[Y],L=h[Y+1],I=s?h[Y+2]:0),f.vertices.push(new g(p,x,y,T,C,A,R,M,L,I))}else{var X=0,U=0;for(d=0;d<n.length;d+=O)p=n[d],x=n[d+1],y=s?n[d+2]:0,T=r[X],C=r[X+1],A=D?i[U]:i,R=B?l[U]:l,M=0,L=0,I=0,h&&(M=h[d],L=h[d+1],I=s?h[d+2]:0),f.vertices.push(new g(p,x,y,T,C,A,R,M,L,I)),X+=2,U++}for(d=0;d<f.vertices.length;d+=3){var z=f.vertices[d],G=f.vertices[d+1],b=f.vertices[d+2];f.faces.push(new o(z,G,b))}return f};c.exports=a},85048:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=!0,t="untitled",o="",g="";function a(p){var x=p.indexOf("#");return x>-1?p.substring(0,x):p}function n(p){return p.models.length===0&&p.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),o="",p.models[p.models.length-1]}function r(p,x){var y=p.length>=2?p[1]:t;x.models.push({faces:[],name:y,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function e(p){p.length===2&&(o=p[1])}function s(p,x){var y=p.length,T=y>=2?parseFloat(p[1]):0,C=y>=3?parseFloat(p[2]):0,A=y>=4?parseFloat(p[3]):0;n(x).vertices.push({x:T,y:C,z:A})}function h(p,x){var y=p.length,T=y>=2?parseFloat(p[1]):0,C=y>=3?parseFloat(p[2]):0,A=y>=4?parseFloat(p[3]):0;isNaN(T)&&(T=0),isNaN(C)&&(C=0),isNaN(A)&&(A=0),S&&(C=1-C),n(x).textureCoords.push({u:T,v:C,w:A})}function i(p,x){var y=p.length,T=y>=2?parseFloat(p[1]):0,C=y>=3?parseFloat(p[2]):0,A=y>=4?parseFloat(p[3]):0;n(x).vertexNormals.push({x:T,y:C,z:A})}function l(p,x){var y=p.length-1;if(!(y<3)){for(var T={group:o,material:g,vertices:[]},C=0;C<y;C++){var A=p[C+1],R=A.split("/"),M=R.length;if(!(M<1||M>3)){var L=0,I=0,O=0;L=parseInt(R[0],10),M>1&&R[1]!==""&&(I=parseInt(R[1],10)),M>2&&(O=parseInt(R[2],10)),L!==0&&(L<0&&(L=n(x).vertices.length+1+L),I-=1,L-=1,O-=1,T.vertices.push({textureCoordsIndex:I,vertexIndex:L,vertexNormalIndex:O}))}}n(x).faces.push(T)}}function u(p,x){p.length>=2&&x.materialLibraries.push(p[1])}function f(p){p.length>=2&&(g=p[1])}var d=function(p,x){x===void 0&&(x=!0),S=x;var y={materials:{},materialLibraries:[],models:[]};o="",g="";for(var T=p.split(`
`),C=0;C<T.length;C++){var A=a(T[C]),R=A.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":r(R,y);break;case"g":e(R);break;case"v":s(R,y);break;case"vt":h(R,y);break;case"vn":i(R,y);break;case"f":l(R,y);break;case"mtllib":u(R,y);break;case"usemtl":f(R);break}}return y};c.exports=d},61485:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589),g=function(a){for(var n={},r=a.split(`
`),e="",s=0;s<r.length;s++){var h=r[s].trim();if(!(h.indexOf("#")===0||h==="")){var i=h.replace(/\s\s+/g," ").trim().split(" ");switch(i[0].toLowerCase()){case"newmtl":{e=i[1];break}case"kd":{var l=Math.floor(i[1]*255),u=i.length>=2?Math.floor(i[2]*255):l,f=i.length>=3?Math.floor(i[3]*255):l;n[e]=o(l,u,f);break}}}}return n};c.exports=g},92570:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n,r;if(g===void 0&&a===void 0){var e=t.getInCenter();n=e.x,r=e.y}var s=Math.cos(o),h=Math.sin(o),i=t.vertex1,l=t.vertex2,u=t.vertex3,f=i.x-n,d=i.y-r;i.set(f*s-d*h+n,f*h+d*s+r),f=l.x-n,d=l.y-r,l.set(f*s-d*h+n,f*h+d*s+r),f=u.x-n,d=u.y-r,u.set(f*s-d*h+n,f*h+d*s+r)};c.exports=S},39318:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(70554),a=t(25836),n=new o({Extends:a,initialize:function(e,s,h,i,l,u,f,d,p,x){u===void 0&&(u=16777215),f===void 0&&(f=1),d===void 0&&(d=0),p===void 0&&(p=0),x===void 0&&(x=0),a.call(this,e,s,h),this.vx=0,this.vy=0,this.vz=0,this.nx=d,this.ny=p,this.nz=x,this.u=i,this.v=l,this.color=u,this.alpha=f,this.tx=0,this.ty=0,this.ta=0,this.tu=i,this.tv=l},setUVs:function(r,e){return this.u=r,this.v=e,this.tu=r,this.tv=e,this},scrollUV:function(r,e){return this.tu+=r,this.tv+=e,this},scaleUV:function(r,e){return this.tu=this.u*r,this.tv=this.v*e,this},transformCoordinatesLocal:function(r,e,s,h){var i=this.x,l=this.y,u=this.z,f=r.val,d=i*f[0]+l*f[4]+u*f[8]+f[12],p=i*f[1]+l*f[5]+u*f[9]+f[13],x=i*f[2]+l*f[6]+u*f[10]+f[14],y=i*f[3]+l*f[7]+u*f[11]+f[15];this.vx=d/y*e,this.vy=-(p/y)*s,h<=0?this.vz=x/y:this.vz=-(x/y)},resize:function(r,e,s,h,i,l){return this.x=r,this.y=e,this.vx=this.x*s,this.vy=-this.y*h,this.vz=0,i<.5?this.vx+=s*(.5-i):i>.5&&(this.vx-=s*(i-.5)),l<.5?this.vy+=h*(.5-l):l>.5&&(this.vy-=h*(l-.5)),this},update:function(r,e,s,h,i,l,u,f){var d=this.vx*r+this.vy*s+i,p=this.vx*e+this.vy*h+l;return u&&(d=Math.round(d),p=Math.round(p)),this.tx=d,this.ty=p,this.ta=this.alpha*f,this},load:function(r,e,s,h,i){return r[++s]=this.tx,r[++s]=this.ty,r[++s]=this.tu,r[++s]=this.tv,r[++s]=h,r[++s]=i,e[++s]=g.getTintAppendFloatAlpha(this.color,this.ta),s}});c.exports=n},73090:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Face:t(83997),GenerateGridVerts:t(48803),GenerateObjVerts:t(34684),GenerateVerts:t(92515),ParseObj:t(85048),ParseObjMaterial:t(61485),RotateFace:t(92570),Vertex:t(39318)};c.exports=o},96550:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};c.exports=S},99706:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a){return new o(a.x,a.y)};c.exports=g},68010:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x,t.y)};c.exports=S},27814:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x===o.x&&t.y===o.y};c.exports=S},73565:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};c.exports=S},87555:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){if(n===void 0&&(n=new o),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var r=a.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(r===1)n.x=a[0].x,n.y=a[0].y;else{for(var e=0;e<r;e++)n.x+=a[e].x,n.y+=a[e].y;n.x/=r,n.y/=r}return n};c.exports=g},28793:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};c.exports=S},44405:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x*t.x+t.y*t.y};c.exports=S},20873:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n){n===void 0&&(n=new o);for(var r=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,i=0;i<a.length;i++){var l=a[i];l.x>r&&(r=l.x),l.x<e&&(e=l.x),l.y>s&&(s=l.y),l.y<h&&(h=l.y)}return n.x=e,n.y=h,n.width=r-e,n.height=s-h,n};c.exports=g},26152:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r,e){return r===void 0&&(r=0),e===void 0&&(e=new o),e.x=a.x+(n.x-a.x)*r,e.y=a.y+(n.y-a.y)*r,e};c.exports=g},55767:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(t.y,t.x)};c.exports=S},79432:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.setTo(-a.x,-a.y)};c.exports=g},2141:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23777),a=new o({initialize:function(r,e){r===void 0&&(r=0),e===void 0&&(e=r),this.type=g.POINT,this.x=r,this.y=e},setTo:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.x=n,this.y=r,this}});c.exports=a},72930:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(44405),a=function(n,r,e){e===void 0&&(e=new o);var s=n.x*r.x+n.y*r.y,h=s/g(r);return h!==0&&(e.x=h*r.x,e.y=h*r.y),e};c.exports=a},62880:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n,r){r===void 0&&(r=new o);var e=a.x*n.x+a.y*n.y;return e!==0&&(r.x=e*n.x,r.y=e*n.y),r};c.exports=g},15093:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28793),g=function(a,n){if(a.x!==0||a.y!==0){var r=o(a);a.x/=r,a.y/=r}return a.x*=n,a.y*=n,a};c.exports=g},43711:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141);o.Ceil=t(96550),o.Clone=t(99706),o.CopyFrom=t(68010),o.Equals=t(27814),o.Floor=t(73565),o.GetCentroid=t(87555),o.GetMagnitude=t(28793),o.GetMagnitudeSq=t(44405),o.GetRectangleFromPoints=t(20873),o.Interpolate=t(26152),o.Invert=t(55767),o.Negative=t(79432),o.Project=t(72930),o.ProjectUnit=t(62880),o.SetMagnitude=t(15093),c.exports=o},12306:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25717),g=function(a){return new o(a.points)};c.exports=g},63814:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){for(var a=!1,n=-1,r=t.points.length-1;++n<t.points.length;r=n){var e=t.points[n].x,s=t.points[n].y,h=t.points[r].x,i=t.points[r].y;(s<=g&&g<i||i<=g&&g<s)&&o<(h-e)*(g-s)/(i-s)+e&&(a=!a)}return a};c.exports=S},99338:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63814),g=function(a,n){return o(a,n.x,n.y)};c.exports=g},94811:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(U,z,G){G=G||2;var b=z&&z.length,H=b?z[0]*G:U.length,j=t(U,0,H,G,!0),$=[];if(!j||j.next===j.prev)return $;var k,Q,_,tt,et,it,ot;if(b&&(j=s(U,z,j,G)),U.length>80*G){k=_=U[0],Q=tt=U[1];for(var nt=G;nt<H;nt+=G)et=U[nt],it=U[nt+1],et<k&&(k=et),it<Q&&(Q=it),et>_&&(_=et),it>tt&&(tt=it);ot=Math.max(_-k,tt-Q),ot=ot!==0?32767/ot:0}return g(j,$,G,k,Q,ot,0),$}function t(U,z,G,b,H){var j,$;if(H===X(U,z,G,b)>0)for(j=z;j<G;j+=b)$=V(j,U[j],U[j+1],$);else for(j=G-b;j>=z;j-=b)$=V(j,U[j],U[j+1],$);return $&&A($,$.next)&&(W($),$=$.next),$}function o(U,z){if(!U)return U;z||(z=U);var G=U,b;do if(b=!1,!G.steiner&&(A(G,G.next)||C(G.prev,G,G.next)===0)){if(W(G),G=z=G.prev,G===G.next)break;b=!0}else G=G.next;while(b||G!==z);return z}function g(U,z,G,b,H,j,$){if(U){!$&&j&&f(U,b,H,j);for(var k=U,Q,_;U.prev!==U.next;){if(Q=U.prev,_=U.next,j?n(U,b,H,j):a(U)){z.push(Q.i/G|0),z.push(U.i/G|0),z.push(_.i/G|0),W(U),U=_.next,k=_.next;continue}if(U=_,U===k){$?$===1?(U=r(o(U),z,G),g(U,z,G,b,H,j,2)):$===2&&e(U,z,G,b,H,j):g(o(U),z,G,b,H,j,1);break}}}}function a(U){var z=U.prev,G=U,b=U.next;if(C(z,G,b)>=0)return!1;for(var H=z.x,j=G.x,$=b.x,k=z.y,Q=G.y,_=b.y,tt=H<j?H<$?H:$:j<$?j:$,et=k<Q?k<_?k:_:Q<_?Q:_,it=H>j?H>$?H:$:j>$?j:$,ot=k>Q?k>_?k:_:Q>_?Q:_,nt=b.next;nt!==z;){if(nt.x>=tt&&nt.x<=it&&nt.y>=et&&nt.y<=ot&&y(H,k,j,Q,$,_,nt.x,nt.y)&&C(nt.prev,nt,nt.next)>=0)return!1;nt=nt.next}return!0}function n(U,z,G,b){var H=U.prev,j=U,$=U.next;if(C(H,j,$)>=0)return!1;for(var k=H.x,Q=j.x,_=$.x,tt=H.y,et=j.y,it=$.y,ot=k<Q?k<_?k:_:Q<_?Q:_,nt=tt<et?tt<it?tt:it:et<it?et:it,ut=k>Q?k>_?k:_:Q>_?Q:_,ct=tt>et?tt>it?tt:it:et>it?et:it,pt=p(ot,nt,z,G,b),mt=p(ut,ct,z,G,b),ht=U.prevZ,ft=U.nextZ;ht&&ht.z>=pt&&ft&&ft.z<=mt;){if(ht.x>=ot&&ht.x<=ut&&ht.y>=nt&&ht.y<=ct&&ht!==H&&ht!==$&&y(k,tt,Q,et,_,it,ht.x,ht.y)&&C(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,ft.x>=ot&&ft.x<=ut&&ft.y>=nt&&ft.y<=ct&&ft!==H&&ft!==$&&y(k,tt,Q,et,_,it,ft.x,ft.y)&&C(ft.prev,ft,ft.next)>=0))return!1;ft=ft.nextZ}for(;ht&&ht.z>=pt;){if(ht.x>=ot&&ht.x<=ut&&ht.y>=nt&&ht.y<=ct&&ht!==H&&ht!==$&&y(k,tt,Q,et,_,it,ht.x,ht.y)&&C(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;ft&&ft.z<=mt;){if(ft.x>=ot&&ft.x<=ut&&ft.y>=nt&&ft.y<=ct&&ft!==H&&ft!==$&&y(k,tt,Q,et,_,it,ft.x,ft.y)&&C(ft.prev,ft,ft.next)>=0)return!1;ft=ft.nextZ}return!0}function r(U,z,G){var b=U;do{var H=b.prev,j=b.next.next;!A(H,j)&&R(H,b,b.next,j)&&O(H,j)&&O(j,H)&&(z.push(H.i/G|0),z.push(b.i/G|0),z.push(j.i/G|0),W(b),W(b.next),b=U=j),b=b.next}while(b!==U);return o(b)}function e(U,z,G,b,H,j){var $=U;do{for(var k=$.next.next;k!==$.prev;){if($.i!==k.i&&T($,k)){var Q=B($,k);$=o($,$.next),Q=o(Q,Q.next),g($,z,G,b,H,j,0),g(Q,z,G,b,H,j,0);return}k=k.next}$=$.next}while($!==U)}function s(U,z,G,b){var H=[],j,$,k,Q,_;for(j=0,$=z.length;j<$;j++)k=z[j]*b,Q=j<$-1?z[j+1]*b:U.length,_=t(U,k,Q,b,!1),_===_.next&&(_.steiner=!0),H.push(x(_));for(H.sort(h),j=0;j<H.length;j++)G=i(H[j],G);return G}function h(U,z){return U.x-z.x}function i(U,z){var G=l(U,z);if(!G)return z;var b=B(G,U);return o(b,b.next),o(G,G.next)}function l(U,z){var G=z,b=U.x,H=U.y,j=-1/0,$;do{if(H<=G.y&&H>=G.next.y&&G.next.y!==G.y){var k=G.x+(H-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(k<=b&&k>j&&(j=k,$=G.x<G.next.x?G:G.next,k===b))return $}G=G.next}while(G!==z);if(!$)return null;var Q=$,_=$.x,tt=$.y,et=1/0,it;G=$;do b>=G.x&&G.x>=_&&b!==G.x&&y(H<tt?b:j,H,_,tt,H<tt?j:b,H,G.x,G.y)&&(it=Math.abs(H-G.y)/(b-G.x),O(G,U)&&(it<et||it===et&&(G.x>$.x||G.x===$.x&&u($,G)))&&($=G,et=it)),G=G.next;while(G!==Q);return $}function u(U,z){return C(U.prev,U,z.prev)<0&&C(z.next,U,U.next)<0}function f(U,z,G,b){var H=U;do H.z===0&&(H.z=p(H.x,H.y,z,G,b)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==U);H.prevZ.nextZ=null,H.prevZ=null,d(H)}function d(U){var z,G,b,H,j,$,k,Q,_=1;do{for(G=U,U=null,j=null,$=0;G;){for($++,b=G,k=0,z=0;z<_&&(k++,b=b.nextZ,!!b);z++);for(Q=_;k>0||Q>0&&b;)k!==0&&(Q===0||!b||G.z<=b.z)?(H=G,G=G.nextZ,k--):(H=b,b=b.nextZ,Q--),j?j.nextZ=H:U=H,H.prevZ=j,j=H;G=b}j.nextZ=null,_*=2}while($>1);return U}function p(U,z,G,b,H){return U=(U-G)*H|0,z=(z-b)*H|0,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,U|z<<1}function x(U){var z=U,G=U;do(z.x<G.x||z.x===G.x&&z.y<G.y)&&(G=z),z=z.next;while(z!==U);return G}function y(U,z,G,b,H,j,$,k){return(H-$)*(z-k)>=(U-$)*(j-k)&&(U-$)*(b-k)>=(G-$)*(z-k)&&(G-$)*(j-k)>=(H-$)*(b-k)}function T(U,z){return U.next.i!==z.i&&U.prev.i!==z.i&&!I(U,z)&&(O(U,z)&&O(z,U)&&D(U,z)&&(C(U.prev,U,z.prev)||C(U,z.prev,z))||A(U,z)&&C(U.prev,U,U.next)>0&&C(z.prev,z,z.next)>0)}function C(U,z,G){return(z.y-U.y)*(G.x-z.x)-(z.x-U.x)*(G.y-z.y)}function A(U,z){return U.x===z.x&&U.y===z.y}function R(U,z,G,b){var H=L(C(U,z,G)),j=L(C(U,z,b)),$=L(C(G,b,U)),k=L(C(G,b,z));return!!(H!==j&&$!==k||H===0&&M(U,G,z)||j===0&&M(U,b,z)||$===0&&M(G,U,b)||k===0&&M(G,z,b))}function M(U,z,G){return z.x<=Math.max(U.x,G.x)&&z.x>=Math.min(U.x,G.x)&&z.y<=Math.max(U.y,G.y)&&z.y>=Math.min(U.y,G.y)}function L(U){return U>0?1:U<0?-1:0}function I(U,z){var G=U;do{if(G.i!==U.i&&G.next.i!==U.i&&G.i!==z.i&&G.next.i!==z.i&&R(G,G.next,U,z))return!0;G=G.next}while(G!==U);return!1}function O(U,z){return C(U.prev,U,U.next)<0?C(U,z,U.next)>=0&&C(U,U.prev,z)>=0:C(U,z,U.prev)<0||C(U,U.next,z)<0}function D(U,z){var G=U,b=!1,H=(U.x+z.x)/2,j=(U.y+z.y)/2;do G.y>j!=G.next.y>j&&G.next.y!==G.y&&H<(G.next.x-G.x)*(j-G.y)/(G.next.y-G.y)+G.x&&(b=!b),G=G.next;while(G!==U);return b}function B(U,z){var G=new Y(U.i,U.x,U.y),b=new Y(z.i,z.x,z.y),H=U.next,j=z.prev;return U.next=z,z.prev=U,G.next=H,H.prev=G,b.next=G,G.prev=b,j.next=b,b.prev=j,b}function V(U,z,G,b){var H=new Y(U,z,G);return b?(H.next=b.next,H.prev=b,b.next.prev=H,b.next=H):(H.prev=H,H.next=H),H}function W(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function Y(U,z,G){this.i=U,this.x=z,this.y=G,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}S.deviation=function(U,z,G,b){var H=z&&z.length,j=H?z[0]*G:U.length,$=Math.abs(X(U,0,j,G));if(H)for(var k=0,Q=z.length;k<Q;k++){var _=z[k]*G,tt=k<Q-1?z[k+1]*G:U.length;$-=Math.abs(X(U,_,tt,G))}var et=0;for(k=0;k<b.length;k+=3){var it=b[k]*G,ot=b[k+1]*G,nt=b[k+2]*G;et+=Math.abs((U[it]-U[nt])*(U[ot+1]-U[it+1])-(U[it]-U[ot])*(U[nt+1]-U[it+1]))}return $===0&&et===0?0:Math.abs((et-$)/$)};function X(U,z,G,b){for(var H=0,j=z,$=G-b;j<G;j+=b)H+=(U[$]-U[j])*(U[j+1]+U[$+1]),$=j;return H}S.flatten=function(U){for(var z=U[0][0].length,G={vertices:[],holes:[],dimensions:z},b=0,H=0;H<U.length;H++){for(var j=0;j<U[H].length;j++)for(var $=0;$<z;$++)G.vertices.push(U[H][j][$]);H>0&&(b+=U[H-1].length,G.holes.push(b))}return G},c.exports=S},13829:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n){n===void 0&&(n=new o);for(var r=1/0,e=1/0,s=-r,h=-e,i,l=0;l<a.points.length;l++)i=a.points[l],r=Math.min(r,i.x),e=Math.min(e,i.y),s=Math.max(s,i.x),h=Math.max(h,i.y);return n.x=r,n.y=e,n.width=s-r,n.height=h-e,n};c.exports=g},26173:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=[]);for(var g=0;g<t.points.length;g++)o.push(t.points[g].x),o.push(t.points[g].y);return o};c.exports=S},9564:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(23031),a=t(30052),n=function(r,e,s,h){h===void 0&&(h=[]);var i=r.points,l=a(r);!e&&s>0&&(e=l/s);for(var u=0;u<e;u++)for(var f=l*(u/e),d=0,p=0;p<i.length;p++){var x=i[p],y=i[(p+1)%i.length],T=new g(x.x,x.y,y.x,y.y),C=o(T);if(f<d||f>d+C){d+=C;continue}var A=T.getPoint((f-d)/C);h.push(A);break}return h};c.exports=n},30052:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(23031),a=function(n){for(var r=n.points,e=0,s=0;s<r.length;s++){var h=r[s],i=r[(s+1)%r.length],l=new g(h.x,h.y,i.x,i.y);e+=o(l)}return e};c.exports=a},25717:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(63814),a=t(9564),n=t(23777),r=new o({initialize:function(s){this.type=n.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(e,s){return g(this,e,s)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var s,h=0;h<e.length;h++)s={x:0,y:0},typeof e[h]=="number"||typeof e[h]=="string"?(s.x=parseFloat(e[h]),s.y=parseFloat(e[h+1]),h++):Array.isArray(e[h])?(s.x=e[h][0],s.y=e[h][1]):(s.x=e[h].x,s.y=e[h].y),this.points.push(s);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,s,h,i=0;i<this.points.length-1;i++)s=this.points[i],h=this.points[i+1],e+=(h.x-s.x)*(s.y+h.y);return s=this.points[0],h=this.points[this.points.length-1],e+=(s.x-h.x)*(h.y+s.y),this.area=-e*.5,this.area},getPoints:function(e,s,h){return a(this,e,s,h)}});c.exports=r},8133:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.points.reverse(),t};c.exports=S},29524:c=>{function S(r,e){var s=r.x-e.x,h=r.y-e.y;return s*s+h*h}function t(r,e,s){var h=e.x,i=e.y,l=s.x-h,u=s.y-i;if(l!==0||u!==0){var f=((r.x-h)*l+(r.y-i)*u)/(l*l+u*u);f>1?(h=s.x,i=s.y):f>0&&(h+=l*f,i+=u*f)}return l=r.x-h,u=r.y-i,l*l+u*u}function o(r,e){for(var s=r[0],h=[s],i,l=1,u=r.length;l<u;l++)i=r[l],S(i,s)>e&&(h.push(i),s=i);return s!==i&&h.push(i),h}function g(r,e,s,h,i){for(var l=h,u,f=e+1;f<s;f++){var d=t(r[f],r[e],r[s]);d>l&&(u=f,l=d)}l>h&&(u-e>1&&g(r,e,u,h,i),i.push(r[u]),s-u>1&&g(r,u,s,h,i))}function a(r,e){var s=r.length-1,h=[r[0]];return g(r,0,s,e,h),h.push(r[s]),h}var n=function(r,e,s){e===void 0&&(e=1),s===void 0&&(s=!1);var h=r.points;if(h.length>2){var i=e*e;s||(h=o(h,i)),r.setTo(a(h,i))}return r};c.exports=n},5469:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(o,g){return o[0]=g[0],o[1]=g[1],o},t=function(o){var g,a=[],n=o.points;for(g=0;g<n.length;g++)a.push([n[g].x,n[g].y]);var r=[];for(a.length>0&&r.push(S([0,0],a[0])),g=0;g<a.length-1;g++){var e=a[g],s=a[g+1],h=e[0],i=e[1],l=s[0],u=s[1];r.push([.85*h+.15*l,.85*i+.15*u]),r.push([.15*h+.85*l,.15*i+.85*u])}return a.length>1&&r.push(S([0,0],a[a.length-1])),o.setTo(r)};c.exports=t},24709:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){for(var a=t.points,n=0;n<a.length;n++)a[n].x+=o,a[n].y+=g;return t};c.exports=S},58423:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25717);o.Clone=t(12306),o.Contains=t(63814),o.ContainsPoint=t(99338),o.Earcut=t(94811),o.GetAABB=t(13829),o.GetNumberArray=t(26173),o.GetPoints=t(9564),o.Perimeter=t(30052),o.Reverse=t(8133),o.Simplify=t(29524),o.Smooth=t(5469),o.Translate=t(24709),c.exports=o},62224:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.width*t.height};c.exports=S},98615:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};c.exports=S},31688:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};c.exports=S},67502:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x=o-t.width/2,t.y=g-t.height/2,t};c.exports=S},65085:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a){return new o(a.x,a.y,a.width,a.height)};c.exports=g},37303:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.width<=0||t.height<=0?!1:t.x<=o&&t.x+t.width>=o&&t.y<=g&&t.y+t.height>=g};c.exports=S},96553:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37303),g=function(a,n){return o(a,n.x,n.y)};c.exports=g},70273:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.width*o.height>t.width*t.height?!1:o.x>t.x&&o.x<t.right&&o.right>t.x&&o.right<t.right&&o.y>t.y&&o.y<t.bottom&&o.bottom>t.y&&o.bottom<t.bottom};c.exports=S},43459:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x,t.y,t.width,t.height)};c.exports=S},77493:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=[]),o.push({x:t.x,y:t.y}),o.push({x:t.right,y:t.y}),o.push({x:t.right,y:t.bottom}),o.push({x:t.x,y:t.bottom}),o};c.exports=S},9219:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x===o.x&&t.y===o.y&&t.width===o.width&&t.height===o.height};c.exports=S},53751:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8249),g=function(a,n){var r=o(a);return r<o(n)?a.setSize(n.height*r,n.height):a.setSize(n.width,n.width/r),a.setPosition(n.centerX-a.width/2,n.centerY-a.height/2)};c.exports=g},16088:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8249),g=function(a,n){var r=o(a);return r>o(n)?a.setSize(n.height*r,n.height):a.setSize(n.width,n.width/r),a.setPosition(n.centerX-a.width/2,n.centerY-a.height/2)};c.exports=g},80774:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};c.exports=S},83859:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};c.exports=S},19217:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(36383),a=function(n,r){if(r===void 0&&(r=new o),n.length===0)return r;for(var e=Number.MAX_VALUE,s=Number.MAX_VALUE,h=g.MIN_SAFE_INTEGER,i=g.MIN_SAFE_INTEGER,l,u,f,d=0;d<n.length;d++)l=n[d],Array.isArray(l)?(u=l[0],f=l[1]):(u=l.x,f=l.y),e=Math.min(e,u),s=Math.min(s,f),h=Math.max(h,u),i=Math.max(i,f);return r.x=e,r.y=s,r.width=h-e,r.height=i-s,r};c.exports=a},9477:(c,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n,r,e,s){return s===void 0&&(s=new o),s.setTo(Math.min(a,r),Math.min(n,e),Math.abs(a-r),Math.abs(n-e))};c.exports=g},8249:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.height===0?NaN:t.width/t.height};c.exports=S},27165:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.x=a.centerX,n.y=a.centerY,n};c.exports=g},20812:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13019),g=t(2141),a=function(n,r,e){if(e===void 0&&(e=new g),r<=0||r>=1)return e.x=n.x,e.y=n.y,e;var s=o(n)*r;return r>.5?(s-=n.width+n.height,s<=n.width?(e.x=n.right-s,e.y=n.bottom):(e.x=n.x,e.y=n.bottom-(s-n.width))):s<=n.width?(e.x=n.x+s,e.y=n.y):(e.x=n.right,e.y=n.y+(s-n.width)),e};c.exports=a},34819:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20812),g=t(13019),a=function(n,r,e,s){s===void 0&&(s=[]),!r&&e>0&&(r=g(n)/e);for(var h=0;h<r;h++){var i=h/r;s.push(o(n,i))}return s};c.exports=a},51313:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.x=a.width,n.y=a.height,n};c.exports=g},86091:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(67502),g=function(a,n,r){var e=a.centerX,s=a.centerY;return a.setSize(a.width+n*2,a.height+r*2),o(a,e,s)};c.exports=g},53951:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(59996),a=function(n,r,e){return e===void 0&&(e=new o),g(n,r)?(e.x=Math.max(n.x,r.x),e.y=Math.max(n.y,r.y),e.width=Math.min(n.right,r.right)-e.x,e.height=Math.min(n.bottom,r.bottom)-e.y):e.setEmpty(),e};c.exports=a},14649:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13019),g=t(2141),a=function(n,r,e,s){if(s===void 0&&(s=[]),!r&&!e)return s;r?e=Math.round(o(n)/r):r=o(n)/e;for(var h=n.x,i=n.y,l=0,u=0;u<e;u++)switch(s.push(new g(h,i)),l){case 0:h+=r,h>=n.right&&(l=1,i+=h-n.right,h=n.right);break;case 1:i+=r,i>=n.bottom&&(l=2,h-=i-n.bottom,i=n.bottom);break;case 2:h-=r,h<=n.left&&(l=3,i-=n.left-h,h=n.left);break;case 3:i-=r,i<=n.top&&(l=0,i=n.top);break}return s};c.exports=a},33595:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){for(var g=t.x,a=t.right,n=t.y,r=t.bottom,e=0;e<o.length;e++)g=Math.min(g,o[e].x),a=Math.max(a,o[e].x),n=Math.min(n,o[e].y),r=Math.max(r,o[e].y);return t.x=g,t.y=n,t.width=a-g,t.height=r-n,t};c.exports=S},20074:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=Math.min(t.x,o.x),a=Math.max(t.right,o.right);t.x=g,t.width=a-g;var n=Math.min(t.y,o.y),r=Math.max(t.bottom,o.bottom);return t.y=n,t.height=r-n,t};c.exports=S},92171:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=Math.min(t.x,o),n=Math.max(t.right,o);t.x=a,t.width=n-a;var r=Math.min(t.y,g),e=Math.max(t.bottom,g);return t.y=r,t.height=e-r,t};c.exports=S},42981:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x+=o,t.y+=g,t};c.exports=S},46907:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x+=o.x,t.y+=o.y,t};c.exports=S},60170:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x<o.right&&t.right>o.x&&t.y<o.bottom&&t.bottom>o.y};c.exports=S},13019:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 2*(t.width+t.height)};c.exports=S},85133:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(39506),a=function(n,r,e){e===void 0&&(e=new o),r=g(r);var s=Math.sin(r),h=Math.cos(r),i=h>0?n.width/2:n.width/-2,l=s>0?n.height/2:n.height/-2;return Math.abs(i*s)<Math.abs(l*h)?l=i*s/h:i=l*h/s,e.x=i+n.centerX,e.y=l+n.centerY,e};c.exports=a},26597:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.x=a.x+Math.random()*a.width,n.y=a.y+Math.random()*a.height,n};c.exports=g},86470:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(70273),a=t(2141),n=function(r,e,s){if(s===void 0&&(s=new a),g(r,e))switch(o(0,3)){case 0:s.x=r.x+Math.random()*(e.right-r.x),s.y=r.y+Math.random()*(e.top-r.y);break;case 1:s.x=e.x+Math.random()*(r.right-e.x),s.y=e.bottom+Math.random()*(r.bottom-e.bottom);break;case 2:s.x=r.x+Math.random()*(e.x-r.x),s.y=e.y+Math.random()*(r.bottom-e.y);break;case 3:s.x=e.right+Math.random()*(r.right-e.right),s.y=r.y+Math.random()*(e.bottom-r.y);break}return s};c.exports=n},87841:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37303),a=t(20812),n=t(34819),r=t(23777),e=t(23031),s=t(26597),h=new o({initialize:function(l,u,f,d){l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=0),this.type=r.RECTANGLE,this.x=l,this.y=u,this.width=f,this.height=d},contains:function(i,l){return g(this,i,l)},getPoint:function(i,l){return a(this,i,l)},getPoints:function(i,l,u){return n(this,i,l,u)},getRandomPoint:function(i){return s(this,i)},setTo:function(i,l,u,f){return this.x=i,this.y=l,this.width=u,this.height=f,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,l){return l===void 0&&(l=i),this.x=i,this.y=l,this},setSize:function(i,l){return l===void 0&&(l=i),this.width=i,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return i===void 0&&(i=new e),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return i===void 0&&(i=new e),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return i===void 0&&(i=new e),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return i===void 0&&(i=new e),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){i>=this.right?this.width=0:this.width=this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){i<=this.x?this.width=0:this.width=i-this.x}},top:{get:function(){return this.y},set:function(i){i>=this.bottom?this.height=0:this.height=this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){i<=this.y?this.height=0:this.height=i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});c.exports=h},94845:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.width===o.width&&t.height===o.height};c.exports=S},31730:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g===void 0&&(g=o),t.width*=o,t.height*=g,t};c.exports=S},36899:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,n,r){r===void 0&&(r=new o);var e=Math.min(a.x,n.x),s=Math.min(a.y,n.y),h=Math.max(a.right,n.right)-e,i=Math.max(a.bottom,n.bottom)-s;return r.setTo(e,s,h,i)};c.exports=g},93232:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841);o.Area=t(62224),o.Ceil=t(98615),o.CeilAll=t(31688),o.CenterOn=t(67502),o.Clone=t(65085),o.Contains=t(37303),o.ContainsPoint=t(96553),o.ContainsRect=t(70273),o.CopyFrom=t(43459),o.Decompose=t(77493),o.Equals=t(9219),o.FitInside=t(53751),o.FitOutside=t(16088),o.Floor=t(80774),o.FloorAll=t(83859),o.FromPoints=t(19217),o.FromXY=t(9477),o.GetAspectRatio=t(8249),o.GetCenter=t(27165),o.GetPoint=t(20812),o.GetPoints=t(34819),o.GetSize=t(51313),o.Inflate=t(86091),o.Intersection=t(53951),o.MarchingAnts=t(14649),o.MergePoints=t(33595),o.MergeRect=t(20074),o.MergeXY=t(92171),o.Offset=t(42981),o.OffsetPoint=t(46907),o.Overlaps=t(60170),o.Perimeter=t(13019),o.PerimeterPoint=t(85133),o.Random=t(26597),o.RandomOutside=t(86470),o.SameDimensions=t(94845),o.Scale=t(31730),o.Union=t(36899),c.exports=o},41658:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=t.x1,g=t.y1,a=t.x2,n=t.y2,r=t.x3,e=t.y3;return Math.abs(((r-o)*(n-g)-(a-o)*(e-g))/2)};c.exports=S},39208:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a,n,r){var e=r*(Math.sqrt(3)/2),s=a,h=n,i=a+r/2,l=n+e,u=a-r/2,f=n+e;return new o(s,h,i,l,u,f)};c.exports=g},39545:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(94811),g=t(16483),a=function(n,r,e,s,h){r===void 0&&(r=null),e===void 0&&(e=1),s===void 0&&(s=1),h===void 0&&(h=[]);for(var i=o(n,r),l,u,f,d,p,x,y,T,C,A=0;A<i.length;A+=3)l=i[A],u=i[A+1],f=i[A+2],d=n[l*2]*e,p=n[l*2+1]*s,x=n[u*2]*e,y=n[u*2+1]*s,T=n[f*2]*e,C=n[f*2+1]*s,h.push(new g(d,p,x,y,T,C));return h};c.exports=a},90301:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a,n,r,e){e===void 0&&(e=r);var s=a,h=n,i=a,l=n-e,u=a+r,f=n;return new o(s,h,i,l,u,f)};c.exports=g},23707:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97523),g=t(13584),a=function(n,r,e,s){s===void 0&&(s=o);var h=s(n),i=r-h.x,l=e-h.y;return g(n,i,l)};c.exports=a},97523:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){return n===void 0&&(n=new o),n.x=(a.x1+a.x2+a.x3)/3,n.y=(a.y1+a.y2+a.y3)/3,n};c.exports=g},24951:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099);function g(n,r,e,s){return n*s-r*e}var a=function(n,r){r===void 0&&(r=new o);var e=n.x3,s=n.y3,h=n.x1-e,i=n.y1-s,l=n.x2-e,u=n.y2-s,f=2*g(h,i,l,u),d=g(i,h*h+i*i,u,l*l+u*u),p=g(h,h*h+i*i,l,l*l+u*u);return r.x=e-d/f,r.y=s+p/f,r};c.exports=a},85614:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=function(a,n){n===void 0&&(n=new o);var r=a.x1,e=a.y1,s=a.x2,h=a.y2,i=a.x3,l=a.y3,u=s-r,f=h-e,d=i-r,p=l-e,x=u*(r+s)+f*(e+h),y=d*(r+i)+p*(e+l),T=2*(u*(l-h)-f*(i-s)),C,A;if(Math.abs(T)<1e-6){var R=Math.min(r,s,i),M=Math.min(e,h,l);C=(Math.max(r,s,i)-R)*.5,A=(Math.max(e,h,l)-M)*.5,n.x=R+C,n.y=M+A,n.radius=Math.sqrt(C*C+A*A)}else n.x=(p*x-f*y)/T,n.y=(u*y-d*x)/T,C=n.x-r,A=n.y-e,n.radius=Math.sqrt(C*C+A*A);return n};c.exports=g},74422:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a){return new o(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};c.exports=g},10690:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=t.x3-t.x1,n=t.y3-t.y1,r=t.x2-t.x1,e=t.y2-t.y1,s=o-t.x1,h=g-t.y1,i=a*a+n*n,l=a*r+n*e,u=a*s+n*h,f=r*r+e*e,d=r*s+e*h,p=i*f-l*l,x=p===0?0:1/p,y=(f*u-l*d)*x,T=(i*d-l*u)*x;return y>=0&&T>=0&&y+T<1};c.exports=S},48653:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g===void 0&&(g=!1),a===void 0&&(a=[]);for(var n=t.x3-t.x1,r=t.y3-t.y1,e=t.x2-t.x1,s=t.y2-t.y1,h=n*n+r*r,i=n*e+r*s,l=e*e+s*s,u=h*l-i*i,f=u===0?0:1/u,d,p,x,y,T,C,A=t.x1,R=t.y1,M=0;M<o.length&&(x=o[M].x-A,y=o[M].y-R,T=n*x+r*y,C=e*x+s*y,d=(l*T-i*C)*f,p=(h*C-i*T)*f,!(d>=0&&p>=0&&d+p<1&&(a.push({x:o[M].x,y:o[M].y}),g)));M++);return a};c.exports=S},96006:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10690),g=function(a,n){return o(a,n.x,n.y)};c.exports=g},71326:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};c.exports=S},71694:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=[]),o.push({x:t.x1,y:t.y1}),o.push({x:t.x2,y:t.y2}),o.push({x:t.x3,y:t.y3}),o};c.exports=S},33522:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.x1===o.x1&&t.y1===o.y1&&t.x2===o.x2&&t.y2===o.y2&&t.x3===o.x3&&t.y3===o.y3};c.exports=S},20437:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(35001),a=function(n,r,e){e===void 0&&(e=new o);var s=n.getLineA(),h=n.getLineB(),i=n.getLineC();if(r<=0||r>=1)return e.x=s.x1,e.y=s.y1,e;var l=g(s),u=g(h),f=g(i),d=l+u+f,p=d*r,x=0;return p<l?(x=p/l,e.x=s.x1+(s.x2-s.x1)*x,e.y=s.y1+(s.y2-s.y1)*x):p>l+u?(p-=l+u,x=p/f,e.x=i.x1+(i.x2-i.x1)*x,e.y=i.y1+(i.y2-i.y1)*x):(p-=l,x=p/u,e.x=h.x1+(h.x2-h.x1)*x,e.y=h.y1+(h.y2-h.y1)*x),e};c.exports=a},80672:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(2141),a=function(n,r,e,s){s===void 0&&(s=[]);var h=n.getLineA(),i=n.getLineB(),l=n.getLineC(),u=o(h),f=o(i),d=o(l),p=u+f+d;!r&&e>0&&(r=p/e);for(var x=0;x<r;x++){var y=p*(x/r),T=0,C=new g;y<u?(T=y/u,C.x=h.x1+(h.x2-h.x1)*T,C.y=h.y1+(h.y2-h.y1)*T):y>u+f?(y-=u+f,T=y/d,C.x=l.x1+(l.x2-l.x1)*T,C.y=l.y1+(l.y2-l.y1)*T):(y-=u,T=y/f,C.x=i.x1+(i.x2-i.x1)*T,C.y=i.y1+(i.y2-i.y1)*T),s.push(C)}return s};c.exports=a},39757:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141);function g(n,r,e,s){var h=n-e,i=r-s,l=h*h+i*i;return Math.sqrt(l)}var a=function(n,r){r===void 0&&(r=new o);var e=n.x1,s=n.y1,h=n.x2,i=n.y2,l=n.x3,u=n.y3,f=g(l,u,h,i),d=g(e,s,l,u),p=g(h,i,e,s),x=f+d+p;return r.x=(e*f+h*d+l*p)/x,r.y=(s*f+i*d+u*p)/x,r};c.exports=a},13584:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t.x1+=o,t.y1+=g,t.x2+=o,t.y2+=g,t.x3+=o,t.y3+=g,t};c.exports=S},1376:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=function(a){var n=a.getLineA(),r=a.getLineB(),e=a.getLineC();return o(n)+o(r)+o(e)};c.exports=g},90260:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,n){n===void 0&&(n=new o);var r=a.x2-a.x1,e=a.y2-a.y1,s=a.x3-a.x1,h=a.y3-a.y1,i=Math.random(),l=Math.random();return i+l>=1&&(i=1-i,l=1-l),n.x=a.x1+(r*i+s*l),n.y=a.y1+(e*i+h*l),n};c.exports=g},52172:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99614),g=t(39757),a=function(n,r){var e=g(n);return o(n,e.x,e.y,r)};c.exports=a},49907:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99614),g=function(a,n,r){return o(a,n.x,n.y,r)};c.exports=g},99614:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=Math.cos(a),r=Math.sin(a),e=t.x1-o,s=t.y1-g;return t.x1=e*n-s*r+o,t.y1=e*r+s*n+g,e=t.x2-o,s=t.y2-g,t.x2=e*n-s*r+o,t.y2=e*r+s*n+g,e=t.x3-o,s=t.y3-g,t.x3=e*n-s*r+o,t.y3=e*r+s*n+g,t};c.exports=S},16483:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(10690),a=t(20437),n=t(80672),r=t(23777),e=t(23031),s=t(90260),h=new o({initialize:function(l,u,f,d,p,x){l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=0),x===void 0&&(x=0),this.type=r.TRIANGLE,this.x1=l,this.y1=u,this.x2=f,this.y2=d,this.x3=p,this.y3=x},contains:function(i,l){return g(this,i,l)},getPoint:function(i,l){return a(this,i,l)},getPoints:function(i,l,u){return n(this,i,l,u)},getRandomPoint:function(i){return s(this,i)},setTo:function(i,l,u,f,d,p){return i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=0),p===void 0&&(p=0),this.x1=i,this.y1=l,this.x2=u,this.y2=f,this.x3=d,this.y3=p,this},getLineA:function(i){return i===void 0&&(i=new e),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return i===void 0&&(i=new e),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return i===void 0&&(i=new e),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-i:l=this.x3-i,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-i:l=this.x3-i,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-i:l=this.y3-i,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-i:l=this.y3-i,this.y1-=l,this.y2-=l,this.y3-=l}}});c.exports=h},84435:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483);o.Area=t(41658),o.BuildEquilateral=t(39208),o.BuildFromPolygon=t(39545),o.BuildRight=t(90301),o.CenterOn=t(23707),o.Centroid=t(97523),o.CircumCenter=t(24951),o.CircumCircle=t(85614),o.Clone=t(74422),o.Contains=t(10690),o.ContainsArray=t(48653),o.ContainsPoint=t(96006),o.CopyFrom=t(71326),o.Decompose=t(71694),o.Equals=t(33522),o.GetPoint=t(20437),o.GetPoints=t(80672),o.InCenter=t(39757),o.Perimeter=t(1376),o.Offset=t(13584),o.Random=t(90260),o.Rotate=t(52172),o.RotateAroundPoint=t(49907),o.RotateAroundXY=t(99614),c.exports=o},74457:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:o,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};c.exports=S},84409:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return function(g,a,n,r){var e=t.getPixelAlpha(a,n,r.texture.key,r.frame.name);return e&&e>=o}};c.exports=S},7003:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(93301),a=t(50792),n=t(8214),r=t(8443),e=t(78970),s=t(85098),h=t(42515),i=t(36210),l=t(61340),u=t(85955),f=new o({initialize:function(p,x){this.game=p,this.scaleManager,this.canvas,this.config=x,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=x.inputKeyboard?new e(this):null,this.mouse=x.inputMouse?new s(this):null,this.touch=x.inputTouch?new i(this):null,this.pointers=[],this.pointersTotal=x.inputActivePointers;for(var y=0;y<=this.pointersTotal;y++){var T=new h(this,y);T.smoothFactor=x.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=x.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(r.BOOT,this.boot,this)},boot:function(){var d=this.game,p=d.events;this.canvas=d.canvas,this.scaleManager=d.scale,this.events.emit(n.MANAGER_BOOT),p.on(r.PRE_RENDER,this.preRender,this),p.once(r.DESTROY,this.destroy,this)},setCanvasOver:function(d){this.isOver=!0,this.events.emit(n.GAME_OVER,d)},setCanvasOut:function(d){this.isOver=!1,this.events.emit(n.GAME_OUT,d)},preRender:function(){var d=this.game.loop.now,p=this.game.loop.delta,x=this.game.scene.getScenes(!0,!0);this.time=d,this.events.emit(n.MANAGER_UPDATE);for(var y=0;y<x.length;y++){var T=x[y];if(T.sys.input&&T.sys.input.updatePoll(d,p)&&this.globalTopOnly)return}},setDefaultCursor:function(d){this.defaultCursor=d,this.canvas.style.cursor!==d&&(this.canvas.style.cursor=d)},setCursor:function(d){d.cursor&&(this.canvas.style.cursor=d.cursor)},resetCursor:function(d,p){(p||d&&d.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(d){d===void 0&&(d=1);var p=[];this.pointersTotal+d>10&&(d=10-this.pointersTotal);for(var x=0;x<d;x++){var y=this.pointers.length,T=new h(this,y);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,p.push(T)}return p},updateInputPlugins:function(d,p){var x=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var y=0;y<x.length;y++){var T=x[y];if(T.sys.input){var C=T.sys.input.update(d,p);if(C&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(d){for(var p=this.pointers,x=[],y=0;y<d.changedTouches.length;y++)for(var T=d.changedTouches[y],C=1;C<p.length;C++){var A=p[C];if(!A.active){A.touchstart(T,d),this.activePointer=A,x.push(A);break}}this.updateInputPlugins(g.TOUCH_START,x)},onTouchMove:function(d){for(var p=this.pointers,x=[],y=0;y<d.changedTouches.length;y++)for(var T=d.changedTouches[y],C=1;C<p.length;C++){var A=p[C];if(A.active&&A.identifier===T.identifier){var R=document.elementFromPoint(T.clientX,T.clientY),M=R===this.canvas;!this.isOver&&M?this.setCanvasOver(d):this.isOver&&!M&&this.setCanvasOut(d),this.isOver&&(A.touchmove(T,d),this.activePointer=A,x.push(A));break}}this.updateInputPlugins(g.TOUCH_MOVE,x)},onTouchEnd:function(d){for(var p=this.pointers,x=[],y=0;y<d.changedTouches.length;y++)for(var T=d.changedTouches[y],C=1;C<p.length;C++){var A=p[C];if(A.active&&A.identifier===T.identifier){A.touchend(T,d),x.push(A);break}}this.updateInputPlugins(g.TOUCH_END,x)},onTouchCancel:function(d){for(var p=this.pointers,x=[],y=0;y<d.changedTouches.length;y++)for(var T=d.changedTouches[y],C=1;C<p.length;C++){var A=p[C];if(A.active&&A.identifier===T.identifier){A.touchcancel(T,d),x.push(A);break}}this.updateInputPlugins(g.TOUCH_CANCEL,x)},onMouseDown:function(d){var p=this.mousePointer;p.down(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(d){var p=this.mousePointer;p.move(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(d){var p=this.mousePointer;p.up(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(d){var p=this.mousePointer;p.wheel(d),this.activePointer=p,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(d){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(n.POINTERLOCK_CHANGE,d,p)},inputCandidate:function(d,p){var x=d.input;if(!x||!x.enabled||!d.willRender(p))return!1;var y=!0,T=d.parentContainer;if(T)do{if(!T.willRender(p)){y=!1;break}T=T.parentContainer}while(T);return y},hitTest:function(d,p,x,y){y===void 0&&(y=this._tempHitTest);var T=this._tempPoint,C=x.scrollX,A=x.scrollY;y.length=0;var R=d.x,M=d.y;x.getWorldPoint(R,M,T),d.worldX=T.x,d.worldY=T.y;for(var L={x:0,y:0},I=this._tempMatrix,O=this._tempMatrix2,D=0;D<p.length;D++){var B=p[D];if(this.inputCandidate(B,x)){var V=T.x+C*B.scrollFactorX-C,W=T.y+A*B.scrollFactorY-A;B.parentContainer?(B.getWorldTransformMatrix(I,O),I.applyInverse(V,W,L)):u(V,W,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&y.push(B)}}return y},pointWithinHitArea:function(d,p,x){p+=d.displayOriginX,x+=d.displayOriginY;var y=d.input;return y&&y.hitAreaCallback(y.hitArea,p,x,d)?(y.localX=p,y.localY=x,!0):!1},pointWithinInteractiveObject:function(d,p,x){return d.hitArea?(p+=d.gameObject.displayOriginX,x+=d.gameObject.displayOriginY,d.localX=p,d.localY=x,d.hitAreaCallback(d.hitArea,p,x,d)):!1},transformPointer:function(d,p,x,y){var T=d.position,C=d.prevPosition;C.x=T.x,C.y=T.y;var A=this.scaleManager.transformX(p),R=this.scaleManager.transformY(x),M=d.smoothFactor;!y||M===0?(T.x=A,T.y=R):(T.x=A*M+C.x*(1-M),T.y=R*M+C.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(r.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var d=0;d<this.pointers.length;d++)this.pointers[d].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});c.exports=f},48205:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=t(87902),a=t(83419),n=t(93301),r=t(74457),e=t(84409),s=t(20339),h=t(8497),i=t(81154),l=t(8214),u=t(50792),f=t(95540),d=t(23777),p=t(89639),x=t(41212),y=t(37277),T=t(87841),C=t(37303),A=t(44594),R=t(16483),M=t(10690),L=new a({Extends:u,initialize:function(O){u.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new u,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(A.BOOT,this.boot,this),O.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var I=this.systems.events;I.on(A.TRANSITION_START,this.transitionIn,this),I.on(A.TRANSITION_OUT,this.transitionOut,this),I.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(A.PRE_UPDATE,this.preUpdate,this),I.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(I){this.isActive()&&this.emit(l.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(l.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var I=this._pendingRemoval,O=this._pendingInsertion,D=I.length,B=O.length;if(!(D===0&&B===0)){for(var V=this._list,W=0;W<D;W++){var Y=I[W],X=V.indexOf(Y);X>-1&&(V.splice(X,1),this.clear(Y,!0))}this._pendingRemoval.length=0,this._list=V.concat(O.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(I){this.manager&&this.manager.setCursor(I)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(I,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,I,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,B=this.manager,V=B.pointers;for(D=0;D<V.length;D++)V[D].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Y=!1;for(D=0;D<V.length;D++){var X=0,U=V[D];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),X+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,I),X>0&&(Y=!0)}return Y},update:function(I,O){if(!this.isActive())return!1;for(var D=!1,B=0;B<O.length;B++){var V=0,W=O[B];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case n.MOUSE_DOWN:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverOutEvents(W);break;case n.MOUSE_UP:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOverOutEvents(W);break;case n.TOUCH_START:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverEvents(W);break;case n.TOUCH_END:case n.TOUCH_CANCEL:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOutEvents(W);break;case n.MOUSE_MOVE:case n.TOUCH_MOVE:V+=this.processDragMoveEvent(W),V+=this.processMoveEvents(W),V+=this.processOverOutEvents(W);break;case n.MOUSE_WHEEL:V+=this.processWheelEvent(W);break}V>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(I,O){O===void 0&&(O=!1),this.disable(I);var D=I.input;D&&(this.removeDebug(I),this.manager.resetCursor(D),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,I.input=null),O||this.queueForRemoval(I);var B=this._draggable.indexOf(I);return B>-1&&this._draggable.splice(B,1),I},disable:function(I,O){O===void 0&&(O=!1);var D=I.input;D&&(D.enabled=!1,D.dragState=0);for(var B=this._drag,V=this._over,W=this.manager,Y=0,X;Y<W.pointers.length;Y++)X=B[Y].indexOf(I),X>-1&&B[Y].splice(X,1),X=V[Y].indexOf(I),X>-1&&V[Y].splice(X,1);return O&&this.resetCursor(),this},enable:function(I,O,D,B){return B===void 0&&(B=!1),I.input?I.input.enabled=!0:this.setHitArea(I,O,D),I.input&&B&&!I.input.dropZone&&(I.input.dropZone=B),this},hitTestPointer:function(I){for(var O=this.cameras.getCamerasBelowPointer(I),D=0;D<O.length;D++){for(var B=O[D],V=this.manager.hitTest(I,this._list,B),W=0;W<V.length;W++){var Y=V[W];Y.input.dropZone&&this._tempZones.push(Y)}if(V.length>0)return I.camera=B,V}return I.camera=O[0],[]},processDownEvents:function(I){var O=0,D=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var W=0;W<D.length;W++){var Y=D[W];if(!(!Y.input||!Y.input.enabled)&&(O++,Y.emit(l.GAMEOBJECT_POINTER_DOWN,I,Y.input.localX,Y.input.localY,V),B.cancelled||!this.isActive()||Y.input&&Y.input.enabled&&(this.emit(l.GAMEOBJECT_DOWN,I,Y,V),B.cancelled||!this.isActive())))break}return!B.cancelled&&this.isActive()&&(I.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,I,D):this.emit(l.POINTER_DOWN_OUTSIDE,I)),O},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,O){this._dragState[I.id]=O},processDragThresholdEvent:function(I,O){var D=!1,B=this.dragTimeThreshold,V=this.dragDistanceThreshold;if((V>0&&s(I.x,I.y,I.downX,I.downY)>=V||B>0&&O>=I.downTime+B)&&(D=!0),D)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;var O=this._drag[I.id];O.length>1&&(O=O.slice(0));for(var D=0;D<O.length;D++){var B=O[D],V=B.input;V.dragState=2,V.dragStartX=B.x,V.dragStartY=B.y,V.dragStartXGlobal=I.worldX,V.dragStartYGlobal=I.worldY,V.dragStartCamera=I.camera,V.dragX=V.dragStartXGlobal-V.dragStartX,V.dragY=V.dragStartYGlobal-V.dragStartY,B.emit(l.GAMEOBJECT_DRAG_START,I,V.dragX,V.dragY),this.emit(l.DRAG_START,I,B)}return this.setDragState(I,4),O.length},processDragDownEvent:function(I){var O=this._temp;if(this._draggable.length===0||O.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var D=[],B=0;B<O.length;B++){var V=O[B];V.input.draggable&&V.input.dragState===0&&D.push(V)}return D.length===0?(this.setDragState(I,0),0):(D.length>1&&(this.sortGameObjects(D,I),this.topOnly&&D.splice(1)),this._drag[I.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;var O=this._tempZones,D=this._drag[I.id];D.length>1&&(D=D.slice(0));for(var B=0;B<D.length;B++){var V=D[B],W=V.input,Y=W.target;if(Y){var X=O.indexOf(Y);X===0?(V.emit(l.GAMEOBJECT_DRAG_OVER,I,Y),this.emit(l.DRAG_OVER,I,V,Y)):X>0?(V.emit(l.GAMEOBJECT_DRAG_LEAVE,I,Y),this.emit(l.DRAG_LEAVE,I,V,Y),W.target=O[0],Y=W.target,V.emit(l.GAMEOBJECT_DRAG_ENTER,I,Y),this.emit(l.DRAG_ENTER,I,V,Y)):(V.emit(l.GAMEOBJECT_DRAG_LEAVE,I,Y),this.emit(l.DRAG_LEAVE,I,V,Y),O[0]?(W.target=O[0],Y=W.target,V.emit(l.GAMEOBJECT_DRAG_ENTER,I,Y),this.emit(l.DRAG_ENTER,I,V,Y)):W.target=null)}else!Y&&O[0]&&(W.target=O[0],Y=W.target,V.emit(l.GAMEOBJECT_DRAG_ENTER,I,Y),this.emit(l.DRAG_ENTER,I,V,Y));var U,z,G=I.positionToCamera(W.dragStartCamera);if(!V.parentContainer)U=G.x-W.dragX,z=G.y-W.dragY;else{var b=G.x-W.dragStartXGlobal,H=G.y-W.dragStartYGlobal,j=V.getParentRotation(),$=b*Math.cos(j)+H*Math.sin(j),k=H*Math.cos(j)-b*Math.sin(j);$*=1/V.parentContainer.scaleX,k*=1/V.parentContainer.scaleY,U=$+W.dragStartX,z=k+W.dragStartY}V.emit(l.GAMEOBJECT_DRAG,I,U,z),this.emit(l.DRAG,I,V,U,z)}return D.length},processDragUpEvent:function(I){var O=this._drag[I.id];O.length>1&&(O=O.slice(0));for(var D=0;D<O.length;D++){var B=O[D],V=B.input;if(V&&V.dragState===2){V.dragState=0,V.dragX=V.localX-B.displayOriginX,V.dragY=V.localY-B.displayOriginY,V.dragStartCamera=null;var W=!1,Y=V.target;Y&&(B.emit(l.GAMEOBJECT_DROP,I,Y),this.emit(l.DROP,I,B,Y),V.target=null,W=!0),B.input&&B.input.enabled&&(B.emit(l.GAMEOBJECT_DRAG_END,I,V.dragX,V.dragY,W),this.emit(l.DRAG_END,I,B,W))}}return this.setDragState(I,0),O.splice(0),0},processMoveEvents:function(I){var O=0,D=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var W=0;W<D.length;W++){var Y=D[W];if(!(!Y.input||!Y.input.enabled)&&(O++,Y.emit(l.GAMEOBJECT_POINTER_MOVE,I,Y.input.localX,Y.input.localY,V),B.cancelled||!this.isActive()||Y.input&&Y.input.enabled&&(this.emit(l.GAMEOBJECT_MOVE,I,Y,V),B.cancelled||!this.isActive()||this.topOnly)))break}return!B.cancelled&&this.isActive()&&this.emit(l.POINTER_MOVE,I,D),O},processWheelEvent:function(I){var O=0,D=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var W=I.deltaX,Y=I.deltaY,X=I.deltaZ,U=0;U<D.length;U++){var z=D[U];if(!(!z.input||!z.input.enabled)&&(O++,z.emit(l.GAMEOBJECT_POINTER_WHEEL,I,W,Y,X,V),B.cancelled||!this.isActive()||z.input&&z.input.enabled&&(this.emit(l.GAMEOBJECT_WHEEL,I,z,W,Y,X,V),B.cancelled||!this.isActive())))break}return!B.cancelled&&this.isActive()&&this.emit(l.POINTER_WHEEL,I,D,W,Y,X),O},processOverEvents:function(I){var O=this._temp,D=0,B=O.length,V=[];if(B>0){var W=this.manager,Y=this._eventData,X=this._eventContainer;Y.cancelled=!1;for(var U=0;U<B;U++){var z=O[U];if(!(!z.input||!z.input.enabled)&&(V.push(z),W.setCursor(z.input),z.emit(l.GAMEOBJECT_POINTER_OVER,I,z.input.localX,z.input.localY,X),D++,Y.cancelled||!this.isActive()||z.input&&z.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,I,z,X),Y.cancelled||!this.isActive())))break}!Y.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,I,V)}return this._over[I.id]=V,D},processOutEvents:function(I){var O=this._over[I.id],D=0,B=O.length;if(B>0){var V=this.manager,W=this._eventData,Y=this._eventContainer;W.cancelled=!1,this.sortGameObjects(O,I);for(var X=0;X<B;X++){var U=O[X];if(U=O[X],!(!U.input||!U.input.enabled)&&(V.resetCursor(U.input),U.emit(l.GAMEOBJECT_POINTER_OUT,I,Y),D++,W.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,I,U,Y),W.cancelled||!this.isActive())))break}!W.cancelled&&this.isActive()&&this.emit(l.POINTER_OUT,I,O),this._over[I.id]=[]}return D},processOverOutEvents:function(I){var O=this._temp,D,B,V=[],W=[],Y=[],X=this._over[I.id],U=this._drag[I.id],z=this.manager;for(D=0;D<X.length;D++)B=X[D],O.indexOf(B)===-1&&U.indexOf(B)===-1?V.push(B):Y.push(B);for(D=0;D<O.length;D++)B=O[D],X.indexOf(B)===-1&&W.push(B);var G=V.length,b=0,H=this._eventData,j=this._eventContainer;if(H.cancelled=!1,G>0){for(this.sortGameObjects(V,I),D=0;D<G&&(B=V[D],!(!(!B.input||!B.input.enabled)&&(z.resetCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OUT,I,j),b++,H.cancelled||!this.isActive()||B.input&&B.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,I,B,j),H.cancelled||!this.isActive()))));D++);(!H.cancelled||this.isActive())&&this.emit(l.POINTER_OUT,I,V)}if(G=W.length,H.cancelled=!1,G>0){for(this.sortGameObjects(W,I),D=0;D<G&&(B=W[D],!(!(!B.input||!B.input.enabled)&&(z.setCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OVER,I,B.input.localX,B.input.localY,j),b++,H.cancelled||!this.isActive()||B.input&&B.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,I,B,j),H.cancelled||!this.isActive()))));D++);!H.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,I,W)}return X=Y.concat(W),this._over[I.id]=this.sortGameObjects(X,I),b},processUpEvents:function(I){var O=this._temp,D=this._eventData,B=this._eventContainer;D.cancelled=!1;for(var V=0;V<O.length;V++){var W=O[V];if(!(!W.input||!W.input.enabled)&&(W.emit(l.GAMEOBJECT_POINTER_UP,I,W.input.localX,W.input.localY,B),D.cancelled||!this.isActive()||W.input&&W.input.enabled&&(this.emit(l.GAMEOBJECT_UP,I,W,B),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&(I.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,I,O):this.emit(l.POINTER_UP_OUTSIDE,I)),O.length},forceDownState:function(I,O){this.forceState(I,O,l.GAMEOBJECT_POINTER_DOWN,l.GAMEOBJECT_DOWN,!1)},forceUpState:function(I,O){this.forceState(I,O,l.GAMEOBJECT_POINTER_UP,l.GAMEOBJECT_UP,!1)},forceOverState:function(I,O){this.forceState(I,O,l.GAMEOBJECT_POINTER_OVER,l.GAMEOBJECT_OVER,!0)},forceOutState:function(I,O){this.forceState(I,O,l.GAMEOBJECT_POINTER_OUT,l.GAMEOBJECT_OUT,!1)},forceState:function(I,O,D,B,V){var W=this._eventData,Y=this._eventContainer;W.cancelled=!1,O.input&&O.input.enabled&&(O.emit(D,I,O.input.localX,O.input.localY,Y),V&&this.setCursor(O.input),!W.cancelled&&this.isActive()&&O.input&&O.input.enabled&&this.emit(B,I,O,Y))},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,O){O===void 0&&(O=!0),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var B=I[D];B.input.draggable=O;var V=this._draggable.indexOf(B);O&&V===-1?this._draggable.push(B):!O&&V>-1&&this._draggable.splice(V,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var O=this.systems.textures;return e(O,I)},setHitArea:function(I,O,D){if(O===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var B=!1,V=!1,W=!1,Y=!1,X=!1,U=!0;if(x(O)&&Object.keys(O).length){var z=O,G=I.some(function(k){return k.hasOwnProperty("faces")});if(!G){O=f(z,"hitArea",null),D=f(z,"hitAreaCallback",null),X=f(z,"pixelPerfect",!1);var b=f(z,"alphaTolerance",1);X&&(O={},D=this.makePixelPerfect(b))}B=f(z,"draggable",!1),V=f(z,"dropZone",!1),W=f(z,"cursor",!1),Y=f(z,"useHandCursor",!1),(!O||!D)&&(this.setHitAreaFromTexture(I),U=!1)}else typeof O=="function"&&!D&&(D=O,O={});for(var H=0;H<I.length;H++){var j=I[H];if(X&&j.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var $=j.input?j.input:r(j,O,D);$.customHitArea=U,$.dropZone=V,$.cursor=Y?"pointer":W,j.input=$,B&&this.setDraggable(j),this.queueForInsertion(j)}return this},setHitAreaCircle:function(I,O,D,B,V){V===void 0&&(V=g);var W=new o(O,D,B);return this.setHitArea(I,W,V)},setHitAreaEllipse:function(I,O,D,B,V,W){W===void 0&&(W=i);var Y=new h(O,D,B,V);return this.setHitArea(I,Y,W)},setHitAreaFromTexture:function(I,O){O===void 0&&(O=C),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var B=I[D],V=B.frame,W=0,Y=0;if(B.width?(W=B.width,Y=B.height):V&&(W=V.realWidth,Y=V.realHeight),B.type==="Container"&&(W===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}W!==0&&Y!==0&&(B.input=r(B,new T(0,0,W,Y),O),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(I,O,D,B,V,W){W===void 0&&(W=C);var Y=new T(O,D,B,V);return this.setHitArea(I,Y,W)},setHitAreaTriangle:function(I,O,D,B,V,W,Y,X){X===void 0&&(X=M);var U=new R(O,D,B,V,W,Y);return this.setHitArea(I,U,X)},enableDebug:function(I,O){O===void 0&&(O=65280);var D=I.input;if(!D||!D.hitArea)return this;var B=D.hitArea,V=B.type,W=D.hitAreaDebug,Y=this.systems.add,X=this.systems.updateList;W&&(X.remove(W),W.destroy(),W=null);var U=0,z=0;switch(V){case d.CIRCLE:W=Y.arc(0,0,B.radius),U=B.x-B.radius,z=B.y-B.radius;break;case d.ELLIPSE:W=Y.ellipse(0,0,B.width,B.height),U=B.x-B.width/2,z=B.y-B.height/2;break;case d.LINE:W=Y.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case d.POLYGON:W=Y.polygon(0,0,B.points);break;case d.RECTANGLE:W=Y.rectangle(0,0,B.width,B.height),U=B.x,z=B.y;break;case d.TRIANGLE:W=Y.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return W&&(W.isFilled=!1,W.strokeColor=O,W.preUpdate=function(){W.setVisible(I.visible),W.setStrokeStyle(1/I.scale,W.strokeColor),W.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var G=I.x,b=I.y,H=I.rotation,j=I.scaleX,$=I.scaleY;if(I.parentContainer){var k=I.getWorldTransformMatrix();G=k.tx,b=k.ty,H=k.rotation,j=k.scaleX,$=k.scaleY}W.setRotation(H),W.setScale(j,$),W.setPosition(G+U*j,b+z*$),W.setScrollFactor(I.scrollFactorX,I.scrollFactorY),W.setDepth(I.depth)},X.add(W),D.hitAreaDebug=W),this},removeDebug:function(I){var O=I.input;if(O&&O.hitAreaDebug){var D=O.hitAreaDebug;D.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,O){if(I.length<2||!O.camera)return I;var D=O.camera.renderList;return I.sort(function(B,V){var W=Math.max(D.indexOf(B),0),Y=Math.max(D.indexOf(V),0);return Y-W})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,O){if(!I.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(I);if(I.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-I.parentContainer.getIndex(I);if(I.parentContainer===O)return-1;if(O.parentContainer===I)return 1;for(var D=I.getIndexList(),B=O.getIndexList(),V=Math.min(D.length,B.length),W=0;W<V;W++){var Y=D[W],X=B[W];if(Y!==X)return X-Y}return B.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var D=this.systems.events;D.off(A.TRANSITION_START,this.transitionIn,this),D.off(A.TRANSITION_OUT,this.transitionOut,this),D.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(A.PRE_UPDATE,this.preUpdate,this),O.events.off(l.GAME_OUT,this.onGameOut,this),O.events.off(l.GAME_OVER,this.onGameOver,this),D.off(A.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,O=0;O<I.length;O++)I[O].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",L,"input"),c.exports=L},89639:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g={},a={};a.register=function(n,r,e,s,h){g[n]={plugin:r,mapping:e,settingsKey:s,configKey:h}},a.getPlugin=function(n){return g[n]},a.install=function(n){var r=n.scene.sys,e=r.settings.input,s=r.game.config;for(var h in g){var i=g[h].plugin,l=g[h].mapping,u=g[h].settingsKey,f=g[h].configKey;o(e,u,s[f])&&(n[l]=new i(n))}},a.remove=function(n){g.hasOwnProperty(n)&&delete g[n]},c.exports=a},42515:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31040),g=t(83419),a=t(20339),n=t(43855),r=t(47235),e=t(26099),s=t(25892),h=new g({initialize:function(l,u){this.manager=l,this.id=u,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new e,this.prevPosition=new e,this.midPoint=new e(-1,-1),this.velocity=new e,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=u===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(i){var l=i.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(i,l){return i.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var i=this.position.x,l=this.position.y,u=this.midPoint.x,f=this.midPoint.y;if(!(i===u&&l===f)){var d=r(this.motionFactor,u,i),p=r(this.motionFactor,f,l);n(d,i,.1)&&(d=i),n(p,l,.1)&&(p=l),this.midPoint.set(d,p);var x=i-d,y=l-p;this.velocity.set(x,y),this.angle=o(d,p,i,l),this.distance=Math.sqrt(x*x+y*y)}},up:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=i.timeStamp,this.wasTouch=!1)},down:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),s.macOS&&i.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=i.timeStamp),this.wasTouch=!1},move:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.locked&&(this.movementX=i.movementX||i.mozMovementX||i.webkitMovementX||0,this.movementY=i.movementY||i.mozMovementY||i.webkitMovementY||0),this.moveTime=i.timeStamp,this.wasTouch=!1},wheel:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.deltaX=i.deltaX,this.deltaY=i.deltaY,this.deltaZ=i.deltaZ,this.wasTouch=!1},touchstart:function(i,l){i.pointerId&&(this.pointerId=i.pointerId),this.identifier=i.identifier,this.target=i.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(i,l){this.event=l,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(i,l){this.buttons=0,this.event=l,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(i,l){this.buttons=0,this.event=l,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(i,l){i===void 0&&(i=10),l===void 0&&(l=[]);for(var u=this.prevPosition.x,f=this.prevPosition.y,d=this.position.x,p=this.position.y,x=0;x<i;x++){var y=1/i*x;l[x]={x:r(y,u,d),y:r(y,f,p)}}return l},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},time:{get:function(){return this.event?this.event.timeStamp:0}}});c.exports=h},93301:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};c.exports=S},7179:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},85375:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},39843:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},23388:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragenter"},16133:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},27829:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragleave"},53904:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragover"},56058:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},2642:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drop"},88171:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectdown"},36147:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},71692:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragenter"},96149:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},81285:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragleave"},74048:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragover"},21322:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},49378:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drop"},86754:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectmove"},86433:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectout"},60709:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectover"},24081:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdown"},11172:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointermove"},18907:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerout"},95579:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerover"},35368:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerup"},26972:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wheel"},47078:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectup"},73802:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameobjectwheel"},56718:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameout"},25936:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="gameover"},27503:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},50852:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="process"},96438:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},59152:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerlockchange"},47777:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdown"},27957:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerdownoutside"},19444:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointermove"},54251:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerout"},18667:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerover"},27192:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerup"},24652:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pointerupoutside"},45132:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wheel"},44512:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="preupdate"},15757:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="shutdown"},41637:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},93802:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},8214:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BOOT:t(7179),DESTROY:t(85375),DRAG_END:t(39843),DRAG_ENTER:t(23388),DRAG:t(16133),DRAG_LEAVE:t(27829),DRAG_OVER:t(53904),DRAG_START:t(56058),DROP:t(2642),GAME_OUT:t(56718),GAME_OVER:t(25936),GAMEOBJECT_DOWN:t(88171),GAMEOBJECT_DRAG_END:t(36147),GAMEOBJECT_DRAG_ENTER:t(71692),GAMEOBJECT_DRAG:t(96149),GAMEOBJECT_DRAG_LEAVE:t(81285),GAMEOBJECT_DRAG_OVER:t(74048),GAMEOBJECT_DRAG_START:t(21322),GAMEOBJECT_DROP:t(49378),GAMEOBJECT_MOVE:t(86754),GAMEOBJECT_OUT:t(86433),GAMEOBJECT_OVER:t(60709),GAMEOBJECT_POINTER_DOWN:t(24081),GAMEOBJECT_POINTER_MOVE:t(11172),GAMEOBJECT_POINTER_OUT:t(18907),GAMEOBJECT_POINTER_OVER:t(95579),GAMEOBJECT_POINTER_UP:t(35368),GAMEOBJECT_POINTER_WHEEL:t(26972),GAMEOBJECT_UP:t(47078),GAMEOBJECT_WHEEL:t(73802),MANAGER_BOOT:t(27503),MANAGER_PROCESS:t(50852),MANAGER_UPDATE:t(96438),POINTER_DOWN:t(47777),POINTER_DOWN_OUTSIDE:t(27957),POINTER_MOVE:t(19444),POINTER_OUT:t(54251),POINTER_OVER:t(18667),POINTER_UP:t(27192),POINTER_UP_OUTSIDE:t(24652),POINTER_WHEEL:t(45132),POINTERLOCK_CHANGE:t(59152),PRE_UPDATE:t(44512),SHUTDOWN:t(15757),START:t(41637),UPDATE:t(93802)}},97421:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r){this.pad=n,this.events=n.events,this.index=r,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});c.exports=g},28884:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92734),a=new o({initialize:function(r,e){this.pad=r,this.events=r.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(n){this.value=n;var r=this.pad,e=this.index;n>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,r,this,n),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,e,n,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,r,this,n),this.pad.emit(g.GAMEPAD_BUTTON_UP,e,n,this))},destroy:function(){this.pad=null,this.events=null}});c.exports=a},99125:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97421),g=t(28884),a=t(83419),n=t(50792),r=t(26099),e=new a({Extends:n,initialize:function(h,i){n.call(this),this.manager=h,this.pad=i,this.id=i.id,this.index=i.index;for(var l=[],u=0;u<i.buttons.length;u++)l.push(new g(this,u));this.buttons=l;var f=[];for(u=0;u<i.axes.length;u++)f.push(new o(this,u));this.axes=f,this.vibration=i.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:d,this._LCRight=l[15]?l[15]:d,this._LCTop=l[12]?l[12]:d,this._LCBottom=l[13]?l[13]:d,this._RCLeft=l[2]?l[2]:d,this._RCRight=l[1]?l[1]:d,this._RCTop=l[3]?l[3]:d,this._RCBottom=l[0]?l[0]:d,this._FBLeftTop=l[4]?l[4]:d,this._FBLeftBottom=l[6]?l[6]:d,this._FBRightTop=l[5]?l[5]:d,this._FBRightBottom=l[7]?l[7]:d;var p={value:0};this._HAxisLeft=f[0]?f[0]:p,this._VAxisLeft=f[1]?f[1]:p,this._HAxisRight=f[2]?f[2]:p,this._VAxisRight=f[3]?f[3]:p,this.leftStick=new r,this.rightStick=new r,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(s){return this.axes[s].getValue()},setAxisThreshold:function(s){for(var h=0;h<this.axes.length;h++)this.axes[h].threshold=s},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(s){return this.buttons[s].value},isButtonDown:function(s){return this.buttons[s].pressed},update:function(s){if(!(s.timestamp<this._created)){var h,i=this.buttons,l=s.buttons,u=i.length;for(h=0;h<u;h++)i[h].update(l[h].value);var f=this.axes,d=s.axes;for(u=f.length,h=0;h<u;h++)f[h].update(d[h]);u>=2&&(this.leftStick.set(f[0].getValue(),f[1].getValue()),u>=4&&this.rightStick.set(f[2].getValue(),f[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var s;for(s=0;s<this.buttons.length;s++)this.buttons[s].destroy();for(s=0;s<this.axes.length;s++)this.axes[s].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});c.exports=e},56654:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(92734),n=t(99125),r=t(35154),e=t(89639),s=t(8214),h=new o({Extends:g,initialize:function(l){g.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(s.BOOT,this.boot,this),l.pluginEvents.on(s.START,this.start,this)},boot:function(){var i=this.scene.sys.game,l=this.settings.input,u=i.config;this.enabled=r(l,"gamepad",u.inputGamepad)&&i.device.input.gamepads,this.target=r(l,"gamepad.target",u.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var i=this,l=this.target,u=function(f){f.defaultPrevented||!i.isActive()||(i.refreshPads(),i.queue.push(f))};this.onGamepadHandler=u,l.addEventListener("gamepadconnected",u,!1),l.addEventListener("gamepaddisconnected",u,!1),this.sceneInputPlugin.pluginEvents.on(s.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(s.UPDATE,this.update);for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].removeAllListeners()},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].pad.connected=!1},refreshPads:function(){var i=navigator.getGamepads();if(!i)this.disconnectAll();else for(var l=this.gamepads,u=0;u<i.length;u++){var f=i[u];if(f){var d=f.id,p=f.index,x=l[p];if(x)x.id!==d?(x.destroy(),l[p]=new n(this,f)):x.update(f);else{var y=new n(this,f);l[p]=y,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=y):this._pad3=y:this._pad2=y:this._pad1=y}}}},getAll:function(){for(var i=[],l=this.gamepads,u=0;u<l.length;u++)l[u]&&i.push(l[u]);return i},getPad:function(i){for(var l=this.gamepads,u=0;u<l.length;u++)if(l[u]&&l[u].index===i)return l[u]},update:function(){if(this.enabled){this.refreshPads();var i=this.queue.length;if(i!==0)for(var l=this.queue.splice(0,i),u=0;u<i;u++){var f=l[u],d=this.getPad(f.gamepad.index);f.type==="gamepadconnected"?this.emit(a.CONNECTED,d,f):f.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,d,f)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});e.register("GamepadPlugin",h,"gamepad","gamepad","inputGamepad"),c.exports=h},89651:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={DUALSHOCK_4:t(65294),SNES_USB:t(89651),XBOX_360:t(90089)}},46008:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},7629:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},42206:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="connected"},86544:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="disconnected"},94784:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},14325:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},92734:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BUTTON_DOWN:t(46008),BUTTON_UP:t(7629),CONNECTED:t(42206),DISCONNECTED:t(86544),GAMEPAD_BUTTON_DOWN:t(94784),GAMEPAD_BUTTON_UP:t(14325)}},48646:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Axis:t(97421),Button:t(28884),Events:t(92734),Gamepad:t(99125),GamepadPlugin:t(56654),Configs:t(64894)}},14350:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(93301),g=t(79291),a={CreatePixelPerfectHandler:t(84409),CreateInteractiveObject:t(74457),Events:t(8214),Gamepad:t(48646),InputManager:t(7003),InputPlugin:t(48205),InputPluginCache:t(89639),Keyboard:t(51442),Mouse:t(87078),Pointer:t(42515),Touch:t(95618)};a=g(!1,a,o),c.exports=a},78970:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(83419),a=t(8443),n=t(8214),r=t(46032),e=t(29747),s=new g({initialize:function(i){this.manager=i,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=e,this.onKeyUp=e,i.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputKeyboard,this.target=h.inputKeyboardEventTarget,this.addCapture(h.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var h=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!h.enabled||!h.manager)){h.queue.push(l),h.manager.events.emit(n.MANAGER_PROCESS);var u=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;h.preventDefault&&!u&&h.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!h.enabled||!h.manager)){h.queue.push(l),h.manager.events.emit(n.MANAGER_PROCESS);var u=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;h.preventDefault&&!u&&h.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var h=this.target;h.removeEventListener("keydown",this.onKeyDown,!1),h.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(h){typeof h=="string"&&(h=h.split(",")),Array.isArray(h)||(h=[h]);for(var i=this.captures,l=0;l<h.length;l++){var u=h[l];typeof u=="string"&&(u=r[u.trim().toUpperCase()]),i.indexOf(u)===-1&&i.push(u)}this.preventDefault=i.length>0},removeCapture:function(h){typeof h=="string"&&(h=h.split(",")),Array.isArray(h)||(h=[h]);for(var i=this.captures,l=0;l<h.length;l++){var u=h[l];typeof u=="string"&&(u=r[u.toUpperCase()]),o(i,u)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});c.exports=s},28846:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(95922),n=t(8443),r=t(35154),e=t(8214),s=t(89639),h=t(30472),i=t(46032),l=t(87960),u=t(74600),f=t(44594),d=t(56583),p=new o({Extends:g,initialize:function(y){g.call(this),this.game=y.systems.game,this.scene=y.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=y,this.manager=y.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,y.pluginEvents.once(e.BOOT,this.boot,this),y.pluginEvents.on(e.START,this.start,this)},boot:function(){var x=this.settings.input;this.enabled=r(x,"keyboard",!0);var y=r(x,"keyboard.capture",null);y&&this.addCaptures(y),this.sceneInputPlugin.pluginEvents.once(e.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(e.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(e.SHUTDOWN,this.shutdown,this),this.game.events.on(n.BLUR,this.resetKeys,this),this.scene.sys.events.on(f.PAUSE,this.resetKeys,this),this.scene.sys.events.on(f.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(x){return this.manager.addCapture(x),this},removeCapture:function(x){return this.manager.removeCapture(x),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(x,y,T){y===void 0&&(y=!0),T===void 0&&(T=!1);var C={};if(typeof x=="string"){x=x.split(",");for(var A=0;A<x.length;A++){var R=x[A].trim();R&&(C[R]=this.addKey(R,y,T))}}else for(var M in x)C[M]=this.addKey(x[M],y,T);return C},addKey:function(x,y,T){y===void 0&&(y=!0),T===void 0&&(T=!1);var C=this.keys;if(x instanceof h){var A=C.indexOf(x);return A>-1?C[A]=x:C[x.keyCode]=x,y&&this.addCapture(x.keyCode),x.setEmitOnRepeat(T),x}return typeof x=="string"&&(x=i[x.toUpperCase()]),C[x]||(C[x]=new h(this,x),y&&this.addCapture(x),C[x].setEmitOnRepeat(T)),C[x]},removeKey:function(x,y,T){y===void 0&&(y=!1),T===void 0&&(T=!1);var C=this.keys,A;if(x instanceof h){var R=C.indexOf(x);R>-1&&(A=this.keys[R],this.keys[R]=void 0)}else typeof x=="string"&&(x=i[x.toUpperCase()]);return C[x]&&(A=C[x],C[x]=void 0),A&&(A.plugin=null,T&&this.removeCapture(A.keyCode),y&&A.destroy()),this},removeAllKeys:function(x,y){x===void 0&&(x=!1),y===void 0&&(y=!1);for(var T=this.keys,C=0;C<T.length;C++){var A=T[C];A&&(T[C]=void 0,y&&this.removeCapture(A.keyCode),x&&A.destroy())}return this},createCombo:function(x,y){return new l(this,x,y)},checkDown:function(x,y){if(y===void 0&&(y=0),this.enabled&&x.isDown){var T=d(this.time-x.timeDown,y);if(T>x._tick)return x._tick=T,!0}return!1},update:function(){var x=this.manager.queue,y=x.length;if(!(!this.isActive()||y===0))for(var T=this.keys,C=0;C<y;C++){var A=x[C],R=A.keyCode,M=T[R],L=!1;A.cancelled===void 0&&(A.cancelled=0,A.stopImmediatePropagation=function(){A.cancelled=1},A.stopPropagation=function(){A.cancelled=-1}),A.cancelled!==-1&&(R===this.prevCode&&A.timeStamp===this.prevTime&&A.type===this.prevType||(this.prevCode=R,this.prevTime=A.timeStamp,this.prevType=A.type,A.type==="keydown"?(M&&(L=M.isDown,M.onDown(A)),!A.cancelled&&(!M||!L)&&(u[R]&&this.emit(a.KEY_DOWN+u[R],A),A.cancelled||this.emit(a.ANY_KEY_DOWN,A))):(M&&M.onUp(A),A.cancelled||(u[R]&&this.emit(a.KEY_UP+u[R],A),A.cancelled||this.emit(a.ANY_KEY_UP,A))),A.cancelled===1&&(A.cancelled=0)))}},resetKeys:function(){for(var x=this.keys,y=0;y<x.length;y++)x[y]&&x[y].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(e.MANAGER_PROCESS,this.update,this),this.game.events.off(n.BLUR,this.resetKeys),this.scene.sys.events.off(f.PAUSE,this.resetKeys,this),this.scene.sys.events.off(f.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var x=this.keys,y=0;y<x.length;y++)x[y]&&x[y].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});s.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),c.exports=p},66970:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o.timeLastMatched=t.timeStamp,o.index++,o.index===o.size?!0:(o.current=o.keyCodes[o.index],!1)};c.exports=S},87960:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95922),a=t(95540),n=t(68769),r=t(92803),e=new o({initialize:function(h,i,l){if(l===void 0&&(l={}),i.length<2)return!1;this.manager=h,this.enabled=!0,this.keyCodes=[];for(var u=0;u<i.length;u++){var f=i[u];typeof f=="string"?this.keyCodes.push(f.toUpperCase().charCodeAt(0)):typeof f=="number"?this.keyCodes.push(f):f.hasOwnProperty("keyCode")&&this.keyCodes.push(f.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(l,"resetOnWrongKey",!0),this.maxKeyDelay=a(l,"maxKeyDelay",0),this.resetOnMatch=a(l,"resetOnMatch",!1),this.deleteOnMatch=a(l,"deleteOnMatch",!1);var d=this,p=function(x){if(!(d.matched||!d.enabled)){var y=n(x,d);y&&(d.manager.emit(g.COMBO_MATCH,d,x),d.resetOnMatch?r(d):d.deleteOnMatch&&d.destroy())}};this.onKeyDown=p,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});c.exports=e},68769:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66970),g=function(a,n){if(n.matched)return!0;var r=!1,e=!1;if(a.keyCode===n.current)if(n.index>0&&n.maxKeyDelay>0){var s=n.timeLastMatched+n.maxKeyDelay;a.timeStamp<=s&&(e=!0,r=o(a,n))}else e=!0,r=o(a,n);return!e&&n.resetOnWrongKey&&(n.index=0,n.current=n.keyCodes[0]),r&&(n.timeLastMatched=a.timeStamp,n.matched=!0,n.timeMatched=a.timeStamp),r};c.exports=g},92803:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};c.exports=S},92612:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keydown"},23345:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keyup"},21957:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keycombomatch"},44743:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="down"},3771:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keydown-"},46358:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="keyup-"},75674:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="up"},95922:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ANY_KEY_DOWN:t(92612),ANY_KEY_UP:t(23345),COMBO_MATCH:t(21957),DOWN:t(44743),KEY_DOWN:t(3771),KEY_UP:t(46358),UP:t(75674)}},51442:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Events:t(95922),KeyboardManager:t(78970),KeyboardPlugin:t(28846),Key:t(30472),KeyCodes:t(46032),KeyCombo:t(87960),AdvanceKeyCombo:t(66970),ProcessKeyCombo:t(68769),ResetKeyCombo:t(92803),JustDown:t(90229),JustUp:t(38796),DownDuration:t(37015),UpDuration:t(41170)}},37015:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=50);var g=t.plugin.game.loop.time-t.timeDown;return t.isDown&&g<o};c.exports=S},90229:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t._justDown?(t._justDown=!1,!0):!1};c.exports=S},38796:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t._justUp?(t._justUp=!1,!0):!1};c.exports=S},30472:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(95922),n=new o({Extends:g,initialize:function(e,s){g.call(this),this.plugin=e,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(r){return this.emitOnRepeat=r,this},onDown:function(r){this.originalEvent=r,this.enabled&&(this.altKey=r.altKey,this.ctrlKey=r.ctrlKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.location=r.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,r):(this.isDown=!0,this.isUp=!1,this.timeDown=r.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,r)))},onUp:function(r){this.originalEvent=r,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=r.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,r))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});c.exports=n},46032:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};c.exports=S},74600:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(46032),g={};for(var a in o)g[o[a]]=a;c.exports=g},41170:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=50);var g=t.plugin.game.loop.time-t.timeUp;return t.isUp&&g<o};c.exports=S},85098:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89357),a=t(8214),n=t(29747),r=new o({initialize:function(s){this.manager=s,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=n,this.onMouseDown=n,this.onMouseUp=n,this.onMouseDownWindow=n,this.onMouseUpWindow=n,this.onMouseOver=n,this.onMouseOut=n,this.onMouseWheel=n,this.pointerLockChange=n,this.isTop=!0,s.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(e){var s=this,h=this.manager,i=h.canvas,l=window&&window.focus&&h.game.config.autoFocus;this.onMouseMove=function(f){!f.defaultPrevented&&s.enabled&&h&&h.enabled&&(h.onMouseMove(f),s.preventDefaultMove&&f.preventDefault())},this.onMouseDown=function(f){l&&window.focus(),!f.defaultPrevented&&s.enabled&&h&&h.enabled&&(h.onMouseDown(f),s.preventDefaultDown&&f.target===i&&f.preventDefault())},this.onMouseDownWindow=function(f){f.sourceCapabilities&&f.sourceCapabilities.firesTouchEvents||!f.defaultPrevented&&s.enabled&&h&&h.enabled&&f.target!==i&&h.onMouseDown(f)},this.onMouseUp=function(f){!f.defaultPrevented&&s.enabled&&h&&h.enabled&&(h.onMouseUp(f),s.preventDefaultUp&&f.target===i&&f.preventDefault())},this.onMouseUpWindow=function(f){f.sourceCapabilities&&f.sourceCapabilities.firesTouchEvents||!f.defaultPrevented&&s.enabled&&h&&h.enabled&&f.target!==i&&h.onMouseUp(f)},this.onMouseOver=function(f){!f.defaultPrevented&&s.enabled&&h&&h.enabled&&h.setCanvasOver(f)},this.onMouseOut=function(f){!f.defaultPrevented&&s.enabled&&h&&h.enabled&&h.setCanvasOut(f)},this.onMouseWheel=function(f){!f.defaultPrevented&&s.enabled&&h&&h.enabled&&h.onMouseWheel(f),s.preventDefaultWheel&&f.target===i&&f.preventDefault()};var u={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,u),e.addEventListener("mouseout",this.onMouseOut,u),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,u),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,u),window.top.addEventListener("mouseup",this.onMouseUpWindow,u)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,u),window.addEventListener("mouseup",this.onMouseUpWindow,u),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(f){var d=s.target;s.locked=document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d,h.onPointerLockChange(f)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});c.exports=r},87078:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={MouseManager:t(85098)}},36210:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8214),a=t(29747),n=new o({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.isTop=!0,e.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputTouch,this.target=r.inputTouchEventTarget,this.capture=r.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},startListeners:function(){var r=this.target;if(r){var e=this,s=this.manager,h=s.canvas,i=window&&window.focus&&s.game.config.autoFocus;this.onTouchMove=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchMove(d),e.capture&&d.cancelable&&d.preventDefault())},this.onTouchStart=function(d){i&&window.focus(),!d.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchStart(d),e.capture&&d.cancelable&&d.target===h&&d.preventDefault())},this.onTouchStartWindow=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&d.target!==h&&s.onTouchStart(d)},this.onTouchEnd=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchEnd(d),e.capture&&d.cancelable&&d.target===h&&d.preventDefault())},this.onTouchEndWindow=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&d.target!==h&&s.onTouchEnd(d)},this.onTouchCancel=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchCancel(d),e.capture&&d.preventDefault())},this.onTouchCancelWindow=function(d){!d.defaultPrevented&&e.enabled&&s&&s.enabled&&s.onTouchCancel(d)};var l=this.capture,u={passive:!0},f={passive:!1};if(r.addEventListener("touchstart",this.onTouchStart,l?f:u),r.addEventListener("touchmove",this.onTouchMove,l?f:u),r.addEventListener("touchend",this.onTouchEnd,l?f:u),r.addEventListener("touchcancel",this.onTouchCancel,l?f:u),window&&s.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,f),window.top.addEventListener("touchend",this.onTouchEndWindow,f),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,f)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,f),window.addEventListener("touchend",this.onTouchEndWindow,f),window.addEventListener("touchcancel",this.onTouchCancelWindow,f),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchmove",this.onTouchMove),r.removeEventListener("touchend",this.onTouchEnd),r.removeEventListener("touchcancel",this.onTouchCancel),window&&(r=this.isTop?window.top:window,r.removeEventListener("touchstart",this.onTouchStartWindow),r.removeEventListener("touchend",this.onTouchEndWindow),r.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});c.exports=n},95618:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={TouchManager:t(36210)}},41299:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(54899),n=t(95540),r=t(98356),e=t(3374),s=t(84376),h=t(92638),i=new o({initialize:function(u,f){if(this.loader=u,this.cache=n(f,"cache",!1),this.type=n(f,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=n(f,"key",!1);var d=this.key;if(u.prefix&&u.prefix!==""&&(this.key=u.prefix+d),!this.key)throw new Error("Invalid File key: "+this.key);var p=n(f,"url");p===void 0?p=u.path+d+"."+n(f,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(p=u.path+p),this.url=p,this.src="",this.xhrSettings=h(n(f,"responseType",void 0)),n(f,"xhrSettings",!1)&&(this.xhrSettings=e(this.xhrSettings,n(f,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=n(f,"config",{}),this.multiFile,this.linkFile,this.base64=typeof p=="string"&&p.indexOf("data:")===0,this.retryAttempts=n(f,"maxRetries",u.maxRetries)},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===g.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=g.FILE_LOADING,this.src=r(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=s(this,this.loader.xhr)}},onLoad:function(l,u){var f=l.responseURL&&this.loader.localSchemes.some(function(x){return l.responseURL.indexOf(x)===0}),d=f&&u.target.status===0,p=!(u.target&&u.target.status!==200)||d;l.readyState===4&&l.status>=400&&l.status<=599&&(p=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onBase64Load:function(l){this.xhrLoader=l,this.state=g.FILE_LOADED,this.percentComplete=1,this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(l){if(this.state!==g.FILE_PENDING_DESTROY){l===void 0&&(l=this.data);var u=this.key,f=this.type;this.loader.emit(a.FILE_COMPLETE,u,f,l),this.loader.emit(a.FILE_KEY_COMPLETE+f+"-"+u,u,f,l),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(l,u,f){if(typeof URL=="function")l.src=URL.createObjectURL(u);else{var d=new FileReader;d.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(u.type||f)+";base64,"+d.result.split(",")[1]},d.onerror=l.onerror,d.readAsDataURL(u)}},i.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},c.exports=i},74099:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},t={install:function(o){for(var g in S)o[g]=S[g]},register:function(o,g){S[o]=g},destroy:function(){S={}}};c.exports=t},98356:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:o+t.url:!1};c.exports=S},74261:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(35072),n=t(50792),r=t(54899),e=t(74099),s=t(95540),h=t(35154),i=t(41212),l=t(37277),u=t(44594),f=t(92638),d=new o({Extends:n,initialize:function(x){n.call(this);var y=x.sys.game.config,T=x.sys.settings.loader;this.scene=x,this.systems=x.sys,this.cacheManager=x.sys.cache,this.textureManager=x.sys.textures,this.sceneManager=x.sys.game.scene,e.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(s(T,"baseURL",y.loaderBaseURL)),this.setPath(s(T,"path",y.loaderPath)),this.setPrefix(s(T,"prefix",y.loaderPrefix)),this.maxParallelDownloads=s(T,"maxParallelDownloads",y.loaderMaxParallelDownloads),this.xhr=f(s(T,"responseType",y.loaderResponseType),s(T,"async",y.loaderAsync),s(T,"user",y.loaderUser),s(T,"password",y.loaderPassword),s(T,"timeout",y.loaderTimeout),s(T,"withCredentials",y.loaderWithCredentials)),this.crossOrigin=s(T,"crossOrigin",y.loaderCrossOrigin),this.imageLoadType=s(T,"imageLoadType",y.loaderImageLoadType),this.localSchemes=s(T,"localScheme",y.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=s(T,"maxRetries",y.loaderMaxRetries),x.sys.events.once(u.BOOT,this.boot,this),x.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},setBaseURL:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.baseURL=p,this},setPath:function(p){return p===void 0&&(p=""),p!==""&&p.substr(-1)!=="/"&&(p=p.concat("/")),this.path=p,this},setPrefix:function(p){return p===void 0&&(p=""),this.prefix=p,this},setCORS:function(p){return this.crossOrigin=p,this},addFile:function(p){Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++){var y=p[x];this.keyExists(y)||(this.list.set(y),this.emit(r.ADD,y.key,y.type,this,y),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(p){var x=p.hasCacheConflict();return x||this.list.iterate(function(y){if(y.type===p.type&&y.key===p.key)return x=!0,!1}),!x&&this.isLoading()&&(this.inflight.iterate(function(y){if(y.type===p.type&&y.key===p.key)return x=!0,!1}),this.queue.iterate(function(y){if(y.type===p.type&&y.key===p.key)return x=!0,!1})),x},addPack:function(p,x){if(typeof x=="string"){var y=h(p,x);y&&(p={packKey:y})}var T=0,C=this.baseURL,A=this.path,R=this.prefix;for(var M in p)if(Object.prototype.hasOwnProperty.call(p,M)){var L=p[M],I=s(L,"baseURL",C),O=s(L,"path",A),D=s(L,"prefix",R),B=s(L,"files",null),V=s(L,"defaultType","void");if(Array.isArray(B)){this.setBaseURL(I),this.setPath(O),this.setPrefix(D);for(var W=0;W<B.length;W++){var Y=B[W],X=Y.hasOwnProperty("type")?Y.type:V;this[X]&&(this[X](Y),T++)}}}return this.setBaseURL(C),this.setPath(A),this.setPrefix(R),T>0},removePack:function(p,x){var y=this.systems.anims,T=this.cacheManager,C=this.textureManager,A={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},R;if(i(p))R=p;else if(R=T.json.get(p),!R){console.warn("Asset Pack not found in JSON cache:",p);return}x&&(R={_:R[x]});for(var M in R){var L=R[M],I=s(L,"prefix",""),O=s(L,"files"),D=s(L,"defaultType");if(Array.isArray(O))for(var B=0;B<O.length;B++){var V=O[B],W=V.hasOwnProperty("type")?V.type:D;if(!W){console.warn("No type:",V);continue}var Y=I+V.key;if(W==="animation"&&y.remove(Y),!((W==="aseprite"||W==="atlas"||W==="atlasXML"||W==="htmlTexture"||W==="image"||W==="multiatlas"||W==="spritesheet"||W==="svg"||W==="texture"||W==="unityAtlas")&&(C.remove(Y),!A[W]))){if(W==="pack"){this.removePack(Y,V.dataKey);continue}if(W==="spine"){var X=T.custom.spine.get(Y);if(!X)continue;var U=X.prefix===void 0?"":X.prefix;T.custom.spine.remove(Y);var z=T.custom.spineTextures.get(Y);if(!z)continue;T.custom.spineTextures.remove(Y);for(var G=0;G<z.pages.length;G++){var b=z.pages[G],H=U+b.name,j=Y+":"+H;C.exists(j)?C.remove(j):C.remove(H)}}var $=A[W];if($!==null){if(!$){console.warn("Unknown type:",W);continue}var k=T[$];k.remove(Y)}}}}},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(r.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(u.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(r.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(p){if((p.state===g.FILE_POPULATED||p.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(p),this.list.delete(p),p.crossOrigin||(p.crossOrigin=this.crossOrigin),p.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(p,x){this.inflight&&(this.inflight.delete(p),this.updateProgress(),x?(this.totalComplete++,this.queue.set(p),this.emit(r.FILE_LOAD,p),p.onProcess()):(this.totalFailed++,this._deleteQueue.set(p),this.emit(r.FILE_LOAD_ERROR,p),this.fileProcessComplete(p)))},fileProcessComplete:function(p){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(p.state===g.FILE_ERRORED?p.multiFile&&p.multiFile.onFileFailed(p):p.state===g.FILE_COMPLETE&&(p.multiFile?p.multiFile.isReadyToProcess()&&(p.multiFile.addToCache(),p.multiFile.pendingDestroy()):(p.addToCache(),p.pendingDestroy())),this.queue.delete(p),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(r.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(u.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(r.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(p){this._deleteQueue.set(p)},saveJSON:function(p,x){return this.save(JSON.stringify(p),x)},save:function(p,x,y){x===void 0&&(x="file.json"),y===void 0&&(y="application/json");var T=new Blob([p],{type:y}),C=URL.createObjectURL(T),A=document.createElement("a");return A.download=x,A.textContent="Download "+x,A.href=C,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var p=this.systems.game.config,x=this.systems.settings.loader;this.setBaseURL(s(x,"baseURL",p.loaderBaseURL)),this.setPath(s(x,"path",p.loaderPath)),this.setPrefix(s(x,"prefix",p.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",d,"load"),c.exports=d},3374:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(92638),a=function(n,r){var e=n===void 0?g():o({},n);if(r)for(var s in r)r[s]!==void 0&&(e[s]=r[s]);return e};c.exports=a},26430:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(54899),n=new o({initialize:function(e,s,h,i){var l=[];i.forEach(function(d){d&&l.push(d)}),this.loader=e,this.type=s,this.key=h;var u=this.key;e.prefix&&e.prefix!==""&&(this.key=e.prefix+u),this.multiKeyIndex=e.multiKeyIndex++,this.files=l,this.state=g.FILE_PENDING,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var f=0;f<l.length;f++)l[f].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var e=this.files.indexOf(r);e!==-1&&this.pending--},onFileFailed:function(r){var e=this.files.indexOf(r);e!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,r.type,r.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var r=this.key,e=this.type;this.loader.emit(a.FILE_COMPLETE,r,e),this.loader.emit(a.FILE_KEY_COMPLETE+e+"-"+r,r,e),this.loader.flagForRemoval(this);for(var s=0;s<this.files.length;s++)this.files[s].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});c.exports=n},84376:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3374),g=function(a,n){var r=o(n,a.xhrSettings);if(a.base64){var e=a.url.split(";base64,").pop()||a.url.split(",").pop(),s={responseText:atob(e)};a.onBase64Load(s);return}var h=new XMLHttpRequest;if(h.open("GET",a.src,r.async,r.user,r.password),h.responseType=a.xhrSettings.responseType,h.timeout=r.timeout,r.headers)for(var i in r.headers)h.setRequestHeader(i,r.headers[i]);return r.header&&r.headerValue&&h.setRequestHeader(r.header,r.headerValue),r.requestedWith&&h.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&h.overrideMimeType(r.overrideMimeType),r.withCredentials&&(h.withCredentials=!0),h.onload=a.onLoad.bind(a,h),h.onerror=a.onError.bind(a,h),h.onprogress=a.onProgress.bind(a),h.ontimeout=a.onError.bind(a,h),h.send(),h};c.exports=g},92638:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r){return t===void 0&&(t=""),o===void 0&&(o=!0),g===void 0&&(g=""),a===void 0&&(a=""),n===void 0&&(n=0),r===void 0&&(r=!1),{responseType:t,async:o,user:g,password:a,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};c.exports=S},23906:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};c.exports=S},42155:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addfile"},38991:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},27540:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="filecomplete"},87464:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="filecomplete-"},94486:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loaderror"},13035:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="load"},38144:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fileprogress"},97520:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postprocess"},85595:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="progress"},55680:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},54899:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:t(42155),COMPLETE:t(38991),FILE_COMPLETE:t(27540),FILE_KEY_COMPLETE:t(87464),FILE_LOAD_ERROR:t(94486),FILE_LOAD:t(13035),FILE_PROGRESS:t(38144),POST_PROCESS:t(97520),PROGRESS:t(85595),START:t(55680)}},14135:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),n=t(54899),r=new o({Extends:a,initialize:function(s,h,i,l,u){a.call(this,s,h,i,l,u),this.type="animationJSON"},onProcess:function(){this.loader.once(n.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(e,s,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,i,h));return this}),c.exports=r},76272:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(518),s=t(26430),h=new o({Extends:s,initialize:function(l,u,f,d,p,x){var y,T;if(r(u)){var C=u;u=a(C,"key"),y=new n(l,{key:u,url:a(C,"textureURL"),extension:a(C,"textureExtension","png"),normalMap:a(C,"normalMap"),xhrSettings:a(C,"textureXhrSettings")}),T=new e(l,{key:u,url:a(C,"atlasURL"),extension:a(C,"atlasExtension","json"),xhrSettings:a(C,"atlasXhrSettings")})}else y=new n(l,u,f,p),T=new e(l,u,d,x);y.linkFile?s.call(this,l,"atlasjson",u,[y,T,y.linkFile]):s.call(this,l,"atlasjson",u,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,l.data,u),l.addToCache(),this.complete=!0}}});g.register("aseprite",function(i,l,u,f,d){var p;if(Array.isArray(i))for(var x=0;x<i.length;x++)p=new h(this,i[x]),this.addFile(p.files);else p=new h(this,i,l,u,f,d),this.addFile(p.files);return this}),c.exports=h},38734:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(518),s=t(26430),h=new o({Extends:s,initialize:function(l,u,f,d,p,x){var y,T;if(r(u)){var C=u;u=a(C,"key"),y=new n(l,{key:u,url:a(C,"textureURL"),extension:a(C,"textureExtension","png"),normalMap:a(C,"normalMap"),xhrSettings:a(C,"textureXhrSettings")}),T=new e(l,{key:u,url:a(C,"atlasURL"),extension:a(C,"atlasExtension","json"),xhrSettings:a(C,"atlasXhrSettings")})}else y=new n(l,u,f,p),T=new e(l,u,d,x);y.linkFile?s.call(this,l,"atlasjson",u,[y,T,y.linkFile]):s.call(this,l,"atlasjson",u,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,l.data,u),this.complete=!0}}});g.register("atlas",function(i,l,u,f,d){var p;if(Array.isArray(i))for(var x=0;x<i.length;x++)p=new h(this,i[x]),this.addFile(p.files);else p=new h(this,i,l,u,f,d),this.addFile(p.files);return this}),c.exports=h},74599:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(26430),s=t(57318),h=new o({Extends:e,initialize:function(l,u,f,d,p,x){var y,T;if(r(u)){var C=u;u=a(C,"key"),y=new n(l,{key:u,url:a(C,"textureURL"),extension:a(C,"textureExtension","png"),normalMap:a(C,"normalMap"),xhrSettings:a(C,"textureXhrSettings")}),T=new s(l,{key:u,url:a(C,"atlasURL"),extension:a(C,"atlasExtension","xml"),xhrSettings:a(C,"atlasXhrSettings")})}else y=new n(l,u,f,p),T=new s(l,u,d,x);y.linkFile?e.call(this,l,"atlasxml",u,[y,T,y.linkFile]):e.call(this,l,"atlasxml",u,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(i.key,i.data,l.data,u),this.complete=!0}}});g.register("atlasXML",function(i,l,u,f,d){var p;if(Array.isArray(i))for(var x=0;x<i.length;x++)p=new h(this,i[x]),this.addFile(p.files);else p=new h(this,i,l,u,f,d),this.addFile(p.files);return this}),c.exports=h},21097:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(89749),s=t(41212),h=new o({Extends:a,initialize:function(l,u,f,d,p){if(s(u)){var x=u;u=r(x,"key"),d=r(x,"xhrSettings"),p=r(x,"context",p)}var y={type:"audio",cache:l.cacheManager.audio,extension:f.type,responseType:"arraybuffer",key:u,url:f.url,xhrSettings:d,config:{context:p}};a.call(this,l,y)},onProcess:function(){this.state=g.FILE_PROCESSING;var i=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){i.data=l,i.onProcessComplete()},function(l){console.error("Error decoding audio: "+i.key+" - ",l?l.message:null),i.onProcessError()}),this.config.context=null}});h.create=function(i,l,u,f,d){var p=i.systems.game,x=p.config.audio,y=p.device.audio;s(l)&&(u=r(l,"url",[]),f=r(l,"config",{}));var T=h.getAudioURL(p,u);return T?y.webAudio&&!x.disableWebAudio?new h(i,l,T,d,p.sound.context):new e(i,l,T,f):(console.warn('No audio URLs for "%s" can play on this device',l),null)},h.getAudioURL=function(i,l){Array.isArray(l)||(l=[l]);for(var u=0;u<l.length;u++){var f=r(l[u],"url",l[u]);if(f.indexOf("blob:")===0||f.indexOf("data:")===0)return{url:f,type:""};var d=f.match(/\.([a-zA-Z0-9]+)($|\?)/);if(d=r(l[u],"type",d?d[1]:"").toLowerCase(),i.device.audio[d])return{url:f,type:d}}return null},n.register("audio",function(i,l,u,f){var d=this.systems.game,p=d.config.audio,x=d.device.audio;if(p.noAudio||!x.webAudio&&!x.audioData)return this;var y;if(Array.isArray(i))for(var T=0;T<i.length;T++)y=h.create(this,i[T]),y&&this.addFile(y);else y=h.create(this,i,l,u,f),y&&this.addFile(y);return this}),c.exports=h},89524:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21097),g=t(83419),a=t(74099),n=t(95540),r=t(41212),e=t(518),s=t(26430),h=new g({Extends:s,initialize:function(l,u,f,d,p,x,y){if(r(u)){var T=u;u=n(T,"key"),f=n(T,"jsonURL"),d=n(T,"audioURL"),p=n(T,"audioConfig"),x=n(T,"audioXhrSettings"),y=n(T,"jsonXhrSettings")}var C;if(!d)C=new e(l,u,f,y),s.call(this,l,"audiosprite",u,[C]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=x;else{var A=o.create(l,u,d,p,x);A&&(C=new e(l,u,f,y),s.call(this,l,"audiosprite",u,[A,C]),this.config.resourceLoad=!1)}},onFileComplete:function(i){var l=this.files.indexOf(i);if(l!==-1&&(this.pending--,this.config.resourceLoad&&i.type==="json"&&i.data.hasOwnProperty("resources"))){var u=i.data.resources,f=n(this.config,"audioConfig"),d=n(this.config,"audioXhrSettings"),p=o.create(this.loader,i.key,u,f,d);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1];i.addToCache(),l.addToCache(),this.complete=!0}}});a.register("audioSprite",function(i,l,u,f,d,p){var x=this.systems.game,y=x.config.audio,T=x.device.audio;if(y&&y.noAudio||!T.webAudio&&!T.audioData)return this;var C;if(Array.isArray(i))for(var A=0;A<i.length;A++)C=new h(this,i[A]),C.files&&this.addFile(C.files);else C=new h(this,i,l,u,f,d,p),C.files&&this.addFile(C.files);return this})},85722:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d){var p="bin";if(e(l)){var x=l;l=r(x,"key"),u=r(x,"url"),f=r(x,"xhrSettings"),p=r(x,"extension",p),d=r(x,"dataType",d)}var y={type:"binary",cache:i.cacheManager.binary,extension:p,responseType:"arraybuffer",key:l,url:u,xhrSettings:f,config:{dataType:d}};a.call(this,i,y)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.config.dataType;this.data=h?new h(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});n.register("binary",function(h,i,l,u){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new s(this,h[f]));else this.addFile(new s(this,h,i,u,l));return this}),c.exports=s},97025:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(26430),s=t(21859),h=t(57318),i=new o({Extends:e,initialize:function(u,f,d,p,x,y){var T,C;if(r(f)){var A=f;f=a(A,"key"),T=new n(u,{key:f,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),C=new h(u,{key:f,url:a(A,"fontDataURL"),extension:a(A,"fontDataExtension","xml"),xhrSettings:a(A,"fontDataXhrSettings")})}else T=new n(u,f,d,x),C=new h(u,f,p,y);T.linkFile?e.call(this,u,"bitmapfont",f,[T,C,T.linkFile]):e.call(this,u,"bitmapfont",f,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],u=this.files[1];l.addToCache();var f=l.cache.get(l.key),d=s(u.data,l.cache.getFrame(l.key),0,0,f);this.loader.cacheManager.bitmapFont.add(l.key,{data:d,texture:l.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(l,u,f,d,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new i(this,l[y]),this.addFile(x.files);else x=new i(this,l,u,f,d,p),this.addFile(x.files);return this}),c.exports=i},16024:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f){var d="css";if(e(l)){var p=l;l=r(p,"key"),u=r(p,"url"),f=r(p,"xhrSettings"),d=r(p,"extension",d)}var x={type:"script",cache:!1,extension:d,responseType:"text",key:l,url:u,xhrSettings:f};a.call(this,i,x)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("css",function(h,i,l){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new s(this,h[u]));else this.addFile(new s(this,h,i,l));return this}),c.exports=s},69559:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38734),g=t(85722),a=t(83419),n=t(74099),r=t(95540),e=t(19550),s=t(41212),h=t(518),i=t(31403),l=t(46975),u=t(59327),f=t(26430),d=t(82038),p=t(55222),x=new a({Extends:f,initialize:function(T,C,A,R){if(A.multiAtlasURL){var M=new h(T,{key:C,url:A.multiAtlasURL,xhrSettings:R,config:A});f.call(this,T,"texture",C,[M])}else{var L=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=L.toLowerCase()==="ktx"?"KTX":"PVR");var I=new g(T,{key:C,url:A.textureURL,extension:L,xhrSettings:R,config:A});if(A.atlasURL){var O=new h(T,{key:C,url:A.atlasURL,xhrSettings:R,config:A});f.call(this,T,"texture",C,[I,O])}else f.call(this,T,"texture",C,[I])}this.config=A},onFileComplete:function(y){var T=this.files.indexOf(y);if(T!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(y.type==="json"&&y.data.hasOwnProperty("textures")){var C=y.data.textures,A=this.config,R=this.loader,M=R.baseURL,L=R.path,I=R.prefix,O=r(A,"multiBaseURL",this.baseURL),D=r(A,"multiPath",this.path),B=r(A,"prefix",this.prefix),V=r(A,"textureXhrSettings");O&&R.setBaseURL(O),D&&R.setPath(D),B&&R.setPrefix(B);for(var W=0;W<C.length;W++){var Y=C[W].image,X="CMA"+this.multiKeyIndex+"_"+Y,U=new g(R,X,Y,V);if(this.addToMultiFile(U),R.addFile(U),C[W].normalMap){var z=new g(R,X,C[W].normalMap,V);z.type="normalMap",U.setLink(z),this.addToMultiFile(z),R.addFile(z)}}R.setBaseURL(M),R.setPath(L),R.setPrefix(I)}}},addToCache:function(){function y(O){console.warn('Compressed Texture Invalid: "'+M.key+'". '+O)}if(this.isReadyToProcess()){var T=this.config;if(T.multiAtlasURL)this.addMultiToCache();else{var C=this.loader.systems.renderer,A=this.loader.textureManager,R,M=this.files[0],L=this.files[1];if(T.type==="PVR"?R=d(M.data):T.type==="KTX"&&(R=i(M.data),R||y("KTX file contains unsupported format.")),R&&!p(R)&&(y("Texture dimensions failed verification. Check the texture format specifications for "+T.format+" 0x"+R.internalFormat.toString(16)+"."),R=null),R&&!C.supportsCompressedTexture(T.format,R.internalFormat)&&(y("Texture format "+T.format+" with internal format "+R.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),R=null),R){R.format=C.getCompressedTextureName(T.format,R.internalFormat);var I=L&&L.data?L.data:null;A.addCompressedTexture(M.key,R,I)}}this.complete=!0}},addMultiToCache:function(){for(var y=this.config,T=this.files[0],C=[],A=[],R=[],M=this.loader.systems.renderer,L=this.loader.textureManager,I,O=1;O<this.files.length;O++){var D=this.files[O];if(D.type!=="normalMap")for(var B=D.key.indexOf("_"),V=D.key.substr(B+1),W=D.data,Y=0;Y<T.data.textures.length;Y++){var X=T.data.textures[Y];if(X.image===V){y.type==="PVR"?I=d(W):y.type==="KTX"&&(I=i(W)),I&&M.supportsCompressedTexture(y.format,I.internalFormat)&&(I.format=M.getCompressedTextureName(y.format,I.internalFormat),A.push(I),C.push(X),D.linkFile&&R.push(D.linkFile.data));break}}}R.length===0&&(R=void 0),L.addAtlasJSONArray(this.key,A,C,R),this.complete=!0}});n.register("texture",function(y,T,C){var A=this.systems.renderer,R=function(L,I,O,D){var B={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(s(I)){var V=I;I=r(V,"key"),O=r(V,"url"),D=r(V,"xhrSettings")}var W=!1;for(var Y in O)if(A.supportsCompressedTexture(Y)){var X=O[Y];typeof X=="string"?B.textureURL=X:B=l(X,B),B.format=Y.toUpperCase(),W=!0;break}if(!W)console.warn("No supported compressed texture format or IMG fallback",I);else if(B.format==="IMG"){var U,z;B.multiAtlasURL?(z=new u(L,I,B.multiAtlasURL,B.multiPath,B.multiBaseURL,D),U=z.files):B.atlasURL?(z=new o(L,I,B.textureURL,B.atlasURL,D),U=z.files):U=new e(L,I,B.textureURL,D),L.addFile(U)}else{var G=new x(L,I,B,D);L.addFile(G.files)}};if(Array.isArray(y))for(var M=0;M<y.length;M++)R(this,y[M]);else R(this,y,T,C);return this}),c.exports=x},87674:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(98356),s=t(41212),h=new o({Extends:a,initialize:function(l,u,f,d,p,x){var y="ttf";if(s(u)){var T=u;u=r(T,"key"),f=r(T,"url"),d=r(T,"format","truetype"),p=r(T,"descriptors",null),x=r(T,"xhrSettings"),y=r(T,"extension",y)}else d===void 0&&(d="truetype");var C={type:"font",cache:!1,extension:y,responseType:"text",key:u,url:f,xhrSettings:x};a.call(this,l,C),this.data={format:d,descriptors:p},this.state=g.FILE_POPULATED},onProcess:function(){this.state=g.FILE_PROCESSING,this.src=e(this,this.loader.baseURL);var i,l=this.key,u="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?i=new FontFace(l,u,this.data.descriptors):i=new FontFace(l,u);var f=this;i.load().then(function(){document.fonts.add(i),document.body.classList.add("fonts-loaded"),f.onProcessComplete()}).catch(function(){console.warn("Font failed to load",u),f.onProcessComplete()})}});n.register("font",function(i,l,u,f,d){if(Array.isArray(i))for(var p=0;p<i.length;p++)this.addFile(new h(this,i[p]));else this.addFile(new h(this,i,l,u,f,d));return this}),c.exports=h},47931:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=t(73894),h=new o({Extends:a,initialize:function(l,u,f,d,p){var x="glsl";if(e(u)){var y=u;u=r(y,"key"),f=r(y,"url"),d=r(y,"shaderType","fragment"),p=r(y,"xhrSettings"),x=r(y,"extension",x)}else d===void 0&&(d="fragment");var T={type:"glsl",cache:l.cacheManager.shader,extension:x,responseType:"text",key:u,url:f,config:{shaderType:d},xhrSettings:p};a.call(this,l,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i=this.data.split(`
`),l=this.extractBlock(i,0);if(l)for(;l;){var u=this.getShaderName(l.header),f=this.getShaderType(l.header),d=this.getShaderUniforms(l.header),p=l.shader;if(this.cache.has(u)){var x=this.cache.get(u);f==="fragment"?x.fragmentSrc=p:x.vertexSrc=p,x.uniforms||(x.uniforms=d)}else f==="fragment"?this.cache.add(u,new s(u,p,"",d)):this.cache.add(u,new s(u,"",p,d));l=this.extractBlock(i,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new s(this.key,this.data)):this.cache.add(this.key,new s(this.key,"",this.data))},getShaderName:function(i){for(var l=0;l<i.length;l++){var u=i[l].trim();if(u.substring(0,5)==="name:")return u.substring(5).trim()}return this.key},getShaderType:function(i){for(var l=0;l<i.length;l++){var u=i[l].trim();if(u.substring(0,5)==="type:")return u.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(i){for(var l={},u=0;u<i.length;u++){var f=i[u].trim();if(f.substring(0,8)==="uniform."){var d=f.indexOf(":");if(d){var p=f.substring(8,d);try{l[p]=JSON.parse(f.substring(d+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return l},extractBlock:function(i,l){for(var u=-1,f=-1,d=-1,p=!1,x=!1,y=[],T=[],C=l;C<i.length;C++){var A=i[C].trim();if(A==="---")if(u===-1)u=C,p=!0;else if(p)f=C,p=!1,x=!0;else{x=!1;break}else p?y.push(A):x&&(T.push(A),d=C)}return!p&&f!==-1?{header:y,shader:T.join(`
`),offset:d}:null}});n.register("glsl",function(i,l,u,f){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new h(this,i[d]));else this.addFile(new h(this,i,l,u,f));return this}),c.exports=h},89749:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(54899),a=t(41299),n=t(95540),r=t(98356),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f){if(e(l)){var d=l;l=n(d,"key"),f=n(d,"config",f)}var p={type:"audio",cache:i.cacheManager.audio,extension:u.type,key:l,url:u.url,config:f};a.call(this,i,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var h=0;h<this.data.length;h++){var i=this.data[h];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(h){var i=h.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var h=this.config&&this.config.instances||1;this.filesTotal=h,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<h;i++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+i).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(i=0;i<this.data.length;i++)l=this.data[i],l.src=r(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});c.exports=s},88470:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f){var d="html";if(e(l)){var p=l;l=r(p,"key"),u=r(p,"url"),f=r(p,"xhrSettings"),d=r(p,"extension",d)}var x={type:"text",cache:i.cacheManager.html,extension:d,responseType:"text",key:l,url:u,xhrSettings:f};a.call(this,i,x)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("html",function(h,i,l){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new s(this,h[u]));else this.addFile(new s(this,h,i,l));return this}),c.exports=s},14643:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d,p){f===void 0&&(f=512),d===void 0&&(d=512);var x="html";if(e(l)){var y=l;l=r(y,"key"),u=r(y,"url"),p=r(y,"xhrSettings"),x=r(y,"extension",x),f=r(y,"width",f),d=r(y,"height",d)}var T={type:"html",cache:i.textureManager,extension:x,responseType:"text",key:l,url:u,xhrSettings:p,config:{width:f,height:d}};a.call(this,i,T)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.config.width,i=this.config.height,l=[];l.push('<svg width="'+h+'px" height="'+i+'px" viewBox="0 0 '+h+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var u=[l.join(`
`)],f=this;try{var d=new window.Blob(u,{type:"image/svg+xml;charset=utf-8"})}catch{f.state=g.FILE_ERRORED,f.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(f.data),f.onProcessError()},a.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});n.register("htmlTexture",function(h,i,l,u,f){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new s(this,h[d]));else this.addFile(new s(this,h,i,l,u,f));return this}),c.exports=s},19550:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=t(98356),h=new o({Extends:a,initialize:function i(l,u,f,d,p){var x="png",y;if(e(u)){var T=u;u=r(T,"key"),f=r(T,"url"),y=r(T,"normalMap"),d=r(T,"xhrSettings"),x=r(T,"extension",x),p=r(T,"frameConfig")}Array.isArray(f)&&(y=f[1],f=f[0]);var C={type:"image",cache:l.textureManager,extension:x,responseType:"blob",key:u,url:f,xhrSettings:d,config:p};if(a.call(this,l,C),y){var A=new i(l,this.key,y,d,p);A.type="normalMap",this.setLink(A),l.addFile(A)}this.useImageElementLoad=l.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){a.revokeObjectURL(i.data),i.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(i.data),i.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var i=this.state;this.state=g.FILE_PROCESSING,i===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=g.FILE_LOADING,this.src=s(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){i.state=g.FILE_LOADED,i.loader.nextFile(i,!0)},this.data.onerror=function(){i.loader.nextFile(i,!1)},this.data.src=this.src},addToCache:function(){var i=this.linkFile;i?i.state>=g.FILE_COMPLETE&&(i.type==="spritesheet"?i.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,i.data,this.data):this.cache.addImage(this.key,this.data,i.data)):this.cache.addImage(this.key,this.data)}});n.register("image",function(i,l,u){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new h(this,i[f]));else this.addFile(new h(this,i,l,u));return this}),c.exports=h},518:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(35154),s=t(41212),h=new o({Extends:a,initialize:function(l,u,f,d,p){var x="json";if(s(u)){var y=u;u=r(y,"key"),f=r(y,"url"),d=r(y,"xhrSettings"),x=r(y,"extension",x),p=r(y,"dataKey",p)}var T={type:"json",cache:l.cacheManager.json,extension:x,responseType:"text",key:u,url:f,xhrSettings:d,config:p};a.call(this,l,T),s(f)&&(p?this.data=e(f,p):this.data=f,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var i=JSON.parse(this.xhrLoader.responseText)}catch(u){throw this.onProcessError(),u}var l=this.config;typeof l=="string"?this.data=e(i,l,i):this.data=i}this.onProcessComplete()}});n.register("json",function(i,l,u,f){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new h(this,i[d]));else this.addFile(new h(this,i,l,f,u));return this}),c.exports=h},59327:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(518),s=t(26430),h=new o({Extends:s,initialize:function(l,u,f,d,p,x,y){if(r(u)){var T=u;u=a(T,"key"),a(T,"url",!1)?f=a(T,"url"):f=a(T,"atlasURL"),x=a(T,"xhrSettings"),d=a(T,"path"),p=a(T,"baseURL"),y=a(T,"textureXhrSettings")}var C=new e(l,u,f,x);s.call(this,l,"multiatlas",u,[C]),this.config.path=d,this.config.baseURL=p,this.config.textureXhrSettings=y},onFileComplete:function(i){var l=this.files.indexOf(i);if(l!==-1&&(this.pending--,i.type==="json"&&i.data.hasOwnProperty("textures"))){var u=i.data.textures,f=this.config,d=this.loader,p=d.baseURL,x=d.path,y=d.prefix,T=a(f,"baseURL",this.baseURL),C=a(f,"path",this.path),A=a(f,"prefix",this.prefix),R=a(f,"textureXhrSettings");d.setBaseURL(T),d.setPath(C),d.setPrefix(A);for(var M=0;M<u.length;M++){var L=u[M].image,I="MA"+this.multiKeyIndex+"_"+L,O=new n(d,I,L,R);if(this.addToMultiFile(O),d.addFile(O),u[M].normalMap){var D=new n(d,I,u[M].normalMap,R);D.type="normalMap",O.setLink(D),this.addToMultiFile(D),d.addFile(D)}}d.setBaseURL(p),d.setPath(x),d.setPrefix(y)}},addToCache:function(){if(this.isReadyToProcess()){for(var i=this.files[0],l=[],u=[],f=[],d=1;d<this.files.length;d++){var p=this.files[d];if(p.type!=="normalMap")for(var x=p.key.indexOf("_"),y=p.key.substr(x+1),T=p.data,C=0;C<i.data.textures.length;C++){var A=i.data.textures[C];if(A.image===y){u.push(T),l.push(A),p.linkFile&&f.push(p.linkFile.data);break}}}f.length===0&&(f=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,u,l,f),this.complete=!0}}});g.register("multiatlas",function(i,l,u,f,d){var p;if(Array.isArray(i))for(var x=0;x<i.length;x++)p=new h(this,i[x]),this.addFile(p.files);else p=new h(this,i,l,u,f,d),this.addFile(p.files);return this}),c.exports=h},99297:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(41212),r=t(26430),e=t(34328),s=new o({Extends:r,initialize:function(i,l,u,f){var d="js",p=[];if(n(l)){var x=l;l=a(x,"key"),u=a(x,"url"),f=a(x,"xhrSettings"),d=a(x,"extension",d)}Array.isArray(u)||(u=[u]);for(var y=0;y<u.length;y++){var T=new e(i,{key:l+"_"+y.toString(),url:u[y],extension:d,xhrSettings:f});T.onProcess=function(){this.onProcessComplete()},p.push(T)}r.call(this,i,"scripts",l,p)},addToCache:function(){if(this.isReadyToProcess()){for(var h=0;h<this.files.length;h++){var i=this.files[h];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});g.register("scripts",function(h,i,l){var u;if(Array.isArray(h))for(var f=0;f<h.length;f++)u=new s(this,h[f]),this.addFile(u.files);else u=new s(this,h,i,l),this.addFile(u.files);return this}),c.exports=s},41846:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(41212),r=t(26430),e=t(85048),s=t(61485),h=t(78776),i=new o({Extends:r,initialize:function(u,f,d,p,x,y){var T,C,A=u.cacheManager.obj;if(n(f)){var R=f;f=a(R,"key"),T=new h(u,{key:f,type:"obj",cache:A,url:a(R,"url"),extension:a(R,"extension","obj"),xhrSettings:a(R,"xhrSettings"),config:{flipUV:a(R,"flipUV",x)}}),p=a(R,"matURL"),p&&(C=new h(u,{key:f,type:"mat",cache:A,url:p,extension:a(R,"matExtension","mat"),xhrSettings:a(R,"xhrSettings")}))}else T=new h(u,{key:f,url:d,type:"obj",cache:A,extension:"obj",xhrSettings:y,config:{flipUV:x}}),p&&(C=new h(u,{key:f,url:p,type:"mat",cache:A,extension:"mat",xhrSettings:y}));r.call(this,u,"obj",f,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],u=this.files[1],f=e(l.data,l.config.flipUV);u&&(f.materials=s(u.data)),l.cache.add(l.key,f),this.complete=!0}}});g.register("obj",function(l,u,f,d,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new i(this,l[y]),this.addFile(x.files);else x=new i(this,l,u,f,d,p),this.addFile(x.files);return this}),c.exports=i},58610:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(74099),n=t(518),r=new o({Extends:n,initialize:function(s,h,i,l,u){n.call(this,s,h,i,l,u),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var e={};e[this.config]=this.data,this.data=e}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(e,s,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,i,h));return this}),c.exports=r},48988:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d,p){var x="js";if(e(l)){var y=l;l=r(y,"key"),u=r(y,"url"),p=r(y,"xhrSettings"),x=r(y,"extension",x),f=r(y,"start"),d=r(y,"mapping")}var T={type:"plugin",cache:!1,extension:x,responseType:"text",key:l,url:u,xhrSettings:p,config:{start:f,mapping:d}};a.call(this,i,T),typeof u=="function"&&(this.data=u,this.state=g.FILE_POPULATED)},onProcess:function(){var h=this.loader.systems.plugins,i=this.config,l=r(i,"start",!1),u=r(i,"mapping",null);if(this.state===g.FILE_POPULATED)h.install(this.key,this.data,l,u);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var f=h.install(this.key,window[this.key],l,u);(l||u)&&(this.loader.systems[u]=f,this.loader.scene[u]=f)}this.onProcessComplete()}});n.register("plugin",function(h,i,l,u,f){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new s(this,h[d]));else this.addFile(new s(this,h,i,l,u,f));return this}),c.exports=s},67397:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d){var p="svg";if(e(l)){var x=l;l=r(x,"key"),u=r(x,"url"),f=r(x,"svgConfig",{}),d=r(x,"xhrSettings"),p=r(x,"extension",p)}var y={type:"svg",cache:i.textureManager,extension:p,responseType:"text",key:l,url:u,xhrSettings:d,config:{width:r(f,"width"),height:r(f,"height"),scale:r(f,"scale")}};a.call(this,i,y)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.xhrLoader.responseText,i=[h],l=this.config.width,u=this.config.height,f=this.config.scale;t:if(l&&u||f){var d=null,p=new DOMParser;d=p.parseFromString(h,"text/xml");var x=d.getElementsByTagName("svg")[0],y=x.hasAttribute("viewBox"),T=parseFloat(x.getAttribute("width")),C=parseFloat(x.getAttribute("height"));if(!y&&T&&C)x.setAttribute("viewBox","0  0 "+T+" "+C);else if(y&&!T&&!C){var A=x.getAttribute("viewBox").split(/\s+|,/);T=A[2],C=A[3]}if(f)if(T&&C)l=T*f,u=C*f;else break t;x.setAttribute("width",l.toString()+"px"),x.setAttribute("height",u.toString()+"px"),i=[new XMLSerializer().serializeToString(x)]}try{var R=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,L=!1;this.data.onload=function(){L||a.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){L?M.onProcessError():(L=!0,a.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},a.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});n.register("svg",function(h,i,l,u){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new s(this,h[f]));else this.addFile(new s(this,h,i,l,u));return this}),c.exports=s},88423:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f){var d="js";if(e(l)){var p=l;l=r(p,"key"),u=r(p,"url"),f=r(p,"xhrSettings"),d=r(p,"extension",d)}var x={type:"text",extension:d,responseType:"text",key:l,url:u,xhrSettings:f};a.call(this,i,x)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),i=eval;this.loader.sceneManager.add(this.key,i(h)),this.complete=!0}});n.register("sceneFile",function(h,i,l){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new s(this,h[u]));else this.addFile(new s(this,h,i,l));return this}),c.exports=s},56812:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d,p){var x="js";if(e(l)){var y=l;l=r(y,"key"),u=r(y,"url"),p=r(y,"xhrSettings"),x=r(y,"extension",x),f=r(y,"systemKey"),d=r(y,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:x,responseType:"text",key:l,url:u,xhrSettings:p,config:{systemKey:f,sceneKey:d}};a.call(this,i,T),typeof u=="function"&&(this.data=u,this.state=g.FILE_POPULATED)},onProcess:function(){var h=this.loader.systems.plugins,i=this.config,l=this.key,u=r(i,"systemKey",l),f=r(i,"sceneKey",l);this.state===g.FILE_POPULATED?h.installScenePlugin(u,this.data,f,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),h.installScenePlugin(u,window[this.key],f,this.loader.scene,!0)),this.onProcessComplete()}});n.register("scenePlugin",function(h,i,l,u,f){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new s(this,h[d]));else this.addFile(new s(this,h,i,l,u,f));return this}),c.exports=s},34328:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f,d){var p="js";if(e(l)){var x=l;l=r(x,"key"),u=r(x,"url"),f=r(x,"type","script"),d=r(x,"xhrSettings"),p=r(x,"extension",p)}else f===void 0&&(f="script");var y={type:f,cache:!1,extension:p,responseType:"text",key:l,url:u,xhrSettings:d};a.call(this,i,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("script",function(h,i,l,u){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new s(this,h[f]));else this.addFile(new s(this,h,i,l,u));return this}),c.exports=s},85035:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(74099),n=t(19550),r=new o({Extends:n,initialize:function(s,h,i,l,u){n.call(this,s,h,i,u,l),this.type="spritesheet"},addToCache:function(){var e=this.linkFile;e?e.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,e.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,e.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});a.register("spritesheet",function(e,s,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,h,i));return this}),c.exports=r},78776:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=new o({Extends:a,initialize:function(i,l,u,f){var d="text",p="txt",x=i.cacheManager.text;if(e(l)){var y=l;l=r(y,"key"),u=r(y,"url"),f=r(y,"xhrSettings"),p=r(y,"extension",p),d=r(y,"type",d),x=r(y,"cache",x)}var T={type:d,cache:x,extension:p,responseType:"text",key:l,url:u,xhrSettings:f};a.call(this,i,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("text",function(h,i,l){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new s(this,h[u]));else this.addFile(new s(this,h,i,l));return this}),c.exports=s},49477:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=t(80341),h=new o({Extends:a,initialize:function(l,u,f,d){var p="csv";if(e(u)){var x=u;u=r(x,"key"),f=r(x,"url"),d=r(x,"xhrSettings"),p=r(x,"extension",p)}var y={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:p,responseType:"text",key:u,url:f,xhrSettings:d};a.call(this,l,y),this.tilemapFormat=s.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,i)}});n.register("tilemapCSV",function(i,l,u){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new h(this,i[f]));else this.addFile(new h(this,i,l,u));return this}),c.exports=h},40807:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),n=t(80341),r=new o({Extends:a,initialize:function(s,h,i,l){a.call(this,s,h,i,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var e={format:n.WELTMEISTER,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapImpact",function(e,s,h){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new r(this,e[i]));else this.addFile(new r(this,e,s,h));return this}),c.exports=r},56775:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),n=t(80341),r=new o({Extends:a,initialize:function(s,h,i,l){a.call(this,s,h,i,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var e={format:n.TILED_JSON,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapTiledJSON",function(e,s,h){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new r(this,e[i]));else this.addFile(new r(this,e,s,h));return this}),c.exports=r},25771:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),n=t(19550),r=t(41212),e=t(26430),s=t(78776),h=new o({Extends:e,initialize:function(l,u,f,d,p,x){var y,T;if(r(u)){var C=u;u=a(C,"key"),y=new n(l,{key:u,url:a(C,"textureURL"),extension:a(C,"textureExtension","png"),normalMap:a(C,"normalMap"),xhrSettings:a(C,"textureXhrSettings")}),T=new s(l,{key:u,url:a(C,"atlasURL"),extension:a(C,"atlasExtension","txt"),xhrSettings:a(C,"atlasXhrSettings")})}else y=new n(l,u,f,p),T=new s(l,u,d,x);y.linkFile?e.call(this,l,"unityatlas",u,[y,T,y.linkFile]):e.call(this,l,"unityatlas",u,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(i.key,i.data,l.data,u),this.complete=!0}}});g.register("unityAtlas",function(i,l,u,f,d){var p;if(Array.isArray(i))for(var x=0;x<i.length;x++)p=new h(this,i[x]),this.addFile(p.files);else p=new h(this,i,l,u,f,d),this.addFile(p.files);return this}),c.exports=h},33720:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(98356),e=t(95540),s=t(41212),h=new o({Extends:a,initialize:function(l,u,f,d){if(d===void 0&&(d=!1),s(u)){var p=u;u=e(p,"key"),f=e(p,"url",[]),d=e(p,"noAudio",!1)}var x=l.systems.game.device.video.getVideoURL(f);x||console.warn("VideoFile: No supported format for "+u);var y={type:"video",cache:l.cacheManager.video,extension:x.type,key:u,url:x.url,config:{noAudio:d}};a.call(this,l,y)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=r(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});n.register("video",function(i,l,u){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new h(this,i[f]));else this.addFile(new h(this,i,l,u));return this}),c.exports=h},57318:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),n=t(74099),r=t(95540),e=t(41212),s=t(56836),h=new o({Extends:a,initialize:function(l,u,f,d){var p="xml";if(e(u)){var x=u;u=r(x,"key"),f=r(x,"url"),d=r(x,"xhrSettings"),p=r(x,"extension",p)}var y={type:"xml",cache:l.cacheManager.xml,extension:p,responseType:"text",key:u,url:f,xhrSettings:d};a.call(this,l,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=s(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});n.register("xml",function(i,l,u){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new h(this,i[f]));else this.addFile(new h(this,i,l,u));return this}),c.exports=h},64589:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AnimationJSONFile:t(14135),AsepriteFile:t(76272),AtlasJSONFile:t(38734),AtlasXMLFile:t(74599),AudioFile:t(21097),AudioSpriteFile:t(89524),BinaryFile:t(85722),BitmapFontFile:t(97025),CompressedTextureFile:t(69559),CSSFile:t(16024),FontFile:t(87674),GLSLFile:t(47931),HTML5AudioFile:t(89749),HTMLFile:t(88470),HTMLTextureFile:t(14643),ImageFile:t(19550),JSONFile:t(518),MultiAtlasFile:t(59327),MultiScriptFile:t(99297),OBJFile:t(41846),PackFile:t(58610),PluginFile:t(48988),SceneFile:t(88423),ScenePluginFile:t(56812),ScriptFile:t(34328),SpriteSheetFile:t(85035),SVGFile:t(67397),TextFile:t(78776),TilemapCSVFile:t(49477),TilemapImpactFile:t(40807),TilemapJSONFile:t(56775),UnityAtlasFile:t(25771),VideoFile:t(33720),XMLFile:t(57318)}},57777:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23906),g=t(79291),a={Events:t(54899),FileTypes:t(64589),File:t(41299),FileTypesManager:t(74099),GetURL:t(98356),LoaderPlugin:t(74261),MergeXHRSettings:t(3374),MultiFile:t(26430),XHRLoader:t(84376),XHRSettings:t(92638)};a=g(!1,a,o),c.exports=a},53307:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=0,g=0;g<t.length;g++)o+=+t[g];return o/t.length};c.exports=S},85710:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6411),g=function(a,n){return o(a)/o(n)/o(a-n)};c.exports=g},30976:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return Math.floor(Math.random()*(o-t+1)+t)};c.exports=S},87842:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){var r=(a-o)*.5,e=(n-g)*.5,s=t*t,h=t*s;return(2*g-2*a+r+e)*h+(-3*g+3*a-2*r-e)*s+r*t+g};c.exports=S},26302:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.ceil(t*a)/a};c.exports=S},45319:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return Math.max(o,Math.min(g,t))};c.exports=S},39506:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a*o.DEG_TO_RAD};c.exports=g},61241:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return Math.abs(t-o)};c.exports=S},38857:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(37867),n=t(29747),r=new a,e=new g({initialize:function s(h,i,l,u){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u=s.DefaultOrder),this._x=h,this._y=i,this._z=l,this._order=u,this.onChangeCallback=n},x:{get:function(){return this._x},set:function(s){this._x=s,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(s){this._y=s,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(s){this._z=s,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(s){this._order=s,this.onChangeCallback(this)}},set:function(s,h,i,l){return l===void 0&&(l=this._order),this._x=s,this._y=h,this._z=i,this._order=l,this.onChangeCallback(this),this},copy:function(s){return this.set(s.x,s.y,s.z,s.order)},setFromQuaternion:function(s,h,i){return h===void 0&&(h=this._order),i===void 0&&(i=!1),r.fromQuat(s),this.setFromRotationMatrix(r,h,i)},setFromRotationMatrix:function(s,h,i){h===void 0&&(h=this._order),i===void 0&&(i=!1);var l=s.val,u=l[0],f=l[4],d=l[8],p=l[1],x=l[5],y=l[9],T=l[2],C=l[6],A=l[10],R=0,M=0,L=0,I=.99999;switch(h){case"XYZ":{M=Math.asin(o(d,-1,1)),Math.abs(d)<I?(R=Math.atan2(-y,A),L=Math.atan2(-f,u)):R=Math.atan2(C,x);break}case"YXZ":{R=Math.asin(-o(y,-1,1)),Math.abs(y)<I?(M=Math.atan2(d,A),L=Math.atan2(p,x)):M=Math.atan2(-T,u);break}case"ZXY":{R=Math.asin(o(C,-1,1)),Math.abs(C)<I?(M=Math.atan2(-T,A),L=Math.atan2(-f,x)):L=Math.atan2(p,u);break}case"ZYX":{M=Math.asin(-o(T,-1,1)),Math.abs(T)<I?(R=Math.atan2(C,A),L=Math.atan2(p,u)):L=Math.atan2(-f,x);break}case"YZX":{L=Math.asin(o(p,-1,1)),Math.abs(p)<I?(R=Math.atan2(-y,x),M=Math.atan2(-T,u)):M=Math.atan2(d,A);break}case"XZY":{L=Math.asin(-o(f,-1,1)),Math.abs(f)<I?(R=Math.atan2(C,x),M=Math.atan2(d,u)):R=Math.atan2(-y,A);break}}return this._x=R,this._y=M,this._z=L,this._order=h,i&&this.onChangeCallback(this),this}});e.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],e.DefaultOrder="XYZ",c.exports=e},6411:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(t===0)return 1;for(var o=t;--t;)o*=t;return o};c.exports=S},99472:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return Math.random()*(o-t)+t};c.exports=S},77623:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.floor(t*a)/a};c.exports=S},62945:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=function(a,n,r){return a=o(a,0,1),(r-n)*a+n};c.exports=g},38265:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t/o/1e3};c.exports=S},78702:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t==parseFloat(t)?!(t%2):void 0};c.exports=S},94883:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===parseFloat(t)?!(t%2):void 0};c.exports=S},28915:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return(o-t)*g+t};c.exports=S},94908:c=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g===void 0&&(g=0),t.clone().lerp(o,g)};c.exports=S},94434:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n){this.val=new Float32Array(9),n?this.copy(n):this.identity()},clone:function(){return new g(this)},set:function(a){return this.copy(a)},copy:function(a){var n=this.val,r=a.val;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this},fromMat4:function(a){var n=a.val,r=this.val;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],this},fromArray:function(a){var n=this.val;return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,n=a[1],r=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=n,a[5]=a[7],a[6]=r,a[7]=e,this},invert:function(){var a=this.val,n=a[0],r=a[1],e=a[2],s=a[3],h=a[4],i=a[5],l=a[6],u=a[7],f=a[8],d=f*h-i*u,p=-f*s+i*l,x=u*s-h*l,y=n*d+r*p+e*x;return y?(y=1/y,a[0]=d*y,a[1]=(-f*r+e*u)*y,a[2]=(i*r-e*h)*y,a[3]=p*y,a[4]=(f*n-e*l)*y,a[5]=(-i*n+e*s)*y,a[6]=x*y,a[7]=(-u*n+r*l)*y,a[8]=(h*n-r*s)*y,this):null},adjoint:function(){var a=this.val,n=a[0],r=a[1],e=a[2],s=a[3],h=a[4],i=a[5],l=a[6],u=a[7],f=a[8];return a[0]=h*f-i*u,a[1]=e*u-r*f,a[2]=r*i-e*h,a[3]=i*l-s*f,a[4]=n*f-e*l,a[5]=e*s-n*i,a[6]=s*u-h*l,a[7]=r*l-n*u,a[8]=n*h-r*s,this},determinant:function(){var a=this.val,n=a[0],r=a[1],e=a[2],s=a[3],h=a[4],i=a[5],l=a[6],u=a[7],f=a[8];return n*(f*h-i*u)+r*(-f*s+i*l)+e*(u*s-h*l)},multiply:function(a){var n=this.val,r=n[0],e=n[1],s=n[2],h=n[3],i=n[4],l=n[5],u=n[6],f=n[7],d=n[8],p=a.val,x=p[0],y=p[1],T=p[2],C=p[3],A=p[4],R=p[5],M=p[6],L=p[7],I=p[8];return n[0]=x*r+y*h+T*u,n[1]=x*e+y*i+T*f,n[2]=x*s+y*l+T*d,n[3]=C*r+A*h+R*u,n[4]=C*e+A*i+R*f,n[5]=C*s+A*l+R*d,n[6]=M*r+L*h+I*u,n[7]=M*e+L*i+I*f,n[8]=M*s+L*l+I*d,this},translate:function(a){var n=this.val,r=a.x,e=a.y;return n[6]=r*n[0]+e*n[3]+n[6],n[7]=r*n[1]+e*n[4]+n[7],n[8]=r*n[2]+e*n[5]+n[8],this},rotate:function(a){var n=this.val,r=n[0],e=n[1],s=n[2],h=n[3],i=n[4],l=n[5],u=Math.sin(a),f=Math.cos(a);return n[0]=f*r+u*h,n[1]=f*e+u*i,n[2]=f*s+u*l,n[3]=f*h-u*r,n[4]=f*i-u*e,n[5]=f*l-u*s,this},scale:function(a){var n=this.val,r=a.x,e=a.y;return n[0]=r*n[0],n[1]=r*n[1],n[2]=r*n[2],n[3]=e*n[3],n[4]=e*n[4],n[5]=e*n[5],this},fromQuat:function(a){var n=a.x,r=a.y,e=a.z,s=a.w,h=n+n,i=r+r,l=e+e,u=n*h,f=n*i,d=n*l,p=r*i,x=r*l,y=e*l,T=s*h,C=s*i,A=s*l,R=this.val;return R[0]=1-(p+y),R[3]=f+A,R[6]=d-C,R[1]=f-A,R[4]=1-(u+y),R[7]=x+T,R[2]=d+C,R[5]=x-T,R[8]=1-(u+p),this},normalFromMat4:function(a){var n=a.val,r=this.val,e=n[0],s=n[1],h=n[2],i=n[3],l=n[4],u=n[5],f=n[6],d=n[7],p=n[8],x=n[9],y=n[10],T=n[11],C=n[12],A=n[13],R=n[14],M=n[15],L=e*u-s*l,I=e*f-h*l,O=e*d-i*l,D=s*f-h*u,B=s*d-i*u,V=h*d-i*f,W=p*A-x*C,Y=p*R-y*C,X=p*M-T*C,U=x*R-y*A,z=x*M-T*A,G=y*M-T*R,b=L*G-I*z+O*U+D*X-B*Y+V*W;return b?(b=1/b,r[0]=(u*G-f*z+d*U)*b,r[1]=(f*X-l*G-d*Y)*b,r[2]=(l*z-u*X+d*W)*b,r[3]=(h*z-s*G-i*U)*b,r[4]=(e*G-h*X+i*Y)*b,r[5]=(s*X-e*z-i*W)*b,r[6]=(A*V-R*B+M*D)*b,r[7]=(R*O-C*V-M*I)*b,r[8]=(C*B-A*O+M*L)*b,this):null}});c.exports=g},37867:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(25836),a=1e-6,n=new o({initialize:function(u){this.val=new Float32Array(16),u?this.copy(u):this.identity()},clone:function(){return new n(this)},set:function(l){return this.copy(l)},setValues:function(l,u,f,d,p,x,y,T,C,A,R,M,L,I,O,D){var B=this.val;return B[0]=l,B[1]=u,B[2]=f,B[3]=d,B[4]=p,B[5]=x,B[6]=y,B[7]=T,B[8]=C,B[9]=A,B[10]=R,B[11]=M,B[12]=L,B[13]=I,B[14]=O,B[15]=D,this},copy:function(l){var u=l.val;return this.setValues(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,u,f){var d=r.fromQuat(f),p=d.val,x=u.x,y=u.y,T=u.z;return this.setValues(p[0]*x,p[1]*x,p[2]*x,0,p[4]*y,p[5]*y,p[6]*y,0,p[8]*T,p[9]*T,p[10]*T,0,l.x,l.y,l.z,1)},xyz:function(l,u,f){this.identity();var d=this.val;return d[12]=l,d[13]=u,d[14]=f,this},scaling:function(l,u,f){this.zero();var d=this.val;return d[0]=l,d[5]=u,d[10]=f,d[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,u=l[1],f=l[2],d=l[3],p=l[6],x=l[7],y=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=u,l[6]=l[9],l[7]=l[13],l[8]=f,l[9]=p,l[11]=l[14],l[12]=d,l[13]=x,l[14]=y,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,u=l[0],f=l[1],d=l[2],p=l[3],x=l[4],y=l[5],T=l[6],C=l[7],A=l[8],R=l[9],M=l[10],L=l[11],I=l[12],O=l[13],D=l[14],B=l[15],V=u*y-f*x,W=u*T-d*x,Y=u*C-p*x,X=f*T-d*y,U=f*C-p*y,z=d*C-p*T,G=A*O-R*I,b=A*D-M*I,H=A*B-L*I,j=R*D-M*O,$=R*B-L*O,k=M*B-L*D,Q=V*k-W*$+Y*j+X*H-U*b+z*G;return Q?(Q=1/Q,this.setValues((y*k-T*$+C*j)*Q,(d*$-f*k-p*j)*Q,(O*z-D*U+B*X)*Q,(M*U-R*z-L*X)*Q,(T*H-x*k-C*b)*Q,(u*k-d*H+p*b)*Q,(D*Y-I*z-B*W)*Q,(A*z-M*Y+L*W)*Q,(x*$-y*H+C*G)*Q,(f*H-u*$-p*G)*Q,(I*U-O*Y+B*V)*Q,(R*Y-A*U-L*V)*Q,(y*b-x*j-T*G)*Q,(u*j-f*b+d*G)*Q,(O*W-I*X-D*V)*Q,(A*X-R*W+M*V)*Q)):this},adjoint:function(){var l=this.val,u=l[0],f=l[1],d=l[2],p=l[3],x=l[4],y=l[5],T=l[6],C=l[7],A=l[8],R=l[9],M=l[10],L=l[11],I=l[12],O=l[13],D=l[14],B=l[15];return this.setValues(y*(M*B-L*D)-R*(T*B-C*D)+O*(T*L-C*M),-(f*(M*B-L*D)-R*(d*B-p*D)+O*(d*L-p*M)),f*(T*B-C*D)-y*(d*B-p*D)+O*(d*C-p*T),-(f*(T*L-C*M)-y*(d*L-p*M)+R*(d*C-p*T)),-(x*(M*B-L*D)-A*(T*B-C*D)+I*(T*L-C*M)),u*(M*B-L*D)-A*(d*B-p*D)+I*(d*L-p*M),-(u*(T*B-C*D)-x*(d*B-p*D)+I*(d*C-p*T)),u*(T*L-C*M)-x*(d*L-p*M)+A*(d*C-p*T),x*(R*B-L*O)-A*(y*B-C*O)+I*(y*L-C*R),-(u*(R*B-L*O)-A*(f*B-p*O)+I*(f*L-p*R)),u*(y*B-C*O)-x*(f*B-p*O)+I*(f*C-p*y),-(u*(y*L-C*R)-x*(f*L-p*R)+A*(f*C-p*y)),-(x*(R*D-M*O)-A*(y*D-T*O)+I*(y*M-T*R)),u*(R*D-M*O)-A*(f*D-d*O)+I*(f*M-d*R),-(u*(y*D-T*O)-x*(f*D-d*O)+I*(f*T-d*y)),u*(y*M-T*R)-x*(f*M-d*R)+A*(f*T-d*y))},determinant:function(){var l=this.val,u=l[0],f=l[1],d=l[2],p=l[3],x=l[4],y=l[5],T=l[6],C=l[7],A=l[8],R=l[9],M=l[10],L=l[11],I=l[12],O=l[13],D=l[14],B=l[15],V=u*y-f*x,W=u*T-d*x,Y=u*C-p*x,X=f*T-d*y,U=f*C-p*y,z=d*C-p*T,G=A*O-R*I,b=A*D-M*I,H=A*B-L*I,j=R*D-M*O,$=R*B-L*O,k=M*B-L*D;return V*k-W*$+Y*j+X*H-U*b+z*G},multiply:function(l){var u=this.val,f=u[0],d=u[1],p=u[2],x=u[3],y=u[4],T=u[5],C=u[6],A=u[7],R=u[8],M=u[9],L=u[10],I=u[11],O=u[12],D=u[13],B=u[14],V=u[15],W=l.val,Y=W[0],X=W[1],U=W[2],z=W[3];return u[0]=Y*f+X*y+U*R+z*O,u[1]=Y*d+X*T+U*M+z*D,u[2]=Y*p+X*C+U*L+z*B,u[3]=Y*x+X*A+U*I+z*V,Y=W[4],X=W[5],U=W[6],z=W[7],u[4]=Y*f+X*y+U*R+z*O,u[5]=Y*d+X*T+U*M+z*D,u[6]=Y*p+X*C+U*L+z*B,u[7]=Y*x+X*A+U*I+z*V,Y=W[8],X=W[9],U=W[10],z=W[11],u[8]=Y*f+X*y+U*R+z*O,u[9]=Y*d+X*T+U*M+z*D,u[10]=Y*p+X*C+U*L+z*B,u[11]=Y*x+X*A+U*I+z*V,Y=W[12],X=W[13],U=W[14],z=W[15],u[12]=Y*f+X*y+U*R+z*O,u[13]=Y*d+X*T+U*M+z*D,u[14]=Y*p+X*C+U*L+z*B,u[15]=Y*x+X*A+U*I+z*V,this},multiplyLocal:function(l){var u=this.val,f=l.val;return this.setValues(u[0]*f[0]+u[1]*f[4]+u[2]*f[8]+u[3]*f[12],u[0]*f[1]+u[1]*f[5]+u[2]*f[9]+u[3]*f[13],u[0]*f[2]+u[1]*f[6]+u[2]*f[10]+u[3]*f[14],u[0]*f[3]+u[1]*f[7]+u[2]*f[11]+u[3]*f[15],u[4]*f[0]+u[5]*f[4]+u[6]*f[8]+u[7]*f[12],u[4]*f[1]+u[5]*f[5]+u[6]*f[9]+u[7]*f[13],u[4]*f[2]+u[5]*f[6]+u[6]*f[10]+u[7]*f[14],u[4]*f[3]+u[5]*f[7]+u[6]*f[11]+u[7]*f[15],u[8]*f[0]+u[9]*f[4]+u[10]*f[8]+u[11]*f[12],u[8]*f[1]+u[9]*f[5]+u[10]*f[9]+u[11]*f[13],u[8]*f[2]+u[9]*f[6]+u[10]*f[10]+u[11]*f[14],u[8]*f[3]+u[9]*f[7]+u[10]*f[11]+u[11]*f[15],u[12]*f[0]+u[13]*f[4]+u[14]*f[8]+u[15]*f[12],u[12]*f[1]+u[13]*f[5]+u[14]*f[9]+u[15]*f[13],u[12]*f[2]+u[13]*f[6]+u[14]*f[10]+u[15]*f[14],u[12]*f[3]+u[13]*f[7]+u[14]*f[11]+u[15]*f[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,u){var f=l.val,d=u.val,p=f[0],x=f[4],y=f[8],T=f[12],C=f[1],A=f[5],R=f[9],M=f[13],L=f[2],I=f[6],O=f[10],D=f[14],B=f[3],V=f[7],W=f[11],Y=f[15],X=d[0],U=d[4],z=d[8],G=d[12],b=d[1],H=d[5],j=d[9],$=d[13],k=d[2],Q=d[6],_=d[10],tt=d[14],et=d[3],it=d[7],ot=d[11],nt=d[15];return this.setValues(p*X+x*b+y*k+T*et,C*X+A*b+R*k+M*et,L*X+I*b+O*k+D*et,B*X+V*b+W*k+Y*et,p*U+x*H+y*Q+T*it,C*U+A*H+R*Q+M*it,L*U+I*H+O*Q+D*it,B*U+V*H+W*Q+Y*it,p*z+x*j+y*_+T*ot,C*z+A*j+R*_+M*ot,L*z+I*j+O*_+D*ot,B*z+V*j+W*_+Y*ot,p*G+x*$+y*tt+T*nt,C*G+A*$+R*tt+M*nt,L*G+I*$+O*tt+D*nt,B*G+V*$+W*tt+Y*nt)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,u,f){var d=this.val;return d[12]=d[0]*l+d[4]*u+d[8]*f+d[12],d[13]=d[1]*l+d[5]*u+d[9]*f+d[13],d[14]=d[2]*l+d[6]*u+d[10]*f+d[14],d[15]=d[3]*l+d[7]*u+d[11]*f+d[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,u,f){var d=this.val;return d[0]=d[0]*l,d[1]=d[1]*l,d[2]=d[2]*l,d[3]=d[3]*l,d[4]=d[4]*u,d[5]=d[5]*u,d[6]=d[6]*u,d[7]=d[7]*u,d[8]=d[8]*f,d[9]=d[9]*f,d[10]=d[10]*f,d[11]=d[11]*f,this},makeRotationAxis:function(l,u){var f=Math.cos(u),d=Math.sin(u),p=1-f,x=l.x,y=l.y,T=l.z,C=p*x,A=p*y;return this.setValues(C*x+f,C*y-d*T,C*T+d*y,0,C*y+d*T,A*y+f,A*T-d*x,0,C*T-d*y,A*T+d*x,p*T*T+f,0,0,0,0,1)},rotate:function(l,u){var f=this.val,d=u.x,p=u.y,x=u.z,y=Math.sqrt(d*d+p*p+x*x);if(Math.abs(y)<a)return this;y=1/y,d*=y,p*=y,x*=y;var T=Math.sin(l),C=Math.cos(l),A=1-C,R=f[0],M=f[1],L=f[2],I=f[3],O=f[4],D=f[5],B=f[6],V=f[7],W=f[8],Y=f[9],X=f[10],U=f[11],z=f[12],G=f[13],b=f[14],H=f[15],j=d*d*A+C,$=p*d*A+x*T,k=x*d*A-p*T,Q=d*p*A-x*T,_=p*p*A+C,tt=x*p*A+d*T,et=d*x*A+p*T,it=p*x*A-d*T,ot=x*x*A+C;return this.setValues(R*j+O*$+W*k,M*j+D*$+Y*k,L*j+B*$+X*k,I*j+V*$+U*k,R*Q+O*_+W*tt,M*Q+D*_+Y*tt,L*Q+B*_+X*tt,I*Q+V*_+U*tt,R*et+O*it+W*ot,M*et+D*it+Y*ot,L*et+B*it+X*ot,I*et+V*it+U*ot,z,G,b,H)},rotateX:function(l){var u=this.val,f=Math.sin(l),d=Math.cos(l),p=u[4],x=u[5],y=u[6],T=u[7],C=u[8],A=u[9],R=u[10],M=u[11];return u[4]=p*d+C*f,u[5]=x*d+A*f,u[6]=y*d+R*f,u[7]=T*d+M*f,u[8]=C*d-p*f,u[9]=A*d-x*f,u[10]=R*d-y*f,u[11]=M*d-T*f,this},rotateY:function(l){var u=this.val,f=Math.sin(l),d=Math.cos(l),p=u[0],x=u[1],y=u[2],T=u[3],C=u[8],A=u[9],R=u[10],M=u[11];return u[0]=p*d-C*f,u[1]=x*d-A*f,u[2]=y*d-R*f,u[3]=T*d-M*f,u[8]=p*f+C*d,u[9]=x*f+A*d,u[10]=y*f+R*d,u[11]=T*f+M*d,this},rotateZ:function(l){var u=this.val,f=Math.sin(l),d=Math.cos(l),p=u[0],x=u[1],y=u[2],T=u[3],C=u[4],A=u[5],R=u[6],M=u[7];return u[0]=p*d+C*f,u[1]=x*d+A*f,u[2]=y*d+R*f,u[3]=T*d+M*f,u[4]=C*d-p*f,u[5]=A*d-x*f,u[6]=R*d-y*f,u[7]=M*d-T*f,this},fromRotationTranslation:function(l,u){var f=l.x,d=l.y,p=l.z,x=l.w,y=f+f,T=d+d,C=p+p,A=f*y,R=f*T,M=f*C,L=d*T,I=d*C,O=p*C,D=x*y,B=x*T,V=x*C;return this.setValues(1-(L+O),R+V,M-B,0,R-V,1-(A+O),I+D,0,M+B,I-D,1-(A+L),0,u.x,u.y,u.z,1)},fromQuat:function(l){var u=l.x,f=l.y,d=l.z,p=l.w,x=u+u,y=f+f,T=d+d,C=u*x,A=u*y,R=u*T,M=f*y,L=f*T,I=d*T,O=p*x,D=p*y,B=p*T;return this.setValues(1-(M+I),A+B,R-D,0,A-B,1-(C+I),L+O,0,R+D,L-O,1-(C+M),0,0,0,0,1)},frustum:function(l,u,f,d,p,x){var y=1/(u-l),T=1/(d-f),C=1/(p-x);return this.setValues(p*2*y,0,0,0,0,p*2*T,0,0,(u+l)*y,(d+f)*T,(x+p)*C,-1,0,0,x*p*2*C,0)},perspective:function(l,u,f,d){var p=1/Math.tan(l/2),x=1/(f-d);return this.setValues(p/u,0,0,0,0,p,0,0,0,0,(d+f)*x,-1,0,0,2*d*f*x,0)},perspectiveLH:function(l,u,f,d){return this.setValues(2*f/l,0,0,0,0,2*f/u,0,0,0,0,-d/(f-d),1,0,0,f*d/(f-d),0)},ortho:function(l,u,f,d,p,x){var y=l-u,T=f-d,C=p-x;return y=y===0?y:1/y,T=T===0?T:1/T,C=C===0?C:1/C,this.setValues(-2*y,0,0,0,0,-2*T,0,0,0,0,2*C,0,(l+u)*y,(d+f)*T,(x+p)*C,1)},lookAtRH:function(l,u,f){var d=this.val;return i.subVectors(l,u),i.lengthSq()===0&&(i.z=1),i.normalize(),s.crossVectors(f,i),s.lengthSq()===0&&(Math.abs(f.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),s.crossVectors(f,i)),s.normalize(),h.crossVectors(i,s),d[0]=s.x,d[1]=s.y,d[2]=s.z,d[4]=h.x,d[5]=h.y,d[6]=h.z,d[8]=i.x,d[9]=i.y,d[10]=i.z,this},lookAt:function(l,u,f){var d=l.x,p=l.y,x=l.z,y=f.x,T=f.y,C=f.z,A=u.x,R=u.y,M=u.z;if(Math.abs(d-A)<a&&Math.abs(p-R)<a&&Math.abs(x-M)<a)return this.identity();var L=d-A,I=p-R,O=x-M,D=1/Math.sqrt(L*L+I*I+O*O);L*=D,I*=D,O*=D;var B=T*O-C*I,V=C*L-y*O,W=y*I-T*L;D=Math.sqrt(B*B+V*V+W*W),D?(D=1/D,B*=D,V*=D,W*=D):(B=0,V=0,W=0);var Y=I*W-O*V,X=O*B-L*W,U=L*V-I*B;return D=Math.sqrt(Y*Y+X*X+U*U),D?(D=1/D,Y*=D,X*=D,U*=D):(Y=0,X=0,U=0),this.setValues(B,Y,L,0,V,X,I,0,W,U,O,0,-(B*d+V*p+W*x),-(Y*d+X*p+U*x),-(L*d+I*p+O*x),1)},yawPitchRoll:function(l,u,f){this.zero(),r.zero(),e.zero();var d=this.val,p=r.val,x=e.val,y=Math.sin(f),T=Math.cos(f);return d[10]=1,d[15]=1,d[0]=T,d[1]=y,d[4]=-y,d[5]=T,y=Math.sin(u),T=Math.cos(u),p[0]=1,p[15]=1,p[5]=T,p[10]=T,p[9]=-y,p[6]=y,y=Math.sin(l),T=Math.cos(l),x[5]=1,x[15]=1,x[0]=T,x[2]=-y,x[8]=y,x[10]=T,this.multiplyLocal(r),this.multiplyLocal(e),this},setWorldMatrix:function(l,u,f,d,p){return this.yawPitchRoll(l.y,l.x,l.z),r.scaling(f.x,f.y,f.z),e.xyz(u.x,u.y,u.z),this.multiplyLocal(r),this.multiplyLocal(e),d&&this.multiplyLocal(d),p&&this.multiplyLocal(p),this},multiplyToMat4:function(l,u){var f=this.val,d=l.val,p=f[0],x=f[1],y=f[2],T=f[3],C=f[4],A=f[5],R=f[6],M=f[7],L=f[8],I=f[9],O=f[10],D=f[11],B=f[12],V=f[13],W=f[14],Y=f[15],X=d[0],U=d[1],z=d[2],G=d[3],b=d[4],H=d[5],j=d[6],$=d[7],k=d[8],Q=d[9],_=d[10],tt=d[11],et=d[12],it=d[13],ot=d[14],nt=d[15];return u.setValues(X*p+U*C+z*L+G*B,U*x+U*A+z*I+G*V,z*y+U*R+z*O+G*W,G*T+U*M+z*D+G*Y,b*p+H*C+j*L+$*B,b*x+H*A+j*I+$*V,b*y+H*R+j*O+$*W,b*T+H*M+j*D+$*Y,k*p+Q*C+_*L+tt*B,k*x+Q*A+_*I+tt*V,k*y+Q*R+_*O+tt*W,k*T+Q*M+_*D+tt*Y,et*p+it*C+ot*L+nt*B,et*x+it*A+ot*I+nt*V,et*y+it*R+ot*O+nt*W,et*T+it*M+ot*D+nt*Y)},fromRotationXYTranslation:function(l,u,f){var d=u.x,p=u.y,x=u.z,y=Math.sin(l.x),T=Math.cos(l.x),C=Math.sin(l.y),A=Math.cos(l.y),R=d,M=p,L=x,I=-y,O=0-I*C,D=0-T*C,B=I*A,V=T*A;return f||(R=A*d+C*x,M=O*d+T*p+B*x,L=D*d+y*p+V*x),this.setValues(A,O,D,0,0,T,y,0,C,B,V,0,R,M,L,1)},getMaxScaleOnAxis:function(){var l=this.val,u=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],f=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],d=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(u,f,d))}}),r=new n,e=new n,s=new g,h=new g,i=new g;c.exports=n},86883:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return Math.min(t+o,g)};c.exports=S},50040:c=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=t.length;if(o===0)return 0;t.sort(function(a,n){return a-n});var g=Math.floor(o/2);return o%2===0?(t[g]+t[g-1])/2:t[g]};c.exports=S},37204:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return Math.max(t-o,g)};c.exports=S},65201:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){g===void 0&&(g=o+1);var n=(t-o)/(g-o);return n>1?a!==void 0?(n=(a-t)/(a-g),n<0&&(n=0)):n=1:n<0&&(n=0),n};c.exports=S},15746:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94434),a=t(29747),n=t(25836),r=1e-6,e=new Int8Array([1,2,0]),s=new Float32Array([0,0,0]),h=new n(1,0,0),i=new n(0,1,0),l=new n,u=new g,f=new o({initialize:function(p,x,y,T){this.onChangeCallback=a,this.set(p,x,y,T)},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(d){this._w=d,this.onChangeCallback(this)}},copy:function(d){return this.set(d)},set:function(d,p,x,y,T){return T===void 0&&(T=!0),typeof d=="object"?(this._x=d.x||0,this._y=d.y||0,this._z=d.z||0,this._w=d.w||0):(this._x=d||0,this._y=p||0,this._z=x||0,this._w=y||0),T&&this.onChangeCallback(this),this},add:function(d){return this._x+=d.x,this._y+=d.y,this._z+=d.z,this._w+=d.w,this.onChangeCallback(this),this},subtract:function(d){return this._x-=d.x,this._y-=d.y,this._z-=d.z,this._w-=d.w,this.onChangeCallback(this),this},scale:function(d){return this._x*=d,this._y*=d,this._z*=d,this._w*=d,this.onChangeCallback(this),this},length:function(){var d=this.x,p=this.y,x=this.z,y=this.w;return Math.sqrt(d*d+p*p+x*x+y*y)},lengthSq:function(){var d=this.x,p=this.y,x=this.z,y=this.w;return d*d+p*p+x*x+y*y},normalize:function(){var d=this.x,p=this.y,x=this.z,y=this.w,T=d*d+p*p+x*x+y*y;return T>0&&(T=1/Math.sqrt(T),this._x=d*T,this._y=p*T,this._z=x*T,this._w=y*T),this.onChangeCallback(this),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,p){p===void 0&&(p=0);var x=this.x,y=this.y,T=this.z,C=this.w;return this.set(x+p*(d.x-x),y+p*(d.y-y),T+p*(d.z-T),C+p*(d.w-C))},rotationTo:function(d,p){var x=d.x*p.x+d.y*p.y+d.z*p.z;return x<-.999999?(l.copy(h).cross(d).length()<r&&l.copy(i).cross(d),l.normalize(),this.setAxisAngle(l,Math.PI)):x>.999999?this.set(0,0,0,1):(l.copy(d).cross(p),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+x,this.normalize())},setAxes:function(d,p,x){var y=u.val;return y[0]=p.x,y[3]=p.y,y[6]=p.z,y[1]=x.x,y[4]=x.y,y[7]=x.z,y[2]=-d.x,y[5]=-d.y,y[8]=-d.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(d,p){p=p*.5;var x=Math.sin(p);return this.set(x*d.x,x*d.y,x*d.z,Math.cos(p))},multiply:function(d){var p=this.x,x=this.y,y=this.z,T=this.w,C=d.x,A=d.y,R=d.z,M=d.w;return this.set(p*M+T*C+x*R-y*A,x*M+T*A+y*C-p*R,y*M+T*R+p*A-x*C,T*M-p*C-x*A-y*R)},slerp:function(d,p){var x=this.x,y=this.y,T=this.z,C=this.w,A=d.x,R=d.y,M=d.z,L=d.w,I=x*A+y*R+T*M+C*L;I<0&&(I=-I,A=-A,R=-R,M=-M,L=-L);var O=1-p,D=p;if(1-I>r){var B=Math.acos(I),V=Math.sin(B);O=Math.sin((1-p)*B)/V,D=Math.sin(p*B)/V}return this.set(O*x+D*A,O*y+D*R,O*T+D*M,O*C+D*L)},invert:function(){var d=this.x,p=this.y,x=this.z,y=this.w,T=d*d+p*p+x*x+y*y,C=T?1/T:0;return this.set(-d*C,-p*C,-x*C,y*C)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(d){d*=.5;var p=this.x,x=this.y,y=this.z,T=this.w,C=Math.sin(d),A=Math.cos(d);return this.set(p*A+T*C,x*A+y*C,y*A-x*C,T*A-p*C)},rotateY:function(d){d*=.5;var p=this.x,x=this.y,y=this.z,T=this.w,C=Math.sin(d),A=Math.cos(d);return this.set(p*A-y*C,x*A+T*C,y*A+p*C,T*A-x*C)},rotateZ:function(d){d*=.5;var p=this.x,x=this.y,y=this.z,T=this.w,C=Math.sin(d),A=Math.cos(d);return this.set(p*A+x*C,x*A-p*C,y*A+T*C,T*A-y*C)},calculateW:function(){var d=this.x,p=this.y,x=this.z;return this.w=-Math.sqrt(1-d*d-p*p-x*x),this},setFromEuler:function(d,p){var x=d.x/2,y=d.y/2,T=d.z/2,C=Math.cos(x),A=Math.cos(y),R=Math.cos(T),M=Math.sin(x),L=Math.sin(y),I=Math.sin(T);switch(d.order){case"XYZ":{this.set(M*A*R+C*L*I,C*L*R-M*A*I,C*A*I+M*L*R,C*A*R-M*L*I,p);break}case"YXZ":{this.set(M*A*R+C*L*I,C*L*R-M*A*I,C*A*I-M*L*R,C*A*R+M*L*I,p);break}case"ZXY":{this.set(M*A*R-C*L*I,C*L*R+M*A*I,C*A*I+M*L*R,C*A*R-M*L*I,p);break}case"ZYX":{this.set(M*A*R-C*L*I,C*L*R+M*A*I,C*A*I-M*L*R,C*A*R+M*L*I,p);break}case"YZX":{this.set(M*A*R+C*L*I,C*L*R+M*A*I,C*A*I-M*L*R,C*A*R-M*L*I,p);break}case"XZY":{this.set(M*A*R-C*L*I,C*L*R-M*A*I,C*A*I+M*L*R,C*A*R+M*L*I,p);break}}return this},setFromRotationMatrix:function(d){var p=d.val,x=p[0],y=p[4],T=p[8],C=p[1],A=p[5],R=p[9],M=p[2],L=p[6],I=p[10],O=x+A+I,D;return O>0?(D=.5/Math.sqrt(O+1),this.set((L-R)*D,(T-M)*D,(C-y)*D,.25/D)):x>A&&x>I?(D=2*Math.sqrt(1+x-A-I),this.set(.25*D,(y+C)/D,(T+M)/D,(L-R)/D)):A>I?(D=2*Math.sqrt(1+A-x-I),this.set((y+C)/D,.25*D,(R+L)/D,(T-M)/D)):(D=2*Math.sqrt(1+I-x-A),this.set((T+M)/D,(R+L)/D,.25*D,(C-y)/D)),this},fromMat3:function(d){var p=d.val,x=p[0]+p[4]+p[8],y;if(x>0)y=Math.sqrt(x+1),this.w=.5*y,y=.5/y,this._x=(p[7]-p[5])*y,this._y=(p[2]-p[6])*y,this._z=(p[3]-p[1])*y;else{var T=0;p[4]>p[0]&&(T=1),p[8]>p[T*3+T]&&(T=2);var C=e[T],A=e[C];y=Math.sqrt(p[T*3+T]-p[C*3+C]-p[A*3+A]+1),s[T]=.5*y,y=.5/y,s[C]=(p[C*3+T]+p[T*3+C])*y,s[A]=(p[A*3+T]+p[T*3+A])*y,this._x=s[0],this._y=s[1],this._z=s[2],this._w=(p[A*3+C]-p[C*3+A])*y}return this.onChangeCallback(this),this}});c.exports=f},43396:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a*o.RAD_TO_DEG};c.exports=g},74362:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=1);var g=Math.random()*2*Math.PI;return t.x=Math.cos(g)*o,t.y=Math.sin(g)*o,t};c.exports=S},60706:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=1);var g=Math.random()*2*Math.PI,a=Math.random()*2-1,n=Math.sqrt(1-a*a)*o;return t.x=Math.cos(g)*n,t.y=Math.sin(g)*n,t.z=a*o,t};c.exports=S},67421:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1),t.x=(Math.random()*2-1)*o,t.y=(Math.random()*2-1)*o,t.z=(Math.random()*2-1)*o,t.w=(Math.random()*2-1)*o,t};c.exports=S},36305:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.x,a=t.y;return t.x=g*Math.cos(o)-a*Math.sin(o),t.y=g*Math.sin(o)+a*Math.cos(o),t};c.exports=S},11520:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=Math.cos(a),r=Math.sin(a),e=t.x-o,s=t.y-g;return t.x=e*n-s*r+o,t.y=e*r+s*n+g,t};c.exports=S},1163:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){var r=a+Math.atan2(t.y-g,t.x-o);return t.x=o+n*Math.cos(r),t.y=g+n*Math.sin(r),t};c.exports=S},70336:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){return t.x=o+n*Math.cos(a),t.y=g+n*Math.sin(a),t};c.exports=S},72678:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=t(37867),a=t(15746),n=new g,r=new a,e=new o,s=function(h,i,l){return r.setAxisAngle(i,l),n.fromRotationTranslation(r,e.set(0,0,0)),h.transformMat4(n)};c.exports=s},2284:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>0?Math.ceil(t):Math.floor(t)};c.exports=S},41013:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.round(t*a)/a};c.exports=S},16922:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o===void 0&&(o=1),g===void 0&&(g=1),a===void 0&&(a=1),a*=Math.PI/t;for(var n=[],r=[],e=0;e<t;e++)g-=o*a,o+=g*a,n[e]=g,r[e]=o;return{sin:r,cos:n,length:t}};c.exports=S},7602:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t<=o?0:t>=g?1:(t=(t-o)/(g-o),t*t*(3-2*t))};c.exports=S},54261:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t=Math.max(0,Math.min(1,(t-o)/(g-o))),t*t*t*(t*(t*6-15)+10)};c.exports=S},44408:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e){e===void 0&&(e=new o);var s=0,h=0,i=n*r;return a>0&&a<=i&&(a>n-1?(h=Math.floor(a/n),s=a-h*n):s=a),e.set(s,h)};c.exports=g},85955:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s,h,i,l){l===void 0&&(l=new o);var u=Math.sin(s),f=Math.cos(s),d=f*h,p=u*h,x=-u*i,y=f*i,T=1/(d*y+x*-p);return l.x=y*T*a+-x*T*n+(e*x-r*y)*T,l.y=d*T*n+-p*T*a+(-e*d+r*p)*T,l};c.exports=g},26099:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(43855),a=new o({initialize:function(r,e){this.x=0,this.y=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0):(e===void 0&&(e=r),this.x=r||0,this.y=e||0)},clone:function(){return new a(this.x,this.y)},copy:function(n){return this.x=n.x||0,this.y=n.y||0,this},setFromObject:function(n){return this.x=n.x||0,this.y=n.y||0,this},set:function(n,r){return r===void 0&&(r=n),this.x=n,this.y=r,this},setTo:function(n,r){return this.set(n,r)},setToPolar:function(n,r){return r==null&&(r=1),this.x=Math.cos(n)*r,this.y=Math.sin(n)*r,this},equals:function(n){return this.x===n.x&&this.y===n.y},fuzzyEquals:function(n,r){return g(this.x,n.x,r)&&g(this.y,n.y,r)},angle:function(){var n=Math.atan2(this.y,this.x);return n<0&&(n+=2*Math.PI),n},setAngle:function(n){return this.setToPolar(n,this.length())},add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n):(this.x=0,this.y=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(n){var r=n.x-this.x,e=n.y-this.y;return Math.sqrt(r*r+e*e)},distanceSq:function(n){var r=n.x-this.x,e=n.y-this.y;return r*r+e*e},length:function(){var n=this.x,r=this.y;return Math.sqrt(n*n+r*r)},setLength:function(n){return this.normalize().scale(n)},lengthSq:function(){var n=this.x,r=this.y;return n*n+r*r},normalize:function(){var n=this.x,r=this.y,e=n*n+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=n*e,this.y=r*e),this},normalizeRightHand:function(){var n=this.x;return this.x=this.y*-1,this.y=n,this},normalizeLeftHand:function(){var n=this.x;return this.x=this.y,this.y=n*-1,this},dot:function(n){return this.x*n.x+this.y*n.y},cross:function(n){return this.x*n.y-this.y*n.x},lerp:function(n,r){r===void 0&&(r=0);var e=this.x,s=this.y;return this.x=e+r*(n.x-e),this.y=s+r*(n.y-s),this},transformMat3:function(n){var r=this.x,e=this.y,s=n.val;return this.x=s[0]*r+s[3]*e+s[6],this.y=s[1]*r+s[4]*e+s[7],this},transformMat4:function(n){var r=this.x,e=this.y,s=n.val;return this.x=s[0]*r+s[4]*e+s[12],this.y=s[1]*r+s[5]*e+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(n){var r=this.length();return r&&r>n&&this.scale(n/r),this},reflect:function(n){return n=n.clone().normalize(),this.subtract(n.scale(2*this.dot(n)))},mirror:function(n){return this.reflect(n).negate()},rotate:function(n){var r=Math.cos(n),e=Math.sin(n);return this.set(r*this.x-e*this.y,e*this.x+r*this.y)},project:function(n){var r=this.dot(n)/n.dot(n);return this.copy(n).scale(r)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),c.exports=a},25836:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e){this.x=0,this.y=0,this.z=0,typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=r||0,this.z=e||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(a,n){return this.x=a.x+n.x,this.y=a.y+n.y,this.z=a.z+n.z,this},subVectors:function(a,n){return this.x=a.x-n.x,this.y=a.y-n.y,this.z=a.z-n.z,this},crossVectors:function(a,n){var r=a.x,e=a.y,s=a.z,h=n.x,i=n.y,l=n.z;return this.x=e*l-s*i,this.y=s*h-r*l,this.z=r*i-e*h,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,n,r){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=n||0,this.z=r||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,n){return this.fromArray(a.val,n*4)},fromArray:function(a,n){return n===void 0&&(n=0),this.x=a[n],this.y=a[n+1],this.z=a[n+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,n){return this.x+=a.x*n,this.y+=a.y*n,this.z+=a.z*n||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var n=a.x-this.x,r=a.y-this.y,e=a.z-this.z||0;return Math.sqrt(n*n+r*r+e*e)},distanceSq:function(a){var n=a.x-this.x,r=a.y-this.y,e=a.z-this.z||0;return n*n+r*r+e*e},length:function(){var a=this.x,n=this.y,r=this.z;return Math.sqrt(a*a+n*n+r*r)},lengthSq:function(){var a=this.x,n=this.y,r=this.z;return a*a+n*n+r*r},normalize:function(){var a=this.x,n=this.y,r=this.z,e=a*a+n*n+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=a*e,this.y=n*e,this.z=r*e),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var n=this.x,r=this.y,e=this.z,s=a.x,h=a.y,i=a.z;return this.x=r*i-e*h,this.y=e*s-n*i,this.z=n*h-r*s,this},lerp:function(a,n){n===void 0&&(n=0);var r=this.x,e=this.y,s=this.z;return this.x=r+n*(a.x-r),this.y=e+n*(a.y-e),this.z=s+n*(a.z-s),this},applyMatrix3:function(a){var n=this.x,r=this.y,e=this.z,s=a.val;return this.x=s[0]*n+s[3]*r+s[6]*e,this.y=s[1]*n+s[4]*r+s[7]*e,this.z=s[2]*n+s[5]*r+s[8]*e,this},applyMatrix4:function(a){var n=this.x,r=this.y,e=this.z,s=a.val,h=1/(s[3]*n+s[7]*r+s[11]*e+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*e+s[12])*h,this.y=(s[1]*n+s[5]*r+s[9]*e+s[13])*h,this.z=(s[2]*n+s[6]*r+s[10]*e+s[14])*h,this},transformMat3:function(a){var n=this.x,r=this.y,e=this.z,s=a.val;return this.x=n*s[0]+r*s[3]+e*s[6],this.y=n*s[1]+r*s[4]+e*s[7],this.z=n*s[2]+r*s[5]+e*s[8],this},transformMat4:function(a){var n=this.x,r=this.y,e=this.z,s=a.val;return this.x=s[0]*n+s[4]*r+s[8]*e+s[12],this.y=s[1]*n+s[5]*r+s[9]*e+s[13],this.z=s[2]*n+s[6]*r+s[10]*e+s[14],this},transformCoordinates:function(a){var n=this.x,r=this.y,e=this.z,s=a.val,h=n*s[0]+r*s[4]+e*s[8]+s[12],i=n*s[1]+r*s[5]+e*s[9]+s[13],l=n*s[2]+r*s[6]+e*s[10]+s[14],u=n*s[3]+r*s[7]+e*s[11]+s[15];return this.x=h/u,this.y=i/u,this.z=l/u,this},transformQuat:function(a){var n=this.x,r=this.y,e=this.z,s=a.x,h=a.y,i=a.z,l=a.w,u=l*n+h*e-i*r,f=l*r+i*n-s*e,d=l*e+s*r-h*n,p=-s*n-h*r-i*e;return this.x=u*l+p*-s+f*-i-d*-h,this.y=f*l+p*-h+d*-s-u*-i,this.z=d*l+p*-i+u*-h-f*-s,this},project:function(a){var n=this.x,r=this.y,e=this.z,s=a.val,h=s[0],i=s[1],l=s[2],u=s[3],f=s[4],d=s[5],p=s[6],x=s[7],y=s[8],T=s[9],C=s[10],A=s[11],R=s[12],M=s[13],L=s[14],I=s[15],O=1/(n*u+r*x+e*A+I);return this.x=(n*h+r*f+e*y+R)*O,this.y=(n*i+r*d+e*T+M)*O,this.z=(n*l+r*p+e*C+L)*O,this},projectViewMatrix:function(a,n){return this.applyMatrix4(a).applyMatrix4(n)},unprojectViewMatrix:function(a,n){return this.applyMatrix4(a).applyMatrix4(n)},unproject:function(a,n){var r=a.x,e=a.y,s=a.z,h=a.w,i=this.x-r,l=h-this.y-1-e,u=this.z;return this.x=2*i/s-1,this.y=2*l/h-1,this.z=2*u-1,this.project(n)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),c.exports=g},61369:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=r||0,this.z=e||0,this.w=s||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,n,r,e){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=n||0,this.z=r||0,this.w=e||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,n=this.y,r=this.z,e=this.w;return Math.sqrt(a*a+n*n+r*r+e*e)},lengthSq:function(){var a=this.x,n=this.y,r=this.z,e=this.w;return a*a+n*n+r*r+e*e},normalize:function(){var a=this.x,n=this.y,r=this.z,e=this.w,s=a*a+n*n+r*r+e*e;return s>0&&(s=1/Math.sqrt(s),this.x=a*s,this.y=n*s,this.z=r*s,this.w=e*s),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,n){n===void 0&&(n=0);var r=this.x,e=this.y,s=this.z,h=this.w;return this.x=r+n*(a.x-r),this.y=e+n*(a.y-e),this.z=s+n*(a.z-s),this.w=h+n*(a.w-h),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var n=a.x-this.x,r=a.y-this.y,e=a.z-this.z||0,s=a.w-this.w||0;return Math.sqrt(n*n+r*r+e*e+s*s)},distanceSq:function(a){var n=a.x-this.x,r=a.y-this.y,e=a.z-this.z||0,s=a.w-this.w||0;return n*n+r*r+e*e+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var n=this.x,r=this.y,e=this.z,s=this.w,h=a.val;return this.x=h[0]*n+h[4]*r+h[8]*e+h[12]*s,this.y=h[1]*n+h[5]*r+h[9]*e+h[13]*s,this.z=h[2]*n+h[6]*r+h[10]*e+h[14]*s,this.w=h[3]*n+h[7]*r+h[11]*e+h[15]*s,this},transformQuat:function(a){var n=this.x,r=this.y,e=this.z,s=a.x,h=a.y,i=a.z,l=a.w,u=l*n+h*e-i*r,f=l*r+i*n-s*e,d=l*e+s*r-h*n,p=-s*n-h*r-i*e;return this.x=u*l+p*-s+f*-i-d*-h,this.y=f*l+p*-h+d*-s-u*-i,this.z=d*l+p*-i+u*-h-f*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,c.exports=g},60417:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return Math.abs(t-o)<=g};c.exports=S},15994:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=g-o;return o+((t-o)%a+a)%a};c.exports=S},31040:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return Math.atan2(a-o,g-t)};c.exports=S},55495:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return Math.atan2(o.y-t.y,o.x-t.x)};c.exports=S},128:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return Math.atan2(o.x-t.x,o.y-t.y)};c.exports=S},41273:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return Math.atan2(g-t,a-o)};c.exports=S},1432:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a>Math.PI&&(a-=o.PI2),Math.abs(((a+o.TAU)%o.PI2-o.PI2)%o.PI2)};c.exports=g},12407:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};c.exports=S},53993:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99472),g=function(){return o(-Math.PI,Math.PI)};c.exports=g},86564:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99472),g=function(){return o(-180,180)};c.exports=g},90154:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(12407),g=function(a){return o(a+Math.PI)};c.exports=g},48736:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a,n,r){return r===void 0&&(r=.05),a===n||(Math.abs(n-a)<=r||Math.abs(n-a)>=o.PI2-r?a=n:(Math.abs(n-a)>Math.PI&&(n<a?n+=o.PI2:n-=o.PI2),n>a?a+=r:n<a&&(a-=r))),a};c.exports=g},61430:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=o-t;if(g===0)return 0;var a=Math.floor((g- -180)/360);return g-a*360};c.exports=S},86554:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a){return o(a,-Math.PI,Math.PI)};c.exports=g},30954:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a){return o(a,-180,180)};c.exports=g},25588:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Between:t(31040),BetweenPoints:t(55495),BetweenPointsY:t(128),BetweenY:t(41273),CounterClockwise:t(1432),Normalize:t(12407),Random:t(53993),RandomDegrees:t(86564),Reverse:t(90154),RotateTo:t(48736),ShortestBetween:t(61430),Wrap:t(86554),WrapDegrees:t(30954)}},36383:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};c.exports=S},20339:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=t-g,r=o-a;return Math.sqrt(n*n+r*r)};c.exports=S},52816:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.x-o.x,a=t.y-o.y;return Math.sqrt(g*g+a*a)};c.exports=S},64559:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.x-o.x,a=t.y-o.y;return g*g+a*a};c.exports=S},82340:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return Math.max(Math.abs(t-g),Math.abs(o-a))};c.exports=S},14390:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){return n===void 0&&(n=2),Math.sqrt(Math.pow(g-t,n)+Math.pow(a-o,n))};c.exports=S},2243:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return Math.abs(t-g)+Math.abs(o-a)};c.exports=S},89774:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=t-g,r=o-a;return n*n+r*r};c.exports=S},50994:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Between:t(20339),BetweenPoints:t(52816),BetweenPointsSquared:t(64559),Chebyshev:t(82340),Power:t(14390),Snake:t(2243),Squared:t(89774)}},62640:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54178),g=t(41521),a=t(79980),n=t(85433),r=t(99140),e=t(48857),s=t(81596),h=t(59133),i=t(98516),l=t(35248),u=t(82500),f=t(49752);c.exports={Power0:s,Power1:h.Out,Power2:n.Out,Power3:i.Out,Power4:l.Out,Linear:s,Quad:h.Out,Cubic:n.Out,Quart:i.Out,Quint:l.Out,Sine:u.Out,Expo:e.Out,Circ:a.Out,Elastic:r.Out,Back:o.Out,Bounce:g.Out,Stepped:f,"Quad.easeIn":h.In,"Cubic.easeIn":n.In,"Quart.easeIn":i.In,"Quint.easeIn":l.In,"Sine.easeIn":u.In,"Expo.easeIn":e.In,"Circ.easeIn":a.In,"Elastic.easeIn":r.In,"Back.easeIn":o.In,"Bounce.easeIn":g.In,"Quad.easeOut":h.Out,"Cubic.easeOut":n.Out,"Quart.easeOut":i.Out,"Quint.easeOut":l.Out,"Sine.easeOut":u.Out,"Expo.easeOut":e.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":r.Out,"Back.easeOut":o.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":h.InOut,"Cubic.easeInOut":n.InOut,"Quart.easeInOut":i.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":u.InOut,"Expo.easeInOut":e.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":r.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":g.InOut}},1639:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1.70158),t*t*((o+1)*t-o)};c.exports=S},50099:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=1.70158);var g=o*1.525;return(t*=2)<1?.5*(t*t*((g+1)*t-g)):.5*((t-=2)*t*((g+1)*t+g)+2)};c.exports=S},41286:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1.70158),--t*t*((o+1)*t+o)+1};c.exports=S},54178:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(1639),Out:t(41286),InOut:t(50099)}},59590:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};c.exports=S},41788:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=!1;return t<.5?(t=1-t*2,o=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,o?(1-t)*.5:t*.5+.5};c.exports=S},69905:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};c.exports=S},41521:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(59590),Out:t(69905),InOut:t(41788)}},91861:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1-Math.sqrt(1-t*t)};c.exports=S},4177:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};c.exports=S},57512:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt(1- --t*t)};c.exports=S},79980:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(91861),Out:t(57512),InOut:t(4177)}},51150:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t};c.exports=S},82820:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};c.exports=S},35033:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return--t*t*t+1};c.exports=S},85433:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(51150),Out:t(35033),InOut:t(82820)}},69965:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),-(o*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g))};c.exports=S},50665:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),(t*=2)<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g)):o*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g)*.5+1};c.exports=S},7744:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/g)+1};c.exports=S},99140:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(69965),Out:t(7744),InOut:t(50665)}},24590:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.pow(2,10*(t-1))-.001};c.exports=S},87844:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};c.exports=S},89433:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1-Math.pow(2,-10*t)};c.exports=S},48857:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(24590),Out:t(89433),InOut:t(87844)}},48820:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Back:t(54178),Bounce:t(41521),Circular:t(79980),Cubic:t(85433),Elastic:t(99140),Expo:t(48857),Linear:t(81596),Quadratic:t(59133),Quartic:t(98516),Quintic:t(35248),Sine:t(82500),Stepped:t(49752)}},7147:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t};c.exports=S},81596:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=t(7147)},34826:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t};c.exports=S},20544:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};c.exports=S},92029:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*(2-t)};c.exports=S},59133:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(34826),Out:t(92029),InOut:t(20544)}},64413:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t*t};c.exports=S},78137:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};c.exports=S},45840:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1- --t*t*t*t};c.exports=S},98516:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(64413),Out:t(45840),InOut:t(78137)}},87745:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t*t*t};c.exports=S},16509:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};c.exports=S},17868:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return--t*t*t*t*t+1};c.exports=S},35248:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(87745),Out:t(17868),InOut:t(16509)}},80461:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};c.exports=S},34025:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};c.exports=S},52768:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};c.exports=S},82500:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={In:t(80461),Out:t(52768),InOut:t(34025)}},72251:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1),t<=0?0:t>=1?1:((o*t|0)+1)*(1/o)};c.exports=S},49752:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=t(72251)},75698:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1e-4),Math.ceil(t-o)};c.exports=S},43855:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g===void 0&&(g=1e-4),Math.abs(t-o)<g};c.exports=S},25777:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o=1e-4),Math.floor(t+o)};c.exports=S},5470:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g===void 0&&(g=1e-4),t>o-g};c.exports=S},94977:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return g===void 0&&(g=1e-4),t<o+g};c.exports=S},48379:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Ceil:t(75698),Equal:t(43855),Floor:t(25777),GreaterThan:t(5470),LessThan:t(94977)}},75508:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(79291),a={Angle:t(25588),Distance:t(50994),Easing:t(48820),Fuzzy:t(48379),Interpolation:t(38289),Pow2:t(49001),Snap:t(73697),RandomDataGenerator:t(28453),Average:t(53307),Bernstein:t(85710),Between:t(30976),CatmullRom:t(87842),CeilTo:t(26302),Clamp:t(45319),DegToRad:t(39506),Difference:t(61241),Euler:t(38857),Factorial:t(6411),FloatBetween:t(99472),FloorTo:t(77623),FromPercent:t(62945),GetSpeed:t(38265),IsEven:t(78702),IsEvenStrict:t(94883),Linear:t(28915),LinearXY:t(94908),MaxAdd:t(86883),Median:t(50040),MinSub:t(37204),Percent:t(65201),RadToDeg:t(43396),RandomXY:t(74362),RandomXYZ:t(60706),RandomXYZW:t(67421),Rotate:t(36305),RotateAround:t(11520),RotateAroundDistance:t(1163),RotateTo:t(70336),RoundAwayFromZero:t(2284),RoundTo:t(41013),SinCosTableGenerator:t(16922),SmootherStep:t(54261),SmoothStep:t(7602),ToXY:t(44408),TransformXY:t(85955),Within:t(60417),Wrap:t(15994),Vector2:t(26099),Vector3:t(25836),Vector4:t(61369),Matrix3:t(94434),Matrix4:t(37867),Quaternion:t(15746),RotateVec3:t(72678)};a=g(!1,a,o),c.exports=a},89318:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85710),g=function(a,n){for(var r=0,e=a.length-1,s=0;s<=e;s++)r+=Math.pow(1-n,e-s)*Math.pow(n,s)*a[s]*o(e,s);return r};c.exports=g},77259:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87842),g=function(a,n){var r=a.length-1,e=r*n,s=Math.floor(e);return a[0]===a[r]?(n<0&&(s=Math.floor(e=r*(1+n))),o(e-s,a[(s-1+r)%r],a[s],a[(s+1)%r],a[(s+2)%r])):n<0?a[0]-(o(-e,a[0],a[0],a[1],a[1])-a[0]):n>1?a[r]-(o(e-r,a[r],a[r],a[r-1],a[r-1])-a[r]):o(e-s,a[s?s-1:0],a[s],a[r<s+1?r:s+1],a[r<s+2?r:s+2])};c.exports=g},36316:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(n,r){var e=1-n;return e*e*e*r}function t(n,r){var e=1-n;return 3*e*e*n*r}function o(n,r){return 3*(1-n)*n*n*r}function g(n,r){return n*n*n*r}var a=function(n,r,e,s,h){return S(n,r)+t(n,e)+o(n,s)+g(n,h)};c.exports=a},28392:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28915),g=function(a,n){var r=a.length-1,e=r*n,s=Math.floor(e);return n<0?o(a[0],a[1],e):n>1?o(a[r],a[r-1],r-e):o(a[s],a[s+1>r?r:s+1],e-s)};c.exports=g},32112:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(a,n){var r=1-a;return r*r*n}function t(a,n){return 2*(1-a)*a*n}function o(a,n){return a*a*n}var g=function(a,n,r,e){return S(a,n)+t(a,r)+o(a,e)};c.exports=g},47235:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7602),g=function(a,n,r){return n+(r-n)*o(a,0,1)};c.exports=g},50178:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54261),g=function(a,n,r){return n+(r-n)*o(a,0,1)};c.exports=g},38289:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Bezier:t(89318),CatmullRom:t(77259),CubicBezier:t(36316),Linear:t(28392),QuadraticBezier:t(32112),SmoothStep:t(47235),SmootherStep:t(50178)}},98439:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=Math.log(t)/.6931471805599453;return 1<<Math.ceil(o)};c.exports=S},50030:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t>0&&(t&t-1)===0&&o>0&&(o&o-1)===0};c.exports=S},81230:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>0&&(t&t-1)===0};c.exports=S},49001:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GetNext:t(98439),IsSize:t(50030),IsValue:t(81230)}},28453:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n){n===void 0&&(n=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],n&&this.init(n)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var n,r=this.n;a=a.toString();for(var e=0;e<a.length;e++)r+=a.charCodeAt(e),n=.02519603282416938*r,r=n>>>0,n-=r,n*=r,r=n>>>0,n-=r,r+=n*4294967296;return this.n=r,(r>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var n=0;n<a.length&&a[n]!=null;n++){var r=a[n];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,n){return Math.floor(this.realInRange(0,n-a+1)+a)},between:function(a,n){return Math.floor(this.realInRange(0,n-a+1)+a)},realInRange:function(a,n){return this.frac()*(n-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",n="";for(n=a="";a++<36;n+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return n},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*(a.length-.5)+.5)]},timestamp:function(a,n){return this.realInRange(a||9466848e5,n||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var n=a.length-1,r=n;r>0;r--){var e=Math.floor(this.frac()*(r+1)),s=a[e];a[e]=a[r],a[r]=s}return a}});c.exports=g},63448:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.ceil(t/o),a?(g+t)/o:g+t)};c.exports=S},56583:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.floor(t/o),a?(g+t)/o:g+t)};c.exports=S},77720:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.round(t/o),a?(g+t)/o:g+t)};c.exports=S},73697:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Ceil:t(63448),Floor:t(56583),To:t(77720)}},85454:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t(63595);var o=t(8054),g=t(79291),a={Actions:t(61061),Animations:t(60421),BlendModes:t(10312),Cache:t(83388),Cameras:t(26638),Core:t(42857),Class:t(83419),Create:t(15822),Curves:t(25410),Data:t(44965),Display:t(27460),DOM:t(84902),Events:t(93055),FX:t(66064),Game:t(50127),GameObjects:t(77856),Geom:t(55738),Input:t(14350),Loader:t(57777),Math:t(75508),Physics:t(44563),Plugins:t(18922),Renderer:t(36909),Scale:t(93364),ScaleModes:t(29795),Scene:t(97482),Scenes:t(62194),Structs:t(41392),Textures:t(27458),Tilemaps:t(62501),Time:t(90291),Tweens:t(43066),Utils:t(91799)};a.Sound=t(23717),a=g(!1,a,o),c.exports=a,t.g.Phaser=a},71289:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92209),a=t(88571),n=new o({Extends:a,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,s,h,i,l){a.call(this,e,s,h,i,l),this.body=null}});c.exports=n},86689:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39506),a=t(20339),n=t(89774),r=t(66022),e=t(95540),s=t(46975),h=t(72441),i=t(47956),l=t(37277),u=t(44594),f=t(26099),d=t(82248),p=new o({initialize:function(y){this.scene=y,this.systems=y.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,y.sys.events.once(u.BOOT,this.boot,this),y.sys.events.on(u.START,this.start,this)},boot:function(){this.world=new d(this.scene,this.config),this.add=new r(this.world),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new d(this.scene,this.config),this.add=new r(this.world));var x=this.systems.events;e(this.config,"customUpdate",!1)||x.on(u.UPDATE,this.world.update,this.world),x.on(u.POST_UPDATE,this.world.postUpdate,this.world),x.once(u.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(u.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(u.UPDATE,this.world.update,this.world)},getConfig:function(){var x=this.systems.game.config.physics,y=this.systems.settings.physics,T=s(e(y,"arcade",{}),e(x,"arcade",{}));return T},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(x,y,T,C,A){return T===void 0&&(T=null),C===void 0&&(C=null),A===void 0&&(A=T),this.world.collideObjects(x,y,T,C,A,!0)},collide:function(x,y,T,C,A){return T===void 0&&(T=null),C===void 0&&(C=null),A===void 0&&(A=T),this.world.collideObjects(x,y,T,C,A,!1)},collideTiles:function(x,y,T,C,A){return this.world.collideTiles(x,y,T,C,A)},overlapTiles:function(x,y,T,C,A){return this.world.overlapTiles(x,y,T,C,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(x,y,T,C,A,R){C===void 0&&(C=60);var M=Math.atan2(T-x.y,y-x.x);return x.body.acceleration.setToPolar(M,C),A!==void 0&&R!==void 0&&x.body.maxVelocity.set(A,R),M},accelerateToObject:function(x,y,T,C,A){return this.accelerateTo(x,y.x,y.y,T,C,A)},closest:function(x,y){y||(y=this.world.bodies.entries);for(var T=Number.MAX_VALUE,C=null,A=x.x,R=x.y,M=y.length,L=0;L<M;L++){var I=y[L],O=I.body||I;if(!(x===I||x===O||x===O.gameObject||x===O.center)){var D=n(A,R,O.center.x,O.center.y);D<T&&(C=I,T=D)}}return C},furthest:function(x,y){y||(y=this.world.bodies.entries);for(var T=-1,C=null,A=x.x,R=x.y,M=y.length,L=0;L<M;L++){var I=y[L],O=I.body||I;if(!(x===I||x===O||x===O.gameObject||x===O.center)){var D=n(A,R,O.center.x,O.center.y);D>T&&(C=I,T=D)}}return C},moveTo:function(x,y,T,C,A){C===void 0&&(C=60),A===void 0&&(A=0);var R=Math.atan2(T-x.y,y-x.x);return A>0&&(C=a(x.x,x.y,y,T)/(A/1e3)),x.body.velocity.setToPolar(R,C),R},moveToObject:function(x,y,T,C){return this.moveTo(x,y.x,y.y,T,C)},velocityFromAngle:function(x,y,T){return y===void 0&&(y=60),T===void 0&&(T=new f),T.setToPolar(g(x),y)},velocityFromRotation:function(x,y,T){return y===void 0&&(y=60),T===void 0&&(T=new f),T.setToPolar(x,y)},overlapRect:function(x,y,T,C,A,R){return i(this.world,x,y,T,C,A,R)},overlapCirc:function(x,y,T,C,A){return h(this.world,x,y,T,C,A)},shutdown:function(){if(this.world){var x=this.systems.events;x.off(u.UPDATE,this.world.update,this.world),x.off(u.POST_UPDATE,this.world.postUpdate,this.world),x.off(u.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",p,"arcadePhysics"),c.exports=p},13759:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92209),a=t(68287),n=new o({Extends:a,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,s,h,i,l){a.call(this,e,s,h,i,l),this.body=null}});c.exports=n},37742:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(78389),a=t(37747),n=t(63012),r=t(43396),e=t(87841),s=t(37303),h=t(95829),i=t(26099),l=new o({Mixins:[g],initialize:function(f,d){var p=64,x=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=d!==void 0;T&&d.displayWidth&&(p=d.displayWidth,x=d.displayHeight),T||(d=y),this.world=f,this.gameObject=T?d:void 0,this.isBody=!0,this.transform={x:d.x,y:d.y,rotation:d.angle,scaleX:d.scaleX,scaleY:d.scaleY,displayOriginX:d.displayOriginX,displayOriginY:d.displayOriginY},this.debugShowBody=f.defaults.debugShowBody,this.debugShowVelocity=f.defaults.debugShowVelocity,this.debugBodyColor=f.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(d.x-d.scaleX*d.displayOriginX,d.y-d.scaleY*d.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=d.angle,this.preRotation=d.angle,this.width=p,this.height=x,this.sourceWidth=p,this.sourceHeight=x,d.frame&&(this.sourceWidth=d.frame.realWidth,this.sourceHeight=d.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(x/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new i,this.newVelocity=new i,this.deltaMax=new i,this.acceleration=new i,this.allowDrag=!0,this.drag=new i,this.allowGravity=!0,this.gravity=new i,this.bounce=new i,this.worldBounce=null,this.customBoundsRectangle=f.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new i(1e4,1e4),this.maxSpeed=-1,this.friction=new i(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new i(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=h(!1),this.touching=h(!0),this.wasTouching=h(!0),this.blocked=h(!0),this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=d.scaleX,this._sy=d.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var u=this.gameObject,f=this.transform;if(u.parentContainer){var d=u.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);f.x=d.tx,f.y=d.ty,f.rotation=r(d.rotation),f.scaleX=d.scaleX,f.scaleY=d.scaleY,f.displayOriginX=u.displayOriginX,f.displayOriginY=u.displayOriginY}else f.x=u.x,f.y=u.y,f.rotation=u.angle,f.scaleX=u.scaleX,f.scaleY=u.scaleY,f.displayOriginX=u.displayOriginX,f.displayOriginY=u.displayOriginY;var p=!1;if(this.syncBounds){var x=u.getBounds(this._bounds);this.width=x.width,this.height=x.height,p=!0}else{var y=Math.abs(f.scaleX),T=Math.abs(f.scaleY);(this._sx!==y||this._sy!==T)&&(this.width=this.sourceWidth*y,this.height=this.sourceHeight*T,this._sx=y,this._sy=T,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var u=this.transform;this.position.x=u.x+u.scaleX*(this.offset.x-u.displayOriginX),this.position.y=u.y+u.scaleY*(this.offset.y-u.displayOriginY),this.updateCenter()},resetFlags:function(u){u===void 0&&(u=!1);var f=this.wasTouching,d=this.touching,p=this.blocked;u?h(!0,f):(f.none=d.none,f.up=d.up,f.down=d.down,f.left=d.left,f.right=d.right),h(!0,d),h(!0,p),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(u,f){if(u&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var d=this.position;this.prev.x=d.x,this.prev.y=d.y,this.prevFrame.x=d.x,this.prevFrame.y=d.y}u&&this.update(f)},update:function(u){var f=this.prev,d=this.position,p=this.velocity;if(f.set(d.x,d.y),!this.moves){this._dx=d.x-f.x,this._dy=d.y-f.y;return}if(this.directControl){var x=this.autoFrame;p.set((d.x-x.x)/u,(d.y-x.y)/u),this.world.updateMotion(this,u),this._dx=d.x-x.x,this._dy=d.y-x.y}else this.world.updateMotion(this,u),this.newVelocity.set(p.x*u,p.y*u),d.add(this.newVelocity),this._dx=d.x-f.x,this._dy=d.y-f.y;var y=p.x,T=p.y;if(this.updateCenter(),this.angle=Math.atan2(T,y),this.speed=Math.sqrt(y*y+T*T),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var C=this.blocked;this.world.emit(n.WORLD_BOUNDS,this,C.up,C.down,C.left,C.right)}},postUpdate:function(){var u=this.position,f=u.x-this.prevFrame.x,d=u.y-this.prevFrame.y,p=this.gameObject;if(this.moves){var x=this.deltaMax.x,y=this.deltaMax.y;x!==0&&f!==0&&(f<0&&f<-x?f=-x:f>0&&f>x&&(f=x)),y!==0&&d!==0&&(d<0&&d<-y?d=-y:d>0&&d>y&&(d=y)),p&&(p.x+=f,p.y+=d)}f<0?this.facing=a.FACING_LEFT:f>0&&(this.facing=a.FACING_RIGHT),d<0?this.facing=a.FACING_UP:d>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&p&&(p.angle+=this.deltaZ()),this._tx=f,this._ty=d,this.autoFrame.set(u.x,u.y)},setBoundsRectangle:function(u){return this.customBoundsRectangle=u||this.world.bounds,this},checkWorldBounds:function(){var u=this.position,f=this.velocity,d=this.blocked,p=this.customBoundsRectangle,x=this.world.checkCollision,y=this.worldBounce?-this.worldBounce.x:-this.bounce.x,T=this.worldBounce?-this.worldBounce.y:-this.bounce.y,C=!1;return u.x<p.x&&x.left?(u.x=p.x,f.x*=y,d.left=!0,C=!0):this.right>p.right&&x.right&&(u.x=p.right-this.width,f.x*=y,d.right=!0,C=!0),u.y<p.y&&x.up?(u.y=p.y,f.y*=T,d.up=!0,C=!0):this.bottom>p.bottom&&x.down&&(u.y=p.bottom-this.height,f.y*=T,d.down=!0,C=!0),C&&(this.blocked.none=!1,this.updateCenter()),C},setOffset:function(u,f){return f===void 0&&(f=u),this.offset.set(u,f),this},setGameObject:function(u,f){return f===void 0&&(f=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=u,u.body&&(u.body=this),this.setSize(),this.world.add(this),this.enable=f,this},setSize:function(u,f,d){d===void 0&&(d=!0);var p=this.gameObject;if(p&&(!u&&p.frame&&(u=p.frame.realWidth),!f&&p.frame&&(f=p.frame.realHeight)),this.sourceWidth=u,this.sourceHeight=f,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),d&&p&&p.getCenter){var x=(p.width-u)/2,y=(p.height-f)/2;this.offset.set(x,y)}return this.isCircle=!1,this.radius=0,this},setCircle:function(u,f,d){return f===void 0&&(f=this.offset.x),d===void 0&&(d=this.offset.y),u>0?(this.isCircle=!0,this.radius=u,this.sourceWidth=u*2,this.sourceHeight=u*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,d),this.updateCenter()):this.isCircle=!1,this},reset:function(u,f){this.stop();var d=this.gameObject;d&&(d.setPosition(u,f),this.rotation=d.angle,this.preRotation=d.angle);var p=this.position;d&&d.getTopLeft?d.getTopLeft(p):p.set(u,f),this.prev.copy(p),this.prevFrame.copy(p),this.autoFrame.copy(p),d&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,f){if(!this.isCircle)return s(this,u,f);if(this.radius>0&&u>=this.left&&u<=this.right&&f>=this.top&&f<=this.bottom){var d=(this.center.x-u)*(this.center.x-u),p=(this.center.y-f)*(this.center.y-f);return d+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(u){var f=this.position,d=f.x+this.halfWidth,p=f.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor),this.isCircle?u.strokeCircle(d,p,this.width/2):(this.checkCollision.up&&u.lineBetween(f.x,f.y,f.x+this.width,f.y),this.checkCollision.right&&u.lineBetween(f.x+this.width,f.y,f.x+this.width,f.y+this.height),this.checkCollision.down&&u.lineBetween(f.x,f.y+this.height,f.x+this.width,f.y+this.height),this.checkCollision.left&&u.lineBetween(f.x,f.y,f.x,f.y+this.height))),this.debugShowVelocity&&(u.lineStyle(u.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),u.lineBetween(d,p,d+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(u){return u===void 0&&(u=!0),this.directControl=u,this},setCollideWorldBounds:function(u,f,d,p){u===void 0&&(u=!0),this.collideWorldBounds=u;var x=f!==void 0,y=d!==void 0;return(x||y)&&(this.worldBounce||(this.worldBounce=new i),x&&(this.worldBounce.x=f),y&&(this.worldBounce.y=d)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(u,f){return this.velocity.set(u,f),u=this.velocity.x,f=this.velocity.y,this.speed=Math.sqrt(u*u+f*f),this},setVelocityX:function(u){return this.setVelocity(u,this.velocity.y)},setVelocityY:function(u){return this.setVelocity(this.velocity.x,u)},setMaxVelocity:function(u,f){return this.maxVelocity.set(u,f),this},setMaxVelocityX:function(u){return this.maxVelocity.x=u,this},setMaxVelocityY:function(u){return this.maxVelocity.y=u,this},setMaxSpeed:function(u){return this.maxSpeed=u,this},setSlideFactor:function(u,f){return this.slideFactor.set(u,f),this},setBounce:function(u,f){return this.bounce.set(u,f),this},setBounceX:function(u){return this.bounce.x=u,this},setBounceY:function(u){return this.bounce.y=u,this},setAcceleration:function(u,f){return this.acceleration.set(u,f),this},setAccelerationX:function(u){return this.acceleration.x=u,this},setAccelerationY:function(u){return this.acceleration.y=u,this},setAllowDrag:function(u){return u===void 0&&(u=!0),this.allowDrag=u,this},setAllowGravity:function(u){return u===void 0&&(u=!0),this.allowGravity=u,this},setAllowRotation:function(u){return u===void 0&&(u=!0),this.allowRotation=u,this},setDrag:function(u,f){return this.drag.set(u,f),this},setDamping:function(u){return this.useDamping=u,this},setDragX:function(u){return this.drag.x=u,this},setDragY:function(u){return this.drag.y=u,this},setGravity:function(u,f){return this.gravity.set(u,f),this},setGravityX:function(u){return this.gravity.x=u,this},setGravityY:function(u){return this.gravity.y=u,this},setFriction:function(u,f){return this.friction.set(u,f),this},setFrictionX:function(u){return this.friction.x=u,this},setFrictionY:function(u){return this.friction.y=u,this},setAngularVelocity:function(u){return this.angularVelocity=u,this},setAngularAcceleration:function(u){return this.angularAcceleration=u,this},setAngularDrag:function(u){return this.angularDrag=u,this},setMass:function(u){return this.mass=u,this},setImmovable:function(u){return u===void 0&&(u=!0),this.immovable=u,this},setEnable:function(u){return u===void 0&&(u=!0),this.enable=u,this},processX:function(u,f,d,p){this.x+=u,this.updateCenter(),f!==null&&(this.velocity.x=f*this.slideFactor.x);var x=this.blocked;d&&(x.left=!0,x.none=!1),p&&(x.right=!0,x.none=!1)},processY:function(u,f,d,p){this.y+=u,this.updateCenter(),f!==null&&(this.velocity.y=f*this.slideFactor.y);var x=this.blocked;d&&(x.up=!0,x.none=!1),p&&(x.down=!0,x.none=!1)},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});c.exports=l},79342:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s,h,i,l){this.world=n,this.name="",this.active=!0,this.overlapOnly=r,this.object1=e,this.object2=s,this.collideCallback=h,this.processCallback=i,this.callbackContext=l},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});c.exports=g},66022:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71289),g=t(13759),a=t(37742),n=t(83419),r=t(37747),e=t(60758),s=t(72624),h=t(71464),i=new n({initialize:function(u){this.world=u,this.scene=u.scene,this.sys=u.scene.sys},collider:function(l,u,f,d,p){return this.world.addCollider(l,u,f,d,p)},overlap:function(l,u,f,d,p){return this.world.addOverlap(l,u,f,d,p)},existing:function(l,u){var f=u?r.STATIC_BODY:r.DYNAMIC_BODY;return this.world.enableBody(l,f),l},staticImage:function(l,u,f,d){var p=new o(this.scene,l,u,f,d);return this.sys.displayList.add(p),this.world.enableBody(p,r.STATIC_BODY),p},image:function(l,u,f,d){var p=new o(this.scene,l,u,f,d);return this.sys.displayList.add(p),this.world.enableBody(p,r.DYNAMIC_BODY),p},staticSprite:function(l,u,f,d){var p=new g(this.scene,l,u,f,d);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,r.STATIC_BODY),p},sprite:function(l,u,f,d){var p=new g(this.scene,l,u,f,d);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,r.DYNAMIC_BODY),p},staticGroup:function(l,u){return this.sys.updateList.add(new h(this.world,this.world.scene,l,u))},group:function(l,u){return this.sys.updateList.add(new e(this.world,this.world.scene,l,u))},body:function(l,u,f,d){var p=new a(this.world);return p.position.set(l,u),f&&d&&p.setSize(f,d),this.world.add(p,r.DYNAMIC_BODY),p},staticBody:function(l,u,f,d){var p=new s(this.world);return p.position.set(l,u),f&&d&&p.setSize(f,d),this.world.add(p,r.STATIC_BODY),p},destroy:function(){this.world=null,this.scene=null,this.sys=null}});c.exports=i},79599:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=0;if(!Array.isArray(t))o=t;else for(var g=0;g<t.length;g++)o|=t[g];return o};c.exports=S},64897:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=function(a,n,r,e){var s=0,h=a.deltaAbsX()+n.deltaAbsX()+e;return a._dx===0&&n._dx===0?(a.embedded=!0,n.embedded=!0):a._dx>n._dx?(s=a.right-n.x,s>h&&!r||a.checkCollision.right===!1||n.checkCollision.left===!1?s=0:(a.touching.none=!1,a.touching.right=!0,n.touching.none=!1,n.touching.left=!0,n.physicsType===o.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===o.STATIC_BODY&&!r&&(n.blocked.none=!1,n.blocked.left=!0))):a._dx<n._dx&&(s=a.x-n.width-n.x,-s>h&&!r||a.checkCollision.left===!1||n.checkCollision.right===!1?s=0:(a.touching.none=!1,a.touching.left=!0,n.touching.none=!1,n.touching.right=!0,n.physicsType===o.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===o.STATIC_BODY&&!r&&(n.blocked.none=!1,n.blocked.right=!0))),a.overlapX=s,n.overlapX=s,s};c.exports=g},45170:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=function(a,n,r,e){var s=0,h=a.deltaAbsY()+n.deltaAbsY()+e;return a._dy===0&&n._dy===0?(a.embedded=!0,n.embedded=!0):a._dy>n._dy?(s=a.bottom-n.y,s>h&&!r||a.checkCollision.down===!1||n.checkCollision.up===!1?s=0:(a.touching.none=!1,a.touching.down=!0,n.touching.none=!1,n.touching.up=!0,n.physicsType===o.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===o.STATIC_BODY&&!r&&(n.blocked.none=!1,n.blocked.up=!0))):a._dy<n._dy&&(s=a.y-n.bottom,-s>h&&!r||a.checkCollision.up===!1||n.checkCollision.down===!1?s=0:(a.touching.none=!1,a.touching.up=!0,n.touching.none=!1,n.touching.down=!0,n.physicsType===o.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===o.STATIC_BODY&&!r&&(n.blocked.none=!1,n.blocked.down=!0))),a.overlapY=s,n.overlapY=s,s};c.exports=g},60758:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13759),g=t(83419),a=t(78389),n=t(37747),r=t(95540),e=t(26479),s=t(41212),h=new g({Extends:e,Mixins:[a],initialize:function(l,u,f,d){if(!f&&!d)d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(s(f))d=f,f=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(f)&&s(f[0])){var p=this;f.forEach(function(x){x.internalCreateCallback=p.createCallbackHandler,x.internalRemoveCallback=p.removeCallbackHandler,x.classType=r(x,"classType",o)}),d=null}else d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,d&&(d.classType=r(d,"classType",o)),this.physicsType=n.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:r(d,"collideWorldBounds",!1),setBoundsRectangle:r(d,"customBoundsRectangle",null),setAccelerationX:r(d,"accelerationX",0),setAccelerationY:r(d,"accelerationY",0),setAllowDrag:r(d,"allowDrag",!0),setAllowGravity:r(d,"allowGravity",!0),setAllowRotation:r(d,"allowRotation",!0),setDamping:r(d,"useDamping",!1),setBounceX:r(d,"bounceX",0),setBounceY:r(d,"bounceY",0),setDragX:r(d,"dragX",0),setDragY:r(d,"dragY",0),setEnable:r(d,"enable",!0),setGravityX:r(d,"gravityX",0),setGravityY:r(d,"gravityY",0),setFrictionX:r(d,"frictionX",0),setFrictionY:r(d,"frictionY",0),setMaxSpeed:r(d,"maxSpeed",-1),setMaxVelocityX:r(d,"maxVelocityX",1e4),setMaxVelocityY:r(d,"maxVelocityY",1e4),setVelocityX:r(d,"velocityX",0),setVelocityY:r(d,"velocityY",0),setAngularVelocity:r(d,"angularVelocity",0),setAngularAcceleration:r(d,"angularAcceleration",0),setAngularDrag:r(d,"angularDrag",0),setMass:r(d,"mass",1),setImmovable:r(d,"immovable",!1)},e.call(this,u,f,d),this.type="PhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,n.DYNAMIC_BODY);var l=i.body;for(var u in this.defaults)l[u](this.defaults[u])},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},setVelocity:function(i,l,u){u===void 0&&(u=0);for(var f=this.getChildren(),d=0;d<f.length;d++)f[d].body.velocity.set(i+d*u,l+d*u);return this},setVelocityX:function(i,l){l===void 0&&(l=0);for(var u=this.getChildren(),f=0;f<u.length;f++)u[f].body.velocity.x=i+f*l;return this},setVelocityY:function(i,l){l===void 0&&(l=0);for(var u=this.getChildren(),f=0;f<u.length;f++)u[f].body.velocity.y=i+f*l;return this}});c.exports=h},3017:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,t,o,g,a,n,r,e,s,h,i,l,u,f,d,p,x,y=function(L,I,O){S=L,t=I;var D=S.velocity.x,B=t.velocity.x;return o=S.pushable,s=S._dx<0,h=S._dx>0,i=S._dx===0,d=Math.abs(S.right-t.x)<=Math.abs(t.right-S.x),r=B-D*S.bounce.x,g=t.pushable,l=t._dx<0,u=t._dx>0,f=t._dx===0,p=!d,e=D-B*t.bounce.x,x=Math.abs(O),T()},T=function(){return h&&d&&t.blocked.right?(S.processX(-x,r,!1,!0),1):s&&p&&t.blocked.left?(S.processX(x,r,!0),1):u&&p&&S.blocked.right?(t.processX(-x,e,!1,!0),2):l&&d&&S.blocked.left?(t.processX(x,e,!0),2):0},C=function(){var L=S.velocity.x,I=t.velocity.x,O=Math.sqrt(I*I*t.mass/S.mass)*(I>0?1:-1),D=Math.sqrt(L*L*S.mass/t.mass)*(L>0?1:-1),B=(O+D)*.5;return O-=B,D-=B,a=B+O*S.bounce.x,n=B+D*t.bounce.x,s&&p?A(0):l&&d?A(1):h&&d?A(2):u&&p?A(3):!1},A=function(L){if(o&&g)x*=.5,L===0||L===3?(S.processX(x,a),t.processX(-x,n)):(S.processX(-x,a),t.processX(x,n));else if(o&&!g)L===0||L===3?S.processX(x,r,!0):S.processX(-x,r,!1,!0);else if(!o&&g)L===0||L===3?t.processX(-x,e,!1,!0):t.processX(x,e,!0);else{var I=x*.5;L===0?f?(S.processX(x,0,!0),t.processX(0,null,!1,!0)):u?(S.processX(I,0,!0),t.processX(-I,0,!1,!0)):(S.processX(I,t.velocity.x,!0),t.processX(-I,null,!1,!0)):L===1?i?(S.processX(0,null,!1,!0),t.processX(x,0,!0)):h?(S.processX(-I,0,!1,!0),t.processX(I,0,!0)):(S.processX(-I,null,!1,!0),t.processX(I,S.velocity.x,!0)):L===2?f?(S.processX(-x,0,!1,!0),t.processX(0,null,!0)):l?(S.processX(-I,0,!1,!0),t.processX(I,0,!0)):(S.processX(-I,t.velocity.x,!1,!0),t.processX(I,null,!0)):L===3&&(i?(S.processX(0,null,!0),t.processX(-x,0,!1,!0)):s?(S.processX(I,0,!0),t.processX(-I,0,!1,!0)):(S.processX(I,t.velocity.y,!0),t.processX(-I,null,!1,!0)))}return!0},R=function(L){if(L===1?t.velocity.x=0:d?t.processX(x,e,!0):t.processX(-x,e,!1,!0),S.moves){var I=S.directControl?S.y-S.autoFrame.y:S.y-S.prev.y;t.y+=I*S.friction.y,t._dy=t.y-t.prev.y}},M=function(L){if(L===2?S.velocity.x=0:p?S.processX(x,r,!0):S.processX(-x,r,!1,!0),t.moves){var I=t.directControl?t.y-t.autoFrame.y:t.y-t.prev.y;S.y+=I*t.friction.y,S._dy=S.y-S.prev.y}};c.exports={BlockCheck:T,Check:C,Set:y,Run:A,RunImmovableBody1:R,RunImmovableBody2:M}},47962:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,t,o,g,a,n,r,e,s,h,i,l,u,f,d,p,x,y=function(L,I,O){S=L,t=I;var D=S.velocity.y,B=t.velocity.y;return o=S.pushable,s=S._dy<0,h=S._dy>0,i=S._dy===0,d=Math.abs(S.bottom-t.y)<=Math.abs(t.bottom-S.y),r=B-D*S.bounce.y,g=t.pushable,l=t._dy<0,u=t._dy>0,f=t._dy===0,p=!d,e=D-B*t.bounce.y,x=Math.abs(O),T()},T=function(){return h&&d&&t.blocked.down?(S.processY(-x,r,!1,!0),1):s&&p&&t.blocked.up?(S.processY(x,r,!0),1):u&&p&&S.blocked.down?(t.processY(-x,e,!1,!0),2):l&&d&&S.blocked.up?(t.processY(x,e,!0),2):0},C=function(){var L=S.velocity.y,I=t.velocity.y,O=Math.sqrt(I*I*t.mass/S.mass)*(I>0?1:-1),D=Math.sqrt(L*L*S.mass/t.mass)*(L>0?1:-1),B=(O+D)*.5;return O-=B,D-=B,a=B+O*S.bounce.y,n=B+D*t.bounce.y,s&&p?A(0):l&&d?A(1):h&&d?A(2):u&&p?A(3):!1},A=function(L){if(o&&g)x*=.5,L===0||L===3?(S.processY(x,a),t.processY(-x,n)):(S.processY(-x,a),t.processY(x,n));else if(o&&!g)L===0||L===3?S.processY(x,r,!0):S.processY(-x,r,!1,!0);else if(!o&&g)L===0||L===3?t.processY(-x,e,!1,!0):t.processY(x,e,!0);else{var I=x*.5;L===0?f?(S.processY(x,0,!0),t.processY(0,null,!1,!0)):u?(S.processY(I,0,!0),t.processY(-I,0,!1,!0)):(S.processY(I,t.velocity.y,!0),t.processY(-I,null,!1,!0)):L===1?i?(S.processY(0,null,!1,!0),t.processY(x,0,!0)):h?(S.processY(-I,0,!1,!0),t.processY(I,0,!0)):(S.processY(-I,null,!1,!0),t.processY(I,S.velocity.y,!0)):L===2?f?(S.processY(-x,0,!1,!0),t.processY(0,null,!0)):l?(S.processY(-I,0,!1,!0),t.processY(I,0,!0)):(S.processY(-I,t.velocity.y,!1,!0),t.processY(I,null,!0)):L===3&&(i?(S.processY(0,null,!0),t.processY(-x,0,!1,!0)):s?(S.processY(I,0,!0),t.processY(-I,0,!1,!0)):(S.processY(I,t.velocity.y,!0),t.processY(-I,null,!1,!0)))}return!0},R=function(L){if(L===1?t.velocity.y=0:d?t.processY(x,e,!0):t.processY(-x,e,!1,!0),S.moves){var I=S.directControl?S.x-S.autoFrame.x:S.x-S.prev.x;t.x+=I*S.friction.x,t._dx=t.x-t.prev.x}},M=function(L){if(L===2?S.velocity.y=0:p?S.processY(x,r,!0):S.processY(-x,r,!1,!0),t.moves){var I=t.directControl?t.x-t.autoFrame.x:t.x-t.prev.x;S.x+=I*t.friction.x,S._dx=S.x-S.prev.x}};c.exports={BlockCheck:T,Check:C,Set:y,Run:A,RunImmovableBody1:R,RunImmovableBody2:M}},14087:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64897),g=t(3017),a=function(n,r,e,s,h){h===void 0&&(h=o(n,r,e,s));var i=n.immovable,l=r.immovable;if(e||h===0||i&&l||n.customSeparateX||r.customSeparateX)return h!==0||n.embedded&&r.embedded;var u=g.Set(n,r,h);return!i&&!l?u>0?!0:g.Check():(i?g.RunImmovableBody1(u):l&&g.RunImmovableBody2(u),!0)};c.exports=a},89936:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45170),g=t(47962),a=function(n,r,e,s,h){h===void 0&&(h=o(n,r,e,s));var i=n.immovable,l=r.immovable;if(e||h===0||i&&l||n.customSeparateY||r.customSeparateY)return h!==0||n.embedded&&r.embedded;var u=g.Set(n,r,h);return!i&&!l?u>0?!0:g.Check():(i?g.RunImmovableBody1(u):l&&g.RunImmovableBody2(u),!0)};c.exports=a},95829:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===void 0&&(o={}),o.none=t,o.up=!1,o.down=!1,o.left=!1,o.right=!1,t||(o.up=!0,o.down=!0,o.left=!0,o.right=!0),o};c.exports=S},72624:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=t(83419),a=t(78389),n=t(37747),r=t(37303),e=t(95829),s=t(26099),h=new g({Mixins:[a],initialize:function(l,u){var f=64,d=64,p={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},x=u!==void 0;x&&u.displayWidth&&(f=u.displayWidth,d=u.displayHeight),x||(u=p),this.world=l,this.gameObject=x?u:void 0,this.isBody=!0,this.debugShowBody=l.defaults.debugShowStaticBody,this.debugBodyColor=l.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(u.x-f*u.originX,u.y-d*u.originY),this.width=f,this.height=d,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=s.ZERO,this.allowGravity=!1,this.gravity=s.ZERO,this.bounce=s.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=e(!1),this.touching=e(!0),this.wasTouching=e(!0),this.blocked=e(!0),this.physicsType=n.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(i,l){return i&&i!==this.gameObject&&(this.gameObject.body=null,i.body=this,this.gameObject=i),l&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var i=this.gameObject;return i.getTopLeft(this.position),this.width=i.displayWidth,this.height=i.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(i,l){return l===void 0&&(l=i),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(i,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(i,l,u){u===void 0&&(u=!0);var f=this.gameObject;if(f&&f.frame&&(i||(i=f.frame.realWidth),l||(l=f.frame.realHeight)),this.world.staticTree.remove(this),this.width=i,this.height=l,this.halfWidth=Math.floor(i/2),this.halfHeight=Math.floor(l/2),u&&f&&f.getCenter){var d=f.displayWidth/2,p=f.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(d-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(i,l,u){return l===void 0&&(l=this.offset.x),u===void 0&&(u=this.offset.y),i>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=i,this.width=i*2,this.height=i*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,u),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(i,l){var u=this.gameObject;i===void 0&&(i=u.x),l===void 0&&(l=u.y),this.world.staticTree.remove(this),u.setPosition(i,l),u.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(i){return i.x=this.x,i.y=this.y,i.right=this.right,i.bottom=this.bottom,i},hitTest:function(i,l){return this.isCircle?o(this,i,l):r(this,i,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(i){var l=this.position,u=l.x+this.halfWidth,f=l.y+this.halfHeight;this.debugShowBody&&(i.lineStyle(i.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?i.strokeCircle(u,f,this.width/2):i.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(i){return i<=0&&(i=.1),this.mass=i,this},x:{get:function(){return this.position.x},set:function(i){this.world.staticTree.remove(this),this.position.x=i,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(i){this.world.staticTree.remove(this),this.position.y=i,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});c.exports=h},71464:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13759),g=t(83419),a=t(78389),n=t(37747),r=t(95540),e=t(26479),s=t(41212),h=new g({Extends:e,Mixins:[a],initialize:function(l,u,f,d){!f&&!d?d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o}:s(f)?(d=f,f=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=r(d,"classType",o)):Array.isArray(f)&&s(f[0])?(d=f,f=null,d.forEach(function(p){p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=r(p,"classType",o)})):d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=n.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,e.call(this,u,f,d),this.type="StaticPhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,n.STATIC_BODY)},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var i=this.children.entries,l=0;l<i.length;l++)i[l].body.reset();return this}});c.exports=h},82248:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55495),g=t(37742),a=t(45319),n=t(83419),r=t(79342),e=t(37747),s=t(20339),h=t(52816),i=t(50792),l=t(63012),u=t(43855),f=t(5470),d=t(94977),p=t(64897),x=t(45170),y=t(96523),T=t(35154),C=t(36383),A=t(25774),R=t(96602),M=t(87841),L=t(59542),I=t(40012),O=t(14087),D=t(89936),B=t(35072),V=t(72624),W=t(2483),Y=t(61340),X=t(26099),U=t(15994),z=new n({Extends:i,initialize:function(b,H){i.call(this),this.scene=b,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new A,this.gravity=new X(T(H,"gravity.x",0),T(H,"gravity.y",0)),this.bounds=new M(T(H,"x",0),T(H,"y",0),T(H,"width",b.sys.scale.width),T(H,"height",b.sys.scale.height)),this.checkCollision={up:T(H,"checkCollision.up",!0),down:T(H,"checkCollision.down",!0),left:T(H,"checkCollision.left",!0),right:T(H,"checkCollision.right",!0)},this.fps=T(H,"fps",60),this.fixedStep=T(H,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(H,"timeScale",1),this.OVERLAP_BIAS=T(H,"overlapBias",4),this.TILE_BIAS=T(H,"tileBias",16),this.forceX=T(H,"forceX",!1),this.isPaused=T(H,"isPaused",!1),this._total=0,this.drawDebug=T(H,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(H,"debugShowBody",!0),debugShowStaticBody:T(H,"debugShowStaticBody",!0),debugShowVelocity:T(H,"debugShowVelocity",!0),bodyDebugColor:T(H,"debugBodyColor",16711935),staticBodyDebugColor:T(H,"debugStaticBodyColor",255),velocityDebugColor:T(H,"debugVelocityColor",65280)},this.maxEntries=T(H,"maxEntries",16),this.useTree=T(H,"useTree",!0),this.tree=new L(this.maxEntries),this.staticTree=new L(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Y,this._tempMatrix2=new Y,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(G,b){b===void 0&&(b=e.DYNAMIC_BODY),Array.isArray(G)||(G=[G]);for(var H=0;H<G.length;H++){var j=G[H];if(j.isParent)for(var $=j.getChildren(),k=0;k<$.length;k++){var Q=$[k];Q.isParent?this.enable(Q,b):this.enableBody(Q,b)}else this.enableBody(j,b)}},enableBody:function(G,b){return b===void 0&&(b=e.DYNAMIC_BODY),G.hasTransformComponent&&(G.body||(b===e.DYNAMIC_BODY?G.body=new g(this,G):b===e.STATIC_BODY&&(G.body=new V(this,G))),this.add(G.body)),G},add:function(G){return G.physicsType===e.DYNAMIC_BODY?this.bodies.set(G):G.physicsType===e.STATIC_BODY&&(this.staticBodies.set(G),this.staticTree.insert(G)),G.enable=!0,G},disable:function(G){Array.isArray(G)||(G=[G]);for(var b=0;b<G.length;b++){var H=G[b];if(H.isParent)for(var j=H.getChildren(),$=0;$<j.length;$++){var k=j[$];k.isParent?this.disable(k):this.disableBody(k.body)}else this.disableBody(H.body)}},disableBody:function(G){this.remove(G),G.enable=!1},remove:function(G){G.physicsType===e.DYNAMIC_BODY?(this.tree.remove(G),this.bodies.delete(G)):G.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(G),this.staticTree.remove(G))},createDebugGraphic:function(){var G=this.scene.sys.add.graphics({x:0,y:0});return G.setDepth(Number.MAX_VALUE),this.debugGraphic=G,this.drawDebug=!0,G},setBounds:function(G,b,H,j,$,k,Q,_){return this.bounds.setTo(G,b,H,j),$!==void 0&&this.setBoundsCollision($,k,Q,_),this},setBoundsCollision:function(G,b,H,j){return G===void 0&&(G=!0),b===void 0&&(b=!0),H===void 0&&(H=!0),j===void 0&&(j=!0),this.checkCollision.left=G,this.checkCollision.right=b,this.checkCollision.up=H,this.checkCollision.down=j,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(G,b,H,j,$){H===void 0&&(H=null),j===void 0&&(j=null),$===void 0&&($=H);var k=new r(this,!1,G,b,H,j,$);return this.colliders.add(k),k},addOverlap:function(G,b,H,j,$){H===void 0&&(H=null),j===void 0&&(j=null),$===void 0&&($=H);var k=new r(this,!0,G,b,H,j,$);return this.colliders.add(k),k},removeCollider:function(G){return this.colliders.remove(G),this},setFPS:function(G){return this.fps=G,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(G,b){if(!(this.isPaused||this.bodies.size===0)){var H,j=this._frameTime,$=this._frameTimeMS*this.timeScale;this._elapsed+=b;var k,Q=this.bodies.entries,_=this._elapsed>=$;for(this.fixedStep||(j=b*.001,_=!0,this._elapsed=0),H=0;H<Q.length;H++)k=Q[H],k.enable&&k.preUpdate(_,j);if(_){this._elapsed-=$,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Q));var tt=this.colliders.update();for(H=0;H<tt.length;H++){var et=tt[H];et.active&&et.update()}this.emit(l.WORLD_STEP,j)}for(;this._elapsed>=$;)this._elapsed-=$,this.step(j)}},step:function(G){var b,H,j=this.bodies.entries,$=j.length;for(b=0;b<$;b++)H=j[b],H.enable&&H.update(G);this.useTree&&(this.tree.clear(),this.tree.load(j));var k=this.colliders.update();for(b=0;b<k.length;b++){var Q=k[b];Q.active&&Q.update()}this.emit(l.WORLD_STEP,G),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var G,b,H=this.bodies.entries,j=H.length,$=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,G=0;G<j;G++)b=H[G],b.enable&&b.postUpdate();if(this.drawDebug){var Q=this.debugGraphic;for(Q.clear(),G=0;G<j;G++)b=H[G],b.willDrawDebug()&&b.drawDebug(Q);for(H=k.entries,j=H.length,G=0;G<j;G++)b=H[G],b.willDrawDebug()&&b.drawDebug(Q)}var _=this.pendingDestroy;if(_.size>0){var tt=this.tree,et=this.staticTree;for(H=_.entries,j=H.length,G=0;G<j;G++)b=H[G],b.physicsType===e.DYNAMIC_BODY?(tt.remove(b),$.delete(b)):b.physicsType===e.STATIC_BODY&&(et.remove(b),k.delete(b)),b.world=void 0,b.gameObject=void 0;_.clear()}},updateMotion:function(G,b){G.allowRotation&&this.computeAngularVelocity(G,b),this.computeVelocity(G,b)},computeAngularVelocity:function(G,b){var H=G.angularVelocity,j=G.angularAcceleration,$=G.angularDrag,k=G.maxAngular;j?H+=j*b:G.allowDrag&&$&&($*=b,f(H-$,0,.1)?H-=$:d(H+$,0,.1)?H+=$:H=0),H=a(H,-k,k);var Q=H-G.angularVelocity;G.angularVelocity+=Q,G.rotation+=G.angularVelocity*b},computeVelocity:function(G,b){var H=G.velocity.x,j=G.acceleration.x,$=G.drag.x,k=G.maxVelocity.x,Q=G.velocity.y,_=G.acceleration.y,tt=G.drag.y,et=G.maxVelocity.y,it=G.speed,ot=G.maxSpeed,nt=G.allowDrag,ut=G.useDamping;G.allowGravity&&(H+=(this.gravity.x+G.gravity.x)*b,Q+=(this.gravity.y+G.gravity.y)*b),j?H+=j*b:nt&&$&&(ut?($=Math.pow($,b),H*=$,it=Math.sqrt(H*H+Q*Q),u(it,0,.001)&&(H=0)):($*=b,f(H-$,0,.01)?H-=$:d(H+$,0,.01)?H+=$:H=0)),_?Q+=_*b:nt&&tt&&(ut?(tt=Math.pow(tt,b),Q*=tt,it=Math.sqrt(H*H+Q*Q),u(it,0,.001)&&(Q=0)):(tt*=b,f(Q-tt,0,.01)?Q-=tt:d(Q+tt,0,.01)?Q+=tt:Q=0)),H=a(H,-k,k),Q=a(Q,-et,et),G.velocity.set(H,Q),ot>-1&&G.velocity.length()>ot&&(G.velocity.normalize().scale(ot),it=ot),G.speed=it},separate:function(G,b,H,j,$){var k,Q,_=!1,tt=!0;if(!G.enable||!b.enable||G.checkCollision.none||b.checkCollision.none||!this.intersects(G,b)||H&&H.call(j,G.gameObject||G,b.gameObject||b)===!1)return _;if(G.isCircle||b.isCircle){var et=this.separateCircle(G,b,$);et.result?(_=!0,tt=!1):(k=et.x,Q=et.y,tt=!0)}if(tt){var it=!1,ot=!1,nt=this.OVERLAP_BIAS;$?(it=O(G,b,$,nt,k),ot=D(G,b,$,nt,Q)):this.forceX||Math.abs(this.gravity.y+G.gravity.y)<Math.abs(this.gravity.x+G.gravity.x)?(it=O(G,b,$,nt,k),this.intersects(G,b)&&(ot=D(G,b,$,nt,Q))):(ot=D(G,b,$,nt,Q),this.intersects(G,b)&&(it=O(G,b,$,nt,k))),_=it||ot}return _&&($?(G.onOverlap||b.onOverlap)&&this.emit(l.OVERLAP,G.gameObject,b.gameObject,G,b):(G.onCollide||b.onCollide)&&this.emit(l.COLLIDE,G.gameObject,b.gameObject,G,b)),_},separateCircle:function(G,b,H){p(G,b,!1,0),x(G,b,!1,0);var j=G.isCircle,$=b.isCircle,k=G.center,Q=b.center,_=G.immovable,tt=b.immovable,et=G.velocity,it=b.velocity,ot=0,nt=!0;if(j!==$){nt=!1;var ut=k.x,ct=k.y,pt=G.halfWidth,mt=b.position.x,ht=b.position.y,ft=b.right,dt=b.bottom;$&&(ut=Q.x,ct=Q.y,pt=b.halfWidth,mt=G.position.x,ht=G.position.y,ft=G.right,dt=G.bottom),ct<ht?ut<mt?ot=s(ut,ct,mt,ht)-pt:ut>ft&&(ot=s(ut,ct,ft,ht)-pt):ct>dt&&(ut<mt?ot=s(ut,ct,mt,dt)-pt:ut>ft&&(ot=s(ut,ct,ft,dt)-pt)),ot*=-1}else ot=G.halfWidth+b.halfWidth-h(k,Q);G.overlapR=ot,b.overlapR=ot;var Ct=o(k,Q),Lt=(ot+C.EPSILON)*Math.cos(Ct),Xt=(ot+C.EPSILON)*Math.sin(Ct),Mt={overlap:ot,result:!1,x:Lt,y:Xt};if(H&&(!nt||nt&&ot!==0))return Mt.result=!0,Mt;if(!nt&&ot===0||_&&tt||G.customSeparateX||b.customSeparateX)return Mt.x=void 0,Mt.y=void 0,Mt;var It=!G.pushable&&!b.pushable;if(nt){var kt=k.x-Q.x,ne=k.y-Q.y,Ut=Math.sqrt(Math.pow(kt,2)+Math.pow(ne,2)),zt=(Q.x-k.x)/Ut||0,Zt=(Q.y-k.y)/Ut||0,ae=2*(et.x*zt+et.y*Zt-it.x*zt-it.y*Zt)/(G.mass+b.mass);(_||tt||!G.pushable||!b.pushable)&&(ae*=2),!_&&G.pushable&&(et.x=et.x-ae/G.mass*zt,et.y=et.y-ae/G.mass*Zt,et.multiply(G.bounce)),!tt&&b.pushable&&(it.x=it.x+ae/b.mass*zt,it.y=it.y+ae/b.mass*Zt,it.multiply(b.bounce)),!_&&!tt&&(Lt*=.5,Xt*=.5),!_||G.pushable||It?(G.x-=Lt,G.y-=Xt,G.updateCenter()):(!tt||b.pushable||It)&&(b.x+=Lt,b.y+=Xt,b.updateCenter()),Mt.result=!0}else!_||G.pushable||It?(G.x-=Lt,G.y-=Xt,G.updateCenter()):(!tt||b.pushable||It)&&(b.x+=Lt,b.y+=Xt,b.updateCenter()),Mt.x=void 0,Mt.y=void 0;return Mt},intersects:function(G,b){return G===b?!1:!G.isCircle&&!b.isCircle?!(G.right<=b.left||G.bottom<=b.top||G.left>=b.right||G.top>=b.bottom):G.isCircle?b.isCircle?h(G.center,b.center)<=G.halfWidth+b.halfWidth:this.circleBodyIntersects(G,b):this.circleBodyIntersects(b,G)},circleBodyIntersects:function(G,b){var H=a(G.center.x,b.left,b.right),j=a(G.center.y,b.top,b.bottom),$=(G.center.x-H)*(G.center.x-H),k=(G.center.y-j)*(G.center.y-j);return $+k<=G.halfWidth*G.halfWidth},overlap:function(G,b,H,j,$){return H===void 0&&(H=null),j===void 0&&(j=null),$===void 0&&($=H),this.collideObjects(G,b,H,j,$,!0)},collide:function(G,b,H,j,$){return H===void 0&&(H=null),j===void 0&&(j=null),$===void 0&&($=H),this.collideObjects(G,b,H,j,$,!1)},collideObjects:function(G,b,H,j,$,k){var Q,_;G.isParent&&(G.physicsType===void 0||b===void 0||G===b)&&(G=G.children.entries),b&&b.isParent&&b.physicsType===void 0&&(b=b.children.entries);var tt=Array.isArray(G),et=Array.isArray(b);if(this._total=0,!tt&&!et)this.collideHandler(G,b,H,j,$,k);else if(!tt&&et)for(Q=0;Q<b.length;Q++)this.collideHandler(G,b[Q],H,j,$,k);else if(tt&&!et)if(b)for(Q=0;Q<G.length;Q++)this.collideHandler(G[Q],b,H,j,$,k);else for(Q=0;Q<G.length;Q++){var it=G[Q];for(_=Q+1;_<G.length;_++)Q!==_&&this.collideHandler(it,G[_],H,j,$,k)}else for(Q=0;Q<G.length;Q++)for(_=0;_<b.length;_++)this.collideHandler(G[Q],b[_],H,j,$,k);return this._total>0},collideHandler:function(G,b,H,j,$,k){if(b===void 0&&G.isParent)return this.collideGroupVsGroup(G,G,H,j,$,k);if(!G||!b)return!1;if(G.body||G.isBody){if(b.body||b.isBody)return this.collideSpriteVsSprite(G,b,H,j,$,k);if(b.isParent)return this.collideSpriteVsGroup(G,b,H,j,$,k);if(b.isTilemap)return this.collideSpriteVsTilemapLayer(G,b,H,j,$,k)}else if(G.isParent){if(b.body||b.isBody)return this.collideSpriteVsGroup(b,G,H,j,$,k);if(b.isParent)return this.collideGroupVsGroup(G,b,H,j,$,k);if(b.isTilemap)return this.collideGroupVsTilemapLayer(G,b,H,j,$,k)}else if(G.isTilemap){if(b.body||b.isBody)return this.collideSpriteVsTilemapLayer(b,G,H,j,$,k);if(b.isParent)return this.collideGroupVsTilemapLayer(b,G,H,j,$,k)}},canCollide:function(G,b){return G&&b&&(G.collisionMask&b.collisionCategory)!==0&&(b.collisionMask&G.collisionCategory)!==0},collideSpriteVsSprite:function(G,b,H,j,$,k){var Q=G.isBody?G:G.body,_=b.isBody?b:b.body;return this.canCollide(Q,_)?(this.separate(Q,_,j,$,k)&&(H&&H.call($,G,b),this._total++),!0):!1},collideSpriteVsGroup:function(G,b,H,j,$,k){var Q=G.isBody?G:G.body;if(!(b.getLength()===0||!Q||!Q.enable||Q.checkCollision.none||!this.canCollide(Q,b))){var _,tt,et;if(this.useTree||b.physicsType===e.STATIC_BODY){var it=this.treeMinMax;it.minX=Q.left,it.minY=Q.top,it.maxX=Q.right,it.maxY=Q.bottom;var ot=b.physicsType===e.DYNAMIC_BODY?this.tree.search(it):this.staticTree.search(it);for(tt=ot.length,_=0;_<tt;_++)et=ot[_],!(Q===et||!et.enable||et.checkCollision.none||!b.contains(et.gameObject))&&this.separate(Q,et,j,$,k)&&(H&&H.call($,Q.gameObject,et.gameObject),this._total++)}else{var nt=b.getChildren(),ut=b.children.entries.indexOf(G);for(tt=nt.length,_=0;_<tt;_++)et=nt[_].body,!(!et||_===ut||!et.enable)&&this.separate(Q,et,j,$,k)&&(H&&H.call($,Q.gameObject,et.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(G,b,H,j,$,k){if(!this.canCollide(G,b))return!1;var Q=G.getChildren();if(Q.length===0)return!1;for(var _=!1,tt=0;tt<Q.length;tt++)(Q[tt].body||Q[tt].isBody)&&this.collideSpriteVsTilemapLayer(Q[tt],b,H,j,$,k)&&(_=!0);return _},collideTiles:function(G,b,H,j,$){return b.length===0||G.body&&!G.body.enable||G.isBody&&!G.enable?!1:this.collideSpriteVsTilesHandler(G,b,H,j,$,!1,!1)},overlapTiles:function(G,b,H,j,$){return b.length===0||G.body&&!G.body.enable||G.isBody&&!G.enable?!1:this.collideSpriteVsTilesHandler(G,b,H,j,$,!0,!1)},collideSpriteVsTilemapLayer:function(G,b,H,j,$,k){var Q=G.isBody?G:G.body;if(!Q.enable||Q.checkCollision.none||!this.canCollide(Q,b))return!1;var _=b.layer,tt=Q.x-_.tileWidth*b.scaleX,et=Q.y-_.tileHeight*b.scaleY,it=Q.width+_.tileWidth*b.scaleX,ot=Q.height+_.tileHeight*b.scaleY,nt=k?null:this.tileFilterOptions,ut=y(tt,et,it,ot,nt,b.scene.cameras.main,b.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(G,ut,H,j,$,k,!0)},collideSpriteVsTilesHandler:function(G,b,H,j,$,k,Q){for(var _=G.isBody?G:G.body,tt,et={left:0,right:0,top:0,bottom:0},it,ot=!1,nt=0;nt<b.length;nt++){tt=b[nt],it=tt.tilemapLayer;var ut=it.tileToWorldXY(tt.x,tt.y);et.left=ut.x,et.top=ut.y,et.right=et.left+tt.width*it.scaleX,et.bottom=et.top+tt.height*it.scaleY,W(et,_)&&(!j||j.call($,G,tt))&&R(tt,G)&&(k||I(nt,_,tt,et,it,this.TILE_BIAS,Q))&&(this._total++,ot=!0,H&&H.call($,G,tt),k&&_.onOverlap?this.emit(l.TILE_OVERLAP,G,tt,_):_.onCollide&&this.emit(l.TILE_COLLIDE,G,tt,_))}return ot},collideGroupVsGroup:function(G,b,H,j,$,k){if(!(G.getLength()===0||b.getLength()===0||!this.canCollide(G,b)))for(var Q=G.getChildren(),_=0;_<Q.length;_++)this.collideSpriteVsGroup(Q[_],b,H,j,$,k)},wrap:function(G,b){G.body?this.wrapObject(G,b):G.getChildren?this.wrapArray(G.getChildren(),b):Array.isArray(G)?this.wrapArray(G,b):this.wrapObject(G,b)},wrapArray:function(G,b){for(var H=0;H<G.length;H++)this.wrapObject(G[H],b)},wrapObject:function(G,b){b===void 0&&(b=0),G.x=U(G.x,this.bounds.left-b,this.bounds.right+b),G.y=U(G.y,this.bounds.top-b,this.bounds.bottom+b)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});c.exports=z},1093:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAcceleration:function(t,o){return this.body.acceleration.set(t,o),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};c.exports=S},59023:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};c.exports=S},62069:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(t,o){return this.body.bounce.set(t,o),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,o,g,a){return this.body.setCollideWorldBounds(t,o,g,a),this}};c.exports=S},78389:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79599),g={setCollisionCategory:function(a){var n=this.body?this.body:this;return n.collisionCategory=a,this},willCollideWith:function(a){var n=this.body?this.body:this;return(n.collisionMask&a)!==0},addCollidesWith:function(a){var n=this.body?this.body:this;return n.collisionMask=n.collisionMask|a,this},removeCollidesWith:function(a){var n=this.body?this.body:this;return n.collisionMask=n.collisionMask&~a,this},setCollidesWith:function(a){var n=this.body?this.body:this;return n.collisionMask=o(a),this},resetCollisionCategory:function(){var a=this.body?this.body:this;return a.collisionCategory=1,a.collisionMask=2147483647,this}};c.exports=g},87118:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDebug:function(t,o,g){return this.debugShowBody=t,this.debugShowVelocity=o,this.debugBodyColor=g,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};c.exports=S},52819:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDrag:function(t,o){return this.body.drag.set(t,o),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};c.exports=S},4074:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,o,g,a,n){return t&&this.body.reset(o,g),a&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,o){return t===void 0&&(t=!1),o===void 0&&(o=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),o&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};c.exports=S},40831:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(t,o){return this.body.friction.set(t,o),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};c.exports=S},26775:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setGravity:function(t,o){return this.body.gravity.set(t,o),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};c.exports=S},9437:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};c.exports=S},30621:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setMass:function(t){return this.body.mass=t,this}};c.exports=S},72441:(c,S,t)=>{var o=t(47956),g=t(96503),a=t(2044),n=t(81491),r=function(e,s,h,i,l,u){var f=o(e,s-i,h-i,2*i,2*i,l,u);if(f.length===0)return f;for(var d=new g(s,h,i),p=new g,x=[],y=0;y<f.length;y++){var T=f[y];T.isCircle?(p.setTo(T.center.x,T.center.y,T.halfWidth),a(d,p)&&x.push(T)):n(d,T)&&x.push(T)}return x};c.exports=r},47956:c=>{var S=function(t,o,g,a,n,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var s=[],h=[],i=t.treeMinMax;if(i.minX=o,i.minY=g,i.maxX=o+a,i.maxY=g+n,e&&(h=t.staticTree.search(i)),r&&t.useTree)s=t.tree.search(i);else if(r){var l=t.bodies,u={position:{x:o,y:g},left:o,top:g,right:o+a,bottom:g+n,isCircle:!1},f=t.intersects;l.iterate(function(d){f(d,u)&&s.push(d)})}return h.concat(s)};c.exports=S},62121:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};c.exports=S},29384:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setOffset:function(t,o){return this.body.setOffset(t,o),this},setSize:function(t,o,g){return this.body.setSize(t,o,g),this},setBodySize:function(t,o,g){return this.body.setSize(t,o,g),this},setCircle:function(t,o,g){return this.body.setCircle(t,o,g),this}};c.exports=S},15098:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setVelocity:function(t,o){return this.body.setVelocity(t,o),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,o){return this.body.maxVelocity.set(t,o),this}};c.exports=S},92209:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Acceleration:t(1093),Angular:t(59023),Bounce:t(62069),Collision:t(78389),Debug:t(87118),Drag:t(52819),Enable:t(4074),Friction:t(40831),Gravity:t(26775),Immovable:t(9437),Mass:t(30621),OverlapCirc:t(72441),OverlapRect:t(47956),Pushable:t(62121),Size:t(29384),Velocity:t(15098)}},37747:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};c.exports=S},20009:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collide"},36768:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="overlap"},60473:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},89954:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},61804:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="tilecollide"},7161:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="tileoverlap"},34689:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="worldbounds"},16006:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="worldstep"},63012:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COLLIDE:t(20009),OVERLAP:t(36768),PAUSE:t(60473),RESUME:t(89954),TILE_COLLIDE:t(61804),TILE_OVERLAP:t(7161),WORLD_BOUNDS:t(34689),WORLD_STEP:t(16006)}},27064:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=t(79291),a={ArcadePhysics:t(86689),Body:t(37742),Collider:t(79342),Components:t(92209),Events:t(63012),Factory:t(66022),GetCollidesWith:t(79599),GetOverlapX:t(64897),GetOverlapY:t(45170),SeparateX:t(14087),SeparateY:t(89936),Group:t(60758),Image:t(71289),Sprite:t(13759),StaticBody:t(72624),StaticGroup:t(71464),Tilemap:t(55173),World:t(82248)};a=g(!1,a,o),c.exports=a},96602:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,o,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,o,t):!0};c.exports=S},36294:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o<0?(t.blocked.none=!1,t.blocked.left=!0):o>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=o,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};c.exports=S},67013:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o<0?(t.blocked.none=!1,t.blocked.up=!0):o>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=o,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};c.exports=S},40012:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21329),g=t(53442),a=t(2483),n=function(r,e,s,h,i,l,u){var f=h.left,d=h.top,p=h.right,x=h.bottom,y=s.faceLeft||s.faceRight,T=s.faceTop||s.faceBottom;if(u||(y=!0,T=!0),!y&&!T)return!1;var C=0,A=0,R=0,M=1;if(e.deltaAbsX()>e.deltaAbsY()?R=-1:e.deltaAbsX()<e.deltaAbsY()&&(M=-1),e.deltaX()!==0&&e.deltaY()!==0&&y&&T&&(R=Math.min(Math.abs(e.position.x-p),Math.abs(e.right-f)),M=Math.min(Math.abs(e.position.y-x),Math.abs(e.bottom-d))),R<M){if(y&&(C=o(e,s,f,p,l,u),C!==0&&!a(h,e)))return!0;T&&(A=g(e,s,d,x,l,u))}else{if(T&&(A=g(e,s,d,x,l,u),A!==0&&!a(h,e)))return!0;y&&(C=o(e,s,f,p,l,u))}return C!==0||A!==0};c.exports=n},21329:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36294),g=function(a,n,r,e,s,h){var i=0,l=n.faceLeft,u=n.faceRight,f=n.collideLeft,d=n.collideRight;return h||(l=!0,u=!0,f=!0,d=!0),a.deltaX()<0&&d&&a.checkCollision.left?u&&a.x<e&&(i=a.x-e,i<-s&&(i=0)):a.deltaX()>0&&f&&a.checkCollision.right&&l&&a.right>r&&(i=a.right-r,i>s&&(i=0)),i!==0&&(a.customSeparateX?a.overlapX=i:o(a,i)),i};c.exports=g},53442:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(67013),g=function(a,n,r,e,s,h){var i=0,l=n.faceTop,u=n.faceBottom,f=n.collideUp,d=n.collideDown;return h||(l=!0,u=!0,f=!0,d=!0),a.deltaY()<0&&d&&a.checkCollision.up?u&&a.y<e&&(i=a.y-e,i<-s&&(i=0)):a.deltaY()>0&&f&&a.checkCollision.down&&l&&a.bottom>r&&(i=a.bottom-r,i>s&&(i=0)),i!==0&&(a.customSeparateY?a.overlapY=i:o(a,i)),i};c.exports=g},2483:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return!(o.right<=t.left||o.bottom<=t.top||o.position.x>=t.right||o.position.y>=t.bottom)};c.exports=S},55173:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ProcessTileCallbacks:t(96602),ProcessTileSeparationX:t(36294),ProcessTileSeparationY:t(67013),SeparateTile:t(40012),TileCheckX:t(21329),TileCheckY:t(53442),TileIntersectsBody:t(2483)};c.exports=o},44563:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Arcade:t(27064),Matter:t(3875)}},68174:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(n){if(n=n.hasOwnProperty("body")?n.body:n,!n.hasOwnProperty("bounds")||!n.hasOwnProperty("centerOfMass"))return!1;var r=this.boundsCenter,e=this.centerDiff,s=n.bounds.max.x-n.bounds.min.x,h=n.bounds.max.y-n.bounds.min.y,i=s*n.centerOfMass.x,l=h*n.centerOfMass.y;return r.set(s/2,h/2),e.set(i-r.x,l-r.y),!0},getTopLeft:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r+s.x+h.x,e+s.y+h.y)}return!1},getTopCenter:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r+h.x,e+s.y+h.y)}return!1},getTopRight:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r-(s.x-h.x),e+s.y+h.y)}return!1},getLeftCenter:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r+s.x+h.x,e+h.y)}return!1},getCenter:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.centerDiff;return new g(r+s.x,e+s.y)}return!1},getRightCenter:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r-(s.x-h.x),e+h.y)}return!1},getBottomLeft:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r+s.x+h.x,e-(s.y-h.y))}return!1},getBottomCenter:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r+h.x,e-(s.y-h.y))}return!1},getBottomRight:function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(n)){var s=this.boundsCenter,h=this.centerDiff;return new g(r-(s.x-h.x),e-(s.y-h.y))}return!1}});c.exports=a},19933:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6790);o.Body=t(22562),o.Composite=t(69351),o.World=t(4372),o.Collision=t(52284),o.Detector=t(81388),o.Pairs=t(99561),o.Pair=t(4506),o.Query=t(73296),o.Resolver=t(66272),o.Constraint=t(48140),o.Common=t(53402),o.Engine=t(48413),o.Events=t(35810),o.Sleeping=t(53614),o.Plugin=t(73832),o.Bodies=t(66280),o.Composites=t(74116),o.Axes=t(66615),o.Bounds=t(15647),o.Svg=t(74058),o.Vector=t(31725),o.Vertices=t(41598),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,c.exports=o},28137:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(83419),a=t(74116),n=t(48140),r=t(74058),e=t(75803),s=t(23181),h=t(34803),i=t(73834),l=t(19496),u=t(85791),f=t(98713),d=t(41598),p=new g({initialize:function(y){this.world=y,this.scene=y.scene,this.sys=y.scene.sys},rectangle:function(x,y,T,C,A){var R=o.rectangle(x,y,T,C,A);return this.world.add(R),R},trapezoid:function(x,y,T,C,A,R){var M=o.trapezoid(x,y,T,C,A,R);return this.world.add(M),M},circle:function(x,y,T,C,A){var R=o.circle(x,y,T,C,A);return this.world.add(R),R},polygon:function(x,y,T,C,A){var R=o.polygon(x,y,T,C,A);return this.world.add(R),R},fromVertices:function(x,y,T,C,A,R,M){typeof T=="string"&&(T=d.fromPath(T));var L=o.fromVertices(x,y,T,C,A,R,M);return this.world.add(L),L},fromPhysicsEditor:function(x,y,T,C,A){A===void 0&&(A=!0);var R=l.parseBody(x,y,T,C);return A&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(x,y,T,C,A,R){C===void 0&&(C=1),A===void 0&&(A={}),R===void 0&&(R=!0);for(var M=T.getElementsByTagName("path"),L=[],I=0;I<M.length;I++){var O=r.pathToVertices(M[I],30);C!==1&&d.scale(O,C,C),L.push(O)}var D=o.fromVertices(x,y,L,A);return R&&this.world.add(D),D},fromJSON:function(x,y,T,C,A){C===void 0&&(C={}),A===void 0&&(A=!0);var R=u.parseBody(x,y,T,C);return R&&A&&this.world.add(R),R},imageStack:function(x,y,T,C,A,R,M,L,I){M===void 0&&(M=0),L===void 0&&(L=0),I===void 0&&(I={});var O=this.world,D=this.sys.displayList;I.addToWorld=!1;var B=a.stack(T,C,A,R,M,L,function(V,W){var Y=new s(O,V,W,x,y,I);return D.add(Y),Y.body});return O.add(B),B},stack:function(x,y,T,C,A,R,M){var L=a.stack(x,y,T,C,A,R,M);return this.world.add(L),L},pyramid:function(x,y,T,C,A,R,M){var L=a.pyramid(x,y,T,C,A,R,M);return this.world.add(L),L},chain:function(x,y,T,C,A,R){return a.chain(x,y,T,C,A,R)},mesh:function(x,y,T,C,A){return a.mesh(x,y,T,C,A)},newtonsCradle:function(x,y,T,C,A){var R=a.newtonsCradle(x,y,T,C,A);return this.world.add(R),R},car:function(x,y,T,C,A){var R=a.car(x,y,T,C,A);return this.world.add(R),R},softBody:function(x,y,T,C,A,R,M,L,I,O){var D=a.softBody(x,y,T,C,A,R,M,L,I,O);return this.world.add(D),D},joint:function(x,y,T,C,A){return this.constraint(x,y,T,C,A)},spring:function(x,y,T,C,A){return this.constraint(x,y,T,C,A)},constraint:function(x,y,T,C,A){C===void 0&&(C=1),A===void 0&&(A={}),A.bodyA=x.type==="body"?x:x.body,A.bodyB=y.type==="body"?y:y.body,isNaN(T)||(A.length=T),A.stiffness=C;var R=n.create(A);return this.world.add(R),R},worldConstraint:function(x,y,T,C){T===void 0&&(T=1),C===void 0&&(C={}),C.bodyB=x.type==="body"?x:x.body,isNaN(y)||(C.length=y),C.stiffness=T;var A=n.create(C);return this.world.add(A),A},mouseSpring:function(x){return this.pointerConstraint(x)},pointerConstraint:function(x){x===void 0&&(x={}),x.hasOwnProperty("render")||(x.render={visible:!1});var y=new f(this.scene,this.world,x);return this.world.add(y.constraint),y},image:function(x,y,T,C,A){var R=new s(this.world,x,y,T,C,A);return this.sys.displayList.add(R),R},tileBody:function(x,y){return new i(this.world,x,y)},sprite:function(x,y,T,C,A){var R=new h(this.world,x,y,T,C,A);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(x,y,T){return e(this.world,x,y,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});c.exports=p},75803:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31884),g=t(95540),a=t(26099);function n(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}var r=function(e,s,h,i){h===void 0&&(h={}),i===void 0&&(i=!0);var l=s.x,u=s.y;s.body={temp:!0,position:{x:l,y:u}};var f=[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity];if(f.forEach(function(p){for(var x in p)n(p[x])?Object.defineProperty(s,x,{get:p[x].get,set:p[x].set}):Object.defineProperty(s,x,{value:p[x]})}),s.world=e,s._tempVec2=new a(l,u),h.hasOwnProperty("type")&&h.type==="body")s.setExistingBody(h,i);else{var d=g(h,"shape",null);d||(d="rectangle"),h.addToWorld=i,s.setBody(d,h)}return s};c.exports=r},23181:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31884),a=t(95643),n=t(95540),r=t(88571),e=t(72699),s=t(26099),h=new o({Extends:r,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,e],initialize:function(l,u,f,d,p,x){a.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,p),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new s(u,f);var y=n(x,"shape",null);y?this.setBody(y,x):this.setRectangle(this.width,this.height,x),this.setPosition(u,f),this.initPipeline(),this.initPostPipeline(!0)}});c.exports=h},42045:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=t(66615),a=t(66280),n=t(22562),r=t(68174),e=t(15647),s=t(83419),h=t(52284),i=t(53402),l=t(69351),u=t(74116),f=t(48140),d=t(81388),p=t(20339),x=t(28137),y=t(95540),T=t(35154),C=t(46975),A=t(4506),R=t(99561),M=t(37277),L=t(73296),I=t(66272),O=t(44594),D=t(74058),B=t(31725),V=t(41598),W=t(68243);i.setDecomp(t(55973));var Y=new s({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=n,this.composite=l,this.collision=h,this.detector=d,this.pair=A,this.pairs=R,this.query=L,this.resolver=I,this.constraint=f,this.bodies=a,this.composites=u,this.axes=g,this.bounds=e,this.svg=D,this.vector=B,this.vertices=V,this.verts=V,this._tempVec2=B.create(),I._restingThresh=T(this.config,"restingThresh",4),I._restingThreshTangent=T(this.config,"restingThreshTangent",6),I._positionDampen=T(this.config,"positionDampen",.9),I._positionWarming=T(this.config,"positionWarming",.8),I._frictionNormalMultiplier=T(this.config,"frictionNormalMultiplier",5),U.sys.events.once(O.BOOT,this.boot,this),U.sys.events.on(O.START,this.start,this)},boot:function(){this.world=new W(this.scene,this.config),this.add=new x(this.world),this.bodyBounds=new r,this.systems.events.once(O.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new W(this.scene,this.config),this.add=new x(this.world));var X=this.systems.events;X.on(O.UPDATE,this.world.update,this.world),X.on(O.POST_UPDATE,this.world.postUpdate,this.world),X.once(O.SHUTDOWN,this.shutdown,this)},getConfig:function(){var X=this.systems.game.config.physics,U=this.systems.settings.physics,z=C(y(U,"matter",{}),y(X,"matter",{}));return z},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(X,U){this.world.step(X,U)},containsPoint:function(X,U,z){X=this.getMatterBodies(X);var G=B.create(U,z),b=L.point(X,G);return b.length>0},intersectPoint:function(X,U,z){z=this.getMatterBodies(z);var G=B.create(X,U),b=[],H=L.point(z,G);return H.forEach(function(j){b.indexOf(j)===-1&&b.push(j)}),b},intersectRect:function(X,U,z,G,b,H){b===void 0&&(b=!1),H=this.getMatterBodies(H);var j={min:{x:X,y:U},max:{x:X+z,y:U+G}},$=[],k=L.region(H,j,b);return k.forEach(function(Q){$.indexOf(Q)===-1&&$.push(Q)}),$},intersectRay:function(X,U,z,G,b,H){b===void 0&&(b=1),H=this.getMatterBodies(H);for(var j=[],$=L.ray(H,B.create(X,U),B.create(z,G),b),k=0;k<$.length;k++)j.push($[k].body);return j},intersectBody:function(X,U){U=this.getMatterBodies(U);for(var z=[],G=L.collides(X,U),b=0;b<G.length;b++){var H=G[b];H.bodyA===X?z.push(H.bodyB):z.push(H.bodyA)}return z},overlap:function(X,U,z,G,b){z===void 0&&(z=null),G===void 0&&(G=null),b===void 0&&(b=z),Array.isArray(X)||(X=[X]),X=this.getMatterBodies(X),U=this.getMatterBodies(U);for(var H=!1,j=0;j<X.length;j++)for(var $=X[j],k=L.collides($,U),Q=0;Q<k.length;Q++){var _=k[Q],tt=_.bodyA.id===$.id?_.bodyB:_.bodyA;if(!G||G.call(b,$,tt,_)){if(H=!0,z)z.call(b,$,tt,_);else if(!G)return!0}}return H},setCollisionCategory:function(X,U){return X=this.getMatterBodies(X),X.forEach(function(z){z.collisionFilter.category=U}),this},setCollisionGroup:function(X,U){return X=this.getMatterBodies(X),X.forEach(function(z){z.collisionFilter.group=U}),this},setCollidesWith:function(X,U){X=this.getMatterBodies(X);var z=0;if(!Array.isArray(U))z=U;else for(var G=0;G<U.length;G++)z|=U[G];return X.forEach(function(b){b.collisionFilter.mask=z}),this},getMatterBodies:function(X){if(!X)return this.world.getAllBodies();Array.isArray(X)||(X=[X]);for(var U=[],z=0;z<X.length;z++){var G=X[z].hasOwnProperty("body")?X[z].body:X[z];U.push(G)}return U},setVelocity:function(X,U,z){X=this.getMatterBodies(X);var G=this._tempVec2;return G.x=U,G.y=z,X.forEach(function(b){n.setVelocity(b,G)}),this},setVelocityX:function(X,U){X=this.getMatterBodies(X);var z=this._tempVec2;return z.x=U,X.forEach(function(G){z.y=G.velocity.y,n.setVelocity(G,z)}),this},setVelocityY:function(X,U){X=this.getMatterBodies(X);var z=this._tempVec2;return z.y=U,X.forEach(function(G){z.x=G.velocity.x,n.setVelocity(G,z)}),this},setAngularVelocity:function(X,U){return X=this.getMatterBodies(X),X.forEach(function(z){n.setAngularVelocity(z,U)}),this},applyForce:function(X,U){X=this.getMatterBodies(X);var z=this._tempVec2;return X.forEach(function(G){z.x=G.position.x,z.y=G.position.y,n.applyForce(G,z,U)}),this},applyForceFromPosition:function(X,U,z,G){X=this.getMatterBodies(X);var b=this._tempVec2;return X.forEach(function(H){G===void 0&&(G=H.angle),b.x=z*Math.cos(G),b.y=z*Math.sin(G),n.applyForce(H,U,b)}),this},applyForceFromAngle:function(X,U,z){X=this.getMatterBodies(X);var G=this._tempVec2;return X.forEach(function(b){z===void 0&&(z=b.angle),G.x=U*Math.cos(z),G.y=U*Math.sin(z),n.applyForce(b,{x:b.position.x,y:b.position.y},G)}),this},getConstraintLength:function(X){var U=X.pointA.x,z=X.pointA.y,G=X.pointB.x,b=X.pointB.y;return X.bodyA&&(U+=X.bodyA.position.x,z+=X.bodyA.position.y),X.bodyB&&(G+=X.bodyB.position.x,b+=X.bodyB.position.y),p(U,z,G,b)},alignBody:function(X,U,z,G){X=X.hasOwnProperty("body")?X.body:X;var b;switch(G){case o.TOP_LEFT:case o.LEFT_TOP:b=this.bodyBounds.getTopLeft(X,U,z);break;case o.TOP_CENTER:b=this.bodyBounds.getTopCenter(X,U,z);break;case o.TOP_RIGHT:case o.RIGHT_TOP:b=this.bodyBounds.getTopRight(X,U,z);break;case o.LEFT_CENTER:b=this.bodyBounds.getLeftCenter(X,U,z);break;case o.CENTER:b=this.bodyBounds.getCenter(X,U,z);break;case o.RIGHT_CENTER:b=this.bodyBounds.getRightCenter(X,U,z);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:b=this.bodyBounds.getBottomLeft(X,U,z);break;case o.BOTTOM_CENTER:b=this.bodyBounds.getBottomCenter(X,U,z);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:b=this.bodyBounds.getBottomRight(X,U,z);break}return b&&n.setPosition(X,b),this},shutdown:function(){var X=this.systems.events;this.world&&(X.off(O.UPDATE,this.world.update,this.world),X.off(O.POST_UPDATE,this.world.postUpdate,this.world)),X.off(O.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(O.START,this.start,this),this.scene=null,this.systems=null}});M.register("MatterPhysics",Y,"matterPhysics"),c.exports=Y},34803:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31884),n=t(95643),r=t(95540),e=t(72699),s=t(68287),h=t(26099),i=new g({Extends:s,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,e],initialize:function(u,f,d,p,x,y){n.call(this,u.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(p,x),this.setSizeToFrame(),this.setOrigin(),this.world=u,this._tempVec2=new h(f,d);var T=r(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(f,d),this.initPipeline(),this.initPostPipeline(!0)}});c.exports=i},73834:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(83419),n=t(31884),r=t(62644),e=t(50792),s=t(95540),h=t(97022),i=t(41598),l=new a({Extends:e,Mixins:[n.Bounce,n.Collision,n.Friction,n.Gravity,n.Mass,n.Sensor,n.Sleep,n.Static],initialize:function(f,d,p){e.call(this),this.tile=d,this.world=f,d.physics.matterBody&&d.physics.matterBody.destroy(),d.physics.matterBody=this;var x=s(p,"body",null),y=s(p,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=d.getCollisionGroup(),C=s(T,"objects",[]);C.length>0?this.setFromTileCollision(p):this.setFromTileRectangle(p)}if(d.flipX||d.flipY){var A={x:d.getCenterX(),y:d.getCenterY()},R=d.flipX?-1:1,M=d.flipY?-1:1;g.scale(x,R,M,A)}},setFromTileRectangle:function(u){u===void 0&&(u={}),h(u,"isStatic")||(u.isStatic=!0),h(u,"addToWorld")||(u.addToWorld=!0);var f=this.tile.getBounds(),d=f.x+f.width/2,p=f.y+f.height/2,x=o.rectangle(d,p,f.width,f.height,u);return this.setBody(x,u.addToWorld),this},setFromTileCollision:function(u){u===void 0&&(u={}),h(u,"isStatic")||(u.isStatic=!0),h(u,"addToWorld")||(u.addToWorld=!0);for(var f=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,p=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=s(y,"objects",[]),C=[],A=0;A<T.length;A++){var R=T[A],M=p+R.x*f,L=x+R.y*d,I=R.width*f,O=R.height*d,D=null;if(R.rectangle)D=o.rectangle(M+I/2,L+O/2,I,O,u);else if(R.ellipse)D=o.circle(M+I/2,L+O/2,I/2,u);else if(R.polygon||R.polyline){var B=R.polygon?R.polygon:R.polyline,V=B.map(function(U){return{x:U.x*f,y:U.y*d}}),W=i.create(V),Y=i.centre(W);M+=Y.x,L+=Y.y,D=o.fromVertices(M,L,W,u)}D&&C.push(D)}if(C.length===1)this.setBody(C[0],u.addToWorld);else if(C.length>1){var X=r(u);X.parts=C,this.setBody(g.create(X),X.addToWorld)}return this},setBody:function(u,f){return f===void 0&&(f=!0),this.body&&this.removeBody(),this.body=u,this.body.gameObject=this,f&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});c.exports=l},19496:(c,S,t)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(53402),n=t(95540),r=t(41598),e={parseBody:function(s,h,i,l){l===void 0&&(l={});for(var u=n(i,"fixtures",[]),f=[],d=0;d<u.length;d++)for(var p=this.parseFixture(u[d]),x=0;x<p.length;x++)f.push(p[x]);var y=a.clone(i,!0);a.extend(y,l,!0),delete y.fixtures,delete y.type;var T=g.create(y);return g.setParts(T,f),g.setPosition(T,{x:s,y:h}),T},parseFixture:function(s){var h=a.extend({},!1,s);delete h.circle,delete h.vertices;var i;if(s.circle){var l=n(s.circle,"x"),u=n(s.circle,"y"),f=n(s.circle,"radius");i=[o.circle(l,u,f,h)]}else s.vertices&&(i=this.parseVertices(s.vertices,h));return i},parseVertices:function(s,h){h===void 0&&(h={});for(var i=[],l=0;l<s.length;l++)r.clockwiseSort(s[l]),i.push(g.create(a.extend({position:r.centre(s[l]),vertices:s[l]},h)));return o.flagCoincidentParts(i)}};c.exports=e},85791:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a={parseBody:function(n,r,e,s){s===void 0&&(s={});var h,i=e.vertices;if(i.length===1)s.vertices=i[0],h=g.create(s),o.flagCoincidentParts(h.parts);else{for(var l=[],u=0;u<i.length;u++){var f=g.create({vertices:i[u]});l.push(f)}o.flagCoincidentParts(l),s.parts=l,h=g.create(s)}return h.label=e.label,g.setPosition(h,{x:n,y:r}),h}};c.exports=a},98713:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15647),g=t(83419),a=t(69351),n=t(48140),r=t(81388),e=t(1121),s=t(8214),h=t(46975),i=t(53614),l=t(26099),u=t(41598),f=new g({initialize:function(p,x,y){y===void 0&&(y={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=x,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=n.create(h(y,T)),this.world.on(e.BEFORE_UPDATE,this.update,this),p.sys.input.on(s.POINTER_DOWN,this.onDown,this),p.sys.input.on(s.POINTER_UP,this.onUp,this)},onDown:function(d){this.pointer||(this.pointer=d,this.camera=d.camera)},onUp:function(d){d===this.pointer&&(this.pointer=null)},getBody:function(d){var p=this.position,x=this.constraint;this.camera.getWorldPoint(d.x,d.y,p);for(var y=a.allBodies(this.world.localWorld),T=0;T<y.length;T++){var C=y[T];if(!C.ignorePointer&&o.contains(C.bounds,p)&&r.canCollide(C.collisionFilter,x.collisionFilter)&&this.hitTestBody(C,p))return this.world.emit(e.DRAG_START,C,this.part,this),!0}return!1},hitTestBody:function(d,p){for(var x=this.constraint,y=d.parts.length,T=y>1?1:0,C=T;C<y;C++){var A=d.parts[C];if(u.contains(A.vertices,p))return x.pointA=p,x.pointB={x:p.x-d.position.x,y:p.y-d.position.y},x.bodyB=d,x.angleB=d.angle,i.set(d,!1),this.part=A,this.body=d,!0}return!1},update:function(){var d=this.pointer,p=this.body;if(!this.active||!d){p&&this.stopDrag();return}if(!d.isDown&&p){this.stopDrag();return}else if(d.isDown){if(!this.camera||!p&&!this.getBody(d))return;p=this.body;var x=this.position,y=this.constraint;this.camera.getWorldPoint(d.x,d.y,x),y.pointA.x=x.x,y.pointA.y=x.y,i.set(p,!1),this.world.emit(e.DRAG,p,this)}},stopDrag:function(){var d=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,d&&this.world.emit(e.DRAG_END,d,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(s.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(s.POINTER_UP,this.onUp,this)}});c.exports=f},68243:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(83419),n=t(53402),r=t(69351),e=t(48413),s=t(50792),h=t(1121),i=t(95540),l=t(35154),u=t(22562),f=t(35810),d=t(73834),p=t(4372),x=t(13037),y=t(31725),T=new a({Extends:s,initialize:function(A,R){s.call(this),this.scene=A,this.engine=e.create(R),this.localWorld=this.engine.world;var M=l(R,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(R,"enabled",!0),this.getDelta=l(R,"getDelta",this.update60Hz);var L=i(R,"runner",{}),I=i(L,"fps",!1),O=i(L,"fps",60),D=i(L,"delta",1e3/O),B=i(L,"deltaMin",1e3/O),V=i(L,"deltaMax",1e3/(O*.5));I||(O=1e3/D),this.runner={fps:O,deltaSampleSize:i(L,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,timeBuffer:0,isFixed:i(L,"isFixed",!1),delta:D,deltaMin:B,deltaMax:V},this.autoUpdate=l(R,"autoUpdate",!0);var W=l(R,"debug",!1);if(this.drawDebug=typeof W=="object"?!0:W,this.debugGraphic,this.debugConfig={showAxes:i(W,"showAxes",!1),showAngleIndicator:i(W,"showAngleIndicator",!1),angleColor:i(W,"angleColor",15208787),showBroadphase:i(W,"showBroadphase",!1),broadphaseColor:i(W,"broadphaseColor",16757760),showBounds:i(W,"showBounds",!1),boundsColor:i(W,"boundsColor",16777215),showVelocity:i(W,"showVelocity",!1),velocityColor:i(W,"velocityColor",44783),showCollisions:i(W,"showCollisions",!1),collisionColor:i(W,"collisionColor",16094476),showSeparations:i(W,"showSeparations",!1),separationColor:i(W,"separationColor",16753920),showBody:i(W,"showBody",!0),showStaticBody:i(W,"showStaticBody",!0),showInternalEdges:i(W,"showInternalEdges",!1),renderFill:i(W,"renderFill",!1),renderLine:i(W,"renderLine",!0),fillColor:i(W,"fillColor",1075465),fillOpacity:i(W,"fillOpacity",1),lineColor:i(W,"lineColor",2678297),lineOpacity:i(W,"lineOpacity",1),lineThickness:i(W,"lineThickness",1),staticFillColor:i(W,"staticFillColor",857979),staticLineColor:i(W,"staticLineColor",1255396),showSleeping:i(W,"showSleeping",!1),staticBodySleepOpacity:i(W,"staticBodySleepOpacity",.7),sleepFillColor:i(W,"sleepFillColor",4605510),sleepLineColor:i(W,"sleepLineColor",10066585),showSensors:i(W,"showSensors",!0),sensorFillColor:i(W,"sensorFillColor",857979),sensorLineColor:i(W,"sensorLineColor",1255396),showPositions:i(W,"showPositions",!0),positionSize:i(W,"positionSize",4),positionColor:i(W,"positionColor",14697178),showJoint:i(W,"showJoint",!0),jointColor:i(W,"jointColor",14737474),jointLineOpacity:i(W,"jointLineOpacity",1),jointLineThickness:i(W,"jointLineThickness",2),pinSize:i(W,"pinSize",4),pinColor:i(W,"pinColor",4382944),springColor:i(W,"springColor",14697184),anchorColor:i(W,"anchorColor",15724527),anchorSize:i(W,"anchorSize",4),showConvexHulls:i(W,"showConvexHulls",!1),hullColor:i(W,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),i(R,"setBounds",!1)){var Y=R.setBounds;if(typeof Y=="boolean")this.setBounds();else{var X=i(Y,"x",0),U=i(Y,"y",0),z=i(Y,"width",A.sys.scale.width),G=i(Y,"height",A.sys.scale.height),b=i(Y,"thickness",64),H=i(Y,"left",!0),j=i(Y,"right",!0),$=i(Y,"top",!0),k=i(Y,"bottom",!0);this.setBounds(X,U,z,G,b,H,j,$,k)}}},setCompositeRenderStyle:function(C){var A=C.bodies,R=C.constraints,M=C.composites,L,I,O;for(L=0;L<A.length;L++)I=A[L],O=I.render,this.setBodyRenderStyle(I,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(L=0;L<R.length;L++)I=R[L],O=I.render,this.setConstraintRenderStyle(I,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(L=0;L<M.length;L++)I=M[L],this.setCompositeRenderStyle(I);return this},setBodyRenderStyle:function(C,A,R,M,L,I){var O=C.render,D=this.debugConfig;return O?(A==null&&(A=C.isStatic?D.staticLineColor:D.lineColor),R==null&&(R=D.lineOpacity),M==null&&(M=D.lineThickness),L==null&&(L=C.isStatic?D.staticFillColor:D.fillColor),I==null&&(I=D.fillOpacity),A!==!1&&(O.lineColor=A),R!==!1&&(O.lineOpacity=R),M!==!1&&(O.lineThickness=M),L!==!1&&(O.fillColor=L),I!==!1&&(O.fillOpacity=I),this):this},setConstraintRenderStyle:function(C,A,R,M,L,I,O){var D=C.render,B=this.debugConfig;if(!D)return this;if(A==null){var V=D.type;V==="line"?A=B.jointColor:V==="pin"?A=B.pinColor:V==="spring"&&(A=B.springColor)}return R==null&&(R=B.jointLineOpacity),M==null&&(M=B.jointLineThickness),L==null&&(L=B.pinSize),I==null&&(I=B.anchorColor),O==null&&(O=B.anchorSize),A!==!1&&(D.lineColor=A),R!==!1&&(D.lineOpacity=R),M!==!1&&(D.lineThickness=M),L!==!1&&(D.pinSize=L),I!==!1&&(D.anchorColor=I),O!==!1&&(D.anchorSize=O),this},setEventsProxy:function(){var C=this,A=this.engine,R=this.localWorld;this.drawDebug&&(f.on(R,"compositeModified",function(M){C.setCompositeRenderStyle(M)}),f.on(R,"beforeAdd",function(M){for(var L=[].concat(M.object),I=0;I<L.length;I++){var O=L[I],D=O.render;O.type==="body"?C.setBodyRenderStyle(O,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):O.type==="composite"?C.setCompositeRenderStyle(O):O.type==="constraint"&&C.setConstraintRenderStyle(O,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),f.on(R,"beforeAdd",function(M){C.emit(h.BEFORE_ADD,M)}),f.on(R,"afterAdd",function(M){C.emit(h.AFTER_ADD,M)}),f.on(R,"beforeRemove",function(M){C.emit(h.BEFORE_REMOVE,M)}),f.on(R,"afterRemove",function(M){C.emit(h.AFTER_REMOVE,M)}),f.on(A,"beforeUpdate",function(M){C.emit(h.BEFORE_UPDATE,M)}),f.on(A,"afterUpdate",function(M){C.emit(h.AFTER_UPDATE,M)}),f.on(A,"collisionStart",function(M){var L=M.pairs,I,O;L.length>0&&L.map(function(D){I=D.bodyA,O=D.bodyB,I.gameObject&&I.gameObject.emit("collide",I,O,D),O.gameObject&&O.gameObject.emit("collide",O,I,D),f.trigger(I,"onCollide",{pair:D}),f.trigger(O,"onCollide",{pair:D}),I.onCollideCallback&&I.onCollideCallback(D),O.onCollideCallback&&O.onCollideCallback(D),I.onCollideWith[O.id]&&I.onCollideWith[O.id](O,D),O.onCollideWith[I.id]&&O.onCollideWith[I.id](I,D)}),C.emit(h.COLLISION_START,M,I,O)}),f.on(A,"collisionActive",function(M){var L=M.pairs,I,O;L.length>0&&L.map(function(D){I=D.bodyA,O=D.bodyB,I.gameObject&&I.gameObject.emit("collideActive",I,O,D),O.gameObject&&O.gameObject.emit("collideActive",O,I,D),f.trigger(I,"onCollideActive",{pair:D}),f.trigger(O,"onCollideActive",{pair:D}),I.onCollideActiveCallback&&I.onCollideActiveCallback(D),O.onCollideActiveCallback&&O.onCollideActiveCallback(D)}),C.emit(h.COLLISION_ACTIVE,M,I,O)}),f.on(A,"collisionEnd",function(M){var L=M.pairs,I,O;L.length>0&&L.map(function(D){I=D.bodyA,O=D.bodyB,I.gameObject&&I.gameObject.emit("collideEnd",I,O,D),O.gameObject&&O.gameObject.emit("collideEnd",O,I,D),f.trigger(I,"onCollideEnd",{pair:D}),f.trigger(O,"onCollideEnd",{pair:D}),I.onCollideEndCallback&&I.onCollideEndCallback(D),O.onCollideEndCallback&&O.onCollideEndCallback(D)}),C.emit(h.COLLISION_END,M,I,O)})},setBounds:function(C,A,R,M,L,I,O,D,B){return C===void 0&&(C=0),A===void 0&&(A=0),R===void 0&&(R=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),L===void 0&&(L=64),I===void 0&&(I=!0),O===void 0&&(O=!0),D===void 0&&(D=!0),B===void 0&&(B=!0),this.updateWall(I,"left",C-L,A-L,L,M+L*2),this.updateWall(O,"right",C+R,A-L,L,M+L*2),this.updateWall(D,"top",C,A-L,R,L),this.updateWall(B,"bottom",C,A+M,R,L),this},updateWall:function(C,A,R,M,L,I){var O=this.walls[A];C?(O&&p.remove(this.localWorld,O),R+=L/2,M+=I/2,this.walls[A]=this.create(R,M,L,I,{isStatic:!0,friction:0,frictionStatic:0})):(O&&p.remove(this.localWorld,O),this.walls[A]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,A,R){return C===void 0&&(C=0),A===void 0&&(A=1),R===void 0&&(R=.001),this.localWorld.gravity.x=C,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=R,this},create:function(C,A,R,M,L){var I=o.rectangle(C,A,R,M,L);return p.add(this.localWorld,I),I},add:function(C){return p.add(this.localWorld,C),this},remove:function(C,A){Array.isArray(C)||(C=[C]);for(var R=0;R<C.length;R++){var M=C[R],L=M.body?M.body:M;r.remove(this.localWorld,L,A)}return this},removeConstraint:function(C,A){return r.remove(this.localWorld,C,A),this},convertTilemapLayer:function(C,A){var R=C.layer,M=C.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(M,A),this},convertTiles:function(C,A){if(C.length===0)return this;for(var R=0;R<C.length;R++)new d(this,C[R],A);return this},nextGroup:function(C){return u.nextGroup(C)},nextCategory:function(){return u.nextCategory()},pause:function(){return this.enabled=!1,this.emit(h.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=n.now(),this.emit(h.RESUME),this},update:function(C){if(!(!this.enabled||!this.autoUpdate)){var A=this.engine,R=this.runner,M=n.now(),L=R.delta,I=0,O=C-R.timeLastTick;if((!O||!R.timeLastTick||O>Math.max(x._maxFrameDelta,R.maxFrameTime))&&(O=R.frameDelta||x._frameDeltaFallback),R.frameDeltaSmoothing){R.frameDeltaHistory.push(O),R.frameDeltaHistory=R.frameDeltaHistory.slice(-R.frameDeltaHistorySize);var D=R.frameDeltaHistory.slice(0).sort(),B=R.frameDeltaHistory.slice(D.length*x._smoothingLowerBound,D.length*x._smoothingUpperBound),V=x._mean(B);O=V||O}R.frameDeltaSnapping&&(O=1e3/Math.round(1e3/O)),R.frameDelta=O,R.timeLastTick=C,R.timeBuffer+=R.frameDelta,R.timeBuffer=n.clamp(R.timeBuffer,0,R.frameDelta+L*x._timeBufferMargin),R.lastUpdatesDeferred=0;for(var W=R.maxUpdates||Math.ceil(R.maxFrameTime/L),Y=n.now();L>0&&R.timeBuffer>=L*x._timeBufferMargin;){e.update(A,L),R.timeBuffer-=L,I+=1;var X=n.now()-M,U=n.now()-Y,z=X+x._elapsedNextEstimate*U/I;if(I>=W||z>R.maxFrameTime){R.lastUpdatesDeferred=Math.round(Math.max(0,R.timeBuffer/L-x._timeBufferMargin));break}}}},step:function(C){e.update(this.engine,C)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var A=C.hasOwnProperty("body")?C.body:C;return r.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return r.allBodies(this.localWorld)},getAllConstraints:function(){return r.allConstraints(this.localWorld)},getAllComposites:function(){return r.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var C=this.debugConfig,A=this.engine,R=this.debugGraphic,M=r.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,R,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(M,R,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(M),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(M,R,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(M,R,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(A.pairs.list,R,C.separationColor),C.showCollisions&&this.renderCollisions(A.pairs.list,R,C.collisionColor)}},renderGrid:function(C,A,R,M){A.lineStyle(1,R,M);for(var L=n.keys(C.buckets),I=0;I<L.length;I++){var O=L[I];if(!(C.buckets[O].length<2)){var D=O.split(/C|R/);A.strokeRect(parseInt(D[1],10)*C.bucketWidth,parseInt(D[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,A,R){A.lineStyle(1,R,1);for(var M=0;M<C.length;M++){var L=C[M];if(L.isActive){var I=L.collision,O=I.bodyA,D=I.bodyB,B=O.position,V=D.position,W=I.penetration,Y=!O.isStatic&&!D.isStatic?4:1;D.isStatic&&(Y=0),A.lineBetween(V.x,V.y,V.x-W.x*Y,V.y-W.y*Y),Y=!O.isStatic&&!D.isStatic?4:1,O.isStatic&&(Y=0),A.lineBetween(B.x,B.y,B.x-W.x*Y,B.y-W.y*Y)}}return this},renderCollisions:function(C,A,R){A.lineStyle(1,R,.5),A.fillStyle(R,1);var M,L;for(M=0;M<C.length;M++)if(L=C[M],!!L.isActive)for(var I=0;I<L.contactCount;I++){var O=L.contacts[I],D=O.vertex;D&&A.fillRect(D.x-2,D.y-2,5,5)}for(M=0;M<C.length;M++)if(L=C[M],!!L.isActive){var B=L.collision,V=L.contacts;if(L.contactCount>0){var W=V[0].vertex.x,Y=V[0].vertex.y;L.contactCount===2&&(W=(V[0].vertex.x+V[1].vertex.x)/2,Y=(V[0].vertex.y+V[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic?A.lineBetween(W-B.normal.x*8,Y-B.normal.y*8,W,Y):A.lineBetween(W+B.normal.x*8,Y+B.normal.y*8,W,Y)}}return this},renderBodyBounds:function(C,A,R,M){A.lineStyle(1,R,M);for(var L=0;L<C.length;L++){var I=C[L];if(I.render.visible){var O=I.bounds;if(O)A.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var D=I.parts,B=D.length>1?1:0;B<D.length;B++){var V=D[B];A.strokeRect(V.bounds.min.x,V.bounds.min.y,V.bounds.max.x-V.bounds.min.x,V.bounds.max.y-V.bounds.min.y)}}}return this},renderBodyAxes:function(C,A,R,M,L){A.lineStyle(1,M,L);for(var I=0;I<C.length;I++){var O=C[I],D=O.parts;if(O.render.visible){var B,V,W;if(R)for(V=D.length>1?1:0;V<D.length;V++)for(B=D[V],W=0;W<B.axes.length;W++){var Y=B.axes[W];A.lineBetween(B.position.x,B.position.y,B.position.x+Y.x*20,B.position.y+Y.y*20)}else for(V=D.length>1?1:0;V<D.length;V++)for(B=D[V],W=0;W<B.axes.length;W++)A.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,A,R,M,L){A.lineStyle(L,R,M);for(var I=0;I<C.length;I++){var O=C[I];O.render.visible&&A.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(C){for(var A=this.debugGraphic,R=this.debugConfig,M=R.showBody,L=R.showStaticBody,I=R.showSleeping,O=R.showInternalEdges,D=R.showConvexHulls,B=R.renderFill,V=R.renderLine,W=R.staticBodySleepOpacity,Y=R.sleepFillColor,X=R.sleepLineColor,U=R.hullColor,z=0;z<C.length;z++){var G=C[z];if(G.render.visible&&!(!L&&G.isStatic||!M&&!G.isStatic)){var b=G.render.lineColor,H=G.render.lineOpacity,j=G.render.lineThickness,$=G.render.fillColor,k=G.render.fillOpacity;I&&G.isSleeping&&(G.isStatic?(H*=W,k*=W):(b=X,$=Y)),B||($=null),V||(b=null),this.renderBody(G,A,O,b,H,j,$,k);var Q=G.parts.length;D&&Q>1&&this.renderConvexHull(G,A,U,j)}}},renderBody:function(C,A,R,M,L,I,O,D){M===void 0&&(M=null),L===void 0&&(L=null),I===void 0&&(I=1),O===void 0&&(O=null),D===void 0&&(D=null);for(var B=this.debugConfig,V=B.sensorFillColor,W=B.sensorLineColor,Y=C.parts,X=Y.length,U=X>1?1:0;U<X;U++){var z=Y[U],G=z.render,b=G.opacity;if(!(!G.visible||b===0||z.isSensor&&!B.showSensors)){var H=z.circleRadius;if(A.beginPath(),z.isSensor?(O!==null&&A.fillStyle(V,D*b),M!==null&&A.lineStyle(I,W,L*b)):(O!==null&&A.fillStyle(O,D*b),M!==null&&A.lineStyle(I,M,L*b)),H)A.arc(z.position.x,z.position.y,H,0,2*Math.PI);else{var j=z.vertices,$=j.length;A.moveTo(j[0].x,j[0].y);for(var k=1;k<$;k++){var Q=j[k];if(!j[k-1].isInternal||R?A.lineTo(Q.x,Q.y):A.moveTo(Q.x,Q.y),k<$&&Q.isInternal&&!R){var _=(k+1)%$;A.moveTo(j[_].x,j[_].y)}}A.closePath()}O!==null&&A.fillPath(),M!==null&&A.strokePath()}}if(B.showPositions&&!C.isStatic){var tt=C.position.x,et=C.position.y,it=Math.ceil(B.positionSize/2);A.fillStyle(B.positionColor,1),A.fillRect(tt-it,et-it,B.positionSize,B.positionSize)}return this},renderConvexHull:function(C,A,R,M){M===void 0&&(M=1);var L=C.parts,I=L.length;if(I>1){var O=C.vertices;A.lineStyle(M,R),A.beginPath(),A.moveTo(O[0].x,O[0].y);for(var D=1;D<O.length;D++)A.lineTo(O[D].x,O[D].y);A.lineTo(O[0].x,O[0].y),A.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,A=r.allConstraints(this.localWorld),R=0;R<A.length;R++){var M=A[R].render,L=M.lineColor,I=M.lineOpacity,O=M.lineThickness,D=M.pinSize,B=M.anchorColor,V=M.anchorSize;this.renderConstraint(A[R],C,L,I,O,D,B,V)}},renderConstraint:function(C,A,R,M,L,I,O,D){var B=C.render;if(!B.visible||!C.pointA||!C.pointB)return this;A.lineStyle(L,R,M);var V=C.bodyA,W=C.bodyB,Y,X;if(V?Y=y.add(V.position,C.pointA):Y=C.pointA,B.type==="pin")A.strokeCircle(Y.x,Y.y,I);else{if(W?X=y.add(W.position,C.pointB):X=C.pointB,A.beginPath(),A.moveTo(Y.x,Y.y),B.type==="spring")for(var U=y.sub(X,Y),z=y.perp(y.normalise(U)),G=Math.ceil(n.clamp(C.length/5,12,20)),b,H=1;H<G;H+=1)b=H%2===0?1:-1,A.lineTo(Y.x+U.x*(H/G)+z.x*b*4,Y.y+U.y*(H/G)+z.y*b*4);A.lineTo(X.x,X.y)}return A.strokePath(),B.anchors&&D>0&&(A.fillStyle(O),A.fillCircle(Y.x,Y.y,D),A.fillCircle(X.x,X.y,D)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){f.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),e.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});c.exports=T},70410:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(t){return this.body.restitution=t,this}};c.exports=S},66968:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var o=0;if(!Array.isArray(t))o=t;else for(var g=0;g<t.length;g++)o|=t[g];return this.body.collisionFilter.mask=o,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,o){Array.isArray(t)||(t=[t]);for(var g=0;g<t.length;g++){var a=t[g].hasOwnProperty("body")?t[g].body:t[g];this.body.setOnCollideWith(a,o)}return this}};c.exports=S},51607:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,n){return o.applyForce(this.body,a,n),this},thrust:function(a){var n=this.body.angle;return this._tempVec2.set(a*Math.cos(n),a*Math.sin(n)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var n=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(n),a*Math.sin(n)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var n=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(n),a*Math.sin(n)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var n=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(n),a*Math.sin(n)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};c.exports=g},5436:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(t,o,g){return this.body.friction=t,o!==void 0&&(this.body.frictionAir=o),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};c.exports=S},39858:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};c.exports=S},37302:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g=t(26099),a={setMass:function(n){return o.setMass(this.body,n),this},setDensity:function(n){return o.setDensity(this.body,n),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};c.exports=a},39132:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};c.exports=S},57772:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(43855),n=t(95540),r=t(19496),e=t(85791),s=t(41598),h={setRectangle:function(i,l,u){return this.setBody({type:"rectangle",width:i,height:l},u)},setCircle:function(i,l){return this.setBody({type:"circle",radius:i},l)},setPolygon:function(i,l,u){return this.setBody({type:"polygon",sides:l,radius:i},u)},setTrapezoid:function(i,l,u,f){return this.setBody({type:"trapezoid",width:i,height:l,slope:u},f)},setExistingBody:function(i,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=i;for(var u=0;u<i.parts.length;u++)i.parts[u].gameObject=this;var f=this;if(i.destroy=function(){f.world.remove(f.body,!0),f.body.gameObject=null},l&&(this.world.has(i)&&this.world.remove(i,!0),this.world.add(i)),this._originComponent){var d=i.render.sprite.xOffset,p=i.render.sprite.yOffset,x=i.centerOfMass.x,y=i.centerOfMass.y;if(a(x,.5)&&a(y,.5))this.setOrigin(d+.5,p+.5);else{var T=i.centerOffset.x,C=i.centerOffset.y;this.setOrigin(d+T/this.displayWidth,p+C/this.displayHeight)}}return this},setBody:function(i,l){if(!i)return this;var u;typeof i=="string"&&(i={type:i});var f=n(i,"type","rectangle"),d=n(i,"x",this._tempVec2.x),p=n(i,"y",this._tempVec2.y),x=n(i,"width",this.width),y=n(i,"height",this.height);switch(f){case"rectangle":u=o.rectangle(d,p,x,y,l);break;case"circle":var T=n(i,"radius",Math.max(x,y)/2),C=n(i,"maxSides",25);u=o.circle(d,p,T,l,C);break;case"trapezoid":var A=n(i,"slope",.5);u=o.trapezoid(d,p,x,y,A,l);break;case"polygon":var R=n(i,"sides",5),M=n(i,"radius",Math.max(x,y)/2);u=o.polygon(d,p,R,M,l);break;case"fromVertices":case"fromVerts":var L=n(i,"verts",null);if(L)if(typeof L=="string"&&(L=s.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,L),u=this.body;else{var I=n(i,"flagInternal",!1),O=n(i,"removeCollinear",.01),D=n(i,"minimumArea",10);u=o.fromVertices(d,p,L,l,I,O,D)}break;case"fromPhysicsEditor":u=r.parseBody(d,p,i,l);break;case"fromPhysicsTracer":u=e.parseBody(d,p,i,l);break}return u&&this.setExistingBody(u,i.addToWorld),this}};c.exports=h},38083:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1121),g=t(53614),a=t(35810),n={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(r){return r===void 0&&(r=60),this.body.sleepThreshold=r,this},setSleepEvents:function(r,e){return this.setSleepStartEvent(r),this.setSleepEndEvent(e),this},setSleepStartEvent:function(r){if(r){var e=this.world;a.on(this.body,"sleepStart",function(s){e.emit(o.SLEEP_START,s,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(r){if(r){var e=this.world;a.on(this.body,"sleepEnd",function(s){e.emit(o.SLEEP_END,s,this)})}else a.off(this.body,"sleepEnd");return this}};c.exports=n},90556:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={setStatic:function(a){return o.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};c.exports=g},85436:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g=t(36383),a=t(86554),n=t(30954),r=4,e={x:{get:function(){return this.body.position.x},set:function(s){this._tempVec2.set(s,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(s){this._tempVec2.set(this.x,s),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(s){var h=1/this._scaleX,i=1/this._scaleY;this._scaleX=s,this._scaleX===0?this.renderFlags&=~r:this.renderFlags|=r,o.scale(this.body,h,i),o.scale(this.body,s,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(s){var h=1/this._scaleX,i=1/this._scaleY;this._scaleY=s,this._scaleY===0?this.renderFlags&=~r:this.renderFlags|=r,o.scale(this.body,h,i),o.scale(this.body,this._scaleX,s)}},angle:{get:function(){return n(this.body.angle*g.RAD_TO_DEG)},set:function(s){this.rotation=n(s)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(s){this._rotation=a(s),o.setAngle(this.body,this._rotation)}},setPosition:function(s,h){return s===void 0&&(s=0),h===void 0&&(h=s),this._tempVec2.set(s,h),o.setPosition(this.body,this._tempVec2),this},setRotation:function(s){return s===void 0&&(s=0),this._rotation=a(s),o.setAngle(this.body,s),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,o.setAngle(this.body,this.rotation),this},setScale:function(s,h,i){s===void 0&&(s=1),h===void 0&&(h=s);var l=1/this._scaleX,u=1/this._scaleY;return this._scaleX=s,this._scaleY=h,o.scale(this.body,l,u,i),o.scale(this.body,s,h,i),this}};c.exports=e},42081:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,n){return this._tempVec2.set(a,n),o.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return o.getVelocity(this.body)},setAngularVelocity:function(a){return o.setAngularVelocity(this.body,a),this},getAngularVelocity:function(){return o.getAngularVelocity(this.body)},setAngularSpeed:function(a){return o.setAngularSpeed(this.body,a),this},getAngularSpeed:function(){return o.getAngularSpeed(this.body)}};c.exports=g},31884:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Bounce:t(70410),Collision:t(66968),Force:t(51607),Friction:t(5436),Gravity:t(39858),Mass:t(37302),Sensor:t(39132),SetBody:t(57772),Sleep:t(38083),Static:t(90556),Transform:t(85436),Velocity:t(42081)}},85608:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afteradd"},1213:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afterremove"},25968:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="afterupdate"},67205:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeadd"},39438:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeremove"},44823:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="beforeupdate"},92593:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionactive"},60128:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionend"},76861:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="collisionstart"},92362:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragend"},76408:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="drag"},93971:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="dragstart"},5656:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},47861:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},79099:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleepend"},35906:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleepstart"},1121:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AFTER_ADD:t(85608),AFTER_REMOVE:t(1213),AFTER_UPDATE:t(25968),BEFORE_ADD:t(67205),BEFORE_REMOVE:t(39438),BEFORE_UPDATE:t(44823),COLLISION_ACTIVE:t(92593),COLLISION_END:t(60128),COLLISION_START:t(76861),DRAG_END:t(92362),DRAG:t(76408),DRAG_START:t(93971),PAUSE:t(5656),RESUME:t(47861),SLEEP_END:t(79099),SLEEP_START:t(35906)}},3875:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}},22562:(c,S,t)=>{var o={};c.exports=o;var g=t(41598),a=t(31725),n=t(53614),r=t(53402),e=t(15647),s=t(66615);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=16.666666666666668,o.create=function(i){var l={id:r.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:i.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=g.centre(i.vertices):i.hasOwnProperty("vertices")||(l.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var u=r.extend(l,i);return h(u,i),u.setOnCollideWith=function(f,d){return d?this.onCollideWith[f.id]=d:delete this.onCollideWith[f.id],this},u},o.nextGroup=function(i){return i?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var h=function(i,l){if(l=l||{},o.set(i,{bounds:i.bounds||e.create(i.vertices),positionPrev:i.positionPrev||a.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),g.rotate(i.vertices,i.angle,i.position),s.rotate(i.axes,i.angle),e.update(i.bounds,i.vertices,i.velocity),o.set(i,{axes:l.axes||i.axes,area:l.area||i.area,mass:l.mass||i.mass,inertia:l.inertia||i.inertia}),i.parts.length===1){var u=i.bounds,f=i.centerOfMass,d=i.centerOffset,p=u.max.x-u.min.x,x=u.max.y-u.min.y;f.x=-(u.min.x-i.position.x)/p,f.y=-(u.min.y-i.position.y)/x,d.x=p*f.x,d.y=x*f.y}};o.set=function(i,l,u){var f;typeof l=="string"&&(f=l,l={},l[f]=u);for(f in l)if(Object.prototype.hasOwnProperty.call(l,f))switch(u=l[f],f){case"isStatic":o.setStatic(i,u);break;case"isSleeping":n.set(i,u);break;case"mass":o.setMass(i,u);break;case"density":o.setDensity(i,u);break;case"inertia":o.setInertia(i,u);break;case"vertices":o.setVertices(i,u);break;case"position":o.setPosition(i,u);break;case"angle":o.setAngle(i,u);break;case"velocity":o.setVelocity(i,u);break;case"angularVelocity":o.setAngularVelocity(i,u);break;case"speed":o.setSpeed(i,u);break;case"angularSpeed":o.setAngularSpeed(i,u);break;case"parts":o.setParts(i,u);break;case"centre":o.setCentre(i,u);break;default:i[f]=u}},o.setStatic=function(i,l){for(var u=0;u<i.parts.length;u++){var f=i.parts[u];l?(f.isStatic||(f._original={restitution:f.restitution,friction:f.friction,mass:f.mass,inertia:f.inertia,density:f.density,inverseMass:f.inverseMass,inverseInertia:f.inverseInertia}),f.restitution=0,f.friction=1,f.mass=f.inertia=f.density=1/0,f.inverseMass=f.inverseInertia=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.angularVelocity=0,f.speed=0,f.angularSpeed=0,f.motion=0):f._original&&(f.restitution=f._original.restitution,f.friction=f._original.friction,f.mass=f._original.mass,f.inertia=f._original.inertia,f.density=f._original.density,f.inverseMass=f._original.inverseMass,f.inverseInertia=f._original.inverseInertia,f._original=null),f.isStatic=l}},o.setMass=function(i,l){var u=i.inertia/(i.mass/6);i.inertia=u*(l/6),i.inverseInertia=1/i.inertia,i.mass=l,i.inverseMass=1/i.mass,i.density=i.mass/i.area},o.setDensity=function(i,l){o.setMass(i,l*i.area),i.density=l},o.setInertia=function(i,l){i.inertia=l,i.inverseInertia=1/i.inertia},o.setVertices=function(i,l){l[0].body===i?i.vertices=l:i.vertices=g.create(l,i),i.axes=s.fromVertices(i.vertices),i.area=g.area(i.vertices),o.setMass(i,i.density*i.area);var u=g.centre(i.vertices);g.translate(i.vertices,u,-1),o.setInertia(i,o._inertiaScale*g.inertia(i.vertices,i.mass)),g.translate(i.vertices,i.position),e.update(i.bounds,i.vertices,i.velocity)},o.setParts=function(i,l,u){var f;for(l=l.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,f=0;f<l.length;f++){var d=l[f];d!==i&&(d.parent=i,i.parts.push(d))}if(i.parts.length!==1){if(u=typeof u<"u"?u:!0,u){var p=[];for(f=0;f<l.length;f++)p=p.concat(l[f].vertices);g.clockwiseSort(p);var x=g.hull(p),y=g.centre(x);o.setVertices(i,x),g.translate(i.vertices,y)}var T=o._totalProperties(i),C=T.centre.x,A=T.centre.y,R=i.bounds,M=i.centerOfMass,L=i.centerOffset;e.update(R,i.vertices,i.velocity),M.x=-(R.min.x-C)/(R.max.x-R.min.x),M.y=-(R.min.y-A)/(R.max.y-R.min.y),L.x=C,L.y=A,i.area=T.area,i.parent=i,i.position.x=C,i.position.y=A,i.positionPrev.x=C,i.positionPrev.y=A,o.setMass(i,T.mass),o.setInertia(i,T.inertia),o.setPosition(i,T.centre)}},o.setCentre=function(i,l,u){u?(i.positionPrev.x+=l.x,i.positionPrev.y+=l.y,i.position.x+=l.x,i.position.y+=l.y):(i.positionPrev.x=l.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=l.y-(i.position.y-i.positionPrev.y),i.position.x=l.x,i.position.y=l.y)},o.setPosition=function(i,l,u){var f=a.sub(l,i.position);u?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=f.x,i.velocity.y=f.y,i.speed=a.magnitude(f)):(i.positionPrev.x+=f.x,i.positionPrev.y+=f.y);for(var d=0;d<i.parts.length;d++){var p=i.parts[d];p.position.x+=f.x,p.position.y+=f.y,g.translate(p.vertices,f),e.update(p.bounds,p.vertices,i.velocity)}},o.setAngle=function(i,l,u){var f=l-i.angle;u?(i.anglePrev=i.angle,i.angularVelocity=f,i.angularSpeed=Math.abs(f)):i.anglePrev+=f;for(var d=0;d<i.parts.length;d++){var p=i.parts[d];p.angle+=f,g.rotate(p.vertices,f,i.position),s.rotate(p.axes,f),e.update(p.bounds,p.vertices,i.velocity),d>0&&a.rotateAbout(p.position,f,i.position,p.position)}},o.setVelocity=function(i,l){var u=i.deltaTime/o._baseDelta;i.positionPrev.x=i.position.x-l.x*u,i.positionPrev.y=i.position.y-l.y*u,i.velocity.x=(i.position.x-i.positionPrev.x)/u,i.velocity.y=(i.position.y-i.positionPrev.y)/u,i.speed=a.magnitude(i.velocity)},o.getVelocity=function(i){var l=o._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*l,y:(i.position.y-i.positionPrev.y)*l}},o.getSpeed=function(i){return a.magnitude(o.getVelocity(i))},o.setSpeed=function(i,l){o.setVelocity(i,a.mult(a.normalise(o.getVelocity(i)),l))},o.setAngularVelocity=function(i,l){var u=i.deltaTime/o._baseDelta;i.anglePrev=i.angle-l*u,i.angularVelocity=(i.angle-i.anglePrev)/u,i.angularSpeed=Math.abs(i.angularVelocity)},o.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*o._baseDelta/i.deltaTime},o.getAngularSpeed=function(i){return Math.abs(o.getAngularVelocity(i))},o.setAngularSpeed=function(i,l){o.setAngularVelocity(i,r.sign(o.getAngularVelocity(i))*l)},o.translate=function(i,l,u){o.setPosition(i,a.add(i.position,l),u)},o.rotate=function(i,l,u,f){if(!u)o.setAngle(i,i.angle+l,f);else{var d=Math.cos(l),p=Math.sin(l),x=i.position.x-u.x,y=i.position.y-u.y;o.setPosition(i,{x:u.x+(x*d-y*p),y:u.y+(x*p+y*d)},f),o.setAngle(i,i.angle+l,f)}},o.scale=function(i,l,u,f){var d=0,p=0;f=f||i.position;for(var x=i.inertia===1/0,y=0;y<i.parts.length;y++){var T=i.parts[y];T.scale.x=l,T.scale.y=u,g.scale(T.vertices,l,u,f),T.axes=s.fromVertices(T.vertices),T.area=g.area(T.vertices),o.setMass(T,i.density*T.area),g.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),o.setInertia(T,o._inertiaScale*g.inertia(T.vertices,T.mass)),g.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(d+=T.area,p+=T.inertia),T.position.x=f.x+(T.position.x-f.x)*l,T.position.y=f.y+(T.position.y-f.y)*u,e.update(T.bounds,T.vertices,i.velocity)}i.parts.length>1&&(i.area=d,i.isStatic||(o.setMass(i,i.density*d),o.setInertia(i,p))),i.circleRadius&&(l===u?i.circleRadius*=l:i.circleRadius=null),x&&o.setInertia(i,1/0)},o.update=function(i,l){l=(typeof l<"u"?l:16.666666666666668)*i.timeScale;var u=l*l,f=o._timeCorrection?l/(i.deltaTime||l):1,d=1-i.frictionAir*(l/r._baseDelta),p=(i.position.x-i.positionPrev.x)*f,x=(i.position.y-i.positionPrev.y)*f;i.velocity.x=p*d+i.force.x/i.mass*u,i.velocity.y=x*d+i.force.y/i.mass*u,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=l,i.angularVelocity=(i.angle-i.anglePrev)*d*f+i.torque/i.inertia*u,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=a.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var y=0;y<i.parts.length;y++){var T=i.parts[y];g.translate(T.vertices,i.velocity),y>0&&(T.position.x+=i.velocity.x,T.position.y+=i.velocity.y),i.angularVelocity!==0&&(g.rotate(T.vertices,i.angularVelocity,i.position),s.rotate(T.axes,i.angularVelocity),y>0&&a.rotateAbout(T.position,i.angularVelocity,i.position,T.position)),e.update(T.bounds,T.vertices,i.velocity)}},o.updateVelocities=function(i){var l=o._baseDelta/i.deltaTime,u=i.velocity;u.x=(i.position.x-i.positionPrev.x)*l,u.y=(i.position.y-i.positionPrev.y)*l,i.speed=Math.sqrt(u.x*u.x+u.y*u.y),i.angularVelocity=(i.angle-i.anglePrev)*l,i.angularSpeed=Math.abs(i.angularVelocity)},o.applyForce=function(i,l,u){var f={x:l.x-i.position.x,y:l.y-i.position.y};i.force.x+=u.x,i.force.y+=u.y,i.torque+=f.x*u.y-f.y*u.x},o._totalProperties=function(i){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},u=i.parts.length===1?0:1;u<i.parts.length;u++){var f=i.parts[u],d=f.mass!==1/0?f.mass:1;l.mass+=d,l.area+=f.area,l.inertia+=f.inertia,l.centre=a.add(l.centre,a.mult(f.position,d))}return l.centre=a.div(l.centre,l.mass),l},o.wrap=function(i,l){var u=e.wrap(i.bounds,l);return u&&o.translate(i,u),u}})()},69351:(c,S,t)=>{var o={};c.exports=o;var g=t(35810),a=t(53402),n=t(15647),r=t(22562);(function(){o.create=function(e){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},o.setModified=function(e,s,h,i){if(g.trigger(e,"compositeModified",e),e.isModified=s,s&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),h&&e.parent&&o.setModified(e.parent,s,h,i),i)for(var l=0;l<e.composites.length;l++){var u=e.composites[l];o.setModified(u,s,h,i)}},o.add=function(e,s){var h=[].concat(s);g.trigger(e,"beforeAdd",{object:s});for(var i=0;i<h.length;i++){var l=h[i];switch(l.type){case"body":if(l.parent!==l){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,l);break;case"constraint":o.addConstraint(e,l);break;case"composite":o.addComposite(e,l);break;case"mouseConstraint":o.addConstraint(e,l.constraint);break}}return g.trigger(e,"afterAdd",{object:s}),e},o.remove=function(e,s,h){var i=[].concat(s);g.trigger(e,"beforeRemove",{object:s});for(var l=0;l<i.length;l++){var u=i[l];switch(u.type){case"body":o.removeBody(e,u,h);break;case"constraint":o.removeConstraint(e,u,h);break;case"composite":o.removeComposite(e,u,h);break;case"mouseConstraint":o.removeConstraint(e,u.constraint);break}}return g.trigger(e,"afterRemove",{object:s}),e},o.addComposite=function(e,s){return e.composites.push(s),s.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,s,h){var i=a.indexOf(e.composites,s);if(i!==-1){var l=o.allBodies(s);o.removeCompositeAt(e,i);for(var u=0;u<l.length;u++)l[u].sleepCounter=0}if(h)for(var u=0;u<e.composites.length;u++)o.removeComposite(e.composites[u],s,!0);return e},o.removeCompositeAt=function(e,s){return e.composites.splice(s,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,s){return e.bodies.push(s),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,s,h){var i=a.indexOf(e.bodies,s);if(i!==-1&&(o.removeBodyAt(e,i),s.sleepCounter=0),h)for(var l=0;l<e.composites.length;l++)o.removeBody(e.composites[l],s,!0);return e},o.removeBodyAt=function(e,s){return e.bodies.splice(s,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,s){return e.constraints.push(s),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,s,h){var i=a.indexOf(e.constraints,s);if(i!==-1&&o.removeConstraintAt(e,i),h)for(var l=0;l<e.composites.length;l++)o.removeConstraint(e.composites[l],s,!0);return e},o.removeConstraintAt=function(e,s){return e.constraints.splice(s,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,s,h){if(h)for(var i=0;i<e.composites.length;i++)o.clear(e.composites[i],s,!0);return s?e.bodies=e.bodies.filter(function(l){return l.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var s=[].concat(e.bodies),h=0;h<e.composites.length;h++)s=s.concat(o.allBodies(e.composites[h]));return e.cache&&(e.cache.allBodies=s),s},o.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var s=[].concat(e.constraints),h=0;h<e.composites.length;h++)s=s.concat(o.allConstraints(e.composites[h]));return e.cache&&(e.cache.allConstraints=s),s},o.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var s=[].concat(e.composites),h=0;h<e.composites.length;h++)s=s.concat(o.allComposites(e.composites[h]));return e.cache&&(e.cache.allComposites=s),s},o.get=function(e,s,h){var i,l;switch(h){case"body":i=o.allBodies(e);break;case"constraint":i=o.allConstraints(e);break;case"composite":i=o.allComposites(e).concat(e);break}return i?(l=i.filter(function(u){return u.id.toString()===s.toString()}),l.length===0?null:l[0]):null},o.move=function(e,s,h){return o.remove(e,s),o.add(h,s),e},o.rebase=function(e){for(var s=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),h=0;h<s.length;h++)s[h].id=a.nextId();return e},o.translate=function(e,s,h){for(var i=h?o.allBodies(e):e.bodies,l=0;l<i.length;l++)r.translate(i[l],s);return e},o.rotate=function(e,s,h,i){for(var l=Math.cos(s),u=Math.sin(s),f=i?o.allBodies(e):e.bodies,d=0;d<f.length;d++){var p=f[d],x=p.position.x-h.x,y=p.position.y-h.y;r.setPosition(p,{x:h.x+(x*l-y*u),y:h.y+(x*u+y*l)}),r.rotate(p,s)}return e},o.scale=function(e,s,h,i,l){for(var u=l?o.allBodies(e):e.bodies,f=0;f<u.length;f++){var d=u[f],p=d.position.x-i.x,x=d.position.y-i.y;r.setPosition(d,{x:i.x+p*s,y:i.y+x*h}),r.scale(d,s,h)}return e},o.bounds=function(e){for(var s=o.allBodies(e),h=[],i=0;i<s.length;i+=1){var l=s[i];h.push(l.bounds.min,l.bounds.max)}return n.create(h)},o.wrap=function(e,s){var h=n.wrap(o.bounds(e),s);return h&&o.translate(e,h),h}})()},4372:(c,S,t)=>{var o={};c.exports=o;var g=t(69351);(function(){o.create=g.create,o.add=g.add,o.remove=g.remove,o.clear=g.clear,o.addComposite=g.addComposite,o.addBody=g.addBody,o.addConstraint=g.addConstraint})()},52284:(c,S,t)=>{var o={};c.exports=o;var g=t(41598),a=t(4506);(function(){var n=[],r={overlap:0,axis:null},e={overlap:0,axis:null};o.create=function(s,h){return{pair:null,collided:!1,bodyA:s,bodyB:h,parentA:s.parent,parentB:h.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},o.collides=function(s,h,i){if(o._overlapAxes(r,s.vertices,h.vertices,s.axes),r.overlap<=0||(o._overlapAxes(e,h.vertices,s.vertices,h.axes),e.overlap<=0))return null;var l=i&&i.table[a.id(s,h)],u;l?u=l.collision:(u=o.create(s,h),u.collided=!0,u.bodyA=s.id<h.id?s:h,u.bodyB=s.id<h.id?h:s,u.parentA=u.bodyA.parent,u.parentB=u.bodyB.parent),s=u.bodyA,h=u.bodyB;var f;r.overlap<e.overlap?f=r:f=e;var d=u.normal,p=u.tangent,x=u.penetration,y=u.supports,T=f.overlap,C=f.axis,A=C.x,R=C.y,M=h.position.x-s.position.x,L=h.position.y-s.position.y;A*M+R*L>=0&&(A=-A,R=-R),d.x=A,d.y=R,p.x=-R,p.y=A,x.x=A*T,x.y=R*T,u.depth=T;var I=o._findSupports(s,h,d,1),O=0;if(g.contains(s.vertices,I[0])&&(y[O++]=I[0]),g.contains(s.vertices,I[1])&&(y[O++]=I[1]),O<2){var D=o._findSupports(h,s,d,-1);g.contains(h.vertices,D[0])&&(y[O++]=D[0]),O<2&&g.contains(h.vertices,D[1])&&(y[O++]=D[1])}return O===0&&(y[O++]=I[0]),u.supportCount=O,u},o._overlapAxes=function(s,h,i,l){var u=h.length,f=i.length,d=h[0].x,p=h[0].y,x=i[0].x,y=i[0].y,T=l.length,C=Number.MAX_VALUE,A=0,R,M,L,I,O,D;for(O=0;O<T;O++){var B=l[O],V=B.x,W=B.y,Y=d*V+p*W,X=x*V+y*W,U=Y,z=X;for(D=1;D<u;D+=1)I=h[D].x*V+h[D].y*W,I>U?U=I:I<Y&&(Y=I);for(D=1;D<f;D+=1)I=i[D].x*V+i[D].y*W,I>z?z=I:I<X&&(X=I);if(M=U-X,L=z-Y,R=M<L?M:L,R<C&&(C=R,A=O,R<=0))break}s.axis=l[A],s.overlap=C},o._findSupports=function(s,h,i,l){var u=h.vertices,f=u.length,d=s.position.x,p=s.position.y,x=i.x*l,y=i.y*l,T=u[0],C=T,A=x*(d-C.x)+y*(p-C.y),R,M,L;for(L=1;L<f;L+=1)C=u[L],M=x*(d-C.x)+y*(p-C.y),M<A&&(A=M,T=C);return R=u[(f+T.index-1)%f],A=x*(d-R.x)+y*(p-R.y),C=u[(T.index+1)%f],x*(d-C.x)+y*(p-C.y)<A?(n[0]=T,n[1]=C,n):(n[0]=T,n[1]=R,n)}})()},43424:c=>{var S={};c.exports=S,function(){S.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},81388:(c,S,t)=>{var o={};c.exports=o;var g=t(53402),a=t(52284);(function(){o.create=function(n){var r={bodies:[],collisions:[],pairs:null};return g.extend(r,n)},o.setBodies=function(n,r){n.bodies=r.slice(0)},o.clear=function(n){n.bodies=[],n.collisions=[]},o.collisions=function(n){var r=n.pairs,e=n.bodies,s=e.length,h=o.canCollide,i=a.collides,l=n.collisions,u=0,f,d;for(e.sort(o._compareBoundsX),f=0;f<s;f++){var p=e[f],x=p.bounds,y=p.bounds.max.x,T=p.bounds.max.y,C=p.bounds.min.y,A=p.isStatic||p.isSleeping,R=p.parts.length,M=R===1;for(d=f+1;d<s;d++){var L=e[d],I=L.bounds;if(I.min.x>y)break;if(!(T<I.min.y||C>I.max.y)&&!(A&&(L.isStatic||L.isSleeping))&&h(p.collisionFilter,L.collisionFilter)){var O=L.parts.length;if(M&&O===1){var D=i(p,L,r);D&&(l[u++]=D)}else for(var B=R>1?1:0,V=O>1?1:0,W=B;W<R;W++)for(var Y=p.parts[W],x=Y.bounds,X=V;X<O;X++){var U=L.parts[X],I=U.bounds;if(!(x.min.x>I.max.x||x.max.x<I.min.x||x.max.y<I.min.y||x.min.y>I.max.y)){var D=i(Y,U,r);D&&(l[u++]=D)}}}}}return l.length!==u&&(l.length=u),l},o.canCollide=function(n,r){return n.group===r.group&&n.group!==0?n.group>0:(n.mask&r.category)!==0&&(r.mask&n.category)!==0},o._compareBoundsX=function(n,r){return n.bounds.min.x-r.bounds.min.x}})()},4506:(c,S,t)=>{var o={};c.exports=o;var g=t(43424);(function(){o.create=function(a,n){var r=a.bodyA,e=a.bodyB,s={id:o.id(r,e),bodyA:r,bodyB:e,collision:a,contacts:[g.create(),g.create()],contactCount:0,separation:0,isActive:!0,isSensor:r.isSensor||e.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(s,a,n),s},o.update=function(a,n,r){var e=n.supports,s=n.supportCount,h=a.contacts,i=n.parentA,l=n.parentB;a.isActive=!0,a.timeUpdated=r,a.collision=n,a.separation=n.depth,a.inverseMass=i.inverseMass+l.inverseMass,a.friction=i.friction<l.friction?i.friction:l.friction,a.frictionStatic=i.frictionStatic>l.frictionStatic?i.frictionStatic:l.frictionStatic,a.restitution=i.restitution>l.restitution?i.restitution:l.restitution,a.slop=i.slop>l.slop?i.slop:l.slop,a.contactCount=s,n.pair=a;var u=e[0],f=h[0],d=e[1],p=h[1];(p.vertex===u||f.vertex===d)&&(h[1]=f,h[0]=f=p,p=h[1]),f.vertex=u,p.vertex=d},o.setActive=function(a,n,r){n?(a.isActive=!0,a.timeUpdated=r):(a.isActive=!1,a.contactCount=0)},o.id=function(a,n){return a.id<n.id?a.id.toString(36)+":"+n.id.toString(36):n.id.toString(36)+":"+a.id.toString(36)}})()},99561:(c,S,t)=>{var o={};c.exports=o;var g=t(4506),a=t(53402);(function(){o.create=function(n){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},o.update=function(n,r,e){var s=g.update,h=g.create,i=g.setActive,l=n.table,u=n.list,f=u.length,d=f,p=n.collisionStart,x=n.collisionEnd,y=n.collisionActive,T=r.length,C=0,A=0,R=0,M,L,I;for(I=0;I<T;I++)M=r[I],L=M.pair,L?(L.isActive&&(y[R++]=L),s(L,M,e)):(L=h(M,e),l[L.id]=L,p[C++]=L,u[d++]=L);for(d=0,f=u.length,I=0;I<f;I++)L=u[I],L.timeUpdated>=e?u[d++]=L:(i(L,!1,e),L.collision.bodyA.sleepCounter>0&&L.collision.bodyB.sleepCounter>0?u[d++]=L:(x[A++]=L,delete l[L.id]));u.length!==d&&(u.length=d),p.length!==C&&(p.length=C),x.length!==A&&(x.length=A),y.length!==R&&(y.length=R)},o.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},73296:(c,S,t)=>{var o={};c.exports=o;var g=t(31725),a=t(52284),n=t(15647),r=t(66280),e=t(41598);(function(){o.collides=function(s,h){for(var i=[],l=h.length,u=s.bounds,f=a.collides,d=n.overlaps,p=0;p<l;p++){var x=h[p],y=x.parts.length,T=y===1?0:1;if(s!==x&&d(x.bounds,u))for(var C=T;C<y;C++){var A=x.parts[C];if(d(A.bounds,u)){var R=f(A,s);if(R){i.push(R);break}}}}return i},o.ray=function(s,h,i,l){l=l||1e-100;for(var u=g.angle(h,i),f=g.magnitude(g.sub(h,i)),d=(i.x+h.x)*.5,p=(i.y+h.y)*.5,x=r.rectangle(d,p,f,l,{angle:u}),y=o.collides(x,s),T=0;T<y.length;T+=1){var C=y[T];C.body=C.bodyB=C.bodyA}return y},o.region=function(s,h,i){for(var l=[],u=0;u<s.length;u++){var f=s[u],d=n.overlaps(f.bounds,h);(d&&!i||!d&&i)&&l.push(f)}return l},o.point=function(s,h){for(var i=[],l=0;l<s.length;l++){var u=s[l];if(n.contains(u.bounds,h))for(var f=u.parts.length===1?0:1;f<u.parts.length;f++){var d=u.parts[f];if(n.contains(d.bounds,h)&&e.contains(d.vertices,h)){i.push(u);break}}}return i}})()},66272:(c,S,t)=>{var o={};c.exports=o;var g=t(41598),a=t(53402),n=t(15647);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(r){var e,s,h,i=r.length;for(e=0;e<i;e++)s=r[e],s.isActive&&(h=s.contactCount,s.collision.parentA.totalContacts+=h,s.collision.parentB.totalContacts+=h)},o.solvePosition=function(r,e,s){var h,i,l,u,f,d,p,x,y=o._positionDampen*(s||1),T=a.clamp(e/a._baseDelta,0,1),C=r.length;for(h=0;h<C;h++)i=r[h],!(!i.isActive||i.isSensor)&&(l=i.collision,u=l.parentA,f=l.parentB,d=l.normal,i.separation=l.depth+d.x*(f.positionImpulse.x-u.positionImpulse.x)+d.y*(f.positionImpulse.y-u.positionImpulse.y));for(h=0;h<C;h++)i=r[h],!(!i.isActive||i.isSensor)&&(l=i.collision,u=l.parentA,f=l.parentB,d=l.normal,x=i.separation-i.slop*T,(u.isStatic||f.isStatic)&&(x*=2),u.isStatic||u.isSleeping||(p=y/u.totalContacts,u.positionImpulse.x+=d.x*x*p,u.positionImpulse.y+=d.y*x*p),f.isStatic||f.isSleeping||(p=y/f.totalContacts,f.positionImpulse.x-=d.x*x*p,f.positionImpulse.y-=d.y*x*p))},o.postSolvePosition=function(r){for(var e=o._positionWarming,s=r.length,h=g.translate,i=n.update,l=0;l<s;l++){var u=r[l],f=u.positionImpulse,d=f.x,p=f.y,x=u.velocity;if(u.totalContacts=0,d!==0||p!==0){for(var y=0;y<u.parts.length;y++){var T=u.parts[y];h(T.vertices,f),i(T.bounds,T.vertices,x),T.position.x+=d,T.position.y+=p}u.positionPrev.x+=d,u.positionPrev.y+=p,d*x.x+p*x.y<0?(f.x=0,f.y=0):(f.x*=e,f.y*=e)}}},o.preSolveVelocity=function(r){var e=r.length,s,h;for(s=0;s<e;s++){var i=r[s];if(!(!i.isActive||i.isSensor)){var l=i.contacts,u=i.contactCount,f=i.collision,d=f.parentA,p=f.parentB,x=f.normal,y=f.tangent;for(h=0;h<u;h++){var T=l[h],C=T.vertex,A=T.normalImpulse,R=T.tangentImpulse;if(A!==0||R!==0){var M=x.x*A+y.x*R,L=x.y*A+y.y*R;d.isStatic||d.isSleeping||(d.positionPrev.x+=M*d.inverseMass,d.positionPrev.y+=L*d.inverseMass,d.anglePrev+=d.inverseInertia*((C.x-d.position.x)*L-(C.y-d.position.y)*M)),p.isStatic||p.isSleeping||(p.positionPrev.x-=M*p.inverseMass,p.positionPrev.y-=L*p.inverseMass,p.anglePrev-=p.inverseInertia*((C.x-p.position.x)*L-(C.y-p.position.y)*M))}}}}},o.solveVelocity=function(r,e){var s=e/a._baseDelta,h=s*s,i=h*s,l=-o._restingThresh*s,u=o._restingThreshTangent,f=o._frictionNormalMultiplier*s,d=o._frictionMaxStatic,p=r.length,x,y,T,C;for(T=0;T<p;T++){var A=r[T];if(!(!A.isActive||A.isSensor)){var R=A.collision,M=R.parentA,L=R.parentB,I=R.normal.x,O=R.normal.y,D=R.tangent.x,B=R.tangent.y,V=A.inverseMass,W=A.friction*A.frictionStatic*f,Y=A.contacts,X=A.contactCount,U=1/X,z=M.position.x-M.positionPrev.x,G=M.position.y-M.positionPrev.y,b=M.angle-M.anglePrev,H=L.position.x-L.positionPrev.x,j=L.position.y-L.positionPrev.y,$=L.angle-L.anglePrev;for(C=0;C<X;C++){var k=Y[C],Q=k.vertex,_=Q.x-M.position.x,tt=Q.y-M.position.y,et=Q.x-L.position.x,it=Q.y-L.position.y,ot=z-tt*b,nt=G+_*b,ut=H-it*$,ct=j+et*$,pt=ot-ut,mt=nt-ct,ht=I*pt+O*mt,ft=D*pt+B*mt,dt=A.separation+ht,Ct=Math.min(dt,1);Ct=dt<0?0:Ct;var Lt=Ct*W;ft<-Lt||ft>Lt?(y=ft>0?ft:-ft,x=A.friction*(ft>0?1:-1)*i,x<-y?x=-y:x>y&&(x=y)):(x=ft,y=d);var Xt=_*O-tt*I,Mt=et*O-it*I,It=U/(V+M.inverseInertia*Xt*Xt+L.inverseInertia*Mt*Mt),kt=(1+A.restitution)*ht*It;if(x*=It,ht<l)k.normalImpulse=0;else{var ne=k.normalImpulse;k.normalImpulse+=kt,k.normalImpulse>0&&(k.normalImpulse=0),kt=k.normalImpulse-ne}if(ft<-u||ft>u)k.tangentImpulse=0;else{var Ut=k.tangentImpulse;k.tangentImpulse+=x,k.tangentImpulse<-y&&(k.tangentImpulse=-y),k.tangentImpulse>y&&(k.tangentImpulse=y),x=k.tangentImpulse-Ut}var zt=I*kt+D*x,Zt=O*kt+B*x;M.isStatic||M.isSleeping||(M.positionPrev.x+=zt*M.inverseMass,M.positionPrev.y+=Zt*M.inverseMass,M.anglePrev+=(_*Zt-tt*zt)*M.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=zt*L.inverseMass,L.positionPrev.y-=Zt*L.inverseMass,L.anglePrev-=(et*Zt-it*zt)*L.inverseInertia)}}}}})()},48140:(c,S,t)=>{var o={};c.exports=o;var g=t(41598),a=t(31725),n=t(53614),r=t(15647),e=t(66615),s=t(53402);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(h){var i=h;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var l=i.bodyA?a.add(i.bodyA.position,i.pointA):i.pointA,u=i.bodyB?a.add(i.bodyB.position,i.pointB):i.pointB,f=a.magnitude(a.sub(l,u));i.length=typeof i.length<"u"?i.length:f,i.id=i.id||s.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var d={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(d.type="pin",d.anchors=!1):i.stiffness<.9&&(d.type="spring"),i.render=s.extend(d,i.render),i},o.preSolveAll=function(h){for(var i=0;i<h.length;i+=1){var l=h[i],u=l.constraintImpulse;l.isStatic||u.x===0&&u.y===0&&u.angle===0||(l.position.x+=u.x,l.position.y+=u.y,l.angle+=u.angle)}},o.solveAll=function(h,i){for(var l=s.clamp(i/s._baseDelta,0,1),u=0;u<h.length;u+=1){var f=h[u],d=!f.bodyA||f.bodyA&&f.bodyA.isStatic,p=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(d||p)&&o.solve(h[u],l)}for(u=0;u<h.length;u+=1)f=h[u],d=!f.bodyA||f.bodyA&&f.bodyA.isStatic,p=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!d&&!p&&o.solve(h[u],l)},o.solve=function(h,i){var l=h.bodyA,u=h.bodyB,f=h.pointA,d=h.pointB;if(!(!l&&!u)){l&&!l.isStatic&&(a.rotate(f,l.angle-h.angleA,f),h.angleA=l.angle),u&&!u.isStatic&&(a.rotate(d,u.angle-h.angleB,d),h.angleB=u.angle);var p=f,x=d;if(l&&(p=a.add(l.position,f)),u&&(x=a.add(u.position,d)),!(!p||!x)){var y=a.sub(p,x),T=a.magnitude(y);T<o._minLength&&(T=o._minLength);var C=(T-h.length)/T,A=h.stiffness>=1||h.length===0,R=A?h.stiffness*i:h.stiffness*i*i,M=h.damping*i,L=a.mult(y,C*R),I=(l?l.inverseMass:0)+(u?u.inverseMass:0),O=(l?l.inverseInertia:0)+(u?u.inverseInertia:0),D=I+O,B,V,W,Y,X;if(M>0){var U=a.create();W=a.div(y,T),X=a.sub(u&&a.sub(u.position,u.positionPrev)||U,l&&a.sub(l.position,l.positionPrev)||U),Y=a.dot(W,X)}l&&!l.isStatic&&(V=l.inverseMass/I,l.constraintImpulse.x-=L.x*V,l.constraintImpulse.y-=L.y*V,l.position.x-=L.x*V,l.position.y-=L.y*V,M>0&&(l.positionPrev.x-=M*W.x*Y*V,l.positionPrev.y-=M*W.y*Y*V),B=a.cross(f,L)/D*o._torqueDampen*l.inverseInertia*(1-h.angularStiffness),l.constraintImpulse.angle-=B,l.angle-=B),u&&!u.isStatic&&(V=u.inverseMass/I,u.constraintImpulse.x+=L.x*V,u.constraintImpulse.y+=L.y*V,u.position.x+=L.x*V,u.position.y+=L.y*V,M>0&&(u.positionPrev.x+=M*W.x*Y*V,u.positionPrev.y+=M*W.y*Y*V),B=a.cross(d,L)/D*o._torqueDampen*u.inverseInertia*(1-h.angularStiffness),u.constraintImpulse.angle+=B,u.angle+=B)}}},o.postSolveAll=function(h){for(var i=0;i<h.length;i++){var l=h[i],u=l.constraintImpulse;if(!(l.isStatic||u.x===0&&u.y===0&&u.angle===0)){n.set(l,!1);for(var f=0;f<l.parts.length;f++){var d=l.parts[f];g.translate(d.vertices,u),f>0&&(d.position.x+=u.x,d.position.y+=u.y),u.angle!==0&&(g.rotate(d.vertices,u.angle,l.position),e.rotate(d.axes,u.angle),f>0&&a.rotateAbout(d.position,u.angle,l.position,d.position)),r.update(d.bounds,d.vertices,l.velocity)}u.angle*=o._warming,u.x*=o._warming,u.y*=o._warming}}},o.pointAWorld=function(h){return{x:(h.bodyA?h.bodyA.position.x:0)+(h.pointA?h.pointA.x:0),y:(h.bodyA?h.bodyA.position.y:0)+(h.pointA?h.pointA.y:0)}},o.pointBWorld=function(h){return{x:(h.bodyB?h.bodyB.position.x:0)+(h.pointB?h.pointB.x:0),y:(h.bodyB?h.bodyB.position.y:0)+(h.pointB?h.pointB.y:0)}},o.currentLength=function(h){var i=(h.bodyA?h.bodyA.position.x:0)+(h.pointA?h.pointA.x:0),l=(h.bodyA?h.bodyA.position.y:0)+(h.pointA?h.pointA.y:0),u=(h.bodyB?h.bodyB.position.x:0)+(h.pointB?h.pointB.x:0),f=(h.bodyB?h.bodyB.position.y:0)+(h.pointB?h.pointB.y:0),d=i-u,p=l-f;return Math.sqrt(d*d+p*p)}})()},53402:(c,S,t)=>{var o={};c.exports=o,function(){o._baseDelta=16.666666666666668,o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o._warnedOnce={},o._decomp=null,o.extend=function(a,n){var r,e;typeof n=="boolean"?(r=2,e=n):(r=1,e=!0);for(var s=r;s<arguments.length;s++){var h=arguments[s];if(h)for(var i in h)e&&h[i]&&h[i].constructor===Object&&(!a[i]||a[i].constructor===Object)?(a[i]=a[i]||{},o.extend(a[i],e,h[i])):a[i]=h[i]}return a},o.clone=function(a,n){return o.extend({},n,a)},o.keys=function(a){if(Object.keys)return Object.keys(a);var n=[];for(var r in a)n.push(r);return n},o.values=function(a){var n=[];if(Object.keys){for(var r=Object.keys(a),e=0;e<r.length;e++)n.push(a[r[e]]);return n}for(var s in a)n.push(a[s]);return n},o.get=function(a,n,r,e){n=n.split(".").slice(r,e);for(var s=0;s<n.length;s+=1)a=a[n[s]];return a},o.set=function(a,n,r,e,s){var h=n.split(".").slice(e,s);return o.get(a,n,0,-1)[h[h.length-1]]=r,r},o.shuffle=function(a){for(var n=a.length-1;n>0;n--){var r=Math.floor(o.random()*(n+1)),e=a[n];a[n]=a[r],a[r]=e}return a},o.choose=function(a){return a[Math.floor(o.random()*a.length)]},o.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},o.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},o.isFunction=function(a){return typeof a=="function"},o.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},o.isString=function(a){return toString.call(a)==="[object String]"},o.clamp=function(a,n,r){return a<n?n:a>r?r:a},o.sign=function(a){return a<0?-1:1},o.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-o._nowStartTime},o.random=function(a,n){return a=typeof a<"u"?a:0,n=typeof n<"u"?n:1,a+g()*(n-a)};var g=function(){return o._seed=(o._seed*9301+49297)%233280,o._seed/233280};o.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");o._warnedOnce[a]||(o.warn(a),o._warnedOnce[a]=!0)},o.deprecated=function(a,n,r){a[n]=o.chain(function(){o.warnOnce(" deprecated ",r)},a[n])},o.nextId=function(){return o._nextId++},o.indexOf=function(a,n){if(a.indexOf)return a.indexOf(n);for(var r=0;r<a.length;r++)if(a[r]===n)return r;return-1},o.map=function(a,n){if(a.map)return a.map(n);for(var r=[],e=0;e<a.length;e+=1)r.push(n(a[e]));return r},o.topologicalSort=function(a){var n=[],r=[],e=[];for(var s in a)!r[s]&&!e[s]&&o._topologicalSort(s,r,e,a,n);return n},o._topologicalSort=function(a,n,r,e,s){var h=e[a]||[];r[a]=!0;for(var i=0;i<h.length;i+=1){var l=h[i];r[l]||n[l]||o._topologicalSort(l,n,r,e,s)}r[a]=!1,n[a]=!0,s.push(a)},o.chain=function(){for(var a=[],n=0;n<arguments.length;n+=1){var r=arguments[n];r._chained?a.push.apply(a,r._chained):a.push(r)}var e=function(){for(var s,h=new Array(arguments.length),i=0,l=arguments.length;i<l;i++)h[i]=arguments[i];for(i=0;i<a.length;i+=1){var u=a[i].apply(s,h);typeof u<"u"&&(s=u)}return s};return e._chained=a,e},o.chainPathBefore=function(a,n,r){return o.set(a,n,o.chain(r,o.get(a,n)))},o.chainPathAfter=function(a,n,r){return o.set(a,n,o.chain(o.get(a,n),r))},o.setDecomp=function(a){o._decomp=a},o.getDecomp=function(){var a=o._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof t.g<"u"&&(a=t.g.decomp)}catch{a=null}return a}}()},48413:(c,S,t)=>{var o={};c.exports=o;var g=t(53614),a=t(66272),n=t(81388),r=t(99561),e=t(35810),s=t(69351),h=t(48140),i=t(53402),l=t(22562);(function(){o._deltaMax=16.666666666666668,o.create=function(u){u=u||{};var f={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},d=i.extend(f,u);return d.world=u.world||s.create({label:"World"}),d.pairs=u.pairs||r.create(),d.detector=u.detector||n.create(),d.detector.pairs=d.pairs,d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},o.update=function(u,f){var d=i.now(),p=u.world,x=u.detector,y=u.pairs,T=u.timing,C=T.timestamp,A;f>o._deltaMax&&i.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",o._deltaMax.toFixed(3),"ms."),f=typeof f<"u"?f:i._baseDelta,f*=T.timeScale,T.timestamp+=f,T.lastDelta=f;var R={timestamp:T.timestamp,delta:f};e.trigger(u,"beforeUpdate",R);var M=s.allBodies(p),L=s.allConstraints(p),I=s.allComposites(p);for(p.isModified&&(n.setBodies(x,M),s.setModified(p,!1,!1,!0)),u.enableSleeping&&g.update(M,f),o._bodiesApplyGravity(M,u.gravity),o.wrap(M,I),o.attractors(M),f>0&&o._bodiesUpdate(M,f),e.trigger(u,"beforeSolve",R),h.preSolveAll(M),A=0;A<u.constraintIterations;A++)h.solveAll(L,f);h.postSolveAll(M);var O=n.collisions(x);r.update(y,O,C),u.enableSleeping&&g.afterCollisions(y.list),y.collisionStart.length>0&&e.trigger(u,"collisionStart",{pairs:y.collisionStart,timestamp:T.timestamp,delta:f});var D=i.clamp(20/u.positionIterations,0,1);for(a.preSolvePosition(y.list),A=0;A<u.positionIterations;A++)a.solvePosition(y.list,f,D);for(a.postSolvePosition(M),h.preSolveAll(M),A=0;A<u.constraintIterations;A++)h.solveAll(L,f);for(h.postSolveAll(M),a.preSolveVelocity(y.list),A=0;A<u.velocityIterations;A++)a.solveVelocity(y.list,f);return o._bodiesUpdateVelocities(M),y.collisionActive.length>0&&e.trigger(u,"collisionActive",{pairs:y.collisionActive,timestamp:T.timestamp,delta:f}),y.collisionEnd.length>0&&e.trigger(u,"collisionEnd",{pairs:y.collisionEnd,timestamp:T.timestamp,delta:f}),o._bodiesClearForces(M),e.trigger(u,"afterUpdate",R),u.timing.lastElapsed=i.now()-d,u},o.merge=function(u,f){if(i.extend(u,f),f.world){u.world=f.world,o.clear(u);for(var d=s.allBodies(u.world),p=0;p<d.length;p++){var x=d[p];g.set(x,!1),x.id=i.nextId()}}},o.clear=function(u){r.clear(u.pairs),n.clear(u.detector)},o._bodiesClearForces=function(u){for(var f=u.length,d=0;d<f;d++){var p=u[d];p.force.x=0,p.force.y=0,p.torque=0}},o._bodiesApplyGravity=function(u,f){var d=typeof f.scale<"u"?f.scale:.001,p=u.length;if(!(f.x===0&&f.y===0||d===0))for(var x=0;x<p;x++){var y=u[x];y.ignoreGravity||y.isStatic||y.isSleeping||(y.force.y+=y.mass*f.y*d,y.force.x+=y.mass*f.x*d)}},o._bodiesUpdate=function(u,f){for(var d=u.length,p=0;p<d;p++){var x=u[p];x.isStatic||x.isSleeping||l.update(x,f)}},o._bodiesUpdateVelocities=function(u){for(var f=u.length,d=0;d<f;d++)l.updateVelocities(u[d])},o.wrap=function(u,f){for(var d=0;d<u.length;d+=1){var p=u[d];p.wrapBounds!==null&&l.wrap(p,p.wrapBounds)}for(d=0;d<f.length;d+=1){var x=f[d];x.wrapBounds!==null&&s.wrap(x,x.wrapBounds)}},o.attractors=function(u){for(var f=0;f<u.length;f++){var d=u[f],p=d.attractors;if(p&&p.length>0)for(var x=0;x<u.length;x++){var y=u[x];if(f!==x)for(var T=0;T<p.length;T++){var C=p[T],A=C;i.isFunction(C)&&(A=C(d,y)),A&&l.applyForce(y,y.position,A)}}}}})()},35810:(c,S,t)=>{var o={};c.exports=o;var g=t(53402);(function(){o.on=function(a,n,r){for(var e=n.split(" "),s,h=0;h<e.length;h++)s=e[h],a.events=a.events||{},a.events[s]=a.events[s]||[],a.events[s].push(r);return r},o.off=function(a,n,r){if(!n){a.events={};return}typeof n=="function"&&(r=n,n=g.keys(a.events).join(" "));for(var e=n.split(" "),s=0;s<e.length;s++){var h=a.events[e[s]],i=[];if(r&&h)for(var l=0;l<h.length;l++)h[l]!==r&&i.push(h[l]);a.events[e[s]]=i}},o.trigger=function(a,n,r){var e,s,h,i,l=a.events;if(l&&g.keys(l).length>0){r||(r={}),e=n.split(" ");for(var u=0;u<e.length;u++)if(s=e[u],h=l[s],h){i=g.clone(r,!1),i.name=s,i.source=a;for(var f=0;f<h.length;f++)h[f].apply(a,[i])}}}})()},6790:(c,S,t)=>{var o={};c.exports=o;var g=t(73832),a=t(53402);(function(){o.name="matter-js",o.version="0.20.0",o.uses=[],o.used=[],o.use=function(){g.use(o,Array.prototype.slice.call(arguments))},o.before=function(n,r){return n=n.replace(/^Matter./,""),a.chainPathBefore(o,n,r)},o.after=function(n,r){return n=n.replace(/^Matter./,""),a.chainPathAfter(o,n,r)}})()},73832:(c,S,t)=>{var o={};c.exports=o;var g=t(53402);(function(){o._registry={},o.register=function(a){if(o.isPlugin(a)||g.warn("Plugin.register:",o.toString(a),"does not implement all required fields."),a.name in o._registry){var n=o._registry[a.name],r=o.versionParse(a.version).number,e=o.versionParse(n.version).number;r>e?(g.warn("Plugin.register:",o.toString(n),"was upgraded to",o.toString(a)),o._registry[a.name]=a):r<e?g.warn("Plugin.register:",o.toString(n),"can not be downgraded to",o.toString(a)):a!==n&&g.warn("Plugin.register:",o.toString(a),"is already registered to different plugin object")}else o._registry[a.name]=a;return a},o.resolve=function(a){return o._registry[o.dependencyParse(a).name]},o.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},o.isPlugin=function(a){return a&&a.name&&a.version&&a.install},o.isUsed=function(a,n){return a.used.indexOf(n)>-1},o.isFor=function(a,n){var r=a.for&&o.dependencyParse(a.for);return!a.for||n.name===r.name&&o.versionSatisfies(n.version,r.range)},o.use=function(a,n){if(a.uses=(a.uses||[]).concat(n||[]),a.uses.length===0){g.warn("Plugin.use:",o.toString(a),"does not specify any dependencies to install.");return}for(var r=o.dependencies(a),e=g.topologicalSort(r),s=[],h=0;h<e.length;h+=1)if(e[h]!==a.name){var i=o.resolve(e[h]);if(!i){s.push(" "+e[h]);continue}o.isUsed(a,i.name)||(o.isFor(i,a)||(g.warn("Plugin.use:",o.toString(i),"is for",i.for,"but installed on",o.toString(a)+"."),i._warned=!0),i.install?i.install(a):(g.warn("Plugin.use:",o.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(s.push(" "+o.toString(i)),delete i._warned):s.push(" "+o.toString(i)),a.used.push(i.name))}s.length>0&&!i.silent&&g.info(s.join("  "))},o.dependencies=function(a,n){var r=o.dependencyParse(a),e=r.name;if(n=n||{},!(e in n)){a=o.resolve(a)||a,n[e]=g.map(a.uses||[],function(h){o.isPlugin(h)&&o.register(h);var i=o.dependencyParse(h),l=o.resolve(h);return l&&!o.versionSatisfies(l.version,i.range)?(g.warn("Plugin.dependencies:",o.toString(l),"does not satisfy",o.toString(i),"used by",o.toString(r)+"."),l._warned=!0,a._warned=!0):l||(g.warn("Plugin.dependencies:",o.toString(h),"used by",o.toString(r),"could not be resolved."),a._warned=!0),i.name});for(var s=0;s<n[e].length;s+=1)o.dependencies(n[e][s],n);return n}},o.dependencyParse=function(a){if(g.isString(a)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(a)||g.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},o.versionParse=function(a){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(a)||g.warn("Plugin.versionParse:",a,"is not a valid version or range.");var r=n.exec(a),e=Number(r[4]),s=Number(r[5]),h=Number(r[6]);return{isRange:!!(r[1]||r[2]),version:r[3],range:a,operator:r[1]||r[2]||"",major:e,minor:s,patch:h,parts:[e,s,h],prerelease:r[7],number:e*1e8+s*1e4+h}},o.versionSatisfies=function(a,n){n=n||"*";var r=o.versionParse(n),e=o.versionParse(a);if(r.isRange){if(r.operator==="*"||a==="*")return!0;if(r.operator===">")return e.number>r.number;if(r.operator===">=")return e.number>=r.number;if(r.operator==="~")return e.major===r.major&&e.minor===r.minor&&e.patch>=r.patch;if(r.operator==="^")return r.major>0?e.major===r.major&&e.number>=r.number:r.minor>0?e.minor===r.minor&&e.patch>=r.patch:e.patch===r.patch}return a===n||a==="*"}})()},13037:(c,S,t)=>{var o={};c.exports=o;var g=t(35810),a=t(48413),n=t(53402);(function(){o._maxFrameDelta=66.66666666666667,o._frameDeltaFallback=16.666666666666668,o._timeBufferMargin=1.5,o._elapsedNextEstimate=1,o._smoothingLowerBound=.1,o._smoothingUpperBound=.9,o.create=function(e){var s={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},h=n.extend(s,e);return h.fps=0,h},o.run=function(e,s){return e.timeBuffer=o._frameDeltaFallback,function h(i){e.frameRequestId=o._onNextFrame(e,h),i&&e.enabled&&o.tick(e,s,i)}(),e},o.tick=function(e,s,h){var i=n.now(),l=e.delta,u=0,f=h-e.timeLastTick;if((!f||!e.timeLastTick||f>Math.max(o._maxFrameDelta,e.maxFrameTime))&&(f=e.frameDelta||o._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(f),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var d=e.frameDeltaHistory.slice(0).sort(),p=e.frameDeltaHistory.slice(d.length*o._smoothingLowerBound,d.length*o._smoothingUpperBound),x=r(p);f=x||f}e.frameDeltaSnapping&&(f=1e3/Math.round(1e3/f)),e.frameDelta=f,e.timeLastTick=h,e.timeBuffer+=e.frameDelta,e.timeBuffer=n.clamp(e.timeBuffer,0,e.frameDelta+l*o._timeBufferMargin),e.lastUpdatesDeferred=0;var y=e.maxUpdates||Math.ceil(e.maxFrameTime/l),T={timestamp:s.timing.timestamp};g.trigger(e,"beforeTick",T),g.trigger(e,"tick",T);for(var C=n.now();l>0&&e.timeBuffer>=l*o._timeBufferMargin;){g.trigger(e,"beforeUpdate",T),a.update(s,l),g.trigger(e,"afterUpdate",T),e.timeBuffer-=l,u+=1;var A=n.now()-i,R=n.now()-C,M=A+o._elapsedNextEstimate*R/u;if(u>=y||M>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/l-o._timeBufferMargin));break}}s.timing.lastUpdatesPerFrame=u,g.trigger(e,"afterTick",T),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/l)>y?n.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&n.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof e.isFixed<"u"&&n.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&n.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),e.fps!==0&&n.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},o.stop=function(e){o._cancelNextFrame(e)},o._onNextFrame=function(e,s){if(typeof window<"u"&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(s);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},o._cancelNextFrame=function(e){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var r=function(e){for(var s=0,h=e.length,i=0;i<h;i+=1)s+=e[i];return s/h||0}})()},53614:(c,S,t)=>{var o={};c.exports=o;var g=t(22562),a=t(35810),n=t(53402);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(r,e){for(var s=e/n._baseDelta,h=o._motionSleepThreshold,i=0;i<r.length;i++){var l=r[i],u=g.getSpeed(l),f=g.getAngularSpeed(l),d=u*u+f*f;if(l.force.x!==0||l.force.y!==0){o.set(l,!1);continue}var p=Math.min(l.motion,d),x=Math.max(l.motion,d);l.motion=o._minBias*p+(1-o._minBias)*x,l.sleepThreshold>0&&l.motion<h?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/s&&o.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},o.afterCollisions=function(r){for(var e=o._motionSleepThreshold,s=0;s<r.length;s++){var h=r[s];if(h.isActive){var i=h.collision,l=i.bodyA.parent,u=i.bodyB.parent;if(!(l.isSleeping&&u.isSleeping||l.isStatic||u.isStatic)&&(l.isSleeping||u.isSleeping)){var f=l.isSleeping&&!l.isStatic?l:u,d=f===l?u:l;!f.isStatic&&d.motion>e&&o.set(f,!1)}}}},o.set=function(r,e){var s=r.isSleeping;e?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,s||a.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,s&&a.trigger(r,"sleepEnd"))}})()},66280:(c,S,t)=>{var o={};c.exports=o;var g=t(41598),a=t(53402),n=t(22562),r=t(15647),e=t(31725);(function(){o.rectangle=function(s,h,i,l,u){u=u||{};var f={label:"Rectangle Body",position:{x:s,y:h},vertices:g.fromPath("L 0 0 L "+i+" 0 L "+i+" "+l+" L 0 "+l)};if(u.chamfer){var d=u.chamfer;f.vertices=g.chamfer(f.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete u.chamfer}return n.create(a.extend({},f,u))},o.trapezoid=function(s,h,i,l,u,f){f=f||{},u>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),u*=.5;var d=(1-u*2)*i,p=i*u,x=p+d,y=x+p,T;u<.5?T="L 0 0 L "+p+" "+-l+" L "+x+" "+-l+" L "+y+" 0":T="L 0 0 L "+x+" "+-l+" L "+y+" 0";var C={label:"Trapezoid Body",position:{x:s,y:h},vertices:g.fromPath(T)};if(f.chamfer){var A=f.chamfer;C.vertices=g.chamfer(C.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete f.chamfer}return n.create(a.extend({},C,f))},o.circle=function(s,h,i,l,u){l=l||{};var f={label:"Circle Body",circleRadius:i};u=u||25;var d=Math.ceil(Math.max(10,Math.min(u,i)));return d%2===1&&(d+=1),o.polygon(s,h,d,i,a.extend({},f,l))},o.polygon=function(s,h,i,l,u){if(u=u||{},i<3)return o.circle(s,h,l,u);for(var f=2*Math.PI/i,d="",p=f*.5,x=0;x<i;x+=1){var y=p+x*f,T=Math.cos(y)*l,C=Math.sin(y)*l;d+="L "+T.toFixed(3)+" "+C.toFixed(3)+" "}var A={label:"Polygon Body",position:{x:s,y:h},vertices:g.fromPath(d)};if(u.chamfer){var R=u.chamfer;A.vertices=g.chamfer(A.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete u.chamfer}return n.create(a.extend({},A,u))},o.fromVertices=function(s,h,i,l,u,f,d,p){var x=a.getDecomp(),y,T,C,A,R,M,L,I,O,D,B;for(y=!!(x&&x.quickDecomp),l=l||{},C=[],u=typeof u<"u"?u:!1,f=typeof f<"u"?f:.01,d=typeof d<"u"?d:10,p=typeof p<"u"?p:.01,a.isArray(i[0])||(i=[i]),D=0;D<i.length;D+=1)if(M=i[D],A=g.isConvex(M),R=!A,R&&!y&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),A||!y)A?M=g.clockwiseSort(M):M=g.hull(M),C.push({position:{x:s,y:h},vertices:M});else{var V=M.map(function(k){return[k.x,k.y]});x.makeCCW(V),f!==!1&&x.removeCollinearPoints(V,f),p!==!1&&x.removeDuplicatePoints&&x.removeDuplicatePoints(V,p);var W=x.quickDecomp(V);for(L=0;L<W.length;L++){var Y=W[L],X=Y.map(function(k){return{x:k[0],y:k[1]}});d>0&&g.area(X)<d||C.push({position:g.centre(X),vertices:X})}}for(L=0;L<C.length;L++)C[L]=n.create(a.extend(C[L],l));if(u){var U=5;for(L=0;L<C.length;L++){var z=C[L];for(I=L+1;I<C.length;I++){var G=C[I];if(r.overlaps(z.bounds,G.bounds)){var b=z.vertices,H=G.vertices;for(O=0;O<z.vertices.length;O++)for(B=0;B<G.vertices.length;B++){var j=e.magnitudeSquared(e.sub(b[(O+1)%b.length],H[B])),$=e.magnitudeSquared(e.sub(b[O],H[(B+1)%H.length]));j<U&&$<U&&(b[O].isInternal=!0,H[B].isInternal=!0)}}}}}return C.length>1?(T=n.create(a.extend({parts:C.slice(0)},l)),n.setPosition(T,{x:s,y:h}),T):C[0]},o.flagCoincidentParts=function(s,h){h===void 0&&(h=5);for(var i=0;i<s.length;i++)for(var l=s[i],u=i+1;u<s.length;u++){var f=s[u];if(r.overlaps(l.bounds,f.bounds))for(var d=l.vertices,p=f.vertices,x=0;x<l.vertices.length;x++)for(var y=0;y<f.vertices.length;y++){var T=e.magnitudeSquared(e.sub(d[(x+1)%d.length],p[y])),C=e.magnitudeSquared(e.sub(d[x],p[(y+1)%p.length]));T<h&&C<h&&(d[x].isInternal=!0,p[y].isInternal=!0)}}return s}})()},74116:(c,S,t)=>{var o={};c.exports=o;var g=t(69351),a=t(48140),n=t(53402),r=t(22562),e=t(66280);(function(){o.stack=function(s,h,i,l,u,f,d){for(var p=g.create({label:"Stack"}),x=s,y=h,T,C=0,A=0;A<l;A++){for(var R=0,M=0;M<i;M++){var L=d(x,y,M,A,T,C);if(L){var I=L.bounds.max.y-L.bounds.min.y,O=L.bounds.max.x-L.bounds.min.x;I>R&&(R=I),r.translate(L,{x:O*.5,y:I*.5}),x=L.bounds.max.x+u,g.addBody(p,L),T=L,C+=1}else x+=u}y+=R+f,x=s}return p},o.chain=function(s,h,i,l,u,f){for(var d=s.bodies,p=1;p<d.length;p++){var x=d[p-1],y=d[p],T=x.bounds.max.y-x.bounds.min.y,C=x.bounds.max.x-x.bounds.min.x,A=y.bounds.max.y-y.bounds.min.y,R=y.bounds.max.x-y.bounds.min.x,M={bodyA:x,pointA:{x:C*h,y:T*i},bodyB:y,pointB:{x:R*l,y:A*u}},L=n.extend(M,f);g.addConstraint(s,a.create(L))}return s.label+=" Chain",s},o.mesh=function(s,h,i,l,u){var f=s.bodies,d,p,x,y,T;for(d=0;d<i;d++){for(p=1;p<h;p++)x=f[p-1+d*h],y=f[p+d*h],g.addConstraint(s,a.create(n.extend({bodyA:x,bodyB:y},u)));if(d>0)for(p=0;p<h;p++)x=f[p+(d-1)*h],y=f[p+d*h],g.addConstraint(s,a.create(n.extend({bodyA:x,bodyB:y},u))),l&&p>0&&(T=f[p-1+(d-1)*h],g.addConstraint(s,a.create(n.extend({bodyA:T,bodyB:y},u)))),l&&p<h-1&&(T=f[p+1+(d-1)*h],g.addConstraint(s,a.create(n.extend({bodyA:T,bodyB:y},u))))}return s.label+=" Mesh",s},o.pyramid=function(s,h,i,l,u,f,d){return o.stack(s,h,i,l,u,f,function(p,x,y,T,C,A){var R=Math.min(l,Math.ceil(i/2)),M=C?C.bounds.max.x-C.bounds.min.x:0;if(!(T>R)){T=R-T;var L=T,I=i-1-T;if(!(y<L||y>I)){A===1&&r.translate(C,{x:(y+(i%2===1?1:-1))*M,y:0});var O=C?y*M:0;return d(s+O+y*u,x,y,T,C,A)}}})},o.newtonsCradle=function(s,h,i,l,u){for(var f=g.create({label:"Newtons Cradle"}),d=0;d<i;d++){var p=1.9,x=e.circle(s+d*(l*p),h+u,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=a.create({pointA:{x:s+d*(l*p),y:h},bodyB:x});g.addBody(f,x),g.addConstraint(f,y)}return f},o.car=function(s,h,i,l,u){var f=r.nextGroup(!0),d=20,p=-i*.5+d,x=i*.5-d,y=0,T=g.create({label:"Car"}),C=e.rectangle(s,h,i,l,{collisionFilter:{group:f},chamfer:{radius:l*.5},density:2e-4}),A=e.circle(s+p,h+y,u,{collisionFilter:{group:f},friction:.8}),R=e.circle(s+x,h+y,u,{collisionFilter:{group:f},friction:.8}),M=a.create({bodyB:C,pointB:{x:p,y},bodyA:A,stiffness:1,length:0}),L=a.create({bodyB:C,pointB:{x,y},bodyA:R,stiffness:1,length:0});return g.addBody(T,C),g.addBody(T,A),g.addBody(T,R),g.addConstraint(T,M),g.addConstraint(T,L),T},o.softBody=function(s,h,i,l,u,f,d,p,x,y){x=n.extend({inertia:1/0},x),y=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var T=o.stack(s,h,i,l,u,f,function(C,A){return e.circle(C,A,p,x)});return o.mesh(T,i,l,d,y),T.label="Soft Body",T}})()},66615:(c,S,t)=>{var o={};c.exports=o;var g=t(31725),a=t(53402);(function(){o.fromVertices=function(n){for(var r={},e=0;e<n.length;e++){var s=(e+1)%n.length,h=g.normalise({x:n[s].y-n[e].y,y:n[e].x-n[s].x}),i=h.y===0?1/0:h.x/h.y;i=i.toFixed(3).toString(),r[i]=h}return a.values(r)},o.rotate=function(n,r){if(r!==0)for(var e=Math.cos(r),s=Math.sin(r),h=0;h<n.length;h++){var i=n[h],l;l=i.x*e-i.y*s,i.y=i.x*s+i.y*e,i.x=l}}})()},15647:c=>{var S={};c.exports=S,function(){S.create=function(t){var o={min:{x:0,y:0},max:{x:0,y:0}};return t&&S.update(o,t),o},S.update=function(t,o,g){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<o.length;a++){var n=o[a];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}g&&(g.x>0?t.max.x+=g.x:t.min.x+=g.x,g.y>0?t.max.y+=g.y:t.min.y+=g.y)},S.contains=function(t,o){return o.x>=t.min.x&&o.x<=t.max.x&&o.y>=t.min.y&&o.y<=t.max.y},S.overlaps=function(t,o){return t.min.x<=o.max.x&&t.max.x>=o.min.x&&t.max.y>=o.min.y&&t.min.y<=o.max.y},S.translate=function(t,o){t.min.x+=o.x,t.max.x+=o.x,t.min.y+=o.y,t.max.y+=o.y},S.shift=function(t,o){var g=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=o.x,t.max.x=o.x+g,t.min.y=o.y,t.max.y=o.y+a},S.wrap=function(t,o,g){var a=null,n=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(t.min.x>o.max.x?a=o.min.x-t.max.x:t.max.x<o.min.x&&(a=o.max.x-t.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(t.min.y>o.max.y?n=o.min.y-t.max.y:t.max.y<o.min.y&&(n=o.max.y-t.min.y)),a!==null||n!==null)return{x:a||0,y:n||0}}}()},74058:(c,S,t)=>{var o={};c.exports=o,t(15647);var g=t(53402);(function(){o.pathToVertices=function(a,n){typeof window<"u"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,e,s,h,i,l,u,f,d,p,x=[],y,T,C=0,A=0,R=0;n=n||15;var M=function(I,O,D){var B=D%2===1&&D>1;if(!d||I!=d.x||O!=d.y){d&&B?(y=d.x,T=d.y):(y=0,T=0);var V={x:y+I,y:T+O};(B||!d)&&(d=V),x.push(V),A=y+I,R=T+O}},L=function(I){var O=I.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":A=I.x,R=I.y;break;case"H":A=I.x;break;case"V":R=I.y;break}M(A,R,I.pathSegType)}};for(o._svgPathToAbsolute(a),s=a.getTotalLength(),l=[],r=0;r<a.pathSegList.numberOfItems;r+=1)l.push(a.pathSegList.getItem(r));for(u=l.concat();C<s;){if(p=a.getPathSegAtLength(C),i=l[p],i!=f){for(;u.length&&u[0]!=i;)L(u.shift());f=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":h=a.getPointAtLength(C),M(h.x,h.y,0);break}C+=n}for(r=0,e=u.length;r<e;++r)L(u[r]);return x},o._svgPathToAbsolute=function(a){for(var n,r,e,s,h,i,l=a.pathSegList,u=0,f=0,d=l.numberOfItems,p=0;p<d;++p){var x=l.getItem(p),y=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in x&&(u=x.x),"y"in x&&(f=x.y);else switch("x1"in x&&(e=u+x.x1),"x2"in x&&(h=u+x.x2),"y1"in x&&(s=f+x.y1),"y2"in x&&(i=f+x.y2),"x"in x&&(u+=x.x),"y"in x&&(f+=x.y),y){case"m":l.replaceItem(a.createSVGPathSegMovetoAbs(u,f),p);break;case"l":l.replaceItem(a.createSVGPathSegLinetoAbs(u,f),p);break;case"h":l.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(u),p);break;case"v":l.replaceItem(a.createSVGPathSegLinetoVerticalAbs(f),p);break;case"c":l.replaceItem(a.createSVGPathSegCurvetoCubicAbs(u,f,e,s,h,i),p);break;case"s":l.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(u,f,h,i),p);break;case"q":l.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(u,f,e,s),p);break;case"t":l.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(u,f),p);break;case"a":l.replaceItem(a.createSVGPathSegArcAbs(u,f,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),p);break;case"z":case"Z":u=n,f=r;break}(y=="M"||y=="m")&&(n=u,r=f)}}})()},31725:c=>{var S={};c.exports=S,function(){S.create=function(t,o){return{x:t||0,y:o||0}},S.clone=function(t){return{x:t.x,y:t.y}},S.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},S.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},S.rotate=function(t,o,g){var a=Math.cos(o),n=Math.sin(o);g||(g={});var r=t.x*a-t.y*n;return g.y=t.x*n+t.y*a,g.x=r,g},S.rotateAbout=function(t,o,g,a){var n=Math.cos(o),r=Math.sin(o);a||(a={});var e=g.x+((t.x-g.x)*n-(t.y-g.y)*r);return a.y=g.y+((t.x-g.x)*r+(t.y-g.y)*n),a.x=e,a},S.normalise=function(t){var o=S.magnitude(t);return o===0?{x:0,y:0}:{x:t.x/o,y:t.y/o}},S.dot=function(t,o){return t.x*o.x+t.y*o.y},S.cross=function(t,o){return t.x*o.y-t.y*o.x},S.cross3=function(t,o,g){return(o.x-t.x)*(g.y-t.y)-(o.y-t.y)*(g.x-t.x)},S.add=function(t,o,g){return g||(g={}),g.x=t.x+o.x,g.y=t.y+o.y,g},S.sub=function(t,o,g){return g||(g={}),g.x=t.x-o.x,g.y=t.y-o.y,g},S.mult=function(t,o){return{x:t.x*o,y:t.y*o}},S.div=function(t,o){return{x:t.x/o,y:t.y/o}},S.perp=function(t,o){return o=o===!0?-1:1,{x:o*-t.y,y:o*t.x}},S.neg=function(t){return{x:-t.x,y:-t.y}},S.angle=function(t,o){return Math.atan2(o.y-t.y,o.x-t.x)},S._temp=[S.create(),S.create(),S.create(),S.create(),S.create(),S.create()]}()},41598:(c,S,t)=>{var o={};c.exports=o;var g=t(31725),a=t(53402);(function(){o.create=function(n,r){for(var e=[],s=0;s<n.length;s++){var h=n[s],i={x:h.x,y:h.y,index:s,body:r,isInternal:!1};e.push(i)}return e},o.fromPath=function(n,r){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return n.replace(e,function(h,i,l){s.push({x:parseFloat(i),y:parseFloat(l)})}),o.create(s,r)},o.centre=function(n){for(var r=o.area(n,!0),e={x:0,y:0},s,h,i,l=0;l<n.length;l++)i=(l+1)%n.length,s=g.cross(n[l],n[i]),h=g.mult(g.add(n[l],n[i]),s),e=g.add(e,h);return g.div(e,6*r)},o.mean=function(n){for(var r={x:0,y:0},e=0;e<n.length;e++)r.x+=n[e].x,r.y+=n[e].y;return g.div(r,n.length)},o.area=function(n,r){for(var e=0,s=n.length-1,h=0;h<n.length;h++)e+=(n[s].x-n[h].x)*(n[s].y+n[h].y),s=h;return r?e/2:Math.abs(e)/2},o.inertia=function(n,r){for(var e=0,s=0,h=n,i,l,u=0;u<h.length;u++)l=(u+1)%h.length,i=Math.abs(g.cross(h[l],h[u])),e+=i*(g.dot(h[l],h[l])+g.dot(h[l],h[u])+g.dot(h[u],h[u])),s+=i;return r/6*(e/s)},o.translate=function(n,r,e){e=typeof e<"u"?e:1;var s=n.length,h=r.x*e,i=r.y*e,l;for(l=0;l<s;l++)n[l].x+=h,n[l].y+=i;return n},o.rotate=function(n,r,e){if(r!==0){var s=Math.cos(r),h=Math.sin(r),i=e.x,l=e.y,u=n.length,f,d,p,x;for(x=0;x<u;x++)f=n[x],d=f.x-i,p=f.y-l,f.x=i+(d*s-p*h),f.y=l+(d*h+p*s);return n}},o.contains=function(n,r){for(var e=r.x,s=r.y,h=n.length,i=n[h-1],l,u=0;u<h;u++){if(l=n[u],(e-i.x)*(l.y-i.y)+(s-i.y)*(i.x-l.x)>0)return!1;i=l}return!0},o.scale=function(n,r,e,s){if(r===1&&e===1)return n;s=s||o.centre(n);for(var h,i,l=0;l<n.length;l++)h=n[l],i=g.sub(h,s),n[l].x=s.x+i.x*r,n[l].y=s.y+i.y*e;return n},o.chamfer=function(n,r,e,s,h){typeof r=="number"?r=[r]:r=r||[8],e=typeof e<"u"?e:-1,s=s||2,h=h||14;for(var i=[],l=0;l<n.length;l++){var u=n[l-1>=0?l-1:n.length-1],f=n[l],d=n[(l+1)%n.length],p=r[l<r.length?l:r.length-1];if(p===0){i.push(f);continue}var x=g.normalise({x:f.y-u.y,y:u.x-f.x}),y=g.normalise({x:d.y-f.y,y:f.x-d.x}),T=Math.sqrt(2*Math.pow(p,2)),C=g.mult(a.clone(x),p),A=g.normalise(g.mult(g.add(x,y),.5)),R=g.sub(f,g.mult(A,T)),M=e;e===-1&&(M=Math.pow(p,.32)*1.75),M=a.clamp(M,s,h),M%2===1&&(M+=1);for(var L=Math.acos(g.dot(x,y)),I=L/M,O=0;O<M;O++)i.push(g.add(g.rotate(C,I*O),R))}return i},o.clockwiseSort=function(n){var r=o.mean(n);return n.sort(function(e,s){return g.angle(r,e)-g.angle(r,s)}),n},o.isConvex=function(n){var r=0,e=n.length,s,h,i,l;if(e<3)return null;for(s=0;s<e;s++)if(h=(s+1)%e,i=(s+2)%e,l=(n[h].x-n[s].x)*(n[i].y-n[h].y),l-=(n[h].y-n[s].y)*(n[i].x-n[h].x),l<0?r|=1:l>0&&(r|=2),r===3)return!1;return r!==0?!0:null},o.hull=function(n){var r=[],e=[],s,h;for(n=n.slice(0),n.sort(function(i,l){var u=i.x-l.x;return u!==0?u:i.y-l.y}),h=0;h<n.length;h+=1){for(s=n[h];e.length>=2&&g.cross3(e[e.length-2],e[e.length-1],s)<=0;)e.pop();e.push(s)}for(h=n.length-1;h>=0;h-=1){for(s=n[h];r.length>=2&&g.cross3(r[r.length-2],r[r.length-1],s)<=0;)r.pop();r.push(s)}return r.pop(),e.pop(),r.concat(e)}})()},55973:c=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={decomp:L,quickDecomp:B,isSimple:O,removeCollinearPoints:V,removeDuplicatePoints:W,makeCCW:d};function S(U,z,G){G=G||0;var b=[0,0],H,j,$,k,Q,_,tt;return H=U[1][1]-U[0][1],j=U[0][0]-U[1][0],$=H*U[0][0]+j*U[0][1],k=z[1][1]-z[0][1],Q=z[0][0]-z[1][0],_=k*z[0][0]+Q*z[0][1],tt=H*Q-k*j,Y(tt,0,G)||(b[0]=(Q*$-j*_)/tt,b[1]=(H*_-k*$)/tt),b}function t(U,z,G,b){var H=z[0]-U[0],j=z[1]-U[1],$=b[0]-G[0],k=b[1]-G[1];if($*j-k*H===0)return!1;var Q=(H*(G[1]-U[1])+j*(U[0]-G[0]))/($*j-k*H),_=($*(U[1]-G[1])+k*(G[0]-U[0]))/(k*H-$*j);return Q>=0&&Q<=1&&_>=0&&_<=1}function o(U,z,G){return(z[0]-U[0])*(G[1]-U[1])-(G[0]-U[0])*(z[1]-U[1])}function g(U,z,G){return o(U,z,G)>0}function a(U,z,G){return o(U,z,G)>=0}function n(U,z,G){return o(U,z,G)<0}function r(U,z,G){return o(U,z,G)<=0}var e=[],s=[];function h(U,z,G,b){if(b){var H=e,j=s;H[0]=z[0]-U[0],H[1]=z[1]-U[1],j[0]=G[0]-z[0],j[1]=G[1]-z[1];var $=H[0]*j[0]+H[1]*j[1],k=Math.sqrt(H[0]*H[0]+H[1]*H[1]),Q=Math.sqrt(j[0]*j[0]+j[1]*j[1]),_=Math.acos($/(k*Q));return _<b}else return o(U,z,G)===0}function i(U,z){var G=z[0]-U[0],b=z[1]-U[1];return G*G+b*b}function l(U,z){var G=U.length;return U[z<0?z%G+G:z%G]}function u(U){U.length=0}function f(U,z,G,b){for(var H=G;H<b;H++)U.push(z[H])}function d(U){for(var z=0,G=U,b=1;b<U.length;++b)(G[b][1]<G[z][1]||G[b][1]===G[z][1]&&G[b][0]>G[z][0])&&(z=b);return g(l(U,z-1),l(U,z),l(U,z+1))?!1:(p(U),!0)}function p(U){for(var z=[],G=U.length,b=0;b!==G;b++)z.push(U.pop());for(var b=0;b!==G;b++)U[b]=z[b]}function x(U,z){return n(l(U,z-1),l(U,z),l(U,z+1))}var y=[],T=[];function C(U,z,G){var b,H,j=y,$=T;if(a(l(U,z+1),l(U,z),l(U,G))&&r(l(U,z-1),l(U,z),l(U,G)))return!1;H=i(l(U,z),l(U,G));for(var k=0;k!==U.length;++k)if(!((k+1)%U.length===z||k===z)&&a(l(U,z),l(U,G),l(U,k+1))&&r(l(U,z),l(U,G),l(U,k))&&(j[0]=l(U,z),j[1]=l(U,G),$[0]=l(U,k),$[1]=l(U,k+1),b=S(j,$),i(l(U,z),b)<H))return!1;return!0}function A(U,z,G){for(var b=0;b!==U.length;++b)if(!(b===z||b===G||(b+1)%U.length===z||(b+1)%U.length===G)&&t(l(U,z),l(U,G),l(U,b),l(U,b+1)))return!1;return!0}function R(U,z,G,b){var H=b||[];if(u(H),z<G)for(var j=z;j<=G;j++)H.push(U[j]);else{for(var j=0;j<=G;j++)H.push(U[j]);for(var j=z;j<U.length;j++)H.push(U[j])}return H}function M(U){for(var z=[],G=[],b=[],H=[],j=Number.MAX_VALUE,$=0;$<U.length;++$)if(x(U,$)){for(var k=0;k<U.length;++k)if(C(U,$,k)){G=M(R(U,$,k,H)),b=M(R(U,k,$,H));for(var Q=0;Q<b.length;Q++)G.push(b[Q]);G.length<j&&(z=G,j=G.length,z.push([l(U,$),l(U,k)]))}}return z}function L(U){var z=M(U);return z.length>0?I(U,z):[U]}function I(U,z){if(z.length===0)return[U];if(z instanceof Array&&z.length&&z[0]instanceof Array&&z[0].length===2&&z[0][0]instanceof Array){for(var G=[U],b=0;b<z.length;b++)for(var H=z[b],j=0;j<G.length;j++){var $=G[j],k=I($,H);if(k){G.splice(j,1),G.push(k[0],k[1]);break}}return G}else{var H=z,b=U.indexOf(H[0]),j=U.indexOf(H[1]);return b!==-1&&j!==-1?[R(U,b,j),R(U,j,b)]:!1}}function O(U){var z=U,G;for(G=0;G<z.length-1;G++)for(var b=0;b<G-1;b++)if(t(z[G],z[G+1],z[b],z[b+1]))return!1;for(G=1;G<z.length-2;G++)if(t(z[0],z[z.length-1],z[G],z[G+1]))return!1;return!0}function D(U,z,G,b,H){H=H||0;var j=z[1]-U[1],$=U[0]-z[0],k=j*U[0]+$*U[1],Q=b[1]-G[1],_=G[0]-b[0],tt=Q*G[0]+_*G[1],et=j*_-Q*$;return Y(et,0,H)?[0,0]:[(_*k-$*tt)/et,(j*tt-Q*k)/et]}function B(U,z,G,b,H,j,$){j=j||100,$=$||0,H=H||25,z=typeof z<"u"?z:[],G=G||[],b=b||[];var k=[0,0],Q=[0,0],_=[0,0],tt=0,et=0,it=0,ot=0,nt=0,ut=0,ct=0,pt=[],mt=[],ht=U,ft=U;if(ft.length<3)return z;if($++,$>j)return console.warn("quickDecomp: max level ("+j+") reached."),z;for(var dt=0;dt<U.length;++dt)if(x(ht,dt)){G.push(ht[dt]),tt=et=Number.MAX_VALUE;for(var Ct=0;Ct<U.length;++Ct)g(l(ht,dt-1),l(ht,dt),l(ht,Ct))&&r(l(ht,dt-1),l(ht,dt),l(ht,Ct-1))&&(_=D(l(ht,dt-1),l(ht,dt),l(ht,Ct),l(ht,Ct-1)),n(l(ht,dt+1),l(ht,dt),_)&&(it=i(ht[dt],_),it<et&&(et=it,Q=_,ut=Ct))),g(l(ht,dt+1),l(ht,dt),l(ht,Ct+1))&&r(l(ht,dt+1),l(ht,dt),l(ht,Ct))&&(_=D(l(ht,dt+1),l(ht,dt),l(ht,Ct),l(ht,Ct+1)),g(l(ht,dt-1),l(ht,dt),_)&&(it=i(ht[dt],_),it<tt&&(tt=it,k=_,nt=Ct)));if(ut===(nt+1)%U.length)_[0]=(Q[0]+k[0])/2,_[1]=(Q[1]+k[1])/2,b.push(_),dt<nt?(f(pt,ht,dt,nt+1),pt.push(_),mt.push(_),ut!==0&&f(mt,ht,ut,ht.length),f(mt,ht,0,dt+1)):(dt!==0&&f(pt,ht,dt,ht.length),f(pt,ht,0,nt+1),pt.push(_),mt.push(_),f(mt,ht,ut,dt+1));else{if(ut>nt&&(nt+=U.length),ot=Number.MAX_VALUE,nt<ut)return z;for(var Ct=ut;Ct<=nt;++Ct)a(l(ht,dt-1),l(ht,dt),l(ht,Ct))&&r(l(ht,dt+1),l(ht,dt),l(ht,Ct))&&(it=i(l(ht,dt),l(ht,Ct)),it<ot&&A(ht,dt,Ct)&&(ot=it,ct=Ct%U.length));dt<ct?(f(pt,ht,dt,ct+1),ct!==0&&f(mt,ht,ct,ft.length),f(mt,ht,0,dt+1)):(dt!==0&&f(pt,ht,dt,ft.length),f(pt,ht,0,ct+1),f(mt,ht,ct,dt+1))}return pt.length<mt.length?(B(pt,z,G,b,H,j,$),B(mt,z,G,b,H,j,$)):(B(mt,z,G,b,H,j,$),B(pt,z,G,b,H,j,$)),z}return z.push(U),z}function V(U,z){for(var G=0,b=U.length-1;U.length>3&&b>=0;--b)h(l(U,b-1),l(U,b),l(U,b+1),z)&&(U.splice(b%U.length,1),G++);return G}function W(U,z){for(var G=U.length-1;G>=1;--G)for(var b=U[G],H=G-1;H>=0;--H)if(X(b,U[H],z)){U.splice(G,1);continue}}function Y(U,z,G){return G=G||0,Math.abs(U-z)<=G}function X(U,z,G){return Y(U[0],z[0],G)&&Y(U[1],z[1],G)}},52018:(c,S,t)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=t(83419),g=new o({initialize:function(n){this.pluginManager=n,this.game=n.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});c.exports=g},42363:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};c.exports=S},37277:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},t={},o={};o.register=function(g,a,n,r){r===void 0&&(r=!1),S[g]={plugin:a,mapping:n,custom:r}},o.registerCustom=function(g,a,n,r){t[g]={plugin:a,mapping:n,data:r}},o.hasCore=function(g){return S.hasOwnProperty(g)},o.hasCustom=function(g){return t.hasOwnProperty(g)},o.getCore=function(g){return S[g]},o.getCustom=function(g){return t[g]},o.getCustomClass=function(g){return t.hasOwnProperty(g)?t[g].plugin:null},o.remove=function(g){S.hasOwnProperty(g)&&delete S[g]},o.removeCustom=function(g){t.hasOwnProperty(g)&&delete t[g]},o.destroyCorePlugins=function(){for(var g in S)S.hasOwnProperty(g)&&delete S[g]},o.destroyCustomPlugins=function(){for(var g in t)t.hasOwnProperty(g)&&delete t[g]},c.exports=o},77332:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8443),a=t(50792),n=t(74099),r=t(44603),e=t(39429),s=t(95540),h=t(37277),i=t(72905),l=new o({Extends:a,initialize:function(f){a.call(this),this.game=f,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],f.isBooted?this.boot():f.events.once(g.BOOT,this.boot,this)},boot:function(){var u,f,d,p,x,y,T,C=this.game.config,A=C.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),u=0;u<A.length;u++)f=A[u],d=s(f,"key",null),p=s(f,"plugin",null),x=s(f,"start",!1),y=s(f,"mapping",null),T=s(f,"data",null),d&&(p?this.install(d,p,x,y,T):console.warn("Missing `plugin` for key: "+d));for(A=C.installScenePlugins,A=A.concat(this._pendingScene),u=0;u<A.length;u++)f=A[u],d=s(f,"key",null),p=s(f,"plugin",null),y=s(f,"mapping",null),d&&(p?this.installScenePlugin(d,p,y):console.warn("Missing `plugin` for key: "+d));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(u,f,d){var p,x,y,T=this.game,C=u.scene,A=u.settings.map,R=u.settings.isBooted;for(p=0;p<f.length;p++)x=f[p],T[x]?(u[x]=T[x],A.hasOwnProperty(x)&&(C[A[x]]=u[x])):x==="game"&&A.hasOwnProperty(x)&&(C[A[x]]=T);for(var M=0;M<d.length;M++)for(y=d[M],p=0;p<y.length;p++)if(x=y[p],!!h.hasCore(x)){var L=h.getCore(x),I=L.mapping,O=new L.plugin(C,this,I);u[I]=O,L.custom?C[I]=O:A.hasOwnProperty(I)&&(C[A[I]]=O),R&&O.boot()}for(y=this.plugins,p=0;p<y.length;p++){var D=y[p];D.mapping&&(C[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var u=this.game.config.defaultPlugins;return u=u.concat(this.scenePlugins),u},installScenePlugin:function(u,f,d,p,x){if(x===void 0&&(x=!1),typeof f!="function"){console.warn("Invalid Scene Plugin: "+u);return}if(h.hasCore(u)||h.register(u,f,d,!0),this.scenePlugins.indexOf(u)===-1)this.scenePlugins.push(u);else if(!x&&h.hasCore(u)){console.warn("Scene Plugin key in use: "+u);return}if(p){var y=new f(p,this,u);p.sys[u]=y,d&&d!==""&&(p[d]=y),y.boot()}},install:function(u,f,d,p,x){if(d===void 0&&(d=!1),p===void 0&&(p=null),x===void 0&&(x=null),typeof f!="function")return console.warn("Invalid Plugin: "+u),null;if(h.hasCustom(u))return console.warn("Plugin key in use: "+u),null;if(p!==null&&(d=!0),!this.game.isBooted)this._pendingGlobal.push({key:u,plugin:f,start:d,mapping:p,data:x});else if(h.registerCustom(u,f,p,x),d)return this.start(u);return null},getIndex:function(u){for(var f=this.plugins,d=0;d<f.length;d++){var p=f[d];if(p.key===u)return d}return-1},getEntry:function(u){var f=this.getIndex(u);if(f!==-1)return this.plugins[f]},isActive:function(u){var f=this.getEntry(u);return f&&f.active},start:function(u,f){f===void 0&&(f=u);var d=this.getEntry(f);return d&&!d.active?(d.active=!0,d.plugin.start()):d||(d=this.createEntry(u,f)),d?d.plugin:null},createEntry:function(u,f){var d=h.getCustom(u);if(d){var p=new d.plugin(this);d={key:f,plugin:p,active:!0,mapping:d.mapping,data:d.data},this.plugins.push(d),p.init(d.data),p.start()}return d},stop:function(u){var f=this.getEntry(u);return f&&f.active&&(f.active=!1,f.plugin.stop()),this},get:function(u,f){f===void 0&&(f=!0);var d=this.getEntry(u);if(d)return d.plugin;var p=this.getClass(u);return p&&f?(d=this.createEntry(u,u),d?d.plugin:null):p||null},getClass:function(u){return h.getCustomClass(u)},removeGlobalPlugin:function(u){var f=this.getEntry(u);f&&i(this.plugins,f),h.removeCustom(u)},removeScenePlugin:function(u){i(this.scenePlugins,u),h.remove(u)},registerGameObject:function(u,f,d){return f&&e.register(u,f),d&&r.register(u,d),this},removeGameObject:function(u,f,d){return f===void 0&&(f=!0),d===void 0&&(d=!0),f&&e.remove(u),d&&r.remove(u),this},registerFileType:function(u,f,d){n.register(u,f),d&&d.sys.load&&(d.sys.load[u]=f)},destroy:function(){for(var u=0;u<this.plugins.length;u++)this.plugins[u].plugin.destroy();h.destroyCustomPlugins(),this.game.noReturn&&h.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});c.exports=l},45145:(c,S,t)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=t(52018),g=t(83419),a=t(44594),n=new g({Extends:o,initialize:function(e,s,h){o.call(this,s),this.scene=e,this.systems=e.sys,this.pluginKey=h,e.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});c.exports=n},18922:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={BasePlugin:t(52018),DefaultPlugins:t(42363),PluginCache:t(37277),PluginManager:t(77332),ScenePlugin:t(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(c){const S=performance.now(),t=this.getVideoPlaybackQuality(),o=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,g=(a,n)=>{const r=this.getVideoPlaybackQuality(),e=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames;if(e>o){const s=this.mozFrameDelay||r.totalFrameDelay-t.totalFrameDelay||0,h=n-a;c(n,{presentationTime:n+s*1e3,expectedDisplayTime:n+h,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+h/1e3,presentedFrames:e,processingDuration:s}),delete this._rvfcpolyfillmap[S]}else this._rvfcpolyfillmap[S]=requestAnimationFrame(s=>g(n,s))};return this._rvfcpolyfillmap[S]=requestAnimationFrame(a=>g(S,a)),S},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(c){cancelAnimationFrame(this._rvfcpolyfillmap[c]),delete this._rvfcpolyfillmap[c]})},10312:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DEFAULT:0,LINEAR:0,NEAREST:1};c.exports=S},68627:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19715),g=t(32880),a=t(83419),n=t(8054),r=t(50792),e=t(92503),s=t(56373),h=t(97480),i=t(69442),l=t(61340),u=new a({Extends:r,initialize:function(d){r.call(this);var p=d.config;this.config={clearBeforeRender:p.clearBeforeRender,backgroundColor:p.backgroundColor,antialias:p.antialias,roundPixels:p.roundPixels},this.game=d,this.type=n.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=d.canvas;var x={alpha:d.config.transparent,desynchronized:d.config.desynchronized,willReadFrequently:!1};this.gameContext=p.context?p.context:this.gameCanvas.getContext("2d",x),this.currentContext=this.gameContext,this.antialias=d.config.antialias,this.blendModes=s(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(i.READY,this.boot,this)},boot:function(){var f=this.game,d=f.scale.baseSize;this.width=d.width,this.height=d.height,this.isBooted=!0,f.scale.on(h.RESIZE,this.onResize,this),this.resize(d.width,d.height)},onResize:function(f,d){(d.width!==this.width||d.height!==this.height)&&this.resize(d.width,d.height)},resize:function(f,d){this.width=f,this.height=d,this.emit(e.RESIZE,f,d)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(f){return this.currentContext.globalCompositeOperation=f,this},setContext:function(f){return this.currentContext=f||this.gameContext,this},setAlpha:function(f){return this.currentContext.globalAlpha=f,this},preRender:function(){var f=this.gameContext,d=this.config,p=this.width,x=this.height;f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),this.emit(e.PRE_RENDER_CLEAR),d.clearBeforeRender&&(f.clearRect(0,0,p,x),d.transparent||(f.fillStyle=d.backgroundColor.rgba,f.fillRect(0,0,p,x))),f.save(),this.drawCount=0,this.emit(e.PRE_RENDER)},render:function(f,d,p){var x=d.length;this.emit(e.RENDER,f,p);var y=p.x,T=p.y,C=p.width,A=p.height,R=p.renderToTexture?p.context:f.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(y,T,C,A),R.clip()),p.emit(o.PRE_RENDER,p),this.currentContext=R;var M=p.mask;M&&M.preRenderCanvas(this,null,p._maskCamera),p.transparent||(R.fillStyle=p.backgroundColor.rgba,R.fillRect(y,T,C,A)),R.globalAlpha=p.alpha,R.globalCompositeOperation="source-over",this.drawCount+=x,p.renderToTexture&&p.emit(o.PRE_RENDER,p),p.matrix.copyToContext(R);for(var L=0;L<x;L++){var I=d[L];I.mask&&I.mask.preRenderCanvas(this,I,p),I.renderCanvas(this,I,p),I.mask&&I.mask.postRenderCanvas(this,I,p)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,p.flashEffect.postRenderCanvas(R),p.fadeEffect.postRenderCanvas(R),p.dirty=!1,M&&M.postRenderCanvas(this),R.restore(),p.renderToTexture&&(p.emit(o.POST_RENDER,p),p.renderToGame&&f.sys.context.drawImage(p.canvas,y,T)),p.emit(o.POST_RENDER,p)},postRender:function(){var f=this.gameContext;f.restore(),this.emit(e.POST_RENDER);var d=this.snapshotState;d.callback&&(g(this.gameCanvas,d),d.callback=null)},snapshotCanvas:function(f,d,p,x,y,T,C,A,R){p===void 0&&(p=!1),this.snapshotArea(x,y,T,C,d,A,R);var M=this.snapshotState;return M.getPixel=p,g(f,M),M.callback=null,this},snapshot:function(f,d,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,f,d,p)},snapshotArea:function(f,d,p,x,y,T,C){var A=this.snapshotState;return A.callback=y,A.type=T,A.encoder=C,A.getPixel=!1,A.x=f,A.y=d,A.width=Math.min(p,this.gameCanvas.width),A.height=Math.min(x,this.gameCanvas.height),this},snapshotPixel:function(f,d,p){return this.snapshotArea(f,d,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(f,d,p,x){var y=p.alpha*f.alpha;if(y!==0){var T=this.currentContext,C=this._tempMatrix1,A=this._tempMatrix2,R=d.canvasData,M=R.x,L=R.y,I=d.cutWidth,O=d.cutHeight,D=d.customPivot,B=d.source.resolution,V=f.displayOriginX,W=f.displayOriginY,Y=-V+d.x,X=-W+d.y;if(f.isCropped){var U=f._crop;(U.flipX!==f.flipX||U.flipY!==f.flipY)&&d.updateCropUVs(U,f.flipX,f.flipY),I=U.cw,O=U.ch,M=U.cx,L=U.cy,Y=-V+U.x,X=-W+U.y,f.flipX&&(Y>=0?Y=-(Y+I):Y<0&&(Y=Math.abs(Y)-I)),f.flipY&&(X>=0?X=-(X+O):X<0&&(X=Math.abs(X)-O))}var z=1,G=1;f.flipX&&(D||(Y+=-d.realWidth+V*2),z=-1),f.flipY&&(D||(X+=-d.realHeight+W*2),G=-1);var b=f.x,H=f.y;if(p.roundPixels&&(b=Math.floor(b),H=Math.floor(H)),A.applyITRS(b,H,f.rotation,f.scaleX*z,f.scaleY*G),C.copyFrom(p.matrix),x?(C.multiplyWithOffset(x,-p.scrollX*f.scrollFactorX,-p.scrollY*f.scrollFactorY),A.e=b,A.f=H):(A.e-=p.scrollX*f.scrollFactorX,A.f-=p.scrollY*f.scrollFactorY),C.multiply(A),p.renderRoundPixels&&(C.e=Math.floor(C.e+.5),C.f=Math.floor(C.f+.5)),T.save(),C.setToContext(T),T.globalCompositeOperation=this.blendModes[f.blendMode],T.globalAlpha=y,T.imageSmoothingEnabled=!d.source.scaleMode,f.mask&&f.mask.preRenderCanvas(this,f,p),I>0&&O>0){var j=I/B,$=O/B;p.roundPixels&&(Y=Math.floor(Y+.5),X=Math.floor(X+.5),j+=.5,$+=.5),T.drawImage(d.source.image,M,L,I,O,Y,X,j,$)}f.mask&&f.mask.postRenderCanvas(this,f,p),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});c.exports=u},55830:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CanvasRenderer:t(68627),GetBlendModes:t(56373),SetTransform:t(20926)}},56373:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(89289),a=function(){var n=[],r=g.supportNewBlendModes,e="source-over";return n[o.NORMAL]=e,n[o.ADD]="lighter",n[o.MULTIPLY]=r?"multiply":e,n[o.SCREEN]=r?"screen":e,n[o.OVERLAY]=r?"overlay":e,n[o.DARKEN]=r?"darken":e,n[o.LIGHTEN]=r?"lighten":e,n[o.COLOR_DODGE]=r?"color-dodge":e,n[o.COLOR_BURN]=r?"color-burn":e,n[o.HARD_LIGHT]=r?"hard-light":e,n[o.SOFT_LIGHT]=r?"soft-light":e,n[o.DIFFERENCE]=r?"difference":e,n[o.EXCLUSION]=r?"exclusion":e,n[o.HUE]=r?"hue":e,n[o.SATURATION]=r?"saturation":e,n[o.COLOR]=r?"color":e,n[o.LUMINOSITY]=r?"luminosity":e,n[o.ERASE]="destination-out",n[o.SOURCE_IN]="source-in",n[o.SOURCE_OUT]="source-out",n[o.SOURCE_ATOP]="source-atop",n[o.DESTINATION_OVER]="destination-over",n[o.DESTINATION_IN]="destination-in",n[o.DESTINATION_OUT]="destination-out",n[o.DESTINATION_ATOP]="destination-atop",n[o.LIGHTER]="lighter",n[o.COPY]="copy",n[o.XOR]="xor",n};c.exports=a},20926:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,n,r,e,s){var h=e.alpha*r.alpha;if(h<=0)return!1;var i=o(r,e,s).calc;return n.globalCompositeOperation=a.blendModes[r.blendMode],n.globalAlpha=h,n.save(),i.setToContext(n),n.imageSmoothingEnabled=r.frame?!r.frame.source.scaleMode:a.antialias,!0};c.exports=g},63899:c=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="losewebgl"},6119:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postrender"},48070:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},15640:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="render"},8912:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resize"},87124:c=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="restorewebgl"},92503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={LOSE_WEBGL:t(63899),POST_RENDER:t(6119),PRE_RENDER:t(48070),RENDER:t(15640),RESIZE:t(8912),RESTORE_WEBGL:t(87124)}},36909:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Events:t(92503),Snapshot:t(89966)},c.exports.Canvas=t(55830),c.exports.WebGL=t(4159)},32880:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(40987),a=t(95540),n=function(r,e){var s=a(e,"callback"),h=a(e,"type","image/png"),i=a(e,"encoder",.92),l=Math.abs(Math.round(a(e,"x",0))),u=Math.abs(Math.round(a(e,"y",0))),f=Math.floor(a(e,"width",r.width)),d=Math.floor(a(e,"height",r.height)),p=a(e,"getPixel",!1);if(p){var x=r.getContext("2d",{willReadFrequently:!1}),y=x.getImageData(l,u,1,1),T=y.data;s.call(null,new g(T[0],T[1],T[2],T[3]))}else if(l!==0||u!==0||f!==r.width||d!==r.height){var C=o.createWebGL(this,f,d),A=C.getContext("2d",{willReadFrequently:!0});f>0&&d>0&&A.drawImage(r,l,u,f,d,0,0,f,d);var R=new Image;R.onerror=function(){s.call(null),o.remove(C)},R.onload=function(){s.call(null,R),o.remove(C)},R.src=C.toDataURL(h,i)}else{var M=new Image;M.onerror=function(){s.call(null)},M.onload=function(){s.call(null,M)},M.src=r.toDataURL(h,i)}};c.exports=n},88815:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(40987),a=t(95540),n=function(r,e){var s=r,h=a(e,"callback"),i=a(e,"type","image/png"),l=a(e,"encoder",.92),u=Math.abs(Math.round(a(e,"x",0))),f=Math.abs(Math.round(a(e,"y",0))),d=a(e,"getPixel",!1),p=a(e,"isFramebuffer",!1),x=p?a(e,"bufferWidth",1):s.drawingBufferWidth,y=p?a(e,"bufferHeight",1):s.drawingBufferHeight;if(d){var T=new Uint8Array(4),C=p?f:y-f;s.readPixels(u,C,1,1,s.RGBA,s.UNSIGNED_BYTE,T),h.call(null,new g(T[0],T[1],T[2],T[3]))}else{var A=Math.floor(a(e,"width",x)),R=Math.floor(a(e,"height",y)),M=A*R*4,L=new Uint8Array(M);s.readPixels(u,y-f-R,A,R,s.RGBA,s.UNSIGNED_BYTE,L);for(var I=o.createWebGL(this,A,R),O=I.getContext("2d",{willReadFrequently:!0}),D=O.getImageData(0,0,A,R),B=D.data,V=0;V<R;V++)for(var W=0;W<A;W++){var Y=((R-V-1)*A+W)*4,X=p?M-(V*A+(A-W))*4:(V*A+W)*4;B[X+0]=L[Y+0],B[X+1]=L[Y+1],B[X+2]=L[Y+2],B[X+3]=L[Y+3]}O.putImageData(D,0,0);var U=new Image;U.onerror=function(){h.call(null),o.remove(I)},U.onload=function(){h.call(null,U),o.remove(I)},U.src=I.toDataURL(i,l)}};c.exports=n},89966:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Canvas:t(32880),WebGL:t(88815)}},7530:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36060),a=t(90330),n=t(82264),r=t(95540),e=t(32302),s=t(63448),h=t(31302),i=t(58918),l=t(14811),u=t(92651),f=t(96569),d=t(56527),p=t(57516),x=t(43439),y=t(81041),T=t(12385),C=t(7589),A=t(95428),R=t(72905),M=new o({initialize:function(I){this.game=I.game,this.renderer=I,this.classes=new a([[g.UTILITY_PIPELINE,C],[g.MULTI_PIPELINE,p],[g.BITMAPMASK_PIPELINE,h],[g.SINGLE_PIPELINE,T],[g.ROPE_PIPELINE,y],[g.LIGHT_PIPELINE,f],[g.POINTLIGHT_PIPELINE,x],[g.MOBILE_PIPELINE,d]]),this.postPipelineClasses=new a,this.pipelines=new a,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(L,I,O){var D=this.renderer,B=this.renderTargets;this.frameInc=Math.floor(r(L,"frameInc",32));var V=D.width,W=D.height,Y=this.game.config.disablePreFX,X=this.game.config.disablePostFX;if(X||this.postPipelineClasses.setAll([[String(l.BARREL),i.Barrel],[String(l.BLOOM),i.Bloom],[String(l.BLUR),i.Blur],[String(l.BOKEH),i.Bokeh],[String(l.CIRCLE),i.Circle],[String(l.COLOR_MATRIX),i.ColorMatrix],[String(l.DISPLACEMENT),i.Displacement],[String(l.GLOW),i.Glow],[String(l.GRADIENT),i.Gradient],[String(l.PIXELATE),i.Pixelate],[String(l.SHADOW),i.Shadow],[String(l.SHINE),i.Shine],[String(l.VIGNETTE),i.Vignette],[String(l.WIPE),i.Wipe]]),!Y){this.classes.set(g.FX_PIPELINE,u);for(var U=Math.min(V,W),z=Math.ceil(U/this.frameInc),G=1;G<z;G++){var b=G*this.frameInc;B.push(new e(D,b,b)),B.push(new e(D,b,b)),B.push(new e(D,b,b)),this.maxDimension=b}B.push(new e(D,V,W,1,0,!0,!0)),B.push(new e(D,V,W,1,0,!0,!0)),B.push(new e(D,V,W,1,0,!0,!0))}var H,j,$=this,k=this.game;if(this.classes.each(function(_,tt){H=$.add(_,new tt({game:k})),_===g.UTILITY_PIPELINE&&($.UTILITY_PIPELINE=H,$.fullFrame1=H.fullFrame1,$.fullFrame2=H.fullFrame2,$.halfFrame1=H.halfFrame1,$.halfFrame2=H.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),Y||(this.FX_PIPELINE=this.get(g.FX_PIPELINE)),L)for(j in L){var Q=L[j];H=new Q(k),H.name=j,H.isPostFX?this.postPipelineClasses.set(j,Q):this.has(j)||(this.classes.set(j,Q),this.add(j,H))}this.default=this.get(I),O&&!n.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(L){var I=this.get(L);return I&&(this.default=I),I},add:function(L,I){if(I.isPostFX){console.warn(L+" is a Post Pipeline. Use `addPostPipeline` instead");return}var O=this.pipelines,D=this.renderer;return O.has(L)?console.warn("Pipeline exists: "+L):(I.name=L,I.manager=this,O.set(L,I)),I.hasBooted||I.boot(),D.width!==0&&D.height!==0&&!I.isPreFX&&I.resize(D.width,D.height),I},addPostPipeline:function(L,I){this.postPipelineClasses.has(L)||this.postPipelineClasses.set(L,I)},flush:function(){this.current&&this.current.flush()},has:function(L){var I=this.pipelines;return typeof L=="string"?I.has(L):!!I.contains(L)},get:function(L){var I=this.pipelines;if(typeof L=="string")return I.get(L);if(I.contains(L))return L},getPostPipeline:function(L,I,O){var D=this.postPipelineClasses,B,V="",W=typeof L;if(W==="string"||W==="number"?(B=D.get(L),V=L):W==="function"?(D.contains(L)&&(B=L),V=L.name):W==="object"&&(B=D.get(L.name),V=L.name),B){var Y=new B(this.game,O);return Y.name=V,I&&(Y.gameObject=I),this.postPipelineInstances.push(Y),Y}},removePostPipeline:function(L){R(this.postPipelineInstances,L)},remove:function(L,I,O){I===void 0&&(I=!0),O===void 0&&(O=!0),this.pipelines.delete(L),I&&this.classes.delete(L),O&&this.postPipelineClasses.delete(L)},set:function(L,I,O){if(!L.isPostFX)return this.isCurrent(L,O)||(this.flush(),this.current&&this.current.unbind(),this.current=L,L.bind(O)),L.updateProjectionMatrix(),L.onBind(I),L},preBatch:function(L){if(L.hasPostPipeline){this.flush();for(var I=L.postPipelines,O=I.length-1;O>=0;O--){var D=I[O];D.active&&D.preBatch(L)}}},postBatch:function(L){if(L.hasPostPipeline){this.flush();for(var I=L.postPipelines,O=0;O<I.length;O++){var D=I[O];D.active&&D.postBatch(L)}}},preBatchCamera:function(L){if(L.hasPostPipeline){this.flush();for(var I=L.postPipelines,O=I.length-1;O>=0;O--){var D=I[O];D.active&&D.preBatch(L)}}},postBatchCamera:function(L){if(L.hasPostPipeline){this.flush();for(var I=L.postPipelines,O=0;O<I.length;O++){var D=I[O];D.active&&D.postBatch(L)}}},isCurrent:function(L,I){var O=this.renderer,D=this.current;return D&&!I&&(I=D.currentShader),!(D!==L||I.program!==O.currentProgram)},copyFrame:function(L,I,O,D,B){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(L,I,O,D,B),this},copyToGame:function(L){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(L),this},drawFrame:function(L,I,O,D){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(L,I,O,D),this},blendFrames:function(L,I,O,D,B){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(L,I,O,D,B),this},blendFramesAdditive:function(L,I,O,D,B){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(L,I,O,D,B),this},clearFrame:function(L,I){return this.UTILITY_PIPELINE.clearFrame(L,I),this},blitFrame:function(L,I,O,D,B,V){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(L,I,O,D,B,V),this},copyFrameRect:function(L,I,O,D,B,V,W,Y){return this.UTILITY_PIPELINE.copyFrameRect(L,I,O,D,B,V,W,Y),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(L){return this.UTILITY_PIPELINE.bind(L)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(L,I){I.restoreContext()}),A(this.postPipelineInstances,function(L){L.restoreContext()})},rebind:function(L){L===void 0&&this.previous&&(L=this.previous);var I=this.renderer,O=I.gl;O.disable(O.DEPTH_TEST),O.disable(O.CULL_FACE),I.hasActiveStencilMask()?O.clear(O.DEPTH_BUFFER_BIT):(O.disable(O.STENCIL_TEST),O.clear(O.DEPTH_BUFFER_BIT|O.STENCIL_BUFFER_BIT)),O.viewport(0,0,I.width,I.height),I.currentProgram=null,I.setBlendMode(0,!0);var D=I.vaoExtension;D&&D.bindVertexArrayOES(null);var B=this.pipelines.entries;for(var V in B)B[V].glReset=!0;L&&(this.current=L,L.rebind())},clear:function(){var L=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,L.currentProgram=null,L.setBlendMode(0,!0);var I=L.vaoExtension;I&&I.bindVertexArrayOES(null)},getRenderTarget:function(L){var I=this.renderTargets,O=3;if(L>this.maxDimension)return this.targetIndex=I.length-O,I[this.targetIndex];var D=(s(L,this.frameInc,0,!0)-1)*O;return this.targetIndex=D,I[D]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});c.exports=M},32302:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92503),a=new o({initialize:function(r,e,s,h,i,l,u,f,d){h===void 0&&(h=1),i===void 0&&(i=0),l===void 0&&(l=!0),u===void 0&&(u=!1),f===void 0&&(f=!0),d===void 0&&(d=!0),this.renderer=r,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=h,this.minFilter=i,this.autoClear=l,this.autoResize=!0,this.hasDepthBuffer=f,this.forceClamp=d,this.init(e,s),u?this.renderer.on(g.RESIZE,this.resize,this):this.autoResize=!1},init:function(n,r){var e=this.renderer;this.texture=e.createTextureFromSource(null,n,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(n,r,this.texture,this.hasDepthBuffer),this.width=n,this.height=r},setAutoResize:function(n){return n&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!n&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(n,r){if(this.autoResize&&this.willResize(n,r)){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),this.texture=e.createTextureFromSource(null,n,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(n,r,this.texture,this.hasDepthBuffer),this.width=n,this.height=r}return this},willResize:function(n,r){return typeof n!="number"||typeof r!="number"?!1:(n=Math.round(n*this.scale),r=Math.round(r*this.scale),n=Math.max(n,1),r=Math.max(r,1),n!==this.width||r!==this.height)},bind:function(n,r,e){n===void 0&&(n=!1);var s=this.renderer;if(n&&s.flush(),r&&e&&this.resize(r,e),s.pushFramebuffer(this.framebuffer,!1,!1),n&&this.adjustViewport(),this.autoClear){var h=this.renderer.gl;h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT)}s.clearStencilMask()},adjustViewport:function(){var n=this.renderer.gl;n.viewport(0,0,this.width,this.height),n.disable(n.SCISSOR_TEST)},clear:function(n,r,e,s){var h=this.renderer,i=h.gl;h.pushFramebuffer(this.framebuffer),n!==void 0&&r!==void 0&&e!==void 0&&s!==void 0?(i.enable(i.SCISSOR_TEST),i.scissor(n,r,e,s)):i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(n){n===void 0&&(n=!1);var r=this.renderer;return n&&r.flush(),r.popFramebuffer()},destroy:function(){var n=this.renderer;n.off(g.RESIZE,this.resize,this),n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});c.exports=a},70554:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={getTintFromFloats:function(S,t,o,g){var a=(S*255|0)&255,n=(t*255|0)&255,r=(o*255|0)&255,e=(g*255|0)&255;return(e<<24|a<<16|n<<8|r)>>>0},getTintAppendFloatAlpha:function(S,t){var o=(t*255|0)&255;return(o<<24|S)>>>0},getTintAppendFloatAlphaAndSwap:function(S,t){var o=(S>>16|0)&255,g=(S>>8|0)&255,a=(S|0)&255,n=(t*255|0)&255;return(n<<24|a<<16|g<<8|o)>>>0},getFloatsFromUintRGB:function(S){var t=(S>>16|0)&255,o=(S>>8|0)&255,g=(S|0)&255;return[t/255,o/255,g/255]},checkShaderMax:function(S,t){var o=Math.min(16,S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?o:Math.min(o,t)},parseFragmentShaderMaxTextures:function(S,t){if(!S)return"";for(var o="",g=0;g<t;g++)g>0&&(o+=`
	else `),g<t-1&&(o+="if (outTexId < "+g+".5)"),o+=`
	{`,o+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",o+=`
	}`;return S=S.replace(/%count%/gi,t.toString()),S.replace(/%forloop%/gi,o)},setGlowQuality:function(S,t,o,g){return o===void 0&&(o=t.config.glowFXQuality),g===void 0&&(g=t.config.glowFXDistance),S=S.replace(/__SIZE__/gi,(1/o/g).toFixed(7)),S=S.replace(/__DIST__/gi,g.toFixed(0)+".0"),S}}},29100:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(62644),a=t(50792),n=t(77085),r=t(95540),e=t(37867),s=t(92503),h=t(32302),i=t(70554),l=t(38683),u=new o({Extends:a,initialize:function(d){a.call(this);var p=d.game,x=p.renderer,y=x.gl;this.name=r(d,"name","WebGLPipeline"),this.game=p,this.renderer=x,this.manager,this.gl=y,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=r(d,"topology",y.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=r(d,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=d,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=r(d,"resizeUniform","")},boot:function(){var f,d=this.gl,p=this.config,x=this.renderer;this.isPostFX||(this.projectionMatrix=new e().identity());var y=this.renderTargets,T=r(p,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var C=x.width,A=x.height;if(typeof T=="number")for(f=0;f<T;f++)y.push(new h(x,C,A,1,0,!0));else if(Array.isArray(T))for(f=0;f<T.length;f++){var R=r(T[f],"scale",1),M=r(T[f],"minFilter",0),L=r(T[f],"autoClear",1),I=r(T[f],"autoResize",!1),O=r(T[f],"width",null),D=r(T[f],"height",O);O?y.push(new h(x,O,D,1,M,L,I)):y.push(new h(x,C,A,R,M,L,I))}y.length&&(this.currentRenderTarget=y[0]),this.setShadersFromConfig(p);var B=this.shaders,V=0;for(f=0;f<B.length;f++)B[f].vertexSize>V&&(V=B[f].vertexSize);var W=r(p,"batchSize",x.config.batchSize);this.vertexCapacity=W*6;var Y=new ArrayBuffer(this.vertexCapacity*V);this.vertexData=Y,this.bytes=new Uint8Array(Y),this.vertexViewF32=new Float32Array(Y),this.vertexViewU32=new Uint32Array(Y);var X=r(p,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=x.createVertexBuffer(Y,d.STATIC_DRAW)):this.vertexBuffer=x.createVertexBuffer(Y.byteLength,d.DYNAMIC_DRAW),this.setVertexBuffer(),f=B.length-1;f>=0;f--)B[f].rebind();this.hasBooted=!0,x.on(s.RESIZE,this.resize,this),x.on(s.PRE_RENDER,this.onPreRender,this),x.on(s.RENDER,this.onRender,this),x.on(s.POST_RENDER,this.onPostRender,this),this.emit(n.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(f,d,p){var x=this.renderer;if(f!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush();var y=this.setVertexBuffer(p);y&&!d&&(d=!0),f.bind(d,!1),this.currentShader=f}return this},getShaderByName:function(f){for(var d=this.shaders,p=0;p<d.length;p++)if(d[p].name===f)return d[p]},setShadersFromConfig:function(f){var d,p=this.shaders,x=this.renderer;for(d=0;d<p.length;d++)p[d].destroy();var y="vertShader",T="fragShader",C="attributes",A=r(f,y,null),R=i.parseFragmentShaderMaxTextures(r(f,T,null),x.maxTextures),M=r(f,C,null),L=r(f,"shaders",[]),I=L.length;if(I===0)A&&R&&(this.shaders=[new l(this,"default",A,R,g(M))]);else{var O=[];for(d=0;d<I;d++){var D=L[d],B,V,W,Y;if(typeof D=="string"?(B="default",V=A,W=i.parseFragmentShaderMaxTextures(D,x.maxTextures),Y=M):(B=r(D,"name","default"),V=r(D,y,A),W=i.parseFragmentShaderMaxTextures(r(D,T,R),x.maxTextures),Y=r(D,C,M)),B==="default"){var X=W.split(`
`),U=X[0].trim();U.indexOf("#define SHADER_NAME")>-1&&(B=U.substring(20))}V&&W&&O.push(new l(this,B,V,W,g(Y)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(f){return this.currentBatch={start:this.vertexCount,count:0,texture:[f],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=f,this.batch.push(this.currentBatch),0},addTextureToBatch:function(f){var d=this.currentBatch;d&&(d.texture.push(f),d.unit++,d.maxUnit++)},pushBatch:function(f){if(!this.currentBatch||this.forceZero&&f!==this.currentTexture)return this.createBatch(f);if(f===this.currentTexture)return this.currentUnit;var d=this.currentBatch,p=d.texture.indexOf(f);return p===-1?d.texture.length===this.renderer.maxTextures?this.createBatch(f):(d.unit++,d.maxUnit++,d.texture.push(f),this.currentUnit=d.unit,this.currentTexture=f,d.unit):(this.currentUnit=p,this.currentTexture=f,p)},setGameObject:function(f,d){return d===void 0&&(d=f.frame),this.pushBatch(d.source.glTexture)},shouldFlush:function(f){return f===void 0&&(f=0),this.vertexCount+f>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(f,d){(f!==this.width||d!==this.height)&&this.flush(),this.width=f,this.height=d;for(var p=this.renderTargets,x=0;x<p.length;x++)p[x].resize(f,d);return this.setProjectionMatrix(f,d),this.resizeUniform&&this.set2f(this.resizeUniform,f,d),this.emit(n.RESIZE,f,d,this),this.onResize(f,d),this},setProjectionMatrix:function(f,d){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=f,this.projectionHeight=d,p.ortho(0,f,d,0,-1e3,1e3);for(var x=this.shaders,y="uProjectionMatrix",T=0;T<x.length;T++){var C=x[T];C.hasUniform(y)&&(C.resetUniform(y),C.setMatrix4fv(y,!1,p.val,C))}return this},flipProjectionMatrix:function(f){f===void 0&&(f=!0);var d=this.projectionMatrix;if(!d)return this;var p=this.projectionWidth,x=this.projectionHeight;f?d.ortho(0,p,0,x,-1e3,1e3):d.ortho(0,p,x,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,d.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var f=this.renderer.projectionWidth,d=this.renderer.projectionHeight;(this.projectionWidth!==f||this.projectionHeight!==d)&&this.setProjectionMatrix(f,d)}},bind:function(f){if(f===void 0&&(f=this.currentShader),this.glReset)return this.rebind(f);var d=!1,p=this.gl;return p.getParameter(p.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(p.bindBuffer(p.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,d=!0),f.bind(d),this.currentShader=f,this.activeTextures.length=0,this.emit(n.BIND,this,f),this.onActive(f),this},rebind:function(f){this.activeBuffer=null,this.setVertexBuffer();for(var d=this.shaders,p=d.length-1;p>=0;p--){var x=d[p].rebind();(!f||x===f)&&(this.currentShader=x)}return this.activeTextures.length=0,this.emit(n.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var f=this.shaders,d=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,d&&this.setVertexBuffer();for(var p=0;p<f.length;p++){var x=f[p];x.syncUniforms(),d&&x.rebind()}},setVertexBuffer:function(f){if(f===void 0&&(f=this.vertexBuffer),f!==this.activeBuffer){var d=this.gl;return this.gl.bindBuffer(d.ARRAY_BUFFER,f.webGLBuffer),this.activeBuffer=f,!0}return!1},preBatch:function(f){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(f),this},postBatch:function(f){return this.onDraw(this.currentRenderTarget),this.onPostBatch(f),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(f){if(f===void 0&&(f=!1),this.vertexCount>0){this.emit(n.BEFORE_FLUSH,this,f),this.onBeforeFlush(f);var d=this.gl,p=this.vertexCount,x=this.currentShader.vertexSize,y=this.topology;if(this.active){this.setVertexBuffer(),p===this.vertexCapacity?d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.DYNAMIC_DRAW):d.bufferSubData(d.ARRAY_BUFFER,0,this.bytes.subarray(0,p*x));var T,C,A,R=this.batch,M=this.activeTextures;if(this.forceZero)for(M[0]||d.activeTexture(d.TEXTURE0),T=0;T<R.length;T++)C=R[T],A=C.texture[0],M[0]!==A&&(d.bindTexture(d.TEXTURE_2D,A.webGLTexture),M[0]=A),d.drawArrays(y,C.start,C.count);else for(T=0;T<R.length;T++){C=R[T];for(var L=0;L<=C.maxUnit;L++)A=C.texture[L],M[L]!==A&&(d.activeTexture(d.TEXTURE0+L),d.bindTexture(d.TEXTURE_2D,A.webGLTexture),M[L]=A);d.drawArrays(y,C.start,C.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(n.AFTER_FLUSH,this,f),this.onAfterFlush(f)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(f,d,p,x,y,T,C){var A=this.vertexViewF32,R=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++M]=f,A[++M]=d,A[++M]=p,A[++M]=x,A[++M]=y,A[++M]=T,R[++M]=C,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(f,d,p,x,y,T,C,A,R,M,L,I,O,D,B,V,W,Y,X,U){U===void 0&&(U=this.currentUnit);var z=!1;this.shouldFlush(6)&&(this.flush(),z=!0),this.currentBatch||(U=this.setTexture2D(X));var G=this.vertexViewF32,b=this.vertexViewU32,H=this.vertexCount*this.currentShader.vertexComponentCount-1;return G[++H]=d,G[++H]=p,G[++H]=M,G[++H]=L,G[++H]=U,G[++H]=Y,b[++H]=D,G[++H]=x,G[++H]=y,G[++H]=M,G[++H]=O,G[++H]=U,G[++H]=Y,b[++H]=V,G[++H]=T,G[++H]=C,G[++H]=I,G[++H]=O,G[++H]=U,G[++H]=Y,b[++H]=W,G[++H]=d,G[++H]=p,G[++H]=M,G[++H]=L,G[++H]=U,G[++H]=Y,b[++H]=D,G[++H]=T,G[++H]=C,G[++H]=I,G[++H]=O,G[++H]=U,G[++H]=Y,b[++H]=W,G[++H]=A,G[++H]=R,G[++H]=I,G[++H]=L,G[++H]=U,G[++H]=Y,b[++H]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(f),z},batchTri:function(f,d,p,x,y,T,C,A,R,M,L,I,O,D,B,V,W){W===void 0&&(W=this.currentUnit);var Y=!1;this.shouldFlush(3)&&(this.flush(),Y=!0),this.currentBatch||(W=this.setTexture2D(V));var X=this.vertexViewF32,U=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++z]=d,X[++z]=p,X[++z]=A,X[++z]=R,X[++z]=W,X[++z]=B,U[++z]=I,X[++z]=x,X[++z]=y,X[++z]=A,X[++z]=L,X[++z]=W,X[++z]=B,U[++z]=O,X[++z]=T,X[++z]=C,X[++z]=M,X[++z]=L,X[++z]=W,X[++z]=B,U[++z]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(f),Y},drawFillRect:function(f,d,p,x,y,T,C,A){C===void 0&&(C=this.renderer.whiteTexture),A===void 0&&(A=!0),f=Math.floor(f),d=Math.floor(d);var R=Math.floor(f+p),M=Math.floor(d+x),L=this.setTexture2D(C),I=i.getTintAppendFloatAlphaAndSwap(y,T),O=0,D=0,B=1,V=1;A&&(D=1,V=0),this.batchQuad(null,f,d,f,M,R,M,R,d,O,D,B,V,I,I,I,I,0,C,L)},setTexture2D:function(f){return f===void 0&&(f=this.renderer.whiteTexture),this.pushBatch(f)},bindTexture:function(f,d){d===void 0&&(d=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+d),p.bindTexture(p.TEXTURE_2D,f.webGLTexture),this},bindRenderTarget:function(f,d){return this.bindTexture(f.texture,d)},setTime:function(f,d){return this.set1f(f,this.game.loop.getDuration(),d),this},setBoolean:function(f,d,p){return p===void 0&&(p=this.currentShader),p.setBoolean(f,d),this},set1f:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set1f(f,d),this},set2f:function(f,d,p,x){return x===void 0&&(x=this.currentShader),x.set2f(f,d,p),this},set3f:function(f,d,p,x,y){return y===void 0&&(y=this.currentShader),y.set3f(f,d,p,x),this},set4f:function(f,d,p,x,y,T){return T===void 0&&(T=this.currentShader),T.set4f(f,d,p,x,y),this},set1fv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set1fv(f,d),this},set2fv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set2fv(f,d),this},set3fv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set3fv(f,d),this},set4fv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set4fv(f,d),this},set1iv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set1iv(f,d),this},set2iv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set2iv(f,d),this},set3iv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set3iv(f,d),this},set4iv:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set4iv(f,d),this},set1i:function(f,d,p){return p===void 0&&(p=this.currentShader),p.set1i(f,d),this},set2i:function(f,d,p,x){return x===void 0&&(x=this.currentShader),x.set2i(f,d,p),this},set3i:function(f,d,p,x,y){return y===void 0&&(y=this.currentShader),y.set3i(f,d,p,x),this},set4i:function(f,d,p,x,y,T){return T===void 0&&(T=this.currentShader),T.set4i(f,d,p,x,y),this},setMatrix2fv:function(f,d,p,x){return x===void 0&&(x=this.currentShader),x.setMatrix2fv(f,d,p),this},setMatrix3fv:function(f,d,p,x){return x===void 0&&(x=this.currentShader),x.setMatrix3fv(f,d,p),this},setMatrix4fv:function(f,d,p,x){return x===void 0&&(x=this.currentShader),x.setMatrix4fv(f,d,p),this},destroy:function(){this.emit(n.DESTROY,this);var f,d=this.shaders;for(f=0;f<d.length;f++)d[f].destroy();var p=this.renderTargets;for(f=0;f<p.length;f++)p[f].destroy();var x=this.renderer;return x.deleteBuffer(this.vertexBuffer),x.off(s.RESIZE,this.resize,this),x.off(s.PRE_RENDER,this.onPreRender,this),x.off(s.RENDER,this.onRender,this),x.off(s.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});c.exports=u},74797:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95428),g=t(72905),a=t(19715),n=t(83419),r=t(8054),e=t(50792),s=t(92503),h=t(50030),i=t(37867),l=t(29747),u=t(7530),f=t(32302),d=t(97480),p=t(69442),x=t(70554),y=t(88815),T=t(26128),C=t(1482),A=t(82751),R=t(84387),M=t(93567),L=t(57183),I=new n({Extends:e,initialize:function(D){e.call(this);var B=D.config,V={alpha:B.transparent,desynchronized:B.desynchronized,depth:!0,antialias:B.antialiasGL,premultipliedAlpha:B.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:B.failIfMajorPerformanceCaveat,powerPreference:B.powerPreference,preserveDrawingBuffer:B.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:B.clearBeforeRender,antialias:B.antialias,backgroundColor:B.backgroundColor,contextCreation:V,roundPixels:B.roundPixels,maxTextures:B.maxTextures,maxTextureSize:B.maxTextureSize,batchSize:B.batchSize,maxLights:B.maxLights,mipmapFilter:B.mipmapFilter},this.game=D,this.type=r.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=D.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.previousContextLostHandler=l,this.previousContextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(O){var D,B=this.game,V=this.canvas,W=O.backgroundColor;if(B.config.context?D=B.config.context:D=V.getContext("webgl",O.contextCreation)||V.getContext("experimental-webgl",O.contextCreation),!D||D.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=D,this.setExtensions(),this.setContextHandlers(),B.context=D;for(var Y=0;Y<=27;Y++)this.blendModes.push({func:[D.ONE,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_ADD});this.blendModes[1].func=[D.ONE,D.DST_ALPHA],this.blendModes[2].func=[D.DST_COLOR,D.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[D.ONE,D.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[D.ZERO,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_REVERSE_SUBTRACT},this.glFormats=[D.BYTE,D.SHORT,D.UNSIGNED_BYTE,D.UNSIGNED_SHORT,D.FLOAT],this.glFuncMap={mat2:{func:D.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:D.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:D.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:D.uniform1f,length:1},"1fv":{func:D.uniform1fv,length:1},"1i":{func:D.uniform1i,length:1},"1iv":{func:D.uniform1iv,length:1},"2f":{func:D.uniform2f,length:2},"2fv":{func:D.uniform2fv,length:1},"2i":{func:D.uniform2i,length:2},"2iv":{func:D.uniform2iv,length:1},"3f":{func:D.uniform3f,length:3},"3fv":{func:D.uniform3fv,length:1},"3i":{func:D.uniform3i,length:3},"3iv":{func:D.uniform3iv,length:1},"4f":{func:D.uniform4f,length:4},"4fv":{func:D.uniform4fv,length:1},"4i":{func:D.uniform4i,length:4},"4iv":{func:D.uniform4iv,length:1}},(!O.maxTextures||O.maxTextures===-1)&&(O.maxTextures=D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS)),O.maxTextureSize||(O.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),D.disable(D.DEPTH_TEST),D.disable(D.CULL_FACE),D.enable(D.BLEND),D.clearColor(W.redGL,W.greenGL,W.blueGL,W.alphaGL);var X=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return X.indexOf(O.mipmapFilter)!==-1&&(this.mipmapFilter=D[O.mipmapFilter]),this.maxTextures=x.checkShaderMax(D,O.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new u(this),this.setBlendMode(r.BlendModes.NORMAL),this.projectionMatrix=new i().identity(),B.textures.once(p.READY,this.boot,this),this},boot:function(){var O=this.game,D=this.pipelines,B=O.scale.baseSize,V=B.width,W=B.height;this.width=V,this.height=W,this.isBooted=!0,this.renderTarget=new f(this,V,W,1,0,!0,!0),this.maskTarget=new f(this,V,W,1,0,!0,!0),this.maskSource=new f(this,V,W,1,0,!0,!0);var Y=O.config;D.boot(Y.pipeline,Y.defaultPipeline,Y.autoMobilePipeline),this.blankTexture=O.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=O.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=O.textures.getFrame("__WHITE").glTexture;var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,null),X.enable(X.SCISSOR_TEST),O.scale.on(d.RESIZE,this.onResize,this),this.resize(V,W)},setExtensions:function(){var O=this.gl,D=O.getSupportedExtensions();this.supportedExtensions=D;var B="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(B)>-1?O.getExtension(B):null;var V="OES_vertex_array_object";this.vaoExtension=D.indexOf(V)>-1?O.getExtension(V):null},setContextHandlers:function(O,D){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof O=="function"?this.contextLostHandler=O.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof D=="function"?this.contextRestoredHandler=D.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(O){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(s.LOSE_WEBGL,this),O.preventDefault()},dispatchContextRestored:function(O){var D=this.gl;if(D.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(r.BlendModes.NORMAL),D.disable(D.BLEND),D.disable(D.DEPTH_TEST),D.enable(D.CULL_FACE),this.compression=this.getCompressedTextures();var B=function(V){V.createResource()};o(this.glTextureWrappers,B),o(this.glBufferWrappers,B),o(this.glFramebufferWrappers,B),o(this.glProgramWrappers,B),o(this.glAttribLocationWrappers,B),o(this.glUniformLocationWrappers,B),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(s.RESTORE_WEBGL,this),O.preventDefault()},createTemporaryTextures:function(){for(var O=this.gl,D=0;D<this.maxTextures;D++){var B=O.createTexture();O.activeTexture(O.TEXTURE0+D),O.bindTexture(O.TEXTURE_2D,B),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(D)}},captureFrame:function(O,D){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(O,D,B){},stopCapture:function(){},onCapture:function(O){},onResize:function(O,D){(D.width!==this.width||D.height!==this.height)&&this.resize(D.width,D.height)},beginCapture:function(O,D){O===void 0&&(O=this.width),D===void 0&&(D=this.height),this.renderTarget.bind(!0,O,D),this.setProjectionMatrix(O,D)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(O,D){var B=this.gl;return this.width=O,this.height=D,this.setProjectionMatrix(O,D),B.viewport(0,0,O,D),this.drawingBufferHeight=B.drawingBufferHeight,B.scissor(0,B.drawingBufferHeight-D,O,D),this.defaultScissor[2]=O,this.defaultScissor[3]=D,this.emit(s.RESIZE,O,D),this},getCompressedTextures:function(){var O="WEBGL_compressed_texture_",D="WEBKIT_"+O,B="EXT_texture_compression_",V=function(Y,X){var U=Y.getExtension(O+X)||Y.getExtension(D+X)||Y.getExtension(B+X);if(U){var z={};for(var G in U)z[U[G]]=G;return z}},W=this.gl;return{ETC:V(W,"etc"),ETC1:V(W,"etc1"),ATC:V(W,"atc"),ASTC:V(W,"astc"),BPTC:V(W,"bptc"),RGTC:V(W,"rgtc"),PVRTC:V(W,"pvrtc"),S3TC:V(W,"s3tc"),S3TCSRGB:V(W,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(O,D){var B=this.compression[O.toUpperCase()];if(D in B)return B[D]},supportsCompressedTexture:function(O,D){var B=this.compression[O.toUpperCase()];return B?D?D in B:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(O,D){return(O!==this.projectionWidth||D!==this.projectionHeight)&&(this.projectionWidth=O,this.projectionHeight=D,this.projectionMatrix.ortho(0,O,D,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(O){return this.supportedExtensions?this.supportedExtensions.indexOf(O):!1},getExtension:function(O){return this.hasExtension(O)?(O in this.extensions||(this.extensions[O]=this.gl.getExtension(O)),this.extensions[O]):null},flush:function(){this.pipelines.flush()},pushScissor:function(O,D,B,V,W){W===void 0&&(W=this.drawingBufferHeight);var Y=this.scissorStack,X=[O,D,B,V];return Y.push(X),this.setScissor(O,D,B,V,W),this.currentScissor=X,X},setScissor:function(O,D,B,V,W){W===void 0&&(W=this.drawingBufferHeight);var Y=this.gl,X=this.currentScissor,U=B>0&&V>0;if(X&&U){var z=X[0],G=X[1],b=X[2],H=X[3];U=z!==O||G!==D||b!==B||H!==V}U&&(this.flush(),Y.scissor(O,W-D-V,B,V))},resetScissor:function(){var O=this.gl;O.enable(O.SCISSOR_TEST);var D=this.currentScissor;if(D){var B=D[0],V=D[1],W=D[2],Y=D[3];W>0&&Y>0&&O.scissor(B,this.drawingBufferHeight-V-Y,W,Y)}},popScissor:function(){var O=this.scissorStack;O.pop();var D=O[O.length-1];D&&this.setScissor(D[0],D[1],D[2],D[3]),this.currentScissor=D},hasActiveStencilMask:function(){var O=this.currentMask.mask,D=this.currentCameraMask.mask;return O&&O.isStencil||D&&D.isStencil},resetViewport:function(){var O=this.gl;O.viewport(0,0,this.width,this.height),this.drawingBufferHeight=O.drawingBufferHeight},setBlendMode:function(O,D){D===void 0&&(D=!1);var B=this.gl,V=this.blendModes[O];return D||O!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==O?(this.flush(),B.enable(B.BLEND),B.blendEquation(V.equation),V.func.length>2?B.blendFuncSeparate(V.func[0],V.func[1],V.func[2],V.func[3]):B.blendFunc(V.func[0],V.func[1]),this.currentBlendMode=O,!0):!1},addBlendMode:function(O,D){var B=this.blendModes.push({func:O,equation:D});return B-1},updateBlendMode:function(O,D,B){return this.blendModes[O]&&(this.blendModes[O].func=D,B&&(this.blendModes[O].equation=B)),this},removeBlendMode:function(O){return O>17&&this.blendModes[O]&&this.blendModes.splice(O,1),this},pushFramebuffer:function(O,D,B,V,W){return O===this.currentFramebuffer?this:(this.fboStack.push(O),this.setFramebuffer(O,D,B,V,W))},setFramebuffer:function(O,D,B,V,W){if(D===void 0&&(D=!1),B===void 0&&(B=!0),V===void 0&&(V=null),W===void 0&&(W=!1),O===this.currentFramebuffer)return this;var Y=this.gl,X=this.width,U=this.height;return O&&O.renderTexture&&B?(X=O.renderTexture.width,U=O.renderTexture.height):this.flush(),O?Y.bindFramebuffer(Y.FRAMEBUFFER,O.webGLFramebuffer):Y.bindFramebuffer(Y.FRAMEBUFFER,null),B&&Y.viewport(0,0,X,U),V&&Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,V.webGLTexture,0),W&&(Y.clearColor(0,0,0,0),Y.clear(Y.COLOR_BUFFER_BIT)),D&&(O?(this.drawingBufferHeight=U,this.pushScissor(0,0,X,U)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=O,this},popFramebuffer:function(O,D){O===void 0&&(O=!1),D===void 0&&(D=!0);var B=this.fboStack;B.pop();var V=B[B.length-1];return V||(V=null),this.setFramebuffer(V,O,D),V},restoreFramebuffer:function(O,D){O===void 0&&(O=!1),D===void 0&&(D=!0);var B=this.fboStack,V=B[B.length-1];V||(V=null),this.currentFramebuffer=null,this.setFramebuffer(V,O,D)},setProgram:function(O){return O!==this.currentProgram?(this.flush(),this.gl.useProgram(O.webGLProgram),this.currentProgram=O,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(O,D,B,V,W){W===void 0&&(W=!1);var Y=this.gl,X=Y.NEAREST,U=Y.NEAREST,z=Y.CLAMP_TO_EDGE,G=null;D=O?O.width:D,B=O?O.height:B;var b=h(D,B);if(b&&!W&&(z=Y.REPEAT),V===r.ScaleModes.LINEAR&&this.config.antialias){var H=O&&O.compressed,j=!H&&b||H&&O.mipmaps.length>1;X=this.mipmapFilter&&j?this.mipmapFilter:Y.LINEAR,U=Y.LINEAR}return!O&&typeof D=="number"&&typeof B=="number"?G=this.createTexture2D(0,X,U,z,z,Y.RGBA,null,D,B):G=this.createTexture2D(0,X,U,z,z,Y.RGBA,O),G},createTexture2D:function(O,D,B,V,W,Y,X,U,z,G,b,H){typeof U!="number"&&(U=X?X.width:1),typeof z!="number"&&(z=X?X.height:1);var j=new A(this.gl,O,D,B,V,W,Y,X,U,z,G,b,H);return this.glTextureWrappers.push(j),j},createFramebuffer:function(O,D,B,V){this.currentFramebuffer=null;var W=new R(this.gl,O,D,B,V);return this.glFramebufferWrappers.push(W),W},beginBitmapMask:function(O,D){var B=this.gl;B&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==O&&(this.currentMask.mask=O,this.currentMask.camera=D))},drawBitmapMask:function(O,D,B){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),O.renderWebGL(this,O,D),this.maskSource.unbind(!0),this.maskTarget.unbind();var V=this.gl,W=this.getCurrentStencilMask();W?(V.enable(V.STENCIL_TEST),W.mask.applyStencil(this,W.camera,!0)):this.currentMask.mask=null,this.pipelines.set(B),V.activeTexture(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,this.maskTarget.texture.webGLTexture),V.activeTexture(V.TEXTURE1),V.bindTexture(V.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(O,D){var B=new C(this.gl,O,D);return this.glProgramWrappers.push(B),B},createVertexBuffer:function(O,D){var B=this.gl,V=new T(B,O,B.ARRAY_BUFFER,D);return this.glBufferWrappers.push(V),V},createAttribLocation:function(O,D){var B=new M(this.gl,O,D);return this.glAttribLocationWrappers.push(B),B},createUniformLocation:function(O,D){var B=new L(this.gl,O,D);return this.glUniformLocationWrappers.push(B),B},createIndexBuffer:function(O,D){var B=this.gl,V=new T(B,O,B.ELEMENT_ARRAY_BUFFER,D);return this.glBufferWrappers.push(V),V},deleteTexture:function(O){if(O)return g(this.glTextureWrappers,O),O.destroy(),this},deleteFramebuffer:function(O){return O?(g(this.fboStack,O),g(this.glFramebufferWrappers,O),O.destroy(),this):this},deleteProgram:function(O){return O&&(g(this.glProgramWrappers,O),O.destroy()),this},deleteAttribLocation:function(O){return O&&(g(this.glAttribLocationWrappers,O),O.destroy()),this},deleteUniformLocation:function(O){return O&&(g(this.glUniformLocationWrappers,O),O.destroy()),this},deleteBuffer:function(O){return O?(g(this.glBufferWrappers,O),O.destroy(),this):this},preRenderCamera:function(O){var D=O.x,B=O.y,V=O.width,W=O.height,Y=O.backgroundColor;if(O.emit(a.PRE_RENDER,O),this.pipelines.preBatchCamera(O),this.pushScissor(D,B,V,W),O.mask&&(this.currentCameraMask.mask=O.mask,this.currentCameraMask.camera=O._maskCamera,O.mask.preRenderWebGL(this,O,O._maskCamera)),Y.alphaGL>0){var X=this.pipelines.setMulti();X.drawFillRect(D,B,V,W,x.getTintFromFloats(Y.blueGL,Y.greenGL,Y.redGL,1),Y.alphaGL)}},getCurrentStencilMask:function(){var O=null,D=this.maskStack,B=this.currentCameraMask;return D.length>0?O=D[D.length-1]:B.mask&&B.mask.isStencil&&(O=B),O},postRenderCamera:function(O){var D=O.flashEffect,B=O.fadeEffect;if(D.isRunning||B.isRunning||B.isComplete){var V=this.pipelines.setMulti();D.postRenderWebGL(V,x.getTintFromFloats),B.postRenderWebGL(V,x.getTintFromFloats)}O.dirty=!1,this.popScissor(),O.mask&&(this.currentCameraMask.mask=null,O.mask.postRenderWebGL(this,O._maskCamera)),this.pipelines.postBatchCamera(O),O.emit(a.POST_RENDER,O)},preRender:function(){if(!this.contextLost){var O=this.gl;if(O.bindFramebuffer(O.FRAMEBUFFER,null),this.emit(s.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var D=this.config.backgroundColor;O.clearColor(D.redGL,D.greenGL,D.blueGL,D.alphaGL),O.clear(O.COLOR_BUFFER_BIT|O.DEPTH_BUFFER_BIT|O.STENCIL_BUFFER_BIT)}O.enable(O.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&O.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(s.PRE_RENDER)}},render:function(O,D,B){if(!this.contextLost){var V=D.length;if(this.emit(s.RENDER,O,B),this.preRenderCamera(B),V===0){this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(B);return}this.currentType="";for(var W=this.currentMask,Y=0;Y<V;Y++){this.finalType=Y===V-1;var X=D[Y],U=X.mask;W=this.currentMask,W.mask&&W.mask!==U&&W.mask.postRenderWebGL(this,W.camera),U&&W.mask!==U&&U.preRenderWebGL(this,X,B),X.blendMode!==this.currentBlendMode&&this.setBlendMode(X.blendMode);var z=X.type;z!==this.currentType&&(this.newType=!0,this.currentType=z),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=D[Y+1].type===this.currentType,X.renderWebGL(this,X,B),this.newType=!1}W=this.currentMask,W.mask&&W.mask.postRenderWebGL(this,W.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(B)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var O=this.snapshotState;O.callback&&(y(this.gl,O),O.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var O=this.gl,D=this.getCurrentStencilMask();if(D){var B=D.mask;O.enable(O.STENCIL_TEST),B.invertAlpha?O.stencilFunc(O.NOTEQUAL,B.level,255):O.stencilFunc(O.EQUAL,B.level,255)}},snapshot:function(O,D,B){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,O,D,B)},snapshotArea:function(O,D,B,V,W,Y,X){var U=this.snapshotState;return U.callback=W,U.type=Y,U.encoder=X,U.getPixel=!1,U.x=O,U.y=D,U.width=B,U.height=V,this},snapshotPixel:function(O,D,B){return this.snapshotArea(O,D,1,1,B),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(O,D,B,V,W,Y,X,U,z,G,b){W===void 0&&(W=!1),Y===void 0&&(Y=0),X===void 0&&(X=0),U===void 0&&(U=D),z===void 0&&(z=B),G==="pixel"&&(W=!0,G="image/png");var H=this.currentFramebuffer;this.snapshotArea(Y,X,U,z,V,G,b);var j=this.snapshotState;return j.getPixel=W,j.isFramebuffer=!0,j.bufferWidth=D,j.bufferHeight=B,j.width=Math.min(j.width,D),j.height=Math.min(j.height,B),this.setFramebuffer(O),y(this.gl,j),this.setFramebuffer(H),j.callback=null,j.isFramebuffer=!1,this},canvasToTexture:function(O,D,B,V){B===void 0&&(B=!1),V===void 0&&(V=!1);var W=this.gl,Y=W.NEAREST,X=W.NEAREST,U=O.width,z=O.height,G=W.CLAMP_TO_EDGE,b=h(U,z);return!B&&b&&(G=W.REPEAT),this.config.antialias&&(Y=b&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,X=W.LINEAR),D?(D.update(O,U,z,V,G,G,Y,X,D.format),D):this.createTexture2D(0,Y,X,G,G,W.RGBA,O,U,z,!0,!1,V)},createCanvasTexture:function(O,D,B){return D===void 0&&(D=!1),B===void 0&&(B=!1),this.canvasToTexture(O,null,D,B)},updateCanvasTexture:function(O,D,B,V){return B===void 0&&(B=!1),V===void 0&&(V=!1),this.canvasToTexture(O,D,V,B)},videoToTexture:function(O,D,B,V){B===void 0&&(B=!1),V===void 0&&(V=!1);var W=this.gl,Y=W.NEAREST,X=W.NEAREST,U=O.videoWidth,z=O.videoHeight,G=W.CLAMP_TO_EDGE,b=h(U,z);return!B&&b&&(G=W.REPEAT),this.config.antialias&&(Y=b&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,X=W.LINEAR),D?(D.update(O,U,z,V,G,G,Y,X,D.format),D):this.createTexture2D(0,Y,X,G,G,W.RGBA,O,U,z,!0,!0,V)},createVideoTexture:function(O,D,B){return D===void 0&&(D=!1),B===void 0&&(B=!1),this.videoToTexture(O,null,D,B)},updateVideoTexture:function(O,D,B,V){return B===void 0&&(B=!1),V===void 0&&(V=!1),this.videoToTexture(O,D,V,B)},createUint8ArrayTexture:function(O,D,B){var V=this.gl,W=V.NEAREST,Y=V.NEAREST,X=V.CLAMP_TO_EDGE,U=h(D,B);return U&&(X=V.REPEAT),this.createTexture2D(0,W,Y,X,X,V.RGBA,O,D,B)},setTextureFilter:function(O,D){var B=this.gl,V=D===0?B.LINEAR:B.NEAREST;B.activeTexture(B.TEXTURE0);var W=B.getParameter(B.TEXTURE_BINDING_2D);return B.bindTexture(B.TEXTURE_2D,O.webGLTexture),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,V),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,V),O.minFilter=V,O.magFilter=V,W&&B.bindTexture(B.TEXTURE_2D,W),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var O=function(D){D.destroy()};o(this.glAttribLocationWrappers,O),o(this.glBufferWrappers,O),o(this.glFramebufferWrappers,O),o(this.glProgramWrappers,O),o(this.glTextureWrappers,O),o(this.glUniformLocationWrappers,O),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});c.exports=I},38683:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95428),a=t(95540),n=t(14500),r=new o({initialize:function(s,h,i,l,u){this.pipeline=s,this.name=h,this.renderer=s.renderer,this.gl=this.renderer.gl,this.fragSrc=l,this.vertSrc=i,this.program=this.renderer.createProgram(i,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(u),this.createUniforms()},createAttributes:function(e){var s=0,h=0,i=[];this.vertexComponentCount=0;for(var l=0;l<e.length;l++){var u=e[l],f=u.name,d=a(u,"size",1),p=a(u,"type",n.FLOAT),x=p.enum,y=p.size,T=!!u.normalized;i.push({name:f,size:d,type:x,normalized:T,offset:h,enabled:!1,location:-1}),y===4?s+=d:s++,h+=d*y}this.vertexSize=h,this.vertexComponentCount=s,this.attributes=i},bind:function(e,s){return e===void 0&&(e=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var s=this.gl,h=this.renderer,i=this.vertexSize,l=this.attributes,u=this.program,f=0;f<l.length;f++){var d=l[f],p=d.size,x=d.type,y=d.offset,T=d.enabled,C=d.location,A=!!d.normalized;if(e){C!==-1&&h.deleteAttribLocation(C);var R=this.renderer.createAttribLocation(u,d.name);R.webGLAttribLocation>=0?(s.enableVertexAttribArray(R.webGLAttribLocation),s.vertexAttribPointer(R.webGLAttribLocation,p,x,A,i,y),d.enabled=!0,d.location=R):R.webGLAttribLocation!==-1&&s.disableVertexAttribArray(R.webGLAttribLocation)}else T?s.vertexAttribPointer(C.webGLAttribLocation,p,x,A,i,y):!T&&C!==-1&&C.webGLAttribLocation>-1&&(s.disableVertexAttribArray(C.webGLAttribLocation),d.location=-1)}return this},createUniforms:function(){var e=this.gl,s=this.program,h=this.uniforms,i,l,u,f=e.getProgramParameter(s.webGLProgram,e.ACTIVE_UNIFORMS);for(i=0;i<f;i++){var d=e.getActiveUniform(s.webGLProgram,i);if(d){l=d.name,u=this.renderer.createUniformLocation(s,l),u!==null&&(h[l]={name:l,location:u,setter:null,value1:null,value2:null,value3:null,value4:null});var p=l.indexOf("[");p>0&&(l=l.substr(0,p),h.hasOwnProperty(l)||(u=this.renderer.createUniformLocation(s,l),u!==null&&(h[l]={name:l,location:u,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var e=this.gl;this.renderer.setProgram(this.program);for(var s in this.uniforms){var h=this.uniforms[s];h.setter&&h.setter.call(e,h.location.webGLUniformLocation,h.value1,h.value2,h.value3,h.value4)}},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var s=this.uniforms[e];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(e,s,h,i){var l=this.uniforms[s];return l?((i||l.value1!==h)&&(l.setter||(l.setter=e),l.value1=h,this.renderer.setProgram(this.program),e.call(this.gl,l.location.webGLUniformLocation,h),this.pipeline.currentShader=this),this):this},setUniform2:function(e,s,h,i,l){var u=this.uniforms[s];return u?((l||u.value1!==h||u.value2!==i)&&(u.setter||(u.setter=e),u.value1=h,u.value2=i,this.renderer.setProgram(this.program),e.call(this.gl,u.location.webGLUniformLocation,h,i),this.pipeline.currentShader=this),this):this},setUniform3:function(e,s,h,i,l,u){var f=this.uniforms[s];return f?((u||f.value1!==h||f.value2!==i||f.value3!==l)&&(f.setter||(f.setter=e),f.value1=h,f.value2=i,f.value3=l,this.renderer.setProgram(this.program),e.call(this.gl,f.location.webGLUniformLocation,h,i,l),this.pipeline.currentShader=this),this):this},setUniform4:function(e,s,h,i,l,u,f){var d=this.uniforms[s];return d?((f||d.value1!==h||d.value2!==i||d.value3!==l||d.value4!==u)&&(d.setter||(d.setter=e),d.value1=h,d.value2=i,d.value3=l,d.value4=u,this.renderer.setProgram(this.program),e.call(this.gl,d.location.webGLUniformLocation,h,i,l,u),this.pipeline.currentShader=this),this):this},setBoolean:function(e,s){return this.setUniform1(this.gl.uniform1i,e,Number(s))},set1f:function(e,s){return this.setUniform1(this.gl.uniform1f,e,s)},set2f:function(e,s,h){return this.setUniform2(this.gl.uniform2f,e,s,h)},set3f:function(e,s,h,i){return this.setUniform3(this.gl.uniform3f,e,s,h,i)},set4f:function(e,s,h,i,l){return this.setUniform4(this.gl.uniform4f,e,s,h,i,l)},set1fv:function(e,s){return this.setUniform1(this.gl.uniform1fv,e,s,!0)},set2fv:function(e,s){return this.setUniform1(this.gl.uniform2fv,e,s,!0)},set3fv:function(e,s){return this.setUniform1(this.gl.uniform3fv,e,s,!0)},set4fv:function(e,s){return this.setUniform1(this.gl.uniform4fv,e,s,!0)},set1iv:function(e,s){return this.setUniform1(this.gl.uniform1iv,e,s,!0)},set2iv:function(e,s){return this.setUniform1(this.gl.uniform2iv,e,s,!0)},set3iv:function(e,s){return this.setUniform1(this.gl.uniform3iv,e,s,!0)},set4iv:function(e,s){return this.setUniform1(this.gl.uniform4iv,e,s,!0)},set1i:function(e,s){return this.setUniform1(this.gl.uniform1i,e,s)},set2i:function(e,s,h){return this.setUniform2(this.gl.uniform2i,e,s,h)},set3i:function(e,s,h,i){return this.setUniform3(this.gl.uniform3i,e,s,h,i)},set4i:function(e,s,h,i,l){return this.setUniform4(this.gl.uniform4i,e,s,h,i,l)},setMatrix2fv:function(e,s,h){return this.setUniform2(this.gl.uniformMatrix2fv,e,s,h,!0)},setMatrix3fv:function(e,s,h){return this.setUniform2(this.gl.uniformMatrix3fv,e,s,h,!0)},setMatrix4fv:function(e,s,h){return this.setUniform2(this.gl.uniformMatrix4fv,e,s,h,!0)},createProgram:function(e,s){return e===void 0&&(e=this.vertSrc),s===void 0&&(s=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=e,this.fragSrc=s,this.program=this.renderer.createProgram(e,s),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;g(this.uniforms,function(s){e.deleteUniformLocation(s.location)}),this.uniforms=null,g(this.attributes,function(s){e.deleteAttribLocation(s.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});c.exports=r},14500:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};c.exports=S},4159:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14500),g=t(79291),a={PipelineManager:t(7530),Pipelines:t(96615),RenderTarget:t(32302),Utils:t(70554),WebGLPipeline:t(29100),WebGLRenderer:t(74797),WebGLShader:t(38683),Wrappers:t(9503)};a=g(!1,a,o),c.exports=a},31302:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(78908),n=t(85191),r=t(14500),e=t(29100),s=new o({Extends:e,initialize:function(i){i.fragShader=g(i,"fragShader",a),i.vertShader=g(i,"vertShader",n),i.batchSize=g(i,"batchSize",1),i.vertices=g(i,"vertices",[-1,1,-1,-7,7,1]),i.attributes=g(i,"attributes",[{name:"inPosition",size:2,type:r.FLOAT}]),e.call(this,i)},boot:function(){e.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(h,i){e.prototype.resize.call(this,h,i),this.set2f("uResolution",h,i)},beginMask:function(h,i,l){this.renderer.beginBitmapMask(h,l)},endMask:function(h,i,l){var u=this.gl,f=this.renderer,d=h.bitmapMask;d&&u&&(f.drawBitmapMask(d,i,this),l&&this.set2f("uResolution",l.width,l.height),this.set1i("uInvertMaskAlpha",h.invertAlpha),u.drawArrays(this.topology,0,3),l&&this.set2f("uResolution",this.width,this.height),u.bindTexture(u.TEXTURE_2D,null))}});c.exports=s},92651:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(58918),a=t(14811),n=t(95540),r=t(43558),e=t(89350),s=t(70554),h=new o({Extends:r,initialize:function(l){l.shaders=[s.setGlowQuality(e.FXGlowFrag,l.game),e.FXShadowFrag,e.FXPixelateFrag,e.FXVignetteFrag,e.FXShineFrag,e.FXBlurLowFrag,e.FXBlurMedFrag,e.FXBlurHighFrag,e.FXGradientFrag,e.FXBloomFrag,e.ColorMatrixFrag,e.FXCircleFrag,e.FXBarrelFrag,e.FXDisplacementFrag,e.FXWipeFrag,e.FXBokehFrag],r.call(this,l);var u=this.game;this.glow=new g.Glow(u),this.shadow=new g.Shadow(u),this.pixelate=new g.Pixelate(u),this.vignette=new g.Vignette(u),this.shine=new g.Shine(u),this.gradient=new g.Gradient(u),this.circle=new g.Circle(u),this.barrel=new g.Barrel(u),this.wipe=new g.Wipe(u),this.bokeh=new g.Bokeh(u);var f=[];f[a.GLOW]=this.onGlow,f[a.SHADOW]=this.onShadow,f[a.PIXELATE]=this.onPixelate,f[a.VIGNETTE]=this.onVignette,f[a.SHINE]=this.onShine,f[a.BLUR]=this.onBlur,f[a.GRADIENT]=this.onGradient,f[a.BLOOM]=this.onBloom,f[a.COLOR_MATRIX]=this.onColorMatrix,f[a.CIRCLE]=this.onCircle,f[a.BARREL]=this.onBarrel,f[a.DISPLACEMENT]=this.onDisplacement,f[a.WIPE]=this.onWipe,f[a.BOKEH]=this.onBokeh,this.fxHandlers=f,this.source,this.target,this.swap},onDraw:function(i,l,u){this.source=i,this.target=l,this.swap=u;var f=i.width,d=i.height,p=this.tempSprite,x=this.fxHandlers;if(p&&p.preFX)for(var y=p.preFX.list,T=0;T<y.length;T++){var C=y[T];C.active&&x[C.type].call(this,C,f,d)}this.drawToGame(this.source)},runDraw:function(){var i=this.source,l=this.target;this.copy(i,l),this.source=l,this.target=i},onGlow:function(i,l,u){var f=this.shaders[a.GLOW];this.setShader(f),this.glow.onPreRender(i,f,l,u),this.runDraw()},onShadow:function(i){var l=this.shaders[a.SHADOW];this.setShader(l),this.shadow.onPreRender(i,l),this.runDraw()},onPixelate:function(i,l,u){var f=this.shaders[a.PIXELATE];this.setShader(f),this.pixelate.onPreRender(i,f,l,u),this.runDraw()},onVignette:function(i){var l=this.shaders[a.VIGNETTE];this.setShader(l),this.vignette.onPreRender(i,l),this.runDraw()},onShine:function(i,l,u){var f=this.shaders[a.SHINE];this.setShader(f),this.shine.onPreRender(i,f,l,u),this.runDraw()},onBlur:function(i,l,u){var f=n(i,"quality"),d=this.shaders[a.BLUR+f];this.setShader(d),this.set1i("uMainSampler",0),this.set2f("resolution",l,u),this.set1f("strength",n(i,"strength")),this.set3fv("color",n(i,"glcolor"));for(var p=n(i,"x"),x=n(i,"y"),y=n(i,"steps"),T=0;T<y;T++)this.set2f("offset",p,0),this.runDraw(),this.set2f("offset",0,x),this.runDraw()},onGradient:function(i){var l=this.shaders[a.GRADIENT];this.setShader(l),this.gradient.onPreRender(i,l),this.runDraw()},onBloom:function(i,l,u){var f=this.shaders[a.BLOOM];this.copySprite(this.source,this.swap),this.setShader(f),this.set1i("uMainSampler",0),this.set1f("strength",n(i,"blurStrength")),this.set3fv("color",n(i,"glcolor"));for(var d=2/l*n(i,"offsetX"),p=2/u*n(i,"offsetY"),x=n(i,"steps"),y=0;y<x;y++)this.set2f("offset",d,0),this.runDraw(),this.set2f("offset",0,p),this.runDraw();this.blendFrames(this.swap,this.source,this.target,n(i,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(i){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",i.getData()),this.set1f("uAlpha",i.alpha),this.runDraw()},onCircle:function(i,l,u){var f=this.shaders[a.CIRCLE];this.setShader(f),this.circle.onPreRender(i,f,l,u),this.runDraw()},onBarrel:function(i){var l=this.shaders[a.BARREL];this.setShader(l),this.barrel.onPreRender(i,l),this.runDraw()},onDisplacement:function(i){this.setShader(this.shaders[a.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",i.x,i.y),this.bindTexture(i.glTexture,1),this.runDraw()},onWipe:function(i){var l=this.shaders[a.WIPE];this.setShader(l),this.wipe.onPreRender(i,l),this.runDraw()},onBokeh:function(i,l,u){var f=this.shaders[a.BOKEH];this.setShader(f),this.bokeh.onPreRender(i,f,l,u),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,r.prototype.destroy.call(this),this}});c.exports=h},96569:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(31063),n=t(57516),r=t(61340),e=t(26099),s=t(29100),h=new o({Extends:n,initialize:function(l){var u=g(l,"fragShader",a);l.fragShader=u.replace("%LIGHT_COUNT%",l.game.renderer.config.maxLights),n.call(this,l),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new e,this._tempMatrix=new r,this._tempMatrix2=new r},boot:function(){s.prototype.boot.call(this)},onRender:function(i,l){var u=i.sys.lights;if(this.lightsActive=!1,!(!u||!u.active)){var f=u.getLights(l),d=f.length;this.lightsActive=!0;var p,x=this.renderer,y=x.height,T=l.matrix,C=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",l.x,l.y,l.rotation,l.zoom),this.set3f("uAmbientLightColor",u.ambientColor.r,u.ambientColor.g,u.ambientColor.b),this.set1i("uLightCount",d),p=0;p<d;p++){var A=f[p].light,R=A.color,M="uLights["+p+"].";T.transformPoint(A.x,A.y,C),this.set2f(M+"position",C.x-l.scrollX*A.scrollFactorX*l.zoom,y-(C.y-l.scrollY*A.scrollFactorY*l.zoom)),this.set3f(M+"color",R.r,R.g,R.b),this.set1f(M+"intensity",A.intensity),this.set1f(M+"radius",A.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(i){if(i!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var l=this.inverseRotationMatrix;if(i){var u=-i,f=Math.cos(u),d=Math.sin(u);l[1]=d,l[3]=-d,l[0]=l[4]=f}else l[0]=l[4]=1,l[1]=l[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,l),this.currentNormalMapRotation=i}},setTexture2D:function(i,l){var u=this.renderer;i===void 0&&(i=u.whiteTexture);var f=this.getNormalMap(l);this.isNewNormalMap(i,f)&&(this.flush(),this.createBatch(i),this.addTextureToBatch(f),this.currentNormalMap=f);var d=0;if(l&&l.parentContainer){var p=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);d=p.rotationNormalized}else l&&(d=l.rotation);return this.currentBatch===null&&(this.createBatch(i),this.addTextureToBatch(f)),this.setNormalMapRotation(d),0},setGameObject:function(i,l){l===void 0&&(l=i.frame);var u=l.glTexture,f=this.getNormalMap(i);if(this.isNewNormalMap(u,f)&&(this.flush(),this.createBatch(u),this.addTextureToBatch(f),this.currentNormalMap=f),i.parentContainer){var d=i.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(d.rotationNormalized)}else this.setNormalMapRotation(i.rotation);return this.currentBatch===null&&(this.createBatch(u),this.addTextureToBatch(f)),0},isNewNormalMap:function(i,l){return this.currentTexture!==i||this.currentNormalMap!==l},getNormalMap:function(i){var l;if(i)i.displayTexture?l=i.displayTexture.dataSource[i.displayFrame.sourceIndex]:i.texture?l=i.texture.dataSource[i.frame.sourceIndex]:i.tileset&&(Array.isArray(i.tileset)?l=i.tileset[0].image.dataSource[0]:l=i.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return l?l.glTexture:this.renderer.normalTexture},batchSprite:function(i,l,u){this.lightsActive&&n.prototype.batchSprite.call(this,i,l,u)},batchTexture:function(i,l,u,f,d,p,x,y,T,C,A,R,M,L,I,O,D,B,V,W,Y,X,U,z,G,b,H,j,$,k,Q,_){this.lightsActive&&n.prototype.batchTexture.call(this,i,l,u,f,d,p,x,y,T,C,A,R,M,L,I,O,D,B,V,W,Y,X,U,z,G,b,H,j,$,k,Q,_)},batchTextureFrame:function(i,l,u,f,d,p,x){this.lightsActive&&n.prototype.batchTextureFrame.call(this,i,l,u,f,d,p,x)}});c.exports=h},56527:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),n=t(45561),r=t(60722),e=t(14500),s=t(29100),h=new o({Extends:a,initialize:function(l){l.fragShader=g(l,"fragShader",n),l.vertShader=g(l,"vertShader",r),l.attributes=g(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),l.forceZero=!0,l.resizeUniform="uResolution",a.call(this,l)},boot:function(){s.prototype.boot.call(this);var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height)}});c.exports=h},57516:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94811),a=t(95540),n=t(98840),r=t(44667),e=t(61340),s=t(70554),h=t(14500),i=t(29100),l=new o({Extends:i,initialize:function(f){var d=f.game.renderer,p=a(f,"fragShader",n);f.fragShader=s.parseFragmentShaderMaxTextures(p,d.maxTextures),f.vertShader=a(f,"vertShader",r),f.attributes=a(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),f.resizeUniform="uResolution",i.call(this,f),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this);var u=this.renderer;this.set1iv("uMainSampler",u.textureIndexes),this.set2f("uResolution",u.width,u.height)},batchSprite:function(u,f,d){this.manager.set(this,u);var p=this._tempMatrix1,x=this._tempMatrix2,y=this._tempMatrix3,T=u.frame,C=T.glTexture,A=T.u0,R=T.v0,M=T.u1,L=T.v1,I=T.x,O=T.y,D=T.cutWidth,B=T.cutHeight,V=T.customPivot,W=u.displayOriginX,Y=u.displayOriginY,X=-W+I,U=-Y+O;if(u.isCropped){var z=u._crop;(z.flipX!==u.flipX||z.flipY!==u.flipY)&&T.updateCropUVs(z,u.flipX,u.flipY),A=z.u0,R=z.v0,M=z.u1,L=z.v1,D=z.width,B=z.height,I=z.x,O=z.y,X=-W+I,U=-Y+O}var G=1,b=1;u.flipX&&(V||(X+=-T.realWidth+W*2),G=-1),u.flipY&&(V||(U+=-T.realHeight+Y*2),b=-1);var H=u.x,j=u.y;f.roundPixels&&(H=Math.floor(H),j=Math.floor(j)),x.applyITRS(H,j,u.rotation,u.scaleX*G,u.scaleY*b),p.copyFrom(f.matrix),d?(p.multiplyWithOffset(d,-f.scrollX*u.scrollFactorX,-f.scrollY*u.scrollFactorY),x.e=H,x.f=j):(x.e-=f.scrollX*u.scrollFactorX,x.f-=f.scrollY*u.scrollFactorY),p.multiply(x,y);var $=y.setQuad(X,U,X+D,U+B,f.renderRoundPixels),k=s.getTintAppendFloatAlpha,Q=f.alpha,_=k(u.tintTopLeft,Q*u._alphaTL),tt=k(u.tintTopRight,Q*u._alphaTR),et=k(u.tintBottomLeft,Q*u._alphaBL),it=k(u.tintBottomRight,Q*u._alphaBR);this.shouldFlush(6)&&this.flush();var ot=this.setGameObject(u,T);this.manager.preBatch(u),this.batchQuad(u,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],A,R,M,L,_,tt,et,it,u.tintFill,C,ot),this.manager.postBatch(u)},batchTexture:function(u,f,d,p,x,y,T,C,A,R,M,L,I,O,D,B,V,W,Y,X,U,z,G,b,H,j,$,k,Q,_,tt,et,it){it===void 0&&(it=!1),this.manager.set(this,u);var ot=this._tempMatrix1,nt=this._tempMatrix2,ut=this._tempMatrix3,ct=W/d+$,pt=Y/p+k,mt=(W+X)/d+$,ht=(Y+U)/p+k,ft=T,dt=C,Ct=-B,Lt=-V;if(u.isCropped){var Xt=u._crop,Mt=Xt.width,It=Xt.height;ft=Mt,dt=It,T=Mt,C=It,W=Xt.x,Y=Xt.y;var kt=W,ne=Y;L&&(kt=X-Xt.x-Mt),I&&(ne=U-Xt.y-It),ct=kt/d+$,pt=ne/p+k,mt=(kt+Mt)/d+$,ht=(ne+It)/p+k,Ct=-B+W,Lt=-V+Y}I=I^(!tt&&f.isRenderTexture?1:0),L&&(ft*=-1,Ct+=T),I&&(dt*=-1,Lt+=C),Q.roundPixels&&(x=Math.floor(x),y=Math.floor(y)),nt.applyITRS(x,y,M,A,R),ot.copyFrom(Q.matrix),_?(ot.multiplyWithOffset(_,-Q.scrollX*O,-Q.scrollY*D),nt.e=x,nt.f=y):(nt.e-=Q.scrollX*O,nt.f-=Q.scrollY*D),ot.multiply(nt,ut);var Ut=ut.setQuad(Ct,Lt,Ct+ft,Lt+dt,Q.renderRoundPixels);et==null&&(et=this.setTexture2D(f)),u&&!it&&this.manager.preBatch(u),this.batchQuad(u,Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],ct,pt,mt,ht,z,G,b,H,j,f,et),u&&!it&&this.manager.postBatch(u)},batchTextureFrame:function(u,f,d,p,x,y,T){this.manager.set(this);var C=this._tempMatrix1.copyFrom(y),A=this._tempMatrix2;T?C.multiply(T,A):A=C;var R=A.setQuad(f,d,f+u.width,d+u.height),M=this.setTexture2D(u.source.glTexture);p=s.getTintAppendFloatAlpha(p,x),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],u.u0,u.v0,u.u1,u.v1,p,p,p,p,0,u.glTexture,M)},batchFillRect:function(u,f,d,p,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=T.setQuad(u,f,u+d,f+p),A=this.fillTint;this.batchQuad(null,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],0,0,1,1,A.TL,A.TR,A.BL,A.BR,2)},batchFillTriangle:function(u,f,d,p,x,y,T,C){this.renderer.pipelines.set(this);var A=this.calcMatrix;C&&C.multiply(T,A);var R=A.getX(u,f),M=A.getY(u,f),L=A.getX(d,p),I=A.getY(d,p),O=A.getX(x,y),D=A.getY(x,y),B=this.fillTint;this.batchTri(null,R,M,L,I,O,D,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(u,f,d,p,x,y,T,C,A){var R=this.tempTriangle;R[0].x=u,R[0].y=f,R[0].width=T,R[1].x=d,R[1].y=p,R[1].width=T,R[2].x=x,R[2].y=y,R[2].width=T,R[3].x=u,R[3].y=f,R[3].width=T,this.batchStrokePath(R,T,!1,C,A)},batchFillPath:function(u,f,d){this.renderer.pipelines.set(this);var p=this.calcMatrix;d&&d.multiply(f,p);for(var x=u.length,y=this.polygonCache,T,C,A=this.fillTint.TL,R=this.fillTint.TR,M=this.fillTint.BL,L=0;L<x;++L)C=u[L],y.push(C.x,C.y);T=g(y),x=T.length;for(var I=0;I<x;I+=3){var O=T[I+0]*2,D=T[I+1]*2,B=T[I+2]*2,V=y[O+0],W=y[O+1],Y=y[D+0],X=y[D+1],U=y[B+0],z=y[B+1],G=p.getX(V,W),b=p.getY(V,W),H=p.getX(Y,X),j=p.getY(Y,X),$=p.getX(U,z),k=p.getY(U,z);this.batchTri(null,G,b,H,j,$,k,0,0,1,1,A,R,M,2)}y.length=0},batchStrokePath:function(u,f,d,p,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=u.length-1,T=0;T<y;T++){var C=u[T],A=u[T+1];this.batchLine(C.x,C.y,A.x,A.y,C.width/2,A.width/2,f,T,!d&&T===y-1,p,x)}},batchLine:function(u,f,d,p,x,y,T,C,A,R,M){this.renderer.pipelines.set(this);var L=this.calcMatrix;M&&M.multiply(R,L);var I=d-u,O=p-f,D=Math.sqrt(I*I+O*O);if(D!==0){var B=x*(p-f)/D,V=x*(u-d)/D,W=y*(p-f)/D,Y=y*(u-d)/D,X=d-W,U=p-Y,z=u-B,G=f-V,b=d+W,H=p+Y,j=u+B,$=f+V,k=L.getX(X,U),Q=L.getY(X,U),_=L.getX(z,G),tt=L.getY(z,G),et=L.getX(b,H),it=L.getY(b,H),ot=L.getX(j,$),nt=L.getY(j,$),ut=this.strokeTint,ct=ut.TL,pt=ut.TR,mt=ut.BL,ht=ut.BR;if(this.batchQuad(null,ot,nt,_,tt,k,Q,et,it,0,0,1,1,ct,pt,mt,ht,2),!(T<=2)){var ft=this.prevQuad,dt=this.firstQuad;C>0&&ft[4]?this.batchQuad(null,ot,nt,_,tt,ft[0],ft[1],ft[2],ft[3],0,0,1,1,ct,pt,mt,ht,2):(dt[0]=ot,dt[1]=nt,dt[2]=_,dt[3]=tt,dt[4]=1),A&&dt[4]?this.batchQuad(null,k,Q,et,it,dt[0],dt[1],dt[2],dt[3],0,0,1,1,ct,pt,mt,ht,2):(ft[0]=k,ft[1]=Q,ft[2]=et,ft[3]=it,ft[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,i.prototype.destroy.call(this),this}});c.exports=l},43439:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(4127),n=t(89924),r=t(29100),e=new o({Extends:r,initialize:function(h){h.vertShader=g(h,"vertShader",n),h.fragShader=g(h,"fragShader",a),h.attributes=g(h,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),r.call(this,h)},onRender:function(s,h){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",h.zoom)},batchPointLight:function(s,h,i,l,u,f,d,p,x,y,T,C){var A=s.color,R=s.intensity,M=s.radius,L=s.attenuation,I=A.r*R,O=A.g*R,D=A.b*R,B=h.alpha*s.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(i,l,T,C,M,L,I,O,D,B),this.batchLightVert(u,f,T,C,M,L,I,O,D,B),this.batchLightVert(d,p,T,C,M,L,I,O,D,B),this.batchLightVert(i,l,T,C,M,L,I,O,D,B),this.batchLightVert(d,p,T,C,M,L,I,O,D,B),this.batchLightVert(x,y,T,C,M,L,I,O,D,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(s,h,i,l,u,f,d,p,x,y){var T=this.vertexViewF32,C=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++C]=s,T[++C]=h,T[++C]=i,T[++C]=l,T[++C]=u,T[++C]=f,T[++C]=d,T[++C]=p,T[++C]=x,T[++C]=y,this.vertexCount++}});c.exports=e},84057:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89422),a=t(95540),n=t(27681),r=t(49627),e=t(29100),s=new o({Extends:e,initialize:function(i){i.renderTarget=a(i,"renderTarget",1),i.fragShader=a(i,"fragShader",n),i.vertShader=a(i,"vertShader",r),i.attributes=a(i,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),i.batchSize=1,i.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],e.call(this,i),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){e.prototype.boot.call(this);var h=this.manager.UTILITY_PIPELINE;this.fullFrame1=h.fullFrame1,this.fullFrame2=h.fullFrame2,this.halfFrame1=h.halfFrame1,this.halfFrame2=h.halfFrame2;var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height);for(var l=this.renderTargets,u=0;u<l.length;u++)l[u].autoResize=!0},postBatch:function(h){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(h),this},onDraw:function(h){this.bindAndDraw(h)},getController:function(h){return h!==void 0?h:this.controller?this.controller:this},copySprite:function(h,i,l){l===void 0&&(l=!1);var u=this.gl;u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,h.texture.webGLTexture);var f=u.getParameter(u.FRAMEBUFFER_BINDING);u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture.webGLTexture,0),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),l&&(u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,f))},copyFrame:function(h,i,l,u,f){this.manager.copyFrame(h,i,l,u,f)},copyToGame:function(h){this.manager.copyToGame(h)},drawFrame:function(h,i,l){this.manager.drawFrame(h,i,l,this.colorMatrix)},blendFrames:function(h,i,l,u,f){this.manager.blendFrames(h,i,l,u,f)},blendFramesAdditive:function(h,i,l,u,f){this.manager.blendFramesAdditive(h,i,l,u,f)},clearFrame:function(h,i){this.manager.clearFrame(h,i)},blitFrame:function(h,i,l,u,f,d){this.manager.blitFrame(h,i,l,u,f,d)},copyFrameRect:function(h,i,l,u,f,d,p,x){this.manager.copyFrameRect(h,i,l,u,f,d,p,x)},bindAndDraw:function(h,i,l,u,f){l===void 0&&(l=!0),u===void 0&&(u=!0);var d=this.gl,p=this.renderer;this.bind(f),this.set1i("uMainSampler",0),i?(d.viewport(0,0,i.width,i.height),d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture.webGLTexture,0),l&&(u?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1),p.currentFramebuffer||d.viewport(0,0,p.width,p.height)),p.restoreStencilMask(),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,h.texture.webGLTexture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),i&&(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,p.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),e.prototype.destroy.call(this),this}});c.exports=s},43558:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(67502),a=t(83419),n=t(96293),r=t(95540),e=t(57516),s=t(27681),h=t(87841),i=t(32302),l=t(45561),u=t(60722),f=t(29100),d=new a({Extends:e,initialize:function(x){var y=r(x,"fragShader",s),T=r(x,"vertShader",u),C=r(x,"drawShader",s),A=[{name:"DrawSprite",fragShader:l,vertShader:u},{name:"CopySprite",fragShader:y,vertShader:T},{name:"DrawGame",fragShader:C,vertShader:u},{name:"ColorMatrix",fragShader:n}],R=r(x,"shaders",[]);x.shaders=A.concat(R),x.vertShader||(x.vertShader=T),x.batchSize=1,e.call(this,x),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new h,this.targetBounds=new h,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){f.prototype.boot.call(this);var p=this.shaders,x=this.renderer;this.drawSpriteShader=p[0],this.copyShader=p[1],this.gameShader=p[2],this.colorMatrixShader=p[3],this.fsTarget=new i(x,x.width,x.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var y=new ArrayBuffer(168);this.quadVertexData=y,this.quadVertexViewF32=new Float32Array(y),this.quadVertexBuffer=x.createVertexBuffer(y,this.gl.STATIC_DRAW),this.onResize(x.width,x.height),this.currentShader=this.copyShader,this.set2f("uResolution",x.width,x.height)},onResize:function(p,x){var y=this.quadVertexViewF32;y[1]=x,y[22]=x,y[14]=p,y[28]=p,y[35]=p,y[36]=x},batchQuad:function(p,x,y,T,C,A,R,M,L,I,O,D,B,V,W,Y,X,U,z){var G=Math.min(x,T,A,M),b=Math.min(y,C,R,L),H=Math.max(x,T,A,M),j=Math.max(y,C,R,L),$=H-G,k=j-b,Q=this.spriteBounds.setTo(G,b,$,k),_=p?p.preFX.padding:0,tt=$+_*2,et=k+_*2,it=Math.abs(Math.max(tt,et)),ot=this.manager.getRenderTarget(it),nt=this.targetBounds.setTo(0,0,ot.width,ot.height);g(nt,Math.round(Q.centerX),Math.round(Q.centerY)),this.tempSprite=p;var ut=this.gl,ct=this.renderer;ct.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",ct.width,ct.height),this.flipProjectionMatrix(!0),p&&(this.onDrawSprite(p,ot),p.preFX.onFX(this));var pt=this.fsTarget;return this.flush(),ut.viewport(0,0,ct.width,ct.height),ut.bindFramebuffer(ut.FRAMEBUFFER,pt.framebuffer.webGLFramebuffer),ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,pt.texture.webGLTexture,0),ut.clearColor(0,0,0,0),ut.clear(ut.COLOR_BUFFER_BIT),this.setTexture2D(z),this.batchVert(x,y,I,O,0,U,V),this.batchVert(T,C,I,B,0,U,Y),this.batchVert(A,R,D,B,0,U,X),this.batchVert(x,y,I,O,0,U,V),this.batchVert(A,R,D,B,0,U,X),this.batchVert(M,L,D,O,0,U,W),this.flush(),this.flipProjectionMatrix(!1),ut.activeTexture(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,ot.texture.webGLTexture),ut.copyTexSubImage2D(ut.TEXTURE_2D,0,0,0,nt.x,nt.y,nt.width,nt.height),ut.bindFramebuffer(ut.FRAMEBUFFER,null),ut.bindTexture(ut.TEXTURE_2D,null),this.onBatch(p),this.currentShader=this.copyShader,this.onDraw(ot,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(p,x,y,T,C,A,R){y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1),R===void 0&&(R=this.copyShader);var M=this.gl,L=this.tempSprite;A&&(R=this.colorMatrixShader),this.currentShader=R;var I=this.setVertexBuffer(this.quadVertexBuffer);R.bind(I,!1);var O=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",O.width,O.height),L.preFX.onFXCopy(this),this.onCopySprite(p,x,L),A&&(this.set1fv("uColorMatrix",A.getData()),this.set1f("uAlpha",A.alpha)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,p.texture.webGLTexture),p.height>x.height)M.viewport(0,0,p.width,p.height),this.setTargetUVs(p,x);else{var D=x.height-p.height;M.viewport(0,D,p.width,p.height),this.resetUVs()}if(M.bindFramebuffer(M.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,x.texture.webGLTexture,0),y&&(M.clearColor(0,0,0,+!T),M.clear(M.COLOR_BUFFER_BIT)),C){var B=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}M.bufferData(M.ARRAY_BUFFER,this.quadVertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),C&&this.renderer.setBlendMode(B),M.bindFramebuffer(M.FRAMEBUFFER,null)},copy:function(p,x){var y=this.gl;this.set1i("uMainSampler",0),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,p.texture.webGLTexture),y.viewport(0,0,p.width,p.height),this.setUVs(0,0,0,1,1,1,1,0),y.bindFramebuffer(y.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,x.texture.webGLTexture,0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.quadVertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null)},blendFrames:function(p,x,y,T,C){this.manager.blendFrames(p,x,y,T,C)},blendFramesAdditive:function(p,x,y,T,C){this.manager.blendFramesAdditive(p,x,y,T,C)},drawToGame:function(p){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(p)},copyToGame:function(p){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(p)},bindAndDraw:function(p){var x=this.gl,y=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(p.texture);var T=this._tempMatrix1.loadIdentity(),C=this.targetBounds.x,A=this.targetBounds.y,R=C+p.width,M=A+p.height,L=T.getX(C,A),I=T.getX(C,M),O=T.getX(R,M),D=T.getX(R,A),B=T.getY(C,A),V=T.getY(C,M),W=T.getY(R,M),Y=T.getY(R,A),X=16777215;this.batchVert(L,B,0,0,0,0,X),this.batchVert(I,V,0,1,0,0,X),this.batchVert(O,W,1,1,0,0,X),this.batchVert(L,B,0,0,0,0,X),this.batchVert(O,W,1,1,0,0,X),this.batchVert(D,Y,1,0,0,0,X),y.restoreFramebuffer(!1,!0),y.currentFramebuffer||x.viewport(0,0,y.width,y.height),y.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(p){this.drawToGame(p)},setUVs:function(p,x,y,T,C,A,R,M){var L=this.quadVertexViewF32;L[2]=p,L[3]=x,L[9]=y,L[10]=T,L[16]=C,L[17]=A,L[23]=p,L[24]=x,L[30]=C,L[31]=A,L[37]=R,L[38]=M},setTargetUVs:function(p,x){var y=x.height/p.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,e.prototype.destroy.call(this),this}});c.exports=d},81041:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),n=new o({Extends:a,initialize:function(e){e.topology=5,e.batchSize=g(e,"batchSize",256),a.call(this,e)}});c.exports=n},12385:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),n=t(45561),r=t(60722),e=t(29100),s=new o({Extends:a,initialize:function(i){i.fragShader=g(i,"fragShader",n),i.vertShader=g(i,"vertShader",r),i.forceZero=!0,a.call(this,i)},boot:function(){e.prototype.boot.call(this);var h=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",h.width,h.height)}});c.exports=s},7589:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35407),g=t(10312),a=t(83419),n=t(89422),r=t(96293),e=t(36682),s=t(95540),h=t(48247),i=t(49627),l=t(29100),u=new a({Extends:l,initialize:function(d){d.renderTarget=s(d,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),d.vertShader=s(d,"vertShader",i),d.shaders=s(d,"shaders",[{name:"Copy",fragShader:e},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:h},{name:"ColorMatrix",fragShader:r}]),d.attributes=s(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.batchSize=1,l.call(this,d),this.colorMatrix=new n,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var f=this.shaders,d=this.renderTargets;this.copyShader=f[0],this.addShader=f[1],this.linearShader=f[2],this.colorMatrixShader=f[3],this.fullFrame1=d[0],this.fullFrame2=d[1],this.halfFrame1=d[2],this.halfFrame2=d[3]},copyFrame:function(f,d,p,x,y){p===void 0&&(p=1),x===void 0&&(x=!0),y===void 0&&(y=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,f.texture.webGLTexture),d?(T.viewport(0,0,d.width,d.height),T.bindFramebuffer(T.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,d.texture.webGLTexture,0)):T.viewport(0,0,f.width,f.height),x&&(y?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(f,d,p,x,y,T,C){p===void 0&&(p=1),x===void 0&&(x=!0),y===void 0&&(y=!0),T===void 0&&(T=!1),C===void 0&&(C=!1);var A=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,f.texture.webGLTexture),f.height>d.height)A.viewport(0,0,f.width,f.height),this.setTargetUVs(f,d);else{var R=d.height-f.height;A.viewport(0,R,f.width,f.height)}if(A.bindFramebuffer(A.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,d.texture.webGLTexture,0),x&&(y?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),T){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}C&&this.flipY(),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),T&&this.renderer.setBlendMode(M),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(f,d,p,x,y,T,C,A){C===void 0&&(C=!0),A===void 0&&(A=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,f.texture.webGLTexture,0),C&&(A?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,d.texture.webGLTexture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,p,x,y,T),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(f){var d=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,f.texture.webGLTexture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6)},drawFrame:function(f,d,p,x){p===void 0&&(p=!0),x===void 0&&(x=this.colorMatrix);var y=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",x.getData()),this.set1f("uAlpha",x.alpha),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,f.texture.webGLTexture),d?(y.viewport(0,0,d.width,d.height),y.bindFramebuffer(y.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d.texture.webGLTexture,0)):y.viewport(0,0,f.width,f.height),p?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFrames:function(f,d,p,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=this.linearShader);var C=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,f.texture.webGLTexture),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,d.texture.webGLTexture),p?(C.bindFramebuffer(C.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,p.texture.webGLTexture,0),C.viewport(0,0,p.width,p.height)):C.viewport(0,0,f.width,f.height),y?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFramesAdditive:function(f,d,p,x,y){this.blendFrames(f,d,p,x,y,this.addShader)},clearFrame:function(f,d){d===void 0&&(d=!0);var p=this.gl;p.viewport(0,0,f.width,f.height),p.bindFramebuffer(p.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),d?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var x=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,x.webGLFramebuffer)},setUVs:function(f,d,p,x,y,T,C,A){var R=this.vertexViewF32;R[2]=f,R[3]=d,R[6]=p,R[7]=x,R[10]=y,R[11]=T,R[14]=f,R[15]=d,R[18]=y,R[19]=T,R[22]=C,R[23]=A},setTargetUVs:function(f,d){var p=d.height/f.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});c.exports=u},36060:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};c.exports=S},84817:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineafterflush"},36712:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinebeforeflush"},40285:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinebind"},65918:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineboot"},92852:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinedestroy"},56072:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelinerebind"},57566:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pipelineresize"},77085:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AFTER_FLUSH:t(84817),BEFORE_FLUSH:t(36712),BIND:t(40285),BOOT:t(65918),DESTROY:t(92852),REBIND:t(56072),RESIZE:t(57566)}},54812:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(99155),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e){r=this.getController(r),this.set1f("amount",r.amount,e)}});c.exports=n},67329:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(24400),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(r){r=this.getController(r),this.set1f("strength",r.blurStrength),this.set3fv("color",r.glcolor)},onDraw:function(r){var e=this.getController(),s=this.fullFrame1,h=this.fullFrame2;this.copyFrame(r,h);for(var i=2/r.width*e.offsetX,l=2/r.height*e.offsetY,u=0;u<e.steps;u++)this.set2f("offset",i,0),this.copySprite(r,s),this.set2f("offset",0,l),this.copySprite(s,r);this.blendFrames(h,r,s,e.strength),this.copyToGame(s)}});c.exports=n},8861:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(41514),a=t(51078),n=t(94328),r=t(84057),e=new o({Extends:r,initialize:function(h){r.call(this,{game:h,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:a},{name:"Gaussian13",fragShader:n}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(s){var h=this.getController(),i=this.gl,l=this.fullFrame1,u=i.getParameter(i.FRAMEBUFFER_BINDING);this.bind(this.shaders[h.quality]),i.activeTexture(i.TEXTURE0),i.viewport(0,0,s.width,s.height),this.set1i("uMainSampler",0),this.set2f("resolution",s.width,s.height),this.set1f("strength",h.strength),this.set3fv("color",h.glcolor);for(var f=0;f<h.steps;f++)this.set2f("offset",h.x,0),this.copySprite(s,l),this.set2f("offset",0,h.y),this.copySprite(l,s);i.bindFramebuffer(i.FRAMEBUFFER,u),i.bindTexture(i.TEXTURE_2D,null),this.copyToGame(s)}});c.exports=e},51051:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(90610),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(r,e,s,h){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("amount",r.amount,e),this.set1f("contrast",r.contrast,e),this.set1f("strength",r.strength,e),this.set2f("blur",r.blurX,r.blurY,e),this.setBoolean("isTiltShift",r.isTiltShift,e),s&&h&&this.set2f("resolution",s,h,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});c.exports=n},89428:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91899),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(r,e,s,h){r=this.getController(r),this.set1f("scale",r.scale,e),this.set1f("feather",r.feather,e),this.set1f("thickness",r.thickness,e),this.set3fv("color",r.glcolor,e),this.set4fv("backgroundColor",r.glcolor2,e),s&&h&&this.set2f("resolution",s,h,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});c.exports=n},88904:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(84057),a=new o({Extends:g,initialize:function(r){g.call(this,{game:r})},onDraw:function(n){var r=this.fullFrame1;this.controller?this.manager.drawFrame(n,r,!0,this.controller):this.drawFrame(n,r),this.copyToGame(r)}});c.exports=a},63563:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(47838),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(r){var e=this.game.textures.getFrame(r);e&&(this.glTexture=e.glTexture)},onDraw:function(r){var e=this.getController(),s=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(r,s),this.copyToGame(s)}});c.exports=n},94045:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(98656),n=t(84057),r=t(70554),e=new o({Extends:n,initialize:function(h,i){var l=g(i,"quality",.1),u=g(i,"distance",10);n.call(this,{game:h,fragShader:r.setGlowQuality(a,h,l,u)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(s,h,i,l){s=this.getController(s),this.set1f("outerStrength",s.outerStrength,h),this.set1f("innerStrength",s.innerStrength,h),this.set4fv("glowColor",s.glcolor,h),this.setBoolean("knockout",s.knockout,h),i&&l&&this.set2f("resolution",i,l,h)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});c.exports=e},74088:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(70463),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(r,e){r=this.getController(r),this.set1f("alpha",r.alpha,e),this.set1i("size",r.size,e),this.set3fv("color1",r.glcolor1,e),this.set3fv("color2",r.glcolor2,e),this.set2f("positionFrom",r.fromX,r.fromY,e),this.set2f("positionTo",r.toX,r.toY,e)}});c.exports=n},99636:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50831),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e,s,h){r=this.getController(r),this.set1f("amount",r.amount,e),s&&h&&this.set2f("resolution",s,h,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});c.exports=n},34700:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92595),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(r,e){r=this.getController(r);var s=r.samples;this.set1i("samples",s,e),this.set1f("intensity",r.intensity,e),this.set1f("decay",r.decay,e),this.set1f("power",r.power/s,e),this.set2f("lightPosition",r.x,r.y,e),this.set4fv("color",r.glcolor,e)}});c.exports=n},91157:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72464),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(r,e,s,h){r=this.getController(r),this.setTime("time",e),this.set1f("speed",r.speed,e),this.set1f("lineWidth",r.lineWidth,e),this.set1f("gradient",r.gradient,e),this.setBoolean("reveal",r.reveal,e),s&&h&&this.set2f("resolution",s,h,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});c.exports=n},27797:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39249),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(r,e){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("strength",r.strength,e),this.set2f("position",r.x,r.y,e)}});c.exports=n},67603:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(2878),a=t(84057),n=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(r,e){r=this.getController(r);var s=r.progress,h=r.wipeWidth,i=r.direction,l=r.axis;this.set4f("config",s,h,i,l,e),this.setBoolean("reveal",r.reveal,e)}});c.exports=n},58918:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Barrel:t(54812),Bloom:t(67329),Blur:t(8861),Bokeh:t(51051),Circle:t(89428),ColorMatrix:t(88904),Displacement:t(63563),Glow:t(94045),Gradient:t(74088),Pixelate:t(99636),Shadow:t(34700),Shine:t(91157),Vignette:t(27797),Wipe:t(67603)};c.exports=o},96615:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36060),g=t(79291),a={FX:t(58918),BitmapMaskPipeline:t(31302),Events:t(77085),FXPipeline:t(92651),LightPipeline:t(96569),MobilePipeline:t(56527),MultiPipeline:t(57516),PointLightPipeline:t(43439),PostFXPipeline:t(84057),PreFXPipeline:t(43558),RopePipeline:t(81041),SinglePipeline:t(12385),UtilityPipeline:t(7589)};a=g(!1,a,o),c.exports=a},35407:c=>{c.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:c=>{c.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:c=>{c.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:c=>{c.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:c=>{c.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:c=>{c.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:c=>{c.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:c=>{c.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:c=>{c.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:c=>{c.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:c=>{c.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:c=>{c.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:c=>{c.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:c=>{c.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:c=>{c.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:c=>{c.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:c=>{c.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:c=>{c.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:c=>{c.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:c=>{c.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:c=>{c.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:c=>{c.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:c=>{c.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:c=>{c.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:c=>{c.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:c=>{c.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:c=>{c.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:c=>{c.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:c=>{c.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:c=>{c.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:c=>{c.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:c=>{c.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:c=>{c.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:c=>{c.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(c,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AddBlendFrag:t(35407),BitmapMaskFrag:t(78908),BitmapMaskVert:t(85191),ColorMatrixFrag:t(96293),CopyFrag:t(36682),FXBarrelFrag:t(99155),FXBloomFrag:t(24400),FXBlurHighFrag:t(94328),FXBlurLowFrag:t(41514),FXBlurMedFrag:t(51078),FXBokehFrag:t(90610),FXCircleFrag:t(91899),FXDisplacementFrag:t(47838),FXGlowFrag:t(98656),FXGradientFrag:t(70463),FXPixelateFrag:t(50831),FXShadowFrag:t(92595),FXShineFrag:t(72464),FXVignetteFrag:t(39249),FXWipeFrag:t(2878),LightFrag:t(31063),LinearBlendFrag:t(48247),MeshFrag:t(41214),MeshVert:t(39653),MobileFrag:t(62143),MobileVert:t(47940),MultiFrag:t(98840),MultiVert:t(44667),PointLightFrag:t(4127),PointLightVert:t(89924),PostFXFrag:t(27681),QuadVert:t(49627),SingleFrag:t(45561),SingleVert:t(60722)}},93567:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e){this.webGLAttribLocation=-1,this.gl=n,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var a=this.gl;a.isContextLost()||(this.webGLAttribLocation=a.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});c.exports=g},26128:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s){this.webGLBuffer=null,this.gl=n,this.initialDataOrSize=r,this.bufferType=e,this.bufferUsage=s,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var a=this.gl;if(!a.isContextLost()){var n=this.bufferType,r=a.createBuffer();this.webGLBuffer=r,a.bindBuffer(n,this.webGLBuffer),a.bufferData(n,this.initialDataOrSize,this.bufferUsage),a.bindBuffer(n,null)}}},destroy:function(){var a=this.gl;a.isContextLost()||a.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});c.exports=g},84387:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},a=new o({initialize:function(r,e,s,h,i){this.webGLFramebuffer=null,this.gl=r,this.width=e,this.height=s,this.renderTexture=h,this.addDepthStencilBuffer=!!i,this.createResource()},createResource:function(){var n=this.gl;if(!n.isContextLost()){var r=this.renderTexture,e=0,s=n.createFramebuffer();if(this.webGLFramebuffer=s,n.bindFramebuffer(n.FRAMEBUFFER,s),r.isRenderTexture=!0,r.isAlphaPremultiplied=!1,n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r.webGLTexture,0),e=n.checkFramebufferStatus(n.FRAMEBUFFER),e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(g[e]||e));if(this.addDepthStencilBuffer){var h=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,h),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,this.width,this.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,h)}n.bindFramebuffer(n.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var n=this.gl;if(!n.isContextLost()){n.bindFramebuffer(n.FRAMEBUFFER,this.webGLFramebuffer);var r=n.getFramebufferAttachmentParameter(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0),n.deleteTexture(r));var e=n.getFramebufferAttachmentParameter(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);e!==null&&n.deleteRenderbuffer(e),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});c.exports=a},1482:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e){this.webGLProgram=null,this.gl=n,this.vertexSource=r,this.fragmentSource=e,this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){var n=a.createProgram(),r=a.createShader(a.VERTEX_SHADER),e=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(r,this.vertexSource),a.shaderSource(e,this.fragmentSource),a.compileShader(r),a.compileShader(e);var s=`Shader failed:
`;if(!a.getShaderParameter(r,a.COMPILE_STATUS))throw new Error("Vertex "+s+a.getShaderInfoLog(r));if(!a.getShaderParameter(e,a.COMPILE_STATUS))throw new Error("Fragment "+s+a.getShaderInfoLog(e));if(a.attachShader(n,r),a.attachShader(n,e),a.linkProgram(n),!a.getProgramParameter(n,a.LINK_STATUS))throw new Error("Link "+s+a.getProgramInfoLog(n));a.useProgram(n),this.webGLProgram=n}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});c.exports=g},82751:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50030),a=new o({initialize:function(r,e,s,h,i,l,u,f,d,p,x,y,T){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=r,this.mipLevel=e,this.minFilter=s,this.magFilter=h,this.wrapT=i,this.wrapS=l,this.format=u,this.pixels=f,this.width=d,this.height=p,this.pma=x??!0,this.forceSize=!!y,this.flipY=!!T,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var n=this.gl;if(!n.isContextLost()){if(this.pixels instanceof a){this.webGLTexture=this.pixels.webGLTexture;return}var r=n.createTexture();r.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=r,this._processTexture()}},update:function(n,r,e,s,h,i,l,u,f){if(!(r===0||e===0)){this.pixels=n,this.width=r,this.height=e,this.flipY=s,this.wrapS=h,this.wrapT=i,this.minFilter=l,this.magFilter=u,this.format=f;var d=this.gl;d.isContextLost()||this._processTexture()}},_processTexture:function(){var n=this.gl;n.activeTexture(n.TEXTURE0);var r=n.getParameter(n.TEXTURE_BINDING_2D);n.bindTexture(n.TEXTURE_2D,this.webGLTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,this.flipY);var e=this.pixels,s=this.mipLevel,h=this.width,i=this.height,l=this.format,u=!1;if(e==null)n.texImage2D(n.TEXTURE_2D,s,l,h,i,0,l,n.UNSIGNED_BYTE,null),u=g(h,i);else if(e.compressed){h=e.width,i=e.height,u=e.generateMipmap;for(var f=0;f<e.mipmaps.length;f++)n.compressedTexImage2D(n.TEXTURE_2D,f,e.internalFormat,e.mipmaps[f].width,e.mipmaps[f].height,0,e.mipmaps[f].data)}else e instanceof Uint8Array?(n.texImage2D(n.TEXTURE_2D,s,l,h,i,0,l,n.UNSIGNED_BYTE,e),u=g(h,i)):(this.forceSize||(h=e.width,i=e.height),n.texImage2D(n.TEXTURE_2D,s,l,l,n.UNSIGNED_BYTE,e),u=g(h,i));u&&n.generateMipmap(n.TEXTURE_2D),r?n.bindTexture(n.TEXTURE_2D,r):n.bindTexture(n.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(n){this.__SPECTOR_Metadata=n,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=n)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof a||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});c.exports=a},57183:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e){this.webGLUniformLocation=null,this.gl=n,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var a=this.gl;a.isContextLost()||(this.webGLUniformLocation=a.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});c.exports=g},9503:(c,S,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={WebGLAttribLocationWrapper:t(93567),WebGLBufferWrapper:t(26128),WebGLProgramWrapper:t(1482),WebGLTextureWrapper:t(82751),WebGLFramebufferWrapper:t(84387),WebGLUniformLocationWrapper:t(57183)};c.exports=o},76531:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13560),g=t(83419),a=t(50792),n=t(97480),r=t(8443),e=t(57811),s=t(74403),h=t(45818),i=t(29747),l=t(87841),u=t(86555),f=t(56583),d=t(26099),p=t(38058),x=new g({Extends:a,initialize:function(T){a.call(this),this.game=T,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new u,this.gameSize=new u,this.baseSize=new u,this.displaySize=new u,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new d(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:i,windowResize:i,fullScreenChange:i,fullScreenError:i}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen;var T=this.scaleMode;T!==o.SCALE_MODE.RESIZE&&T!==o.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(T),T===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(r.PRE_STEP,this.step,this),y.events.once(r.READY,this.refresh,this),y.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,A=y.scaleMode,R=y.zoom,M=y.autoRound;if(typeof T=="string")if(T.substr(-1)!=="%")T=parseInt(T,10);else{var L=this.parentSize.width;L===0&&(L=window.innerWidth);var I=parseInt(T,10)/100;T=Math.floor(L*I)}if(typeof C=="string")if(C.substr(-1)!=="%")C=parseInt(C,10);else{var O=this.parentSize.height;O===0&&(O=window.innerHeight);var D=parseInt(C,10)/100;C=Math.floor(O*D)}this.scaleMode=A,this.autoRound=M,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,M&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),R===o.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*R,y.minHeight*R),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*R,y.maxHeight*R),this.displaySize.setSize(T,C),(y.snapWidth>0||y.snapHeight>0)&&this.displaySize.setSnap(y.snapWidth,y.snapHeight),this.orientation=h(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=s(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==o.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=s(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=e(!0));var C=T.width,A=T.height;if(y.width!==C||y.height!==A)return y.setSize(C,A),!0;if(this.canvas){var R=this.canvasBounds,M=this.canvas.getBoundingClientRect();if(M.x!==R.x||M.y!==R.y)return!0}return!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var A=this.width,R=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,R)},resize:function(y,T){var C=this.zoom,A=this.autoRound;A&&(y=Math.floor(y),T=Math.floor(T));var R=this.width,M=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var L=this.canvas.style,I=y*C,O=T*C;return A&&(I=Math.floor(I),O=Math.floor(O)),(I!==y||O!==T)&&(L.width=I+"px",L.height=O+"px"),this.refresh(R,M)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(y,T){return y===void 0&&(y=0),T===void 0&&(T=y),this.displaySize.setSnap(y,T),this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var A=this.canvas.style,R=C.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=A.marginLeft,R.marginTop=A.marginTop}return this.emit(n.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=h(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(n.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,A,R,M=this.zoom,L=this.autoRound;if(this.scaleMode===o.SCALE_MODE.NONE)this.displaySize.setSize(T*M,C*M),A=this.displaySize.width,R=this.displaySize.height,L&&(A=Math.floor(A),R=Math.floor(R)),this._resetZoom&&(y.width=A+"px",y.height=R+"px",this._resetZoom=!1);else if(this.scaleMode===o.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,R=this.displaySize.height,L&&(A=Math.floor(A),R=Math.floor(R)),this.canvas.width=A,this.canvas.height=R;else if(this.scaleMode===o.SCALE_MODE.EXPAND){var I=this.game.config.width,O=this.game.config.height;this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,R=this.displaySize.height,L&&(A=Math.floor(A),R=Math.floor(R)),y.width=A+"px",y.height=R+"px";var D=this.parentSize.width/I,B=this.parentSize.height/O;D<B&&D!==0?this.baseSize.setSize(I,this.parentSize.height/D):B!==0&&this.baseSize.setSize(this.displaySize.width/B,O),this.gameSize.setSize(this.baseSize.width,this.baseSize.height),A=this.baseSize.width,R=this.baseSize.height,L&&(A=Math.floor(A),R=Math.floor(R)),this.canvas.width=A,this.canvas.height=R}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,R=this.displaySize.height,L&&(A=Math.floor(A),R=Math.floor(R)),y.width=A+"px",y.height=R+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=f(this.parentSize.width,this.gameSize.width,0,!0),T=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==o.CENTER.NO_CENTER){var T=this.canvas,C=T.style,A=T.getBoundingClientRect(),R=A.width,M=A.height,L=Math.floor((this.parentSize.width-R)/2),I=Math.floor((this.parentSize.height-M)/2);y===o.CENTER.CENTER_HORIZONTALLY?I=0:y===o.CENTER.CENTER_VERTICALLY&&(L=0),C.marginLeft=L+"px",C.marginTop=I+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(n.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(n.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(n.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(n.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(n.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.domlisteners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0,y.refresh()},T.windowResize=function(){y.updateBounds(),y.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",T.orientationChange,!1):window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(A){return y.onFullScreenChange(A)},T.fullScreenError=function(A){return y.onFullScreenError(A)};var C=["webkit","moz",""];C.forEach(function(A){document.addEventListener(A+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(y,T){y instanceof p||(T=y,y=void 0),T===void 0&&(T=new l);var C=this.baseSize,A=this.parentSize,R=this.canvasBounds,M=this.displayScale,L=R.x>=0?0:-(R.x*M.x),I=R.y>=0?0:-(R.y*M.y),O;A.width>=R.width?O=C.width:O=C.width-(R.width-A.width)*M.x;var D;return A.height>=R.height?D=C.height:D=C.height-(R.height-A.height)*M.y,T.setTo(L,I,O,D),y&&(T.width/=y.zoomX,T.height/=y.zoomY,T.centerX=y.centerX+y.scrollX,T.centerY=y.centerY+y.scrollY),T},step:function(y,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",y.orientationChange,!1):window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});c.exports=x},64743:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={CENTER:t(64743),ORIENTATION:t(39218),SCALE_MODE:t(81050),ZOOM:t(80805)};c.exports=o},56139:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="enterfullscreen"},2336:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fullscreenfailed"},47412:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="fullscreenunsupported"},51452:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="leavefullscreen"},20666:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="orientationchange"},47945:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resize"},97480:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ENTER_FULLSCREEN:t(56139),FULLSCREEN_FAILED:t(2336),FULLSCREEN_UNSUPPORTED:t(47412),LEAVE_FULLSCREEN:t(51452),ORIENTATION_CHANGE:t(20666),RESIZE:t(47945)}},93364:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(13560),a={Center:t(64743),Events:t(97480),Orientation:t(39218),ScaleManager:t(76531),ScaleModes:t(81050),Zoom:t(80805)};a=o(!1,a,g.CENTER),a=o(!1,a,g.ORIENTATION),a=o(!1,a,g.SCALE_MODE),a=o(!1,a,g.ZOOM),c.exports=a},27397:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(35355),a=function(n){var r=n.game.config.defaultPhysicsSystem,e=o(n.settings,"physics",!1);if(!(!r&&!e)){var s=[];if(r&&s.push(g(r+"Physics")),e)for(var h in e)h=g(h.concat("Physics")),s.indexOf(h)===-1&&s.push(h);return s}};c.exports=a},52106:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a){var n=a.plugins.getDefaultScenePlugins(),r=o(a.settings,"plugins",!1);return Array.isArray(r)?r:n||[]};c.exports=g},87033:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};c.exports=S},97482:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(2368),a=new o({initialize:function(r){this.sys=new g(this,r),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});c.exports=a},60903:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89993),a=t(44594),n=t(8443),r=t(35154),e=t(54899),s=t(29747),h=t(97482),i=t(2368),l=new o({initialize:function(f,d){if(this.game=f,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,d){Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++)this._pending.push({key:"default",scene:d[p],autoStart:p===0,data:{}})}f.events.once(n.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new h),this.game.events.emit(n.SYSTEM_READY,this.systemScene,this);var u,f,d,p;for(u=0;u<this._pending.length;u++){f=this._pending[u],d=f.key,p=f.scene;var x;p instanceof h?x=this.createSceneFromInstance(d,p):typeof p=="object"?x=this.createSceneFromObject(d,p):typeof p=="function"&&(x=this.createSceneFromFunction(d,p)),d=x.sys.settings.key,this.keys[d]=x,this.scenes.push(x),this._data[d]&&(x.sys.settings.data=this._data[d].data,this._data[d].autoStart&&(f.autoStart=!0)),(f.autoStart||x.sys.settings.active)&&this._start.push(d)}for(this._pending.length=0,this._data={},this.isBooted=!0,u=0;u<this._start.length;u++)f=this._start[u],this.start(f);this._start.length=0}},processQueue:function(){var u=this._pending.length,f=this._queue.length;if(!(u===0&&f===0)){var d,p;if(u){for(d=0;d<u;d++)p=this._pending[d],this.add(p.key,p.scene,p.autoStart,p.data);for(d=0;d<this._start.length;d++)p=this._start[d],this.start(p);this._start.length=0,this._pending.length=0}for(d=0;d<this._queue.length;d++)p=this._queue[d],this[p.op](p.keyA,p.keyB,p.data);this._queue.length=0}},add:function(u,f,d,p){if(d===void 0&&(d=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:u,scene:f,autoStart:d,data:p}),this.isBooted||(this._data[u]={data:p}),null;u=this.getKey(u,f);var x;return f instanceof h?x=this.createSceneFromInstance(u,f):typeof f=="object"?(f.key=u,x=this.createSceneFromObject(u,f)):typeof f=="function"&&(x=this.createSceneFromFunction(u,f)),x.sys.settings.data=p,u=x.sys.settings.key,this.keys[u]=x,this.scenes.push(x),(d||x.sys.settings.active)&&(this._pending.length?this._start.push(u):this.start(u)),x},remove:function(u){if(this.isProcessing)return this.queueOp("remove",u);var f=this.getScene(u);if(!f||f.sys.isTransitioning())return this;var d=this.scenes.indexOf(f),p=f.sys.settings.key;return d>-1&&(delete this.keys[p],this.scenes.splice(d,1),this._start.indexOf(p)>-1&&(d=this._start.indexOf(p),this._start.splice(d,1)),f.sys.destroy()),this},bootScene:function(u){var f=u.sys,d=f.settings;f.sceneUpdate=s,u.init&&(u.init.call(u,d.data),d.status=g.INIT,d.isTransition&&f.events.emit(a.TRANSITION_INIT,d.transitionFrom,d.transitionDuration));var p;f.load&&(p=f.load,p.reset()),p&&u.preload?(u.preload.call(u),d.status=g.LOADING,p.once(e.COMPLETE,this.loadComplete,this),p.start()):this.create(u)},loadComplete:function(u){this.create(u.scene)},payloadComplete:function(u){this.bootScene(u.scene)},update:function(u,f){this.processQueue(),this.isProcessing=!0;for(var d=this.scenes.length-1;d>=0;d--){var p=this.scenes[d].sys;p.settings.status>g.START&&p.settings.status<=g.RUNNING&&p.step(u,f),p.scenePlugin&&p.scenePlugin._target&&p.scenePlugin.step(u,f)}},render:function(u){for(var f=0;f<this.scenes.length;f++){var d=this.scenes[f].sys;d.settings.visible&&d.settings.status>=g.LOADING&&d.settings.status<g.SLEEPING&&d.render(u)}this.isProcessing=!1},create:function(u){var f=u.sys,d=f.settings;u.create&&(d.status=g.CREATING,u.create.call(u,d.data),d.status===g.DESTROYED)||(d.isTransition&&f.events.emit(a.TRANSITION_START,d.transitionFrom,d.transitionDuration),u.update&&(f.sceneUpdate=u.update),d.status=g.RUNNING,f.events.emit(a.CREATE,u))},createSceneFromFunction:function(u,f){var d=new f;if(d instanceof h){var p=d.sys.settings.key;if(p!==""&&(u=p),this.keys.hasOwnProperty(u))throw new Error("Cannot add Scene with duplicate key: "+u);return this.createSceneFromInstance(u,d)}else return d.sys=new i(d),d.sys.settings.key=u,d.sys.init(this.game),d},createSceneFromInstance:function(u,f){var d=f.sys.settings.key;return d===""&&(f.sys.settings.key=u),f.sys.init(this.game),f},createSceneFromObject:function(u,f){var d=new h(f),p=d.sys.settings.key;p!==""?u=p:d.sys.settings.key=u,d.sys.init(this.game);for(var x=["init","preload","create","update","render"],y=0;y<x.length;y++){var T=r(f,x[y],null);T&&(d[x[y]]=T)}if(f.hasOwnProperty("extend")){for(var C in f.extend)if(f.extend.hasOwnProperty(C)){var A=f.extend[C];C==="data"&&d.hasOwnProperty("data")&&typeof A=="object"?d.data.merge(A):C!=="sys"&&(d[C]=A)}}return d},getKey:function(u,f){if(u||(u="default"),typeof f=="function")return u;if(f instanceof h?u=f.sys.settings.key:typeof f=="object"&&f.hasOwnProperty("key")&&(u=f.key),this.keys.hasOwnProperty(u))throw new Error("Cannot add Scene with duplicate key: "+u);return u},getScenes:function(u,f){u===void 0&&(u=!0),f===void 0&&(f=!1);for(var d=[],p=this.scenes,x=0;x<p.length;x++){var y=p[x];y&&(!u||u&&y.sys.isActive())&&d.push(y)}return f?d.reverse():d},getScene:function(u){if(typeof u=="string"){if(this.keys[u])return this.keys[u]}else for(var f=0;f<this.scenes.length;f++)if(u===this.scenes[f])return u;return null},isActive:function(u){var f=this.getScene(u);return f?f.sys.isActive():null},isPaused:function(u){var f=this.getScene(u);return f?f.sys.isPaused():null},isVisible:function(u){var f=this.getScene(u);return f?f.sys.isVisible():null},isSleeping:function(u){var f=this.getScene(u);return f?f.sys.isSleeping():null},pause:function(u,f){var d=this.getScene(u);return d&&d.sys.pause(f),this},resume:function(u,f){var d=this.getScene(u);return d&&d.sys.resume(f),this},sleep:function(u,f){var d=this.getScene(u);return d&&!d.sys.isTransitioning()&&d.sys.sleep(f),this},wake:function(u,f){var d=this.getScene(u);return d&&d.sys.wake(f),this},run:function(u,f){var d=this.getScene(u);if(!d){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===u){this.queueOp("start",u,f);break}return this}d.sys.isSleeping()?d.sys.wake(f):d.sys.isPaused()?d.sys.resume(f):this.start(u,f)},start:function(u,f){if(!this.isBooted)return this._data[u]={autoStart:!0,data:f},this;var d=this.getScene(u);if(!d)return console.warn("Scene key not found: "+u),this;var p=d.sys,x=p.settings.status;if(x>=g.START&&x<=g.CREATING)return this;if(x>=g.RUNNING&&x<=g.SLEEPING)p.shutdown(),p.sceneUpdate=s,p.start(f);else{p.sceneUpdate=s,p.start(f);var y;if(p.load&&(y=p.load),y&&p.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:p.settings.pack})))return p.settings.status=g.LOADING,y.once(e.COMPLETE,this.payloadComplete,this),y.start(),this}return this.bootScene(d),this},stop:function(u,f){var d=this.getScene(u);if(d&&!d.sys.isTransitioning()&&d.sys.settings.status!==g.SHUTDOWN){var p=d.sys.load;p&&(p.off(e.COMPLETE,this.loadComplete,this),p.off(e.COMPLETE,this.payloadComplete,this)),d.sys.shutdown(f)}return this},switch:function(u,f,d){var p=this.getScene(u),x=this.getScene(f);return p&&x&&p!==x&&(this.sleep(u),this.isSleeping(f)?this.wake(f,d):this.start(f,d)),this},getAt:function(u){return this.scenes[u]},getIndex:function(u){var f=this.getScene(u);return this.scenes.indexOf(f)},bringToTop:function(u){if(this.isProcessing)return this.queueOp("bringToTop",u);var f=this.getIndex(u),d=this.scenes;if(f!==-1&&f<d.length){var p=this.getScene(u);d.splice(f,1),d.push(p)}return this},sendToBack:function(u){if(this.isProcessing)return this.queueOp("sendToBack",u);var f=this.getIndex(u);if(f!==-1&&f>0){var d=this.getScene(u);this.scenes.splice(f,1),this.scenes.unshift(d)}return this},moveDown:function(u){if(this.isProcessing)return this.queueOp("moveDown",u);var f=this.getIndex(u);if(f>0){var d=f-1,p=this.getScene(u),x=this.getAt(d);this.scenes[f]=x,this.scenes[d]=p}return this},moveUp:function(u){if(this.isProcessing)return this.queueOp("moveUp",u);var f=this.getIndex(u);if(f<this.scenes.length-1){var d=f+1,p=this.getScene(u),x=this.getAt(d);this.scenes[f]=x,this.scenes[d]=p}return this},moveAbove:function(u,f){if(u===f)return this;if(this.isProcessing)return this.queueOp("moveAbove",u,f);var d=this.getIndex(u),p=this.getIndex(f);if(d!==-1&&p!==-1&&p<d){var x=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(d+(p>d),0,x)}return this},moveBelow:function(u,f){if(u===f)return this;if(this.isProcessing)return this.queueOp("moveBelow",u,f);var d=this.getIndex(u),p=this.getIndex(f);if(d!==-1&&p!==-1&&p>d){var x=this.getAt(p);this.scenes.splice(p,1),d===0?this.scenes.unshift(x):this.scenes.splice(d-(p<d),0,x)}return this},queueOp:function(u,f,d,p){return this._queue.push({op:u,keyA:f,keyB:d,data:p}),this},swapPosition:function(u,f){if(u===f)return this;if(this.isProcessing)return this.queueOp("swapPosition",u,f);var d=this.getIndex(u),p=this.getIndex(f);if(d!==p&&d!==-1&&p!==-1){var x=this.getAt(d);this.scenes[d]=this.scenes[p],this.scenes[p]=x}return this},dump:function(){for(var u=[],f=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],d=0;d<this.scenes.length;d++){var p=this.scenes[d].sys,x=p.settings.visible&&(p.settings.status===g.RUNNING||p.settings.status===g.PAUSED)?"[*] ":"[-] ";x+=p.settings.key+" ("+f[p.settings.status]+")",u.push(x)}console.log(u.join(`
`))},destroy:function(){for(var u=0;u<this.scenes.length;u++){var f=this.scenes[u].sys;f.destroy()}this.systemScene.sys.destroy(),this.update=s,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});c.exports=l},52209:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(44594),n=t(95540),r=t(37277),e=new g({initialize:function(h){this.scene=h,this.systems=h.sys,this.settings=h.sys.settings,this.key=h.sys.settings.key,this.manager=h.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",s,h),this},restart:function(s){var h=this.key;return this.manager.queueOp("stop",h),this.manager.queueOp("start",h,s),this},transition:function(s){s===void 0&&(s={});var h=n(s,"target",!1),i=this.manager.getScene(h);if(!h||!this.checkValidTransition(i))return!1;var l=n(s,"duration",1e3);this._elapsed=0,this._target=i,this._duration=l,this._willSleep=n(s,"sleep",!1),this._willRemove=n(s,"remove",!1);var u=n(s,"onUpdate",null);u&&(this._onUpdate=u,this._onUpdateScope=n(s,"onUpdateScope",this.scene));var f=n(s,"allowInput",!1);this.settings.transitionAllowInput=f;var d=i.sys.settings;d.isTransition=!0,d.transitionFrom=this.scene,d.transitionDuration=l,d.transitionAllowInput=f,n(s,"moveAbove",!1)?this.manager.moveAbove(this.key,h):n(s,"moveBelow",!1)&&this.manager.moveBelow(this.key,h),i.sys.isSleeping()?i.sys.wake(n(s,"data")):this.manager.start(h,n(s,"data"));var p=n(s,"onStart",null),x=n(s,"onStartScope",this.scene);return p&&p.call(x,this.scene,i,l),this.systems.events.emit(a.TRANSITION_OUT,i,l),!0},checkValidTransition:function(s){return!(!s||s.sys.isActive()||s.sys.isTransitioning()||s===this.scene||this.systems.isTransitioning())},step:function(s,h){this._elapsed+=h,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var s=this._target.sys,h=this._target.sys.settings;s.events.emit(a.TRANSITION_COMPLETE,this.scene),h.isTransition=!1,h.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(s,h,i,l){return this.manager.add(s,h,i,l)},launch:function(s,h){return s&&s!==this.key&&this.manager.queueOp("start",s,h),this},run:function(s,h){return s&&s!==this.key&&this.manager.queueOp("run",s,h),this},pause:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("pause",s,h),this},resume:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("resume",s,h),this},sleep:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("sleep",s,h),this},wake:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("wake",s,h),this},switch:function(s,h){return s!==this.key&&this.manager.queueOp("switch",this.key,s,h),this},stop:function(s,h){return s===void 0&&(s=this.key),this.manager.queueOp("stop",s,h),this},setActive:function(s,h,i){h===void 0&&(h=this.key);var l=this.manager.getScene(h);return l&&l.sys.setActive(s,i),this},setVisible:function(s,h){h===void 0&&(h=this.key);var i=this.manager.getScene(h);return i&&i.sys.setVisible(s),this},isSleeping:function(s){return s===void 0&&(s=this.key),this.manager.isSleeping(s)},isActive:function(s){return s===void 0&&(s=this.key),this.manager.isActive(s)},isPaused:function(s){return s===void 0&&(s=this.key),this.manager.isPaused(s)},isVisible:function(s){return s===void 0&&(s=this.key),this.manager.isVisible(s)},swapPosition:function(s,h){return h===void 0&&(h=this.key),s!==h&&this.manager.swapPosition(s,h),this},moveAbove:function(s,h){return h===void 0&&(h=this.key),s!==h&&this.manager.moveAbove(s,h),this},moveBelow:function(s,h){return h===void 0&&(h=this.key),s!==h&&this.manager.moveBelow(s,h),this},remove:function(s){return s===void 0&&(s=this.key),this.manager.remove(s),this},moveUp:function(s){return s===void 0&&(s=this.key),this.manager.moveUp(s),this},moveDown:function(s){return s===void 0&&(s=this.key),this.manager.moveDown(s),this},bringToTop:function(s){return s===void 0&&(s=this.key),this.manager.bringToTop(s),this},sendToBack:function(s){return s===void 0&&(s=this.key),this.manager.sendToBack(s),this},get:function(s){return this.manager.getScene(s)},getStatus:function(s){var h=this.manager.getScene(s);if(h)return h.sys.getStatus()},getIndex:function(s){return s===void 0&&(s=this.key),this.manager.getIndex(s)},shutdown:function(){var s=this.systems.events;s.off(a.SHUTDOWN,this.shutdown,this),s.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});r.register("ScenePlugin",e,"scenePlugin"),c.exports=e},55681:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89993),g=t(35154),a=t(46975),n=t(87033),r={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:o.PENDING,key:g(e,"key",""),active:g(e,"active",!1),visible:g(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(e,"pack",!1),cameras:g(e,"cameras",null),map:g(e,"map",a(n,g(e,"mapAdd",{}))),physics:g(e,"physics",{}),loader:g(e,"loader",{}),plugins:g(e,"plugins",!1),input:g(e,"input",{})}}};c.exports=r},2368:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89993),a=t(42363),n=t(44594),r=t(27397),e=t(52106),s=t(29747),h=t(55681),i=new o({initialize:function(u,f){this.scene=u,this.game,this.renderer,this.config=f,this.settings=h.create(f),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=s},init:function(l){this.settings.status=g.INIT,this.sceneUpdate=s,this.game=l,this.renderer=l.renderer,this.canvas=l.canvas,this.context=l.context;var u=l.plugins;this.plugins=u,u.addToScene(this,a.Global,[a.CoreScene,e(this),r(this)]),this.events.emit(n.BOOT,this),this.settings.isBooted=!0},step:function(l,u){var f=this.events;f.emit(n.PRE_UPDATE,l,u),f.emit(n.UPDATE,l,u),this.sceneUpdate.call(this.scene,l,u),f.emit(n.POST_UPDATE,l,u)},render:function(l){var u=this.displayList;u.depthSort(),this.events.emit(n.PRE_RENDER,l),this.cameras.render(l,u),this.events.emit(n.RENDER,l)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(l){var u=this.settings,f=this.getStatus();return f!==g.CREATING&&f!==g.RUNNING?console.warn("Cannot pause non-running Scene",u.key):this.settings.active&&(u.status=g.PAUSED,u.active=!1,this.events.emit(n.PAUSE,this,l)),this},resume:function(l){var u=this.events,f=this.settings;return this.settings.active||(f.status=g.RUNNING,f.active=!0,u.emit(n.RESUME,this,l)),this},sleep:function(l){var u=this.settings,f=this.getStatus();return f!==g.CREATING&&f!==g.RUNNING?console.warn("Cannot sleep non-running Scene",u.key):(u.status=g.SLEEPING,u.active=!1,u.visible=!1,this.events.emit(n.SLEEP,this,l)),this},wake:function(l){var u=this.events,f=this.settings;return f.status=g.RUNNING,f.active=!0,f.visible=!0,u.emit(n.WAKE,this,l),f.isTransition&&u.emit(n.TRANSITION_WAKE,f.transitionFrom,f.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var l=this.settings.status;return l>g.PENDING&&l<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(l){return this.settings.visible=l,this},setActive:function(l,u){return l?this.resume(u):this.pause(u)},start:function(l){var u=this.events,f=this.settings;l&&(f.data=l),f.status=g.START,f.active=!0,f.visible=!0,u.emit(n.START,this),u.emit(n.READY,this,l)},shutdown:function(l){var u=this.events,f=this.settings;u.off(n.TRANSITION_INIT),u.off(n.TRANSITION_START),u.off(n.TRANSITION_COMPLETE),u.off(n.TRANSITION_OUT),f.status=g.SHUTDOWN,f.active=!1,f.visible=!1,u.emit(n.SHUTDOWN,this,l)},destroy:function(){var l=this.events,u=this.settings;u.status=g.DESTROYED,u.active=!1,u.visible=!1,l.emit(n.DESTROY,this),l.removeAllListeners();for(var f=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],d=0;d<f.length;d++)this[f[d]]=null}});c.exports=i},89993:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};c.exports=S},69830:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addedtoscene"},7919:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="boot"},46763:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="create"},11763:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},71555:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},36735:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="postupdate"},3809:c=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="prerender"},90716:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="preupdate"},58262:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},91633:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removedfromscene"},10319:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="render"},87132:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},81961:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="shutdown"},90194:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="sleep"},6265:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},33178:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitioncomplete"},43063:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitioninit"},11259:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionout"},61611:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionstart"},45209:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="transitionwake"},22966:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},21747:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="wake"},44594:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADDED_TO_SCENE:t(69830),BOOT:t(7919),CREATE:t(46763),DESTROY:t(11763),PAUSE:t(71555),POST_UPDATE:t(36735),PRE_RENDER:t(3809),PRE_UPDATE:t(90716),READY:t(58262),REMOVED_FROM_SCENE:t(91633),RENDER:t(10319),RESUME:t(87132),SHUTDOWN:t(81961),SLEEP:t(90194),START:t(6265),TRANSITION_COMPLETE:t(33178),TRANSITION_INIT:t(43063),TRANSITION_OUT:t(11259),TRANSITION_START:t(61611),TRANSITION_WAKE:t(45209),UPDATE:t(22966),WAKE:t(21747)}},62194:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89993),g=t(79291),a={Events:t(44594),GetPhysicsPlugins:t(27397),GetScenePlugins:t(52106),SceneManager:t(60903),ScenePlugin:t(52209),Settings:t(55681),Systems:t(2368)};a=g(!1,a,o),c.exports=a},30341:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(14463),n=t(79291),r=t(29747),e=new o({Extends:g,initialize:function(h,i,l){g.call(this),this.manager=h,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=n(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(console.error("addMarker "+s.name+" already exists in Sound"),!1):(s=n(!0,{name:"",start:0,duration:this.totalDuration-(s.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},s),this.markers[s.name]=s,!0)},updateMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(this.markers[s.name]=n(!0,this.markers[s.name],s),!0):(console.warn("Audio Marker: "+s.name+" missing in Sound: "+this.key),!1)},removeMarker:function(s){var h=this.markers[s];return h?(this.markers[s]=null,h):null},play:function(s,h){if(s===void 0&&(s=""),typeof s=="object"&&(h=s,s=""),typeof s!="string")return!1;if(!s)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[s])return console.warn("Marker: "+s+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[s],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=n(this.currentConfig,h),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:r,calculateRate:function(){var s=1.0005777895065548,h=this.currentConfig.detune+this.manager.detune,i=Math.pow(s,h);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.stop(),this.emit(a.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});c.exports=e},85034:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(41786),a=t(50792),n=t(14463),r=t(8443),e=t(46710),s=t(58731),h=t(29747),i=t(26099),l=new o({Extends:a,initialize:function(f){a.call(this),this.game=f,this.jsonCache=f.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new i,f.events.on(r.BLUR,this.onGameBlur,this),f.events.on(r.FOCUS,this.onGameFocus,this),f.events.on(r.PRE_STEP,this.update,this),f.events.once(r.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(u,f){f===void 0&&(f={});var d=this.add(u,f);d.spritemap=this.jsonCache.get(u).spritemap;for(var p in d.spritemap)if(d.spritemap.hasOwnProperty(p)){var x=g(f),y=d.spritemap[p];x.loop=y.hasOwnProperty("loop")?y.loop:!1,d.addMarker({name:p,start:y.start,duration:y.end-y.start,config:x})}return d},get:function(u){return s(this.sounds,"key",u)},getAll:function(u){return u?e(this.sounds,"key",u):e(this.sounds)},getAllPlaying:function(){return e(this.sounds,"isPlaying",!0)},play:function(u,f){var d=this.add(u);return d.once(n.COMPLETE,d.destroy,d),f?f.name?(d.addMarker(f),d.play(f.name)):d.play(f):d.play()},playAudioSprite:function(u,f,d){var p=this.addAudioSprite(u);return p.once(n.COMPLETE,p.destroy,p),p.play(f,d)},remove:function(u){var f=this.sounds.indexOf(u);return f!==-1?(u.destroy(),this.sounds.splice(f,1),!0):!1},removeAll:function(){this.sounds.forEach(function(u){u.destroy()}),this.sounds.length=0},removeByKey:function(u){for(var f=0,d=this.sounds.length-1;d>=0;d--){var p=this.sounds[d];p.key===u&&(p.destroy(),this.sounds.splice(d,1),f++)}return f},pauseAll:function(){this.forEachActiveSound(function(u){u.pause()}),this.emit(n.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(u){u.resume()}),this.emit(n.RESUME_ALL,this)},setListenerPosition:h,stopAll:function(){this.forEachActiveSound(function(u){u.stop()}),this.emit(n.STOP_ALL,this)},stopByKey:function(u){var f=0;return this.getAll(u).forEach(function(d){d.stop()&&f++}),f},isPlaying:function(u){var f=this.sounds,d=f.length-1,p;if(u===void 0){for(;d>=0;d--)if(p=this.sounds[d],p.isPlaying)return!0}else for(;d>=0;d--)if(p=this.sounds[d],p.key===u&&p.isPlaying)return!0;return!1},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(u,f){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(n.UNLOCKED,this));for(var d=this.sounds.length-1;d>=0;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(p){p.update(u,f)})},destroy:function(){this.game.events.off(r.BLUR,this.onGameBlur,this),this.game.events.off(r.FOCUS,this.onGameFocus,this),this.game.events.off(r.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(u,f){var d=this;this.sounds.forEach(function(p,x){p&&!p.pendingRemove&&u.call(f||d,p,x,d.sounds)})},setRate:function(u){return this.rate=u,this},rate:{get:function(){return this._rate},set:function(u){this._rate=u,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(n.GLOBAL_RATE,this,u)}},setDetune:function(u){return this.detune=u,this},detune:{get:function(){return this._detune},set:function(u){this._detune=u,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(n.GLOBAL_DETUNE,this,u)}}});c.exports=l},14747:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33684),g=t(25960),a=t(57490),n={create:function(r){var e=r.config.audio,s=r.device.audio;return e.noAudio||!s.webAudio&&!s.audioData?new g(r):s.webAudio&&!e.disableWebAudio?new a(r):new o(r)}};c.exports=n},19723:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},98882:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="decodedall"},57506:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="decoded"},73146:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="destroy"},11305:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="detune"},40577:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="detune"},30333:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="mute"},20394:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="rate"},21802:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="volume"},1299:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="looped"},99190:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},97125:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="mute"},89259:c=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pan"},79986:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pauseall"},17586:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},19618:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="play"},42306:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="rate"},10387:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resumeall"},48959:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},9960:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="seek"},19180:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stopall"},98328:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},50401:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="unlocked"},52498:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="volume"},14463:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COMPLETE:t(19723),DECODED:t(57506),DECODED_ALL:t(98882),DESTROY:t(73146),DETUNE:t(11305),GLOBAL_DETUNE:t(40577),GLOBAL_MUTE:t(30333),GLOBAL_RATE:t(20394),GLOBAL_VOLUME:t(21802),LOOP:t(99190),LOOPED:t(1299),MUTE:t(97125),PAN:t(89259),PAUSE_ALL:t(79986),PAUSE:t(17586),PLAY:t(19618),RATE:t(42306),RESUME_ALL:t(10387),RESUME:t(48959),SEEK:t(9960),STOP_ALL:t(19180),STOP:t(98328),UNLOCKED:t(50401),VOLUME:t(52498)}},64895:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(14463),n=t(45319),r=new g({Extends:o,initialize:function(s,h,i){if(i===void 0&&(i={}),this.tags=s.game.cache.audio.get(h),!this.tags)throw new Error('No cached audio asset with key "'+h);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,s,h,i)},play:function(e,s){return this.manager.isLocked(this,"play",[e,s])||!o.prototype.play.call(this,e,s)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!o.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,s=this.currentConfig.delay,h=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=h,this.audio.currentTime=h,this.applyConfig(),s===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+s*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var s=this.tags[e];if(s.dataset.used==="false")return s.dataset.used="true",this.audio=s,!0}if(!this.manager.override)return!1;var h=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&h.push(l)},this),h.sort(function(l,u){return l.loop===u.loop?u.seek/u.duration-l.seek/l.duration:l.loop?1:-1});var i=h[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,i.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(s){console.warn(s)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var s=this.currentMarker?this.currentMarker.start:0,h=s+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=h-this.manager.loopEndOffset?(this.audio.currentTime=s+Math.max(0,i-h),i=this.audio.currentTime):i<s&&(this.audio.currentTime+=s,i=this.audio.currentTime),i<this.previousTime&&this.emit(a.LOOPED,this);else if(i>=h){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=i}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=n(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(a.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(a.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,a.RATE,e)&&(this.calculateRate(),this.emit(a.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,a.DETUNE,e)&&(this.calculateRate(),this.emit(a.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(a.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(a.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(a.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});c.exports=r},33684:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85034),g=t(83419),a=t(14463),n=t(64895),r=new g({Extends:o,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,s)},add:function(e,s){var h=new n(this,e,s);return this.sounds.push(h),h},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(l,u){for(var f=0;f<u.length;f++)if(u[f].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var s=!1,h=function(){s=!0},i=function(){if(s){s=!1;return}document.body.removeEventListener("touchmove",h),document.body.removeEventListener("touchend",i);var l=[];if(e.game.cache.audio.entries.each(function(f,d){for(var p=0;p<d.length;p++){var x=d[p];x.dataset.locked==="true"&&l.push(x)}return!0}),l.length!==0){var u=l[l.length-1];u.oncanplaythrough=function(){u.oncanplaythrough=null,l.forEach(function(f){f.dataset.locked="false"}),e.unlocked=!0},l.forEach(function(f){f.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(u){u.currentMarker===null&&u.duration===0&&(u.duration=u.tags[0].duration),u.totalDuration=u.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",h,!1),document.body.addEventListener("touchend",i,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,s,h){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:s,value:h}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(s){s.updateMute()}),this.emit(a.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(s){s.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,e)}}});c.exports=r},23717:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={SoundManagerCreator:t(14747),Events:t(14463),BaseSound:t(30341),BaseSoundManager:t(85034),WebAudioSound:t(71741),WebAudioSoundManager:t(57490),HTML5AudioSound:t(64895),HTML5AudioSoundManager:t(33684),NoAudioSound:t(4603),NoAudioSoundManager:t(25960)}},4603:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(50792),n=t(79291),r=t(29747),e=function(){return!1},s=function(){return null},h=function(){return this},i=new g({Extends:a,initialize:function(u,f,d){d===void 0&&(d={}),a.call(this),this.manager=u,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=n({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},d),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:e,updateMarker:e,removeMarker:s,play:e,pause:e,resume:e,stop:e,setMute:h,setVolume:h,setRate:h,setDetune:h,setSeek:h,setLoop:h,setPan:h,applyConfig:s,resetConfig:s,update:r,calculateRate:s,destroy:function(){o.prototype.destroy.call(this)}});c.exports=i},25960:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85034),g=t(83419),a=t(50792),n=t(4603),r=t(29747),e=new g({Extends:a,initialize:function(h){a.call(this),this.game=h,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(s,h){var i=new n(this,s,h);return this.sounds.push(i),i},addAudioSprite:function(s,h){var i=this.add(s,h);return i.spritemap={},i},get:function(s){return o.prototype.get.call(this,s)},getAll:function(s){return o.prototype.getAll.call(this,s)},play:function(s,h){return!1},playAudioSprite:function(s,h,i){return!1},remove:function(s){return o.prototype.remove.call(this,s)},removeAll:function(){return o.prototype.removeAll.call(this)},removeByKey:function(s){return o.prototype.removeByKey.call(this,s)},stopByKey:function(s){return o.prototype.stopByKey.call(this,s)},onBlur:r,onFocus:r,onGameBlur:r,onGameFocus:r,pauseAll:r,resumeAll:r,stopAll:r,update:r,setRate:r,setDetune:r,setMute:r,setVolume:r,unlock:r,forEachActiveSound:function(s,h){o.prototype.forEachActiveSound.call(this,s,h)},destroy:function(){o.prototype.destroy.call(this)}});c.exports=e},71741:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(14463),n=t(95540),r=new g({Extends:o,initialize:function(s,h,i){if(i===void 0&&(i={}),this.audioBuffer=s.game.cache.audio.get(h),!this.audioBuffer)throw new Error('Audio key "'+h+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=s.context.createGain(),this.volumeNode=s.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),s.context.createPanner&&(this.spatialNode=s.context.createPanner(),this.volumeNode.connect(this.spatialNode)),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),s.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(s.destination)):s.context.createPanner?this.spatialNode.connect(s.destination):this.volumeNode.connect(s.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,s,h,i)},play:function(e,s){return o.prototype.play.call(this,e,s)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return o.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,s=this.currentConfig.delay,h=this.manager.context.currentTime+s,i=(this.currentMarker?this.currentMarker.start:0)+e,l=this.duration-e;this.playTime=h-e,this.startTime=h,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,h),Math.max(0,i),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,h=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,s),Math.max(0,h))},createBufferSource:function(){var e=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(h){var i=h.target;(i===e.source||i===e.loopSource)&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){if(this.source){var e=this.source;this.source=null,e.stop(),e.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var e=this.currentConfig.source;if(e&&this.manager.context.createPanner){var s=this.spatialNode;s.panningModel=n(e,"panningModel","equalpower"),s.distanceModel=n(e,"distanceModel","inverse"),s.orientationX.value=n(e,"orientationX",0),s.orientationY.value=n(e,"orientationY",0),s.orientationZ.value=n(e,"orientationZ",-1),s.refDistance=n(e,"refDistance",1),s.maxDistance=n(e,"maxDistance",1e4),s.rolloffFactor=n(e,"rolloffFactor",1),s.coneInnerAngle=n(e,"coneInnerAngle",360),s.coneOuterAngle=n(e,"coneOuterAngle",0),s.coneOuterGain=n(e,"coneOuterGain",0),this.spatialSource=n(e,"follow",null),this.spatialSource||(s.positionX.value=n(e,"x",0),s.positionY.value=n(e,"y",0),s.positionZ.value=n(e,"z",0))}o.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(e){this.spatialNode&&(this.spatialNode.positionX.value=e)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(e){this.spatialNode&&(this.spatialNode.positionY.value=e)}},update:function(){if(this.isPlaying&&this.spatialSource){var e=n(this.spatialSource,"x",null),s=n(this.spatialSource,"y",null);e&&e!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=e),s&&s!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=s)}this.hasEnded?(o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){this.pendingRemove||(o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){o.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,s=0;s<this.rateUpdates.length;s++){var h=0;s<this.rateUpdates.length-1?h=this.rateUpdates[s+1].time:h=this.manager.context.currentTime-this.playTime,e+=(h-this.rateUpdates[s].time)*this.rateUpdates[s].rate}return e},getLoopTime:function(){for(var e=0,s=0;s<this.rateUpdates.length-1;s++)e+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var h=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+h.time+(this.duration-e)/h.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(a.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(a.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(a.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(a.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(a.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});c.exports=r},57490:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(53134),g=t(85034),a=t(83419),n=t(14463),r=t(8443),e=t(71741),s=t(95540),h=new a({Extends:g,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),g.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(r.BOOT,this.unlock,this)},createAudioContext:function(i){var l=i.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(i){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=i,this.masterMuteNode=i.createGain(),this.masterVolumeNode=i.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(i.destination),this.destination=this.masterMuteNode,this},add:function(i,l){var u=new e(this,i,l);return this.sounds.push(u),u},decodeAudio:function(i,l){var u;Array.isArray(i)?u=i:u=[{key:i,data:l}];for(var f=this.game.cache.audio,d=u.length,p=0;p<u.length;p++){var x=u[p],y=x.key,T=x.data;typeof T=="string"&&(T=o(T));var C=(function(R,M){f.add(R,M),this.emit(n.DECODED,R),d--,d===0&&this.emit(n.DECODED_ALL)}).bind(this,y),A=(function(R,M){console.error("Error decoding audio: "+R+" - ",M?M.message:""),d--,d===0&&this.emit(n.DECODED_ALL)}).bind(this,y);this.context.decodeAudioData(T,C,A)}},setListenerPosition:function(i,l){return i===void 0&&(i=this.game.scale.width/2),l===void 0&&(l=this.game.scale.height/2),this.listenerPosition.set(i,l),this},unlock:function(){var i=this,l=document.body,u=function f(){if(i.context&&l){var d=l.removeEventListener.bind(l);i.context.resume().then(function(){d("touchstart",f),d("touchend",f),d("click",f),d("keydown",f),i.unlocked=!0},function(){d("touchstart",f),d("touchend",f),d("click",f),d("keydown",f)})}};l&&(l.addEventListener("touchstart",u,!1),l.addEventListener("touchend",u,!1),l.addEventListener("click",u,!1),l.addEventListener("keydown",u,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var i=this.context;i&&!this.locked&&(i.state==="suspended"||i.state==="interrupted")&&i.resume()},update:function(i,l){var u=this.context.listener;if(u&&u.positionX!==void 0){var f=s(this.listenerPosition,"x",null),d=s(this.listenerPosition,"y",null);f&&f!==this._spatialx&&(this._spatialx=u.positionX.value=f),d&&d!==this._spatialy&&(this._spatialy=u.positionY.value=d)}g.prototype.update.call(this,i,l),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var i=this;this.context.close().then(function(){i.context=null})}g.prototype.destroy.call(this)},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(i){this.masterMuteNode.gain.setValueAtTime(i?0:1,0),this.emit(n.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(i){this.masterVolumeNode.gain.setValueAtTime(i,0),this.emit(n.GLOBAL_VOLUME,this,i)}}});c.exports=h},73162:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37105),g=t(83419),a=t(29747),n=t(19186),r=new g({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(e,s){return s?o.Add(this.list,e):o.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,s,h){return h?o.AddAt(this.list,e,s):o.AddAt(this.list,e,s,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,s){return e?(s===void 0&&(s=function(h,i){return h[e]-i[e]}),n(this.list,s),this):this},getByName:function(e){return o.GetFirst(this.list,"name",e)},getRandom:function(e,s){return o.GetRandom(this.list,e,s)},getFirst:function(e,s,h,i){return o.GetFirst(this.list,e,s,h,i)},getAll:function(e,s,h,i){return o.GetAll(this.list,e,s,h,i)},count:function(e,s){return o.CountAllMatching(this.list,e,s)},swap:function(e,s){o.Swap(this.list,e,s)},moveTo:function(e,s){return o.MoveTo(this.list,e,s)},moveAbove:function(e,s){return o.MoveAbove(this.list,e,s)},moveBelow:function(e,s){return o.MoveBelow(this.list,e,s)},remove:function(e,s){return s?o.Remove(this.list,e):o.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,s){return s?o.RemoveAt(this.list,e):o.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,s,h){return h?o.RemoveBetween(this.list,e,s):o.RemoveBetween(this.list,e,s,this.removeCallback,this)},removeAll:function(e){for(var s=this.list.length;s--;)this.remove(this.list[s],e);return this},bringToTop:function(e){return o.BringToTop(this.list,e)},sendToBack:function(e){return o.SendToBack(this.list,e)},moveUp:function(e){return o.MoveUp(this.list,e),e},moveDown:function(e){return o.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(e,s){return o.Replace(this.list,e,s)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,s,h,i){return o.SetAll(this.list,e,s,h,i),this},each:function(e,s){for(var h=[null],i=2;i<arguments.length;i++)h.push(arguments[i]);for(i=0;i<this.list.length;i++)h[0]=this.list[i],e.apply(s,h)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});c.exports=r},90330:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n){this.entries={},this.size=0,this.setAll(n)},setAll:function(a){if(Array.isArray(a))for(var n=0;n<a.length;n++)this.set(a[n][0],a[n][1]);return this},set:function(a,n){return this.has(a)||this.size++,this.entries[a]=n,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],n=this.entries;for(var r in n)a.push(n[r]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],n=this.entries;for(var r in n)a.push(n[r]);return a},dump:function(){var a=this.entries;console.group("Map");for(var n in a)console.log(n,a[n]);console.groupEnd()},each:function(a){var n=this.entries;for(var r in n)if(a(r,n[r])===!1)break;return this},contains:function(a){var n=this.entries;for(var r in n)if(n[r]===a)return!0;return!1},merge:function(a,n){n===void 0&&(n=!1);var r=this.entries,e=a.entries;for(var s in e)r.hasOwnProperty(s)&&n?r[s]=e[s]:this.set(s,e[s]);return this}});c.exports=g},25774:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(82348),n=new o({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(r){return this._active.indexOf(r)>-1},isPending:function(r){return this._toProcess>0&&this._pending.indexOf(r)>-1},isDestroying:function(r){return this._destroy.indexOf(r)>-1},add:function(r){return this.checkQueue&&this.isActive(r)&&!this.isDestroying(r)||this.isPending(r)||(this._pending.push(r),this._toProcess++),r},remove:function(r){if(this.isPending(r)){var e=this._pending,s=e.indexOf(r);s!==-1&&e.splice(s,1)}else this.isActive(r)&&(this._destroy.push(r),this._toProcess++);return r},removeAll:function(){for(var r=this._active,e=this._destroy,s=r.length;s--;)e.push(r[s]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var r=this._destroy,e=this._active,s,h;for(s=0;s<r.length;s++){h=r[s];var i=e.indexOf(h);i!==-1&&(e.splice(i,1),this.emit(a.PROCESS_QUEUE_REMOVE,h))}for(r.length=0,r=this._pending,s=0;s<r.length;s++)h=r[s],(!this.checkQueue||this.checkQueue&&e.indexOf(h)===-1)&&(e.push(h),this.emit(a.PROCESS_QUEUE_ADD,h));return r.length=0,this._toProcess=0,e},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});c.exports=n},59542:(c,S,t)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43886);function g(T){if(!(this instanceof g))return new g(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(T){var C=this.data,A=[],R=this.toBBox;if(!p(T,C))return A;for(var M=[],L,I,O,D;C;){for(L=0,I=C.children.length;L<I;L++)O=C.children[L],D=C.leaf?R(O):O,p(T,D)&&(C.leaf?A.push(O):d(T,D)?this._all(O,A):M.push(O));C=M.pop()}return A},collides:function(T){var C=this.data,A=this.toBBox;if(!p(T,C))return!1;for(var R=[],M,L,I,O;C;){for(M=0,L=C.children.length;M<L;M++)if(I=C.children[M],O=C.leaf?A(I):I,p(T,O)){if(C.leaf||d(T,O))return!0;R.push(I)}C=R.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var C=0,A=T.length;C<A;C++)this.insert(T[C]);return this}var R=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var M=this.data;this.data=R,R=M}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(T,C){if(!T)return this;for(var A=this.data,R=this.toBBox(T),M=[],L=[],I,O,D,B;A||M.length;){if(A||(A=M.pop(),O=M[M.length-1],I=L.pop(),B=!0),A.leaf&&(D=a(T,A.children,C),D!==-1))return A.children.splice(D,1),M.push(A),this._condense(M),this;!B&&!A.leaf&&d(A,R)?(M.push(A),L.push(I),I=0,O=A,A=A.children[0]):O?(I++,A=O.children[I],B=!1):A=null}return this},toBBox:function(T){return T},compareMinX:s,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,C){for(var A=[];T;)T.leaf?C.push.apply(C,T.children):A.push.apply(A,T.children),T=A.pop();return C},_build:function(T,C,A,R){var M=A-C+1,L=this._maxEntries,I;if(M<=L)return I=x(T.slice(C,A+1)),n(I,this.toBBox),I;R||(R=Math.ceil(Math.log(M)/Math.log(L)),L=Math.ceil(M/Math.pow(L,R-1))),I=x([]),I.leaf=!1,I.height=R;var O=Math.ceil(M/L),D=O*Math.ceil(Math.sqrt(L)),B,V,W,Y;for(y(T,C,A,D,this.compareMinX),B=C;B<=A;B+=D)for(W=Math.min(B+D-1,A),y(T,B,W,O,this.compareMinY),V=B;V<=W;V+=O)Y=Math.min(V+O-1,W),I.children.push(this._build(T,V,Y,R-1));return n(I,this.toBBox),I},_chooseSubtree:function(T,C,A,R){for(var M,L,I,O,D,B,V,W;R.push(C),!(C.leaf||R.length-1===A);){for(V=W=1/0,M=0,L=C.children.length;M<L;M++)I=C.children[M],D=i(I),B=u(T,I)-D,B<W?(W=B,V=D<V?D:V,O=I):B===W&&D<V&&(V=D,O=I);C=O||C.children[0]}return C},_insert:function(T,C,A){var R=this.toBBox,M=A?T:R(T),L=[],I=this._chooseSubtree(M,this.data,C,L);for(I.children.push(T),e(I,M);C>=0&&L[C].children.length>this._maxEntries;)this._split(L,C),C--;this._adjustParentBBoxes(M,L,C)},_split:function(T,C){var A=T[C],R=A.children.length,M=this._minEntries;this._chooseSplitAxis(A,M,R);var L=this._chooseSplitIndex(A,M,R),I=x(A.children.splice(L,A.children.length-L));I.height=A.height,I.leaf=A.leaf,n(A,this.toBBox),n(I,this.toBBox),C?T[C-1].children.push(I):this._splitRoot(A,I)},_splitRoot:function(T,C){this.data=x([T,C]),this.data.height=T.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},_chooseSplitIndex:function(T,C,A){var R,M,L,I,O,D,B,V;for(D=B=1/0,R=C;R<=A-C;R++)M=r(T,0,R,this.toBBox),L=r(T,R,A,this.toBBox),I=f(M,L),O=i(M)+i(L),I<D?(D=I,V=R,B=O<B?O:B):I===D&&O<B&&(B=O,V=R);return V},_chooseSplitAxis:function(T,C,A){var R=T.leaf?this.compareMinX:s,M=T.leaf?this.compareMinY:h,L=this._allDistMargin(T,C,A,R),I=this._allDistMargin(T,C,A,M);L<I&&T.children.sort(R)},_allDistMargin:function(T,C,A,R){T.children.sort(R);var M=this.toBBox,L=r(T,0,C,M),I=r(T,A-C,A,M),O=l(L)+l(I),D,B;for(D=C;D<A-C;D++)B=T.children[D],e(L,T.leaf?M(B):B),O+=l(L);for(D=A-C-1;D>=C;D--)B=T.children[D],e(I,T.leaf?M(B):B),O+=l(I);return O},_adjustParentBBoxes:function(T,C,A){for(var R=A;R>=0;R--)e(C[R],T)},_condense:function(T){for(var C=T.length-1,A;C>=0;C--)T[C].children.length===0?C>0?(A=T[C-1].children,A.splice(A.indexOf(T[C]),1)):this.clear():n(T[C],this.toBBox)},compareMinX:function(T,C){return T.left-C.left},compareMinY:function(T,C){return T.top-C.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function a(T,C,A){if(!A)return C.indexOf(T);for(var R=0;R<C.length;R++)if(A(T,C[R]))return R;return-1}function n(T,C){r(T,0,T.children.length,C,T)}function r(T,C,A,R,M){M||(M=x(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var L=C,I;L<A;L++)I=T.children[L],e(M,T.leaf?R(I):I);return M}function e(T,C){return T.minX=Math.min(T.minX,C.minX),T.minY=Math.min(T.minY,C.minY),T.maxX=Math.max(T.maxX,C.maxX),T.maxY=Math.max(T.maxY,C.maxY),T}function s(T,C){return T.minX-C.minX}function h(T,C){return T.minY-C.minY}function i(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function l(T){return T.maxX-T.minX+(T.maxY-T.minY)}function u(T,C){return(Math.max(C.maxX,T.maxX)-Math.min(C.minX,T.minX))*(Math.max(C.maxY,T.maxY)-Math.min(C.minY,T.minY))}function f(T,C){var A=Math.max(T.minX,C.minX),R=Math.max(T.minY,C.minY),M=Math.min(T.maxX,C.maxX),L=Math.min(T.maxY,C.maxY);return Math.max(0,M-A)*Math.max(0,L-R)}function d(T,C){return T.minX<=C.minX&&T.minY<=C.minY&&C.maxX<=T.maxX&&C.maxY<=T.maxY}function p(T,C){return C.minX<=T.maxX&&C.minY<=T.maxY&&C.maxX>=T.minX&&C.maxY>=T.minY}function x(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(T,C,A,R,M){for(var L=[C,A],I;L.length;)A=L.pop(),C=L.pop(),!(A-C<=R)&&(I=C+Math.ceil((A-C)/R/2)*R,o(T,I,C,A,M),L.push(C,I,I,A))}c.exports=g},35072:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n){if(this.entries=[],Array.isArray(n))for(var r=0;r<n.length;r++)this.set(n[r])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,n){for(var r=0;r<this.entries.length;r++){var e=this.entries[r];if(e[a]===n)return e}},getArray:function(){return this.entries.slice(0)},delete:function(a){var n=this.entries.indexOf(a);return n>-1&&this.entries.splice(n,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var n=this.entries[a];console.log(n)}console.groupEnd()},each:function(a,n){var r,e=this.entries.slice(),s=e.length;if(n)for(r=0;r<s&&a.call(n,e[r],r)!==!1;r++);else for(r=0;r<s&&a(e[r],r)!==!1;r++);return this},iterate:function(a,n){var r,e=this.entries.length;if(n)for(r=0;r<e&&a.call(n,this.entries[r],r)!==!1;r++);else for(r=0;r<e&&a(this.entries[r],r)!==!1;r++);return this},iterateLocal:function(a){var n,r=[];for(n=1;n<arguments.length;n++)r.push(arguments[n]);var e=this.entries.length;for(n=0;n<e;n++){var s=this.entries[n];s[a].apply(s,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var n=new g;return a.entries.forEach(function(r){n.set(r)}),this.entries.forEach(function(r){n.set(r)}),n},intersect:function(a){var n=new g;return this.entries.forEach(function(r){a.contains(r)&&n.set(r)}),n},difference:function(a){var n=new g;return this.entries.forEach(function(r){a.contains(r)||n.set(r)}),n},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});c.exports=g},86555:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(56583),n=t(26099),r=new g({initialize:function(s,h,i,l){s===void 0&&(s=0),h===void 0&&(h=s),i===void 0&&(i=0),l===void 0&&(l=null),this._width=s,this._height=h,this._parent=l,this.aspectMode=i,this.aspectRatio=h===0?1:s/h,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new n},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,s){return e===void 0&&(e=0),s===void 0&&(s=e),this.snapTo.set(e,s),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,s){return e===void 0&&(e=0),s===void 0&&(s=e),this.minWidth=o(e,0,this.maxWidth),this.minHeight=o(s,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,s){return e===void 0&&(e=Number.MAX_VALUE),s===void 0&&(s=e),this.maxWidth=o(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(s,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,s){switch(e===void 0&&(e=0),s===void 0&&(s=e),this.aspectMode){case r.NONE:this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(a(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case r.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case r.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(s,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case r.FIT:this.constrain(e,s,!0);break;case r.ENVELOP:this.constrain(e,s,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,s){return this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(a(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,s){return s===void 0&&(s=!0),e=o(e,this.minWidth,this.maxWidth),s&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,s){return s===void 0&&(s=!0),e=o(e,this.minHeight,this.maxHeight),s&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,s,h){e===void 0&&(e=0),s===void 0&&(s=e),h===void 0&&(h=!0),e=this.getNewWidth(e),s=this.getNewHeight(s);var i=this.snapTo,l=s===0?1:e/s;return h&&this.aspectRatio>l||!h&&this.aspectRatio<l?(e=a(e,i.x),s=e/this.aspectRatio,i.y>0&&(s=a(s,i.y),e=s*this.aspectRatio)):(h&&this.aspectRatio<l||!h&&this.aspectRatio>l)&&(s=a(s,i.y),e=s*this.aspectRatio,i.x>0&&(e=a(e,i.x),s=e*(1/this.aspectRatio))),this._width=e,this._height=s,this},fitTo:function(e,s){return this.constrain(e,s,!0)},envelop:function(e,s){return this.constrain(e,s,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});r.NONE=0,r.WIDTH_CONTROLS_HEIGHT=1,r.HEIGHT_CONTROLS_WIDTH=2,r.FIT=3,r.ENVELOP=4,c.exports=r},15238:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="add"},56187:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="remove"},82348:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={PROCESS_QUEUE_ADD:t(15238),PROCESS_QUEUE_REMOVE:t(56187)}},41392:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Events:t(82348),List:t(73162),Map:t(90330),ProcessQueue:t(25774),RTree:t(59542),Set:t(35072),Size:t(86555)}},57382:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(40987),n=t(8054),r=t(50030),e=t(79237),s=new o({Extends:e,initialize:function(i,l,u,f,d){e.call(this,i,l,u,f,d),this.add("__BASE",0,0,0,f,d),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=f,this.height=d,this.imageData=this.context.getImageData(0,0,f,d),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===n.WEBGL&&this.refresh(),this},draw:function(h,i,l,u){return u===void 0&&(u=!0),this.context.drawImage(l,h,i),u&&this.update(),this},drawFrame:function(h,i,l,u,f){l===void 0&&(l=0),u===void 0&&(u=0),f===void 0&&(f=!0);var d=this.manager.getFrame(h,i);if(d){var p=d.canvasData,x=d.cutWidth,y=d.cutHeight,T=d.source.resolution;this.context.drawImage(d.source.image,p.x,p.y,x,y,l,u,x/T,y/T),f&&this.update()}return this},setPixel:function(h,i,l,u,f,d){d===void 0&&(d=255),h=Math.abs(Math.floor(h)),i=Math.abs(Math.floor(i));var p=this.getIndex(h,i);if(p>-1){var x=this.context.getImageData(h,i,1,1);x.data[0]=l,x.data[1]=u,x.data[2]=f,x.data[3]=d,this.context.putImageData(x,h,i)}return this},putData:function(h,i,l,u,f,d,p){return u===void 0&&(u=0),f===void 0&&(f=0),d===void 0&&(d=h.width),p===void 0&&(p=h.height),this.context.putImageData(h,i,l,u,f,d,p),this},getData:function(h,i,l,u){h=g(Math.floor(h),0,this.width-1),i=g(Math.floor(i),0,this.height-1),l=g(l,1,this.width-h),u=g(u,1,this.height-i);var f=this.context.getImageData(h,i,l,u);return f},getPixel:function(h,i,l){l||(l=new a);var u=this.getIndex(h,i);if(u>-1){var f=this.data,d=f[u+0],p=f[u+1],x=f[u+2],y=f[u+3];l.setTo(d,p,x,y)}return l},getPixels:function(h,i,l,u){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=this.width),u===void 0&&(u=l),h=Math.abs(Math.round(h)),i=Math.abs(Math.round(i));for(var f=g(h,0,this.width),d=g(h+l,0,this.width),p=g(i,0,this.height),x=g(i+u,0,this.height),y=new a,T=[],C=p;C<x;C++){for(var A=[],R=f;R<d;R++)y=this.getPixel(R,C,y),A.push({x:R,y:C,color:y.color,alpha:y.alphaGL});T.push(A)}return T},getIndex:function(h,i){return h=Math.abs(Math.round(h)),i=Math.abs(Math.round(i)),h<this.width&&i<this.height?(h+i*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(h,i,l,u,f){return h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=this.width),u===void 0&&(u=this.height),f===void 0&&(f=!0),this.context.clearRect(h,i,l,u),f&&this.update(),this},setSize:function(h,i){return i===void 0&&(i=h),(h!==this.width||i!==this.height)&&(this.canvas.width=h,this.canvas.height=i,this._source.width=h,this._source.height=i,this._source.isPowerOf2=r(h,i),this.frames.__BASE.setSize(h,i,0,0),this.width=h,this.height=i,this.refresh()),this},destroy:function(){e.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});c.exports=s},81320:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(38058),a=t(27919),n=t(83419),r=t(8054),e=t(4327),s=t(95540),h=t(36060),i=t(32302),l=t(79237),u=t(70554),f=new n({Extends:l,initialize:function(p,x,y,T){y===void 0&&(y=256),T===void 0&&(T=256),this.type="DynamicTexture";var C=p.game.renderer,A=C&&C.type===r.CANVAS,R=A?a.create2D(this,y,T):[this];l.call(this,p,x,R,y,T),this.add("__BASE",0,0,0,y,T),this.renderer=C,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?R:null,this.context=A?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,y,T).setScene(p.game.scene.systemScene,!1),this.renderTarget=A?null:new i(C,y,T,1,0,!1,!1,!0,!1),this.pipeline=A?null:C.pipelines.get(h.SINGLE_PIPELINE),this.setSize(y,T)},setSize:function(d,p){p===void 0&&(p=d);var x=this.get(),y=x.source;if(d!==this.width||p!==this.height){this.canvas&&(this.canvas.width=d,this.canvas.height=p);var T=this.renderTarget;T&&(T.willResize(d,p)&&T.resize(d,p),T.texture!==y.glTexture&&this.renderer.deleteTexture(y.glTexture),this.setFromRenderTarget()),this.camera.setSize(d,p),y.width=d,y.height=p,x.setSize(d,p),this.width=d,this.height=p}else{var C=this.getSourceImage();x.cutX+d>C.width&&(d=C.width-x.cutX),x.cutY+p>C.height&&(p=C.height-x.cutY),x.setSize(d,p,x.cutX,x.cutY)}return this},setFromRenderTarget:function(){var d=this.get(),p=d.source,x=this.renderTarget;return p.isRenderTexture=!0,p.isGLTexture=!0,p.glTexture=x.texture,this},setIsSpriteTexture:function(d){return this.isSpriteTexture=d,this},fill:function(d,p,x,y,T,C){var A=this.camera,R=this.renderer;p===void 0&&(p=1),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=this.width),C===void 0&&(C=this.height);var M=d>>16&255,L=d>>8&255,I=d&255,O=this.renderTarget;if(A.preRender(),O){O.bind(!0);var D=this.pipeline.manager.set(this.pipeline),B=R.width/O.width,V=R.height/O.height,W=O.height-(y+C);D.drawFillRect(x*B,W*V,T*B,C*V,u.getTintFromFloats(I/255,L/255,M/255,1),p),O.unbind(!0)}else{var Y=this.context;R.setContext(Y),Y.globalCompositeOperation="source-over",Y.fillStyle="rgba("+M+","+L+","+I+","+p+")",Y.fillRect(x,y,T,C),R.setContext()}return this.dirty=!0,this},clear:function(d,p,x,y){if(this.dirty){var T=this.context,C=this.renderTarget;C?C.clear(d,p,x,y):T&&(d!==void 0&&p!==void 0&&x!==void 0&&y!==void 0?T.clearRect(d,p,x,y):(T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,this.width,this.height),T.restore())),this.dirty=!1}return this},stamp:function(d,p,x,y,T){x===void 0&&(x=0),y===void 0&&(y=0);var C=s(T,"alpha",1),A=s(T,"tint",16777215),R=s(T,"angle",0),M=s(T,"rotation",0),L=s(T,"scale",1),I=s(T,"scaleX",L),O=s(T,"scaleY",L),D=s(T,"originX",.5),B=s(T,"originY",.5),V=s(T,"blendMode",0),W=s(T,"erase",!1),Y=s(T,"skipBatch",!1),X=this.manager.resetStamp(C,A);return X.setAngle(0),R!==0?X.setAngle(R):M!==0&&X.setRotation(M),X.setScale(I,O),X.setTexture(d,p),X.setOrigin(D,B),X.setBlendMode(V),W&&(this._eraseMode=!0),Y?this.batchGameObject(X,x,y):this.draw(X,x,y),W&&(this._eraseMode=!1),this},erase:function(d,p,x){return this._eraseMode=!0,this.draw(d,p,x),this._eraseMode=!1,this},draw:function(d,p,x,y,T){return this.beginDraw(),this.batchDraw(d,p,x,y,T),this.endDraw(),this},drawFrame:function(d,p,x,y,T,C){return this.beginDraw(),this.batchDrawFrame(d,p,x,y,T,C),this.endDraw(),this},repeat:function(d,p,x,y,T,C,A,R,M){if(x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=this.width),C===void 0&&(C=this.height),A===void 0&&(A=1),R===void 0&&(R=16777215),M===void 0&&(M=!1),d instanceof e?p=d:p=this.manager.getFrame(d,p),!p)return this;var L=this.manager.resetStamp(A,R);L.setFrame(p),L.setOrigin(0);var I=p.width,O=p.height;T=Math.floor(T),C=Math.floor(C);var D=Math.ceil(T/I),B=Math.ceil(C/O),V=D*I-T,W=B*O-C;V>0&&(V=I-V),W>0&&(W=O-W),x<0&&(D+=Math.ceil(Math.abs(x)/I)),y<0&&(B+=Math.ceil(Math.abs(y)/O));var Y=x,X=y,U=!1,z=this.manager.stampCrop.setTo(0,0,I,O);M||this.beginDraw();for(var G=0;G<B;G++){if(X+O<0){X+=O;continue}for(var b=0;b<D;b++){if(U=!1,Y+I<0){Y+=I;continue}else Y<0&&(U=!0,z.width=I+Y,z.x=I-z.width);X<0&&(U=!0,z.height=O+X,z.y=O-z.height),V>0&&b===D-1&&(U=!0,z.width=V),W>0&&G===B-1&&(U=!0,z.height=W),U&&L.setCrop(z),this.batchGameObject(L,Y,X),L.isCropped=!1,z.setTo(0,0,I,O),Y+=I}Y=x,X+=O}return M||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var d=this.camera,p=this.renderer,x=this.renderTarget;d.preRender(),x?p.beginCapture(x.width,x.height):p.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(d,p,x,y,T){return Array.isArray(d)||(d=[d]),this.batchList(d,p,x,y,T),this},batchDrawFrame:function(d,p,x,y,T,C){x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=1),C===void 0&&(C=16777215);var A=this.manager.getFrame(d,p);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,x,y,C,T,this.camera.matrix,null):this.batchTextureFrame(A,x,y,T,C)),this},endDraw:function(d){if(d===void 0&&(d=this._eraseMode),this.isDrawing){var p=this.renderer,x=this.renderTarget;if(x){var y=p.endCapture(),T=p.pipelines.setUtility();T.blitFrame(y,x,1,!1,!1,d,this.isSpriteTexture),p.resetScissor(),p.resetViewport()}else p.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(d,p,x,y,T){var C=d.length;if(C!==0)for(var A=0;A<C;A++){var R=d[A];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,p,x):R.isParent||R.list?this.batchGroup(R.getChildren(),p,x):typeof R=="string"?this.batchTextureFrameKey(R,null,p,x,y,T):R instanceof e?this.batchTextureFrame(R,p,x,y,T):Array.isArray(R)&&this.batchList(R,p,x,y,T))}},batchGroup:function(d,p,x){p===void 0&&(p=0),x===void 0&&(x=0);for(var y=0;y<d.length;y++){var T=d[y];T.willRender(this.camera)&&this.batchGameObject(T,T.x+p,T.y+x)}},batchGameObject:function(d,p,x){p===void 0&&(p=d.x),x===void 0&&(x=d.y);var y=d.x,T=d.y,C=this.camera,A=this.renderer,R=this._eraseMode,M=d.mask;if(d.setPosition(p,x),this.canvas){if(R){var L=d.blendMode;d.blendMode=o.ERASE}M&&M.preRenderCanvas(A,d,C),d.renderCanvas(A,d,C,null),M&&M.postRenderCanvas(A,d,C),R&&(d.blendMode=L)}else A&&(M&&M.preRenderWebGL(A,d,C),R||A.setBlendMode(d.blendMode),d.renderWebGL(A,d,C),M&&M.postRenderWebGL(A,C,this.renderTarget));d.setPosition(y,T)},batchTextureFrameKey:function(d,p,x,y,T,C){var A=this.manager.getFrame(d,p);A&&this.batchTextureFrame(A,x,y,T,C)},batchTextureFrame:function(d,p,x,y,T){p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=1),T===void 0&&(T=16777215);var C=this.camera.matrix,A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(d,p,x,T,y,C,null);else{var R=this.context,M=d.canvasData,L=d.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=y,C.setToContext(R),M.width>0&&M.height>0&&R.drawImage(L,M.x,M.y,M.width,M.height,p,x,M.width,M.height),R.restore()}},snapshotArea:function(d,p,x,y,T,C,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,d,p,x,y,C,A):this.renderer.snapshotCanvas(this.canvas,T,!1,d,p,x,y,C,A),this},snapshot:function(d,p,x){return this.snapshotArea(0,0,this.width,this.height,d,p,x)},snapshotPixel:function(d,p,x){return this.snapshotArea(d,p,1,1,x,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(d,p,x,y){var T=this.manager.resetStamp();T.setTexture(this),T.setOrigin(0),T.renderWebGL(d,T,x,y)},renderCanvas:function(){},destroy:function(){var d=this.manager.stamp;d&&d.texture===this&&this.manager.resetStamp(),l.prototype.destroy.call(this),a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});c.exports=f},4327:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(79291),n=new o({initialize:function(e,s,h,i,l,u,f){this.texture=e,this.name=s,this.source=e.source[h],this.sourceIndex=h,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(u,f,i,l)},setCutPosition:function(r,e){return r===void 0&&(r=0),e===void 0&&(e=0),this.cutX=r,this.cutY=e,this.updateUVs()},setCutSize:function(r,e){return this.cutWidth=r,this.cutHeight=e,this.updateUVs()},setSize:function(r,e,s,h){s===void 0&&(s=0),h===void 0&&(h=0),this.setCutPosition(s,h),this.setCutSize(r,e),this.width=r,this.height=e,this.halfWidth=Math.floor(r*.5),this.halfHeight=Math.floor(e*.5),this.centerX=Math.floor(r/2),this.centerY=Math.floor(e/2);var i=this.data,l=i.cut;l.x=s,l.y=h,l.w=r,l.h=e,l.r=s+r,l.b=h+e,i.sourceSize.w=r,i.sourceSize.h=e,i.spriteSourceSize.w=r,i.spriteSourceSize.h=e,i.radius=.5*Math.sqrt(r*r+e*e);var u=i.drawImage;return u.x=s,u.y=h,u.width=r,u.height=e,this.updateUVs()},setTrim:function(r,e,s,h,i,l){var u=this.data,f=u.spriteSourceSize;return u.trim=!0,u.sourceSize.w=r,u.sourceSize.h=e,f.x=s,f.y=h,f.w=i,f.h=l,f.r=s+i,f.b=h+l,this.x=s,this.y=h,this.width=i,this.height=l,this.halfWidth=i*.5,this.halfHeight=l*.5,this.centerX=Math.floor(i/2),this.centerY=Math.floor(l/2),this.updateUVs()},setScale9:function(r,e,s,h){var i=this.data;return i.scale9=!0,i.is3Slice=e===0&&h===this.height,i.scale9Borders.x=r,i.scale9Borders.y=e,i.scale9Borders.w=s,i.scale9Borders.h=h,this},setCropUVs:function(r,e,s,h,i,l,u){var f=this.cutX,d=this.cutY,p=this.cutWidth,x=this.cutHeight,y=this.realWidth,T=this.realHeight;e=g(e,0,y),s=g(s,0,T),h=g(h,0,y-e),i=g(i,0,T-s);var C=f+e,A=d+s,R=h,M=i,L=this.data;if(L.trim){var I=L.spriteSourceSize;h=g(h,0,p-e),i=g(i,0,x-s);var O=e+h,D=s+i,B=!(I.r<e||I.b<s||I.x>O||I.y>D);if(B){var V=Math.max(I.x,e),W=Math.max(I.y,s),Y=Math.min(I.r,O)-V,X=Math.min(I.b,D)-W;R=Y,M=X,l?C=f+(p-(V-I.x)-Y):C=f+(V-I.x),u?A=d+(x-(W-I.y)-X):A=d+(W-I.y),e=V,s=W,h=Y,i=X}else C=0,A=0,R=0,M=0}else l&&(C=f+(p-e-h)),u&&(A=d+(x-s-i));var U=this.source.width,z=this.source.height;return r.u0=Math.max(0,C/U),r.v0=Math.max(0,A/z),r.u1=Math.min(1,(C+R)/U),r.v1=Math.min(1,(A+M)/z),r.x=e,r.y=s,r.cx=C,r.cy=A,r.cw=R,r.ch=M,r.width=h,r.height=i,r.flipX=l,r.flipY=u,r},updateCropUVs:function(r,e,s){return this.setCropUVs(r,r.x,r.y,r.width,r.height,e,s)},setUVs:function(r,e,s,h,i,l){var u=this.data.drawImage;return u.width=r,u.height=e,this.u0=s,this.v0=h,this.u1=i,this.v1=l,this},updateUVs:function(){var r=this.cutX,e=this.cutY,s=this.cutWidth,h=this.cutHeight,i=this.data.drawImage;i.width=s,i.height=h;var l=this.source.width,u=this.source.height;return this.u0=r/l,this.v0=e/u,this.u1=(r+s)/l,this.v1=(e+h)/u,this},updateUVsInverted:function(){var r=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/r,this.v0=this.cutY/e,this.u1=this.cutX/r,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var r=new n(this.texture,this.name,this.sourceIndex);return r.cutX=this.cutX,r.cutY=this.cutY,r.cutWidth=this.cutWidth,r.cutHeight=this.cutHeight,r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r.halfWidth=this.halfWidth,r.halfHeight=this.halfHeight,r.centerX=this.centerX,r.centerY=this.centerY,r.rotated=this.rotated,r.data=a(!0,r.data,this.data),r.updateUVs(),r},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});c.exports=n},79237:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(4327),a=t(11876),n='Texture "%s" has no frame "%s"',r=new o({initialize:function(s,h,i,l,u){Array.isArray(i)||(i=[i]),this.manager=s,this.key=h,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var f=0;f<i.length;f++)this.source.push(new a(this,i[f],l,u))},add:function(e,s,h,i,l,u){if(this.has(e))return null;var f=new g(this,e,s,h,i,l,u);return this.frames[e]=f,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,f},remove:function(e){if(this.has(e)){var s=this.get(e);return s.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames.hasOwnProperty(e)},get:function(e){e||(e=this.firstFrame);var s=this.frames[e];return s||(console.warn(n,this.key,e),s=this.frames[this.firstFrame]),s},getTextureSourceIndex:function(e){for(var s=0;s<this.source.length;s++)if(this.source[s]===e)return s;return-1},getFramesFromTextureSource:function(e,s){s===void 0&&(s=!1);var h=[];for(var i in this.frames)if(!(i==="__BASE"&&!s)){var l=this.frames[i];l.sourceIndex===e&&h.push(l)}return h},getFrameBounds:function(e){e===void 0&&(e=0);for(var s=this.getFramesFromTextureSource(e,!0),h=s[0],i=h.cutX,l=h.cutY,u=h.cutX+h.cutWidth,f=h.cutY+h.cutHeight,d=1;d<s.length;d++){var p=s[d];p.cutX<i&&(i=p.cutX),p.cutY<l&&(l=p.cutY),p.cutX+p.cutWidth>u&&(u=p.cutX+p.cutWidth),p.cutY+p.cutHeight>f&&(f=p.cutY+p.cutHeight)}return{x:i,y:l,width:u-i,height:f-l}},getFrameNames:function(e){e===void 0&&(e=!1);var s=Object.keys(this.frames);if(!e){var h=s.indexOf("__BASE");h!==-1&&s.splice(h,1)}return s},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var s=this.frames[e];return s?s.source.image:(console.warn(n,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var s=this.frames[e],h;return s?h=s.sourceIndex:(console.warn(n,this.key,e),h=this.frames.__BASE.sourceIndex),this.dataSource[h].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){var h=this.source[s];this.dataSource.push(new a(this,e[s],h.width,h.height))}},setFilter:function(e){var s;for(s=0;s<this.source.length;s++)this.source[s].setFilter(e);for(s=0;s<this.dataSource.length;s++)this.dataSource[s].setFilter(e)},destroy:function(){var e,s=this.source,h=this.dataSource;for(e=0;e<s.length;e++)s[e]&&s[e].destroy();for(e=0;e<h.length;e++)h[e]&&h[e].destroy();for(var i in this.frames){var l=this.frames[i];l&&l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});c.exports=r},17130:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(57382),a=t(83419),n=t(40987),r=t(8054),e=t(81320),s=t(50792),h=t(69442),i=t(4327),l=t(8443),u=t(99584),f=t(35154),d=t(88571),p=t(41212),x=t(61309),y=t(87841),T=t(79237),C=new a({Extends:s,initialize:function(R){s.call(this),this.game=R,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new y,this.silentWarnings=!1,R.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(h.LOAD,this.updatePending,this),this.on(h.ERROR,this.updatePending,this);var A=this.game.config;A.defaultImage!==null&&this.addBase64("__DEFAULT",A.defaultImage),A.missingImage!==null&&this.addBase64("__MISSING",A.missingImage),A.whiteImage!==null&&this.addBase64("__WHITE",A.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(l.DESTROY,this.destroy,this),this.game.events.once(l.SYSTEM_READY,function(R){this.stamp=new d(R).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(h.LOAD),this.off(h.ERROR),this.emit(h.READY))},checkKey:function(A){return!A||typeof A!="string"||this.exists(A)?(this.silentWarnings||console.error("Texture key already in use: "+A),!1):!0},remove:function(A){if(typeof A=="string")if(this.exists(A))A=this.get(A);else return this.silentWarnings||console.warn("No texture found matching key: "+A),this;var R=A.key;return this.list.hasOwnProperty(R)&&(A.destroy(),this.emit(h.REMOVE,R),this.emit(h.REMOVE_KEY+R)),this},removeKey:function(A){return this.list.hasOwnProperty(A)&&delete this.list[A],this},addBase64:function(A,R){if(this.checkKey(A)){var M=this,L=new Image;L.onerror=function(){M.emit(h.ERROR,A)},L.onload=function(){var I=M.create(A,L);x.Image(I,0),M.emit(h.ADD,A,I),M.emit(h.ADD_KEY+A,I),M.emit(h.LOAD,A,I)},L.src=R}return this},getBase64:function(A,R,M,L){M===void 0&&(M="image/png"),L===void 0&&(L=.92);var I="",O=this.getFrame(A,R);if(O&&(O.source.isRenderTexture||O.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(O){var D=O.canvasData,B=o.create2D(this,D.width,D.height),V=B.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&V.drawImage(O.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),I=B.toDataURL(M,L),o.remove(B)}return I},addImage:function(A,R,M){var L=null;return this.checkKey(A)&&(L=this.create(A,R),x.Image(L,0),M&&L.setDataSource(M),this.emit(h.ADD,A,L),this.emit(h.ADD_KEY+A,L)),L},addGLTexture:function(A,R){var M=null;if(this.checkKey(A)){var L=R.width,I=R.height;M=this.create(A,R,L,I),M.add("__BASE",0,0,0,L,I),this.emit(h.ADD,A,M),this.emit(h.ADD_KEY+A,M)}return M},addCompressedTexture:function(A,R,M){var L=null;if(this.checkKey(A)){if(L=this.create(A,R),L.add("__BASE",0,0,0,R.width,R.height),M){var I=function(D,B,V){Array.isArray(V.textures)||Array.isArray(V.frames)?x.JSONArray(D,B,V):x.JSONHash(D,B,V)};if(Array.isArray(M))for(var O=0;O<M.length;O++)I(L,O,M[O]);else I(L,0,M)}this.emit(h.ADD,A,L),this.emit(h.ADD_KEY+A,L)}return L},addRenderTexture:function(A,R){var M=null;return this.checkKey(A)&&(M=this.create(A,R),M.add("__BASE",0,0,0,R.width,R.height),this.emit(h.ADD,A,M),this.emit(h.ADD_KEY+A,M)),M},generate:function(A,R){if(this.checkKey(A)){var M=o.create(this,1,1);return R.canvas=M,u(R),this.addCanvas(A,M)}else return null},createCanvas:function(A,R,M){if(R===void 0&&(R=256),M===void 0&&(M=256),this.checkKey(A)){var L=o.create(this,R,M,r.CANVAS,!0);return this.addCanvas(A,L)}return null},addCanvas:function(A,R,M){M===void 0&&(M=!1);var L=null;return M?L=new g(this,A,R,R.width,R.height):this.checkKey(A)&&(L=new g(this,A,R,R.width,R.height),this.list[A]=L,this.emit(h.ADD,A,L),this.emit(h.ADD_KEY+A,L)),L},addDynamicTexture:function(A,R,M){var L=null;return typeof A=="string"&&!this.exists(A)?L=new e(this,A,R,M):(L=A,A=L.key),this.checkKey(A)?(this.list[A]=L,this.emit(h.ADD,A,L),this.emit(h.ADD_KEY+A,L)):L=null,L},addAtlas:function(A,R,M,L){return Array.isArray(M.textures)||Array.isArray(M.frames)?this.addAtlasJSONArray(A,R,M,L):this.addAtlasJSONHash(A,R,M,L)},addAtlasJSONArray:function(A,R,M,L){var I=null;if(R instanceof T?(A=R.key,I=R):this.checkKey(A)&&(I=this.create(A,R)),I){if(Array.isArray(M))for(var O=M.length===1,D=0;D<I.source.length;D++){var B=O?M[0]:M[D];x.JSONArray(I,D,B)}else x.JSONArray(I,0,M);L&&I.setDataSource(L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I)}return I},addAtlasJSONHash:function(A,R,M,L){var I=null;if(R instanceof T?(A=R.key,I=R):this.checkKey(A)&&(I=this.create(A,R)),I){if(Array.isArray(M))for(var O=0;O<M.length;O++)x.JSONHash(I,O,M[O]);else x.JSONHash(I,0,M);L&&I.setDataSource(L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I)}return I},addAtlasXML:function(A,R,M,L){var I=null;return R instanceof T?(A=R.key,I=R):this.checkKey(A)&&(I=this.create(A,R)),I&&(x.AtlasXML(I,0,M),L&&I.setDataSource(L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I)),I},addUnityAtlas:function(A,R,M,L){var I=null;return R instanceof T?(A=R.key,I=R):this.checkKey(A)&&(I=this.create(A,R)),I&&(x.UnityYAML(I,0,M),L&&I.setDataSource(L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I)),I},addSpriteSheet:function(A,R,M,L){var I=null;if(R instanceof T?(A=R.key,I=R):this.checkKey(A)&&(I=this.create(A,R)),I){var O=I.source[0].width,D=I.source[0].height;x.SpriteSheet(I,0,0,0,O,D,M),L&&I.setDataSource(L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I)}return I},addSpriteSheetFromAtlas:function(A,R){if(!this.checkKey(A))return null;var M=f(R,"atlas",null),L=f(R,"frame",null);if(!(!M||!L)){var I=this.get(M),O=I.get(L);if(O){var D=O.source.image;D||(D=O.source.glTexture);var B=this.create(A,D);return O.trimmed?x.SpriteSheetFromAtlas(B,O,R):x.SpriteSheet(B,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,R),this.emit(h.ADD,A,B),this.emit(h.ADD_KEY+A,B),B}}},addUint8Array:function(A,R,M,L){if(!this.checkKey(A)||R.length/4!==M*L)return null;var I=this.create(A,R,M,L);return I.add("__BASE",0,0,0,M,L),this.emit(h.ADD,A,I),this.emit(h.ADD_KEY+A,I),I},create:function(A,R,M,L){var I=null;return this.checkKey(A)&&(I=new T(this,A,R,M,L),this.list[A]=I),I},exists:function(A){return this.list.hasOwnProperty(A)},get:function(A){return A===void 0&&(A="__DEFAULT"),this.list[A]?this.list[A]:A instanceof T?A:A instanceof i?A.texture:this.list.__MISSING},cloneFrame:function(A,R){if(this.list[A])return this.list[A].get(R).clone()},getFrame:function(A,R){if(this.list[A])return this.list[A].get(R)},parseFrame:function(A){if(A){if(typeof A=="string")return this.getFrame(A);if(Array.isArray(A)&&A.length===2)return this.getFrame(A[0],A[1]);if(p(A))return this.getFrame(A.key,A.frame);if(A instanceof T)return A.get();if(A instanceof i)return A}else return},getTextureKeys:function(){var A=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&R!=="__NORMAL"&&A.push(R);return A},getPixel:function(A,R,M,L){var I=this.getFrame(M,L);if(I){A-=I.x,R-=I.y;var O=I.data.cut;if(A+=O.x,R+=O.y,A>=O.x&&A<O.r&&R>=O.y&&R<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,A,R,1,1,0,0,1,1);var B=D.getImageData(0,0,1,1);return new n(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(A,R,M,L){var I=this.getFrame(M,L);if(I){A-=I.x,R-=I.y;var O=I.data.cut;if(A+=O.x,R+=O.y,A>=O.x&&A<O.r&&R>=O.y&&R<O.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,A,R,1,1,0,0,1,1);var B=D.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(A,R,M){return this.list[R]&&(A.texture=this.list[R],A.frame=A.texture.get(M)),A},renameTexture:function(A,R){var M=this.get(A);return M&&A!==R?(M.key=R,this.list[R]=M,delete this.list[A],!0):!1},each:function(A,R){for(var M=[null],L=1;L<arguments.length;L++)M.push(arguments[L]);for(var I in this.list)M[0]=this.list[I],A.apply(R,M)},resetStamp:function(A,R){A===void 0&&(A=1),R===void 0&&(R=16777215);var M=this.stamp;return M.setCrop(),M.setPosition(0),M.setAngle(0),M.setScale(1),M.setAlpha(A),M.setTint(R),M.setTexture("__WHITE"),M},destroy:function(){for(var A in this.list)this.list[A].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,o.remove(this._tempCanvas)}});c.exports=C},11876:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(83419),a=t(50030),n=t(29795),r=t(82751),e=new g({initialize:function(h,i,l,u,f){f===void 0&&(f=!1);var d=h.manager.game;this.renderer=d.renderer,this.texture=h,this.source=i,this.image=i.compressed?null:i,this.compressionAlgorithm=i.compressed?i.format:null,this.resolution=1,this.width=l||i.naturalWidth||i.videoWidth||i.width||0,this.height=u||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=n.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture"||i.type==="DynamicTexture",this.isGLTexture=i instanceof r,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.flipY=f,this.init(d)},init:function(s){var h=this.renderer;if(h){var i=this.source;if(h.gl){var l=this.image,u=this.flipY,f=this.width,d=this.height,p=this.scaleMode;this.isCanvas?this.glTexture=h.createCanvasTexture(l,!1,u):this.isVideo?this.glTexture=h.createVideoTexture(l,!1,u):this.isRenderTexture?this.glTexture=h.createTextureFromSource(null,f,d,p):this.isGLTexture?this.glTexture=i:this.compressionAlgorithm?this.glTexture=h.createTextureFromSource(i,void 0,void 0,p):i instanceof Uint8Array?this.glTexture=h.createUint8ArrayTexture(i,f,d,p):this.glTexture=h.createTextureFromSource(l,f,d,p)}else this.isRenderTexture&&(this.image=i.canvas)}s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),s===this.flipY?this:(this.flipY=s,this.update(),this)},update:function(){var s=this.renderer,h=this.image,i=this.flipY,l=s.gl;l&&this.isCanvas?s.updateCanvasTexture(h,this.glTexture,i):l&&this.isVideo&&s.updateVideoTexture(h,this.glTexture,i)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});c.exports=e},19673:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LINEAR:0,NEAREST:1};c.exports=S},44538:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addtexture"},63486:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="addtexture-"},94851:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="onerror"},29099:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="onload"},8678:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="ready"},86415:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removetexture"},30879:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="removetexture-"},69442:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ADD:t(44538),ADD_KEY:t(63486),ERROR:t(94851),LOAD:t(29099),READY:t(8678),REMOVE:t(86415),REMOVE_KEY:t(30879)}},27458:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(19673),a={CanvasTexture:t(57382),DynamicTexture:t(81320),Events:t(69442),FilterMode:g,Frame:t(4327),Parsers:t(61309),Texture:t(79237),TextureManager:t(17130),TextureSource:t(11876)};a=o(!1,a,g),c.exports=a},89905:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=t.source[o];t.add("__BASE",o,0,0,a.width,a.height);for(var n=g.getElementsByTagName("SubTexture"),r,e=0;e<n.length;e++){var s=n[e].attributes,h=s.name.value,i=parseInt(s.x.value,10),l=parseInt(s.y.value,10),u=parseInt(s.width.value,10),f=parseInt(s.height.value,10);if(r=t.add(h,o,i,l,u,f),s.frameX){var d=Math.abs(parseInt(s.frameX.value,10)),p=Math.abs(parseInt(s.frameY.value,10)),x=parseInt(s.frameWidth.value,10),y=parseInt(s.frameHeight.value,10);r.setTrim(u,f,d,p,x,y)}}return t};c.exports=S},72893:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.source[o];return t.add("__BASE",o,0,0,g.width,g.height),t};c.exports=S},4832:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.source[o];return t.add("__BASE",o,0,0,g.width,g.height),t};c.exports=S},78566:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,n,r){if(!r.frames&&!r.textures){console.warn("Invalid Texture Atlas JSON Array");return}var e=a.source[n];a.add("__BASE",n,0,0,e.width,e.height);for(var s=Array.isArray(r.textures)?r.textures[n].frames:r.frames,h,i=0;i<s.length;i++){var l=s[i];if(h=a.add(l.filename,n,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!h){console.warn("Invalid atlas json, frame already exists: "+l.filename);continue}l.trimmed&&h.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(h.rotated=!0,h.updateUVsInverted());var u=l.anchor||l.pivot;u&&(h.customPivot=!0,h.pivotX=u.x,h.pivotY=u.y),l.scale9Borders&&h.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),h.customData=o(l)}for(var f in r)f!=="frames"&&(Array.isArray(r[f])?a.customData[f]=r[f].slice(0):a.customData[f]=r[f]);return a};c.exports=g},39711:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,n,r){if(!r.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var e=a.source[n];a.add("__BASE",n,0,0,e.width,e.height);var s=r.frames,h;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];if(h=a.add(i,n,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!h){console.warn("Invalid atlas json, frame already exists: "+i);continue}l.trimmed&&h.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(h.rotated=!0,h.updateUVsInverted());var u=l.anchor||l.pivot;u&&(h.customPivot=!0,h.pivotX=u.x,h.pivotY=u.y),l.scale9Borders&&h.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),h.customData=o(l)}for(var f in r)f!=="frames"&&(Array.isArray(r[f])?a.customData[f]=r[f].slice(0):a.customData[f]=r[f]);return a};c.exports=g},31403:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=[171,75,84,88,32,49,49,187,13,10,26,10],g,a=new Uint8Array(t,0,12);for(g=0;g<a.length;g++)if(a[g]!==o[g]){console.warn("KTXParser - Invalid file format");return}var n=Uint32Array.BYTES_PER_ELEMENT,r=new DataView(t,12,13*n),e=r.getUint32(0,!0)===67305985,s=r.getUint32(1*n,e);if(s!==0){console.warn("KTXParser - Only compressed formats supported");return}var h=r.getUint32(4*n,e),i=r.getUint32(6*n,e),l=r.getUint32(7*n,e),u=Math.max(1,r.getUint32(11*n,e)),f=r.getUint32(12*n,e),d=new Array(u),p=12+13*4+f,x=i,y=l;for(g=0;g<u;g++){var T=new Int32Array(t,p,1)[0];p+=4,d[g]={data:new Uint8Array(t,p,T),width:x,height:y},x=Math.max(1,x>>1),y=Math.max(1,y>>1),p+=T}return{mipmaps:d,width:i,height:l,internalFormat:h,compressed:!0,generateMipmap:!1}};c.exports=S},82038:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(R,M,L,I,O,D,B){return B===void 0&&(B=16),Math.floor((R+L)/O)*Math.floor((M+I)/D)*B}function t(R,M){return R=Math.max(R,16),M=Math.max(M,8),R*M/4}function o(R,M){return R=Math.max(R,8),M=Math.max(M,8),R*M/2}function g(R,M){return Math.ceil(R/4)*Math.ceil(M/4)*16}function a(R,M){return S(R,M,3,3,4,4,8)}function n(R,M){return S(R,M,3,3,4,4)}function r(R,M){return S(R,M,4,3,5,4)}function e(R,M){return S(R,M,4,4,5,5)}function s(R,M){return S(R,M,5,4,6,5)}function h(R,M){return S(R,M,5,5,6,6)}function i(R,M){return S(R,M,7,4,8,5)}function l(R,M){return S(R,M,7,5,8,6)}function u(R,M){return S(R,M,7,7,8,8)}function f(R,M){return S(R,M,9,4,10,5)}function d(R,M){return S(R,M,9,5,10,6)}function p(R,M){return S(R,M,9,7,10,8)}function x(R,M){return S(R,M,9,9,10,10)}function y(R,M){return S(R,M,11,9,12,10)}function T(R,M){return S(R,M,11,11,12,12)}var C={0:{sizeFunc:t,glFormat:[35841]},1:{sizeFunc:t,glFormat:[35843]},2:{sizeFunc:o,glFormat:[35840]},3:{sizeFunc:o,glFormat:[35842]},6:{sizeFunc:a,glFormat:[36196]},7:{sizeFunc:a,glFormat:[33776,35916]},8:{sizeFunc:n,glFormat:[33777,35917]},9:{sizeFunc:n,glFormat:[33778,35918]},11:{sizeFunc:n,glFormat:[33779,35919]},14:{sizeFunc:g,glFormat:[36494,36495]},15:{sizeFunc:g,glFormat:[36492,36493]},22:{sizeFunc:a,glFormat:[37492,37493]},23:{sizeFunc:n,glFormat:[37496,37497]},24:{sizeFunc:a,glFormat:[37494,37495]},25:{sizeFunc:a,glFormat:[37488]},26:{sizeFunc:n,glFormat:[37490]},27:{sizeFunc:n,glFormat:[37808,37840]},28:{sizeFunc:r,glFormat:[37809,37841]},29:{sizeFunc:e,glFormat:[37810,37842]},30:{sizeFunc:s,glFormat:[37811,37843]},31:{sizeFunc:h,glFormat:[37812,37844]},32:{sizeFunc:i,glFormat:[37813,37845]},33:{sizeFunc:l,glFormat:[37814,37846]},34:{sizeFunc:u,glFormat:[37815,37847]},35:{sizeFunc:f,glFormat:[37816,37848]},36:{sizeFunc:d,glFormat:[37817,37849]},37:{sizeFunc:p,glFormat:[37818,37850]},38:{sizeFunc:x,glFormat:[37819,37851]},39:{sizeFunc:y,glFormat:[37820,37852]},40:{sizeFunc:T,glFormat:[37821,37853]}},A=function(R){for(var M=new Uint32Array(R,0,13),L=M[0],I=L===55727696,O=I?M[2]:M[3],D=M[4],B=C[O].glFormat[D],V=C[O].sizeFunc,W=M[11],Y=M[7],X=M[6],U=52+M[12],z=new Uint8Array(R,U),G=new Array(W),b=0,H=Y,j=X,$=0;$<W;$++){var k=V(H,j);G[$]={data:new Uint8Array(z.buffer,z.byteOffset+b,k),width:H,height:j},H=Math.max(1,H>>1),j=Math.max(1,j>>1),b+=k}return{mipmaps:G,width:Y,height:X,internalFormat:B,compressed:!0,generateMipmap:!1}};c.exports=A},75549:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,n,r,e,s,h,i){var l=o(i,"frameWidth",null),u=o(i,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var f=a.source[n];a.add("__BASE",n,0,0,f.width,f.height);var d=o(i,"startFrame",0),p=o(i,"endFrame",-1),x=o(i,"margin",0),y=o(i,"spacing",0),T=Math.floor((s-x+y)/(l+y)),C=Math.floor((h-x+y)/(u+y)),A=T*C;A===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(d>A||d<-A)&&(d=0),d<0&&(d=A+d),(p===-1||p>A||p<d)&&(p=A);for(var R=x,M=x,L=0,I=0,O=0,D=0;D<A;D++){L=0,I=0;var B=R+l,V=M+u;B>s&&(L=B-s),V>h&&(I=V-h),D>=d&&D<=p&&(a.add(O,n,r+R,e+M,l-L,u-I),O++),R+=l+y,R+l>s&&(R=x,M+=u+y)}return a};c.exports=g},47534:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,n,r){var e=o(r,"frameWidth",null),s=o(r,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var h=a.source[0];a.add("__BASE",0,0,0,h.width,h.height),o(r,"startFrame",0),o(r,"endFrame",-1);for(var i=o(r,"margin",0),l=o(r,"spacing",0),u=n.cutX,f=n.cutY,d=n.cutWidth,p=n.cutHeight,x=n.realWidth,y=n.realHeight,T=Math.floor((x-i+l)/(e+l)),C=Math.floor((y-i+l)/(s+l)),A=n.x,R=e-A,M=e-(x-d-A),L=n.y,I=s-L,O=s-(y-p-L),D,B=i,V=i,W=0,Y=0,X=0;X<C;X++){for(var U=X===0,z=X===C-1,G=0;G<T;G++){var b=G===0,H=G===T-1;if(D=a.add(W,Y,u+B,f+V,e,s),b||U||H||z){var j=b?A:0,$=U?L:0,k=0,Q=0;b&&(k+=e-R),H&&(k+=e-M),U&&(Q+=s-I),z&&(Q+=s-O);var _=e-k,tt=s-Q;D.cutWidth=_,D.cutHeight=tt,D.setTrim(e,s,j,$,_,tt)}B+=l,b?B+=R:H?B+=M:B+=e,W++}B=i,V+=l,U?V+=I:z?V+=O:V+=s}return a};c.exports=g},86147:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=0,t=function(g,a,n,r){var e=S-r.y-r.height;g.add(n,a,r.x,e,r.width,r.height)},o=function(g,a,n){var r=g.source[a];g.add("__BASE",a,0,0,r.width,r.height),S=r.height;for(var e=n.split(`
`),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",i="",l={x:0,y:0,width:0,height:0},u=0;u<e.length;u++){var f=e[u].match(s);if(f){var d=f[1]==="- ",p=f[2],x=f[3];if(d&&(i!==h&&(t(g,a,i,l),h=i),l={x:0,y:0,width:0,height:0}),p==="name"){i=x;continue}switch(p){case"x":case"y":case"width":case"height":l[p]=parseInt(x,10);break}}}return i!==h&&t(g,a,i,l),g};c.exports=o},55222:(c,S,t)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(50030),g=function(h){for(var i=h.mipmaps,l=1;l<i.length;l++){var u=i[l].width,f=i[l].height;if(!o(u,f))return console.warn("Mip level "+l+" is not a power-of-two size: "+u+"x"+f),!1}var d=s[h.internalFormat];return d?d(h):(console.warn("No format checker found for internal format "+h.internalFormat+". Assuming valid."),!0)};function a(h){for(var i=h.mipmaps,l=0;l<i.length;l++){var u=i[l].width,f=i[l].height;if((u<<l)%4!==0||(f<<l)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+l+" is "+u+"x"+f),!1}return!0}function n(){return!0}function r(h){var i=h.mipmaps,l=i[0];return o(l.width,l.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+l.width+"x"+l.height),!1)}function e(h){var i=h.mipmaps,l=i[0];return l.width%4!==0||l.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+l.width+"x"+l.height+" pixels"),!1):!0}var s={37488:n,37489:n,37490:n,37491:n,37492:n,37493:n,37494:n,37495:n,37496:n,37497:n,36196:n,37808:n,37809:n,37810:n,37811:n,37812:n,37813:n,37814:n,37815:n,37816:n,37817:n,37818:n,37819:n,37820:n,37821:n,37840:n,37841:n,37842:n,37843:n,37844:n,37845:n,37846:n,37847:n,37848:n,37849:n,37850:n,37851:n,37852:n,37853:n,36492:a,36493:a,36494:a,36495:a,36283:a,36284:a,36285:a,36286:a,35840:r,35841:r,35842:r,35843:r,33776:a,33777:a,33778:a,33779:a,35916:e,35917:e,35918:e,35919:e};c.exports=g},61309:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AtlasXML:t(89905),Canvas:t(72893),Image:t(4832),JSONArray:t(78566),JSONHash:t(39711),KTXParser:t(31403),PVRParser:t(82038),SpriteSheet:t(75549),SpriteSheetFromAtlas:t(47534),UnityYAML:t(86147)}},80341:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n,r,e,s,h,i,l){(e===void 0||e<=0)&&(e=32),(s===void 0||s<=0)&&(s=32),h===void 0&&(h=0),i===void 0&&(i=0),this.name=n,this.firstgid=r|0,this.imageWidth=e|0,this.imageHeight=s|0,this.imageMargin=h|0,this.imageSpacing=i|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,n){return this.images.push({gid:a,image:n}),this.total++,this}});c.exports=g},27462:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(n){if(this.gids=[],n!==void 0)for(var r=0;r<n.length;++r)for(var e=n[r],s=0;s<e.total;++s)this.gids[e.firstgid+s]=e;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(a){this.gids=a?this._gids:void 0}},getTypeIncludingTile:function(a){if(a.type!==void 0&&a.type!=="")return a.type;if(!(!this.gids||a.gid===void 0)){var n=this.gids[a.gid];if(n){var r=n.getTileData(a.gid);if(r)return r.type}}},setTextureAndFrame:function(a,n,r,e){if(n===null&&this.gids&&e.gid!==void 0){var s=this.gids[e.gid];s&&(n===null&&s.image!==void 0&&(n=s.image.key),r===null&&(r=e.gid-s.firstgid),a.scene.textures.getFrame(n,r)||(n=null,r=null))}a.setTexture(n,r)},setPropertiesFromTiledObject:function(a,n){if(this.gids!==void 0&&n.gid!==void 0){var r=this.gids[n.gid];r!==void 0&&this.setFromJSON(a,r.getTileProperties(n.gid))}this.setFromJSON(a,n.properties)},setFromJSON:function(a,n){if(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++){var e=n[r];a[e.name]!==void 0?a[e.name]=e.value:a.setData(e.name,e.value)}return}for(var s in n)a[s]!==void 0?a[s]=n[s]:a.setData(s,n[s])}}});c.exports=g},31989:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(87010),a=t(46177),n=t(49075),r=function(e,s,h,i,l,u,f,d){h===void 0&&(h=32),i===void 0&&(i=32),l===void 0&&(l=10),u===void 0&&(u=10),d===void 0&&(d=!1);var p=null;if(Array.isArray(f)){var x=s!==void 0?s:"map";p=a(x,o.ARRAY_2D,f,h,i,d)}else if(s!==void 0){var y=e.cache.tilemap.get(s);y?p=a(s,y.format,y.data,h,i,d):console.warn("No map data found for key "+s)}return p===null&&(p=new g({tileWidth:h,tileHeight:i,width:l,height:u})),new n(e,p)};c.exports=r},23029:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(91907),n=t(62644),r=t(93232),e=new o({Mixins:[g.AlphaSingle,g.Flip,g.Visible],initialize:function(h,i,l,u,f,d,p,x){this.layer=h,this.index=i,this.x=l,this.y=u,this.width=f,this.height=d,this.right,this.bottom,this.baseWidth=p!==void 0?p:f,this.baseHeight=x!==void 0?x:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(s,h){return!(s<this.pixelX||h<this.pixelY||s>this.right||h>this.bottom)},copy:function(s){return this.index=s.index,this.alpha=s.alpha,this.properties=n(s.properties),this.visible=s.visible,this.setFlip(s.flipX,s.flipY),this.tint=s.tint,this.rotation=s.rotation,this.collideUp=s.collideUp,this.collideDown=s.collideDown,this.collideLeft=s.collideLeft,this.collideRight=s.collideRight,this.collisionCallback=s.collisionCallback,this.collisionCallbackContext=s.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(s){var h=this.tilemapLayer;if(h){var i=h.tileToWorldXY(this.x,this.y,void 0,s);return i.x}return this.x*this.baseWidth},getRight:function(s){var h=this.tilemapLayer;return h?this.getLeft(s)+this.width*h.scaleX:this.getLeft(s)+this.width},getTop:function(s){var h=this.tilemapLayer;if(h){var i=h.tileToWorldXY(this.x,this.y,void 0,s);return i.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(s){var h=this.tilemapLayer;return h?this.getTop(s)+this.height*h.scaleY:this.getTop(s)+this.height},getBounds:function(s,h){return h===void 0&&(h=new r),h.x=this.getLeft(s),h.y=this.getTop(s),h.width=this.getRight(s)-h.x,h.height=this.getBottom(s)-h.y,h},getCenterX:function(s){return(this.getLeft(s)+this.getRight(s))/2},getCenterY:function(s){return(this.getTop(s)+this.getBottom(s))/2},intersects:function(s,h,i,l){return!(i<=this.pixelX||l<=this.pixelY||s>=this.right||h>=this.bottom)},isInteresting:function(s,h){return s&&h?this.canCollide||this.hasInterestingFace:s?this.collides:h?this.hasInterestingFace:!1},resetCollision:function(s){if(s===void 0&&(s=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,s){var h=this.tilemapLayer;h&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(s,h,i,l,u){if(h===void 0&&(h=s),i===void 0&&(i=s),l===void 0&&(l=s),u===void 0&&(u=!0),this.collideLeft=s,this.collideRight=h,this.collideUp=i,this.collideDown=l,this.faceLeft=s,this.faceRight=h,this.faceTop=i,this.faceBottom=l,u){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(s,h){return s===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=s,this.collisionCallbackContext=h),this},setSize:function(s,h,i,l){return s!==void 0&&(this.width=s),h!==void 0&&(this.height=h),i!==void 0&&(this.baseWidth=i),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var s=this.layer.orientation;if(s===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(s===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(s===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(s===a.HEXAGONAL){var h=this.layer.staggerAxis,i=this.layer.staggerIndex,l=this.layer.hexSideLength,u,f;h==="y"?(f=(this.baseHeight-l)/2+l,i==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*f):h==="x"&&(u=(this.baseWidth-l)/2+l,this.pixelX=this.x*u,i==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var s=this.layer.tilemapLayer;if(s){var h=s.gidMap[this.index];if(h)return h}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var s=this.tilemapLayer;return s?s.tilemap:null}}});c.exports=e},49075:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84101),g=t(83419),a=t(39506),n=t(80341),r=t(95540),e=t(14977),s=t(27462),h=t(91907),i=t(36305),l=t(19133),u=t(68287),f=t(23029),d=t(81086),p=t(20442),x=t(33629),y=new g({initialize:function(C,A){this.scene=C,this.tileWidth=A.tileWidth,this.tileHeight=A.tileHeight,this.width=A.width,this.height=A.height,this.orientation=A.orientation,this.renderOrder=A.renderOrder,this.format=A.format,this.version=A.version,this.properties=A.properties,this.widthInPixels=A.widthInPixels,this.heightInPixels=A.heightInPixels,this.imageCollections=A.imageCollections,this.images=A.images,this.layers=A.layers,this.tiles=A.tiles,this.tilesets=A.tilesets,this.objects=A.objects,this.currentLayerIndex=0,this.hexSideLength=A.hexSideLength;var R=this.orientation;this._convert={WorldToTileXY:d.GetWorldToTileXYFunction(R),WorldToTileX:d.GetWorldToTileXFunction(R),WorldToTileY:d.GetWorldToTileYFunction(R),TileToWorldXY:d.GetTileToWorldXYFunction(R),TileToWorldX:d.GetTileToWorldXFunction(R),TileToWorldY:d.GetTileToWorldYFunction(R),GetTileCorners:d.GetTileCornersFunction(R)}},setRenderOrder:function(T){var C=["right-down","left-down","right-up","left-up"];return typeof T=="number"&&(T=C[T]),C.indexOf(T)>-1&&(this.renderOrder=T),this},addTilesetImage:function(T,C,A,R,M,L,I,O){if(T===void 0)return null;C==null&&(C=T);var D=this.scene.sys.textures;if(!D.exists(C))return console.warn('Texture key "%s" not found',C),null;var B=D.get(C),V=this.getTilesetIndex(T);if(V===null&&this.format===n.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',T,this.tilesets),null;var W=this.tilesets[V];return W?((A||R)&&W.setTileSize(A,R),(M||L)&&W.setSpacing(M,L),W.setImage(B),W):(A===void 0&&(A=this.tileWidth),R===void 0&&(R=this.tileHeight),M===void 0&&(M=0),L===void 0&&(L=0),I===void 0&&(I=0),O===void 0&&(O={x:0,y:0}),W=new x(T,I,A,R,M,L,void 0,void 0,O),W.setImage(B),this.tilesets.push(W),this.tiles=o(this),W)},copy:function(T,C,A,R,M,L,I,O){return O=this.getLayer(O),O!==null?(d.Copy(T,C,A,R,M,L,I,O),this):null},createBlankLayer:function(T,C,A,R,M,L,I,O){A===void 0&&(A=0),R===void 0&&(R=0),M===void 0&&(M=this.width),L===void 0&&(L=this.height),I===void 0&&(I=this.tileWidth),O===void 0&&(O=this.tileHeight);var D=this.getLayerIndex(T);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+T),null;for(var B=new e({name:T,tileWidth:I,tileHeight:O,width:M,height:L,orientation:this.orientation}),V,W=0;W<L;W++){V=[];for(var Y=0;Y<M;Y++)V.push(new f(B,-1,Y,W,I,O,this.tileWidth,this.tileHeight));B.data.push(V)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var X=new p(this.scene,this,this.currentLayerIndex,C,A,R);return X.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(X),X},createLayer:function(T,C,A,R){var M=this.getLayerIndex(T);if(M===null)return console.warn("Invalid Tilemap Layer ID: "+T),typeof T=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var L=this.layers[M];if(L.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+T),null;this.currentLayerIndex=M,A===void 0&&(A=L.x),R===void 0&&(R=L.y);var I=new p(this.scene,this,M,C,A,R);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(T,C,A){A===void 0&&(A=!0);var R=[],M=this.getObjectLayer(T);if(!M)return console.warn("createFromObjects: Invalid objectLayerName given: "+T),R;var L=new s(A?this.tilesets:void 0);Array.isArray(C)||(C=[C]);for(var I=M.objects,O=0;O<C.length;O++){var D=C[O],B=r(D,"id",null),V=r(D,"gid",null),W=r(D,"name",null),Y=r(D,"type",null);L.enabled=!r(D,"ignoreTileset",null);for(var X,U=[],z=0;z<I.length;z++)X=I[z],(B===null&&V===null&&W===null&&Y===null||B!==null&&X.id===B||V!==null&&X.gid===V||W!==null&&X.name===W||Y!==null&&L.getTypeIncludingTile(X)===Y)&&U.push(X);for(var G=r(D,"classType",u),b=r(D,"scene",this.scene),H=r(D,"container",null),j=r(D,"key",null),$=r(D,"frame",null),k=0;k<U.length;k++){X=U[k];var Q=new G(b);if(Q.setName(X.name),Q.setPosition(X.x,X.y),L.setTextureAndFrame(Q,j,$,X),X.width&&(Q.displayWidth=X.width),X.height&&(Q.displayHeight=X.height),this.orientation===h.ISOMETRIC){var _=this.tileWidth/this.tileHeight,tt={x:Q.x-Q.y,y:(Q.x+Q.y)/_};Q.x=tt.x,Q.y=tt.y}var et={x:Q.originX*X.width,y:(Q.originY-(X.gid?1:0))*X.height};if(X.rotation){var it=a(X.rotation);i(et,it),Q.rotation=it}Q.x+=et.x,Q.y+=et.y,(X.flippedHorizontal!==void 0||X.flippedVertical!==void 0)&&Q.setFlip(X.flippedHorizontal,X.flippedVertical),X.visible||(Q.visible=!1),L.setPropertiesFromTiledObject(Q,X),H?H.add(Q):b.add.existing(Q),R.push(Q)}}return R},createFromTiles:function(T,C,A,R,M,L){return L=this.getLayer(L),L===null?null:d.CreateFromTiles(T,C,A,R,M,L)},fill:function(T,C,A,R,M,L,I){return L===void 0&&(L=!0),I=this.getLayer(I),I===null?null:(d.Fill(T,C,A,R,M,L,I),this)},filterObjects:function(T,C,A){if(typeof T=="string"){var R=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+R),null}return T.objects.filter(C,A)},filterTiles:function(T,C,A,R,M,L,I,O){return O=this.getLayer(O),O===null?null:d.FilterTiles(T,C,A,R,M,L,I,O)},findByIndex:function(T,C,A,R){return R=this.getLayer(R),R===null?null:d.FindByIndex(T,C,A,R)},findObject:function(T,C,A){if(typeof T=="string"){var R=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+R),null}return T.objects.find(C,A)||null},findTile:function(T,C,A,R,M,L,I,O){return O=this.getLayer(O),O===null?null:d.FindTile(T,C,A,R,M,L,I,O)},forEachTile:function(T,C,A,R,M,L,I,O){return O=this.getLayer(O),O===null?null:(d.ForEachTile(T,C,A,R,M,L,I,O),this)},getImageIndex:function(T){return this.getIndex(this.images,T)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(T){return T.name})},getIndex:function(T,C){for(var A=0;A<T.length;A++)if(T[A].name===C)return A;return null},getLayer:function(T){var C=this.getLayerIndex(T);return C!==null?this.layers[C]:null},getObjectLayer:function(T){var C=this.getIndex(this.objects,T);return C!==null?this.objects[C]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(T){return T.name})},getLayerIndex:function(T){return T===void 0?this.currentLayerIndex:typeof T=="string"?this.getLayerIndexByName(T):typeof T=="number"&&T<this.layers.length?T:T instanceof p&&T.tilemap===this?T.layerIndex:null},getLayerIndexByName:function(T){return this.getIndex(this.layers,T)},getTileAt:function(T,C,A,R){return R=this.getLayer(R),R===null?null:d.GetTileAt(T,C,A,R)},getTileAtWorldXY:function(T,C,A,R,M){return M=this.getLayer(M),M===null?null:d.GetTileAtWorldXY(T,C,A,R,M)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(T){return T.name})},getTilesWithin:function(T,C,A,R,M,L){return L=this.getLayer(L),L===null?null:d.GetTilesWithin(T,C,A,R,M,L)},getTilesWithinShape:function(T,C,A,R){return R=this.getLayer(R),R===null?null:d.GetTilesWithinShape(T,C,A,R)},getTilesWithinWorldXY:function(T,C,A,R,M,L,I){return I=this.getLayer(I),I===null?null:d.GetTilesWithinWorldXY(T,C,A,R,M,L,I)},getTileset:function(T){var C=this.getIndex(this.tilesets,T);return C!==null?this.tilesets[C]:null},getTilesetIndex:function(T){return this.getIndex(this.tilesets,T)},hasTileAt:function(T,C,A){return A=this.getLayer(A),A===null?null:d.HasTileAt(T,C,A)},hasTileAtWorldXY:function(T,C,A,R){return R=this.getLayer(R),R===null?null:d.HasTileAtWorldXY(T,C,A,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(T){this.setLayer(T)}},putTileAt:function(T,C,A,R,M){return R===void 0&&(R=!0),M=this.getLayer(M),M===null?null:d.PutTileAt(T,C,A,R,M)},putTileAtWorldXY:function(T,C,A,R,M,L){return R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:d.PutTileAtWorldXY(T,C,A,R,M,L)},putTilesAt:function(T,C,A,R,M){return R===void 0&&(R=!0),M=this.getLayer(M),M===null?null:(d.PutTilesAt(T,C,A,R,M),this)},randomize:function(T,C,A,R,M,L){return L=this.getLayer(L),L===null?null:(d.Randomize(T,C,A,R,M,L),this)},calculateFacesAt:function(T,C,A){return A=this.getLayer(A),A===null?null:(d.CalculateFacesAt(T,C,A),this)},calculateFacesWithin:function(T,C,A,R,M){return M=this.getLayer(M),M===null?null:(d.CalculateFacesWithin(T,C,A,R,M),this)},removeLayer:function(T){var C=this.getLayerIndex(T);if(C!==null){l(this.layers,C);for(var A=C;A<this.layers.length;A++)this.layers[A].tilemapLayer&&this.layers[A].tilemapLayer.layerIndex--;return this.currentLayerIndex===C&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(T){var C=this.getLayerIndex(T);return C!==null?(T=this.layers[C],T.tilemapLayer.destroy(),l(this.layers,C),this.currentLayerIndex===C&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var T=this.layers,C=0;C<T.length;C++)T[C].tilemapLayer&&T[C].tilemapLayer.destroy(!1);return T.length=0,this.currentLayerIndex=0,this},removeTile:function(T,C,A){C===void 0&&(C=-1),A===void 0&&(A=!0);var R=[];Array.isArray(T)||(T=[T]);for(var M=0;M<T.length;M++){var L=T[M];R.push(this.removeTileAt(L.x,L.y,!0,A,L.tilemapLayer)),C>-1&&this.putTileAt(C,L.x,L.y,A,L.tilemapLayer)}return R},removeTileAt:function(T,C,A,R,M){return A===void 0&&(A=!0),R===void 0&&(R=!0),M=this.getLayer(M),M===null?null:d.RemoveTileAt(T,C,A,R,M)},removeTileAtWorldXY:function(T,C,A,R,M,L){return A===void 0&&(A=!0),R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:d.RemoveTileAtWorldXY(T,C,A,R,M,L)},renderDebug:function(T,C,A){return A=this.getLayer(A),A===null?null:(this.orientation===h.ORTHOGONAL&&d.RenderDebug(T,C,A),this)},renderDebugFull:function(T,C){for(var A=this.layers,R=0;R<A.length;R++)d.RenderDebug(T,C,A[R]);return this},replaceByIndex:function(T,C,A,R,M,L,I){return I=this.getLayer(I),I===null?null:(d.ReplaceByIndex(T,C,A,R,M,L,I),this)},setCollision:function(T,C,A,R,M){return C===void 0&&(C=!0),A===void 0&&(A=!0),M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(d.SetCollision(T,C,A,R,M),this)},setCollisionBetween:function(T,C,A,R,M){return A===void 0&&(A=!0),R===void 0&&(R=!0),M=this.getLayer(M),M===null?null:(d.SetCollisionBetween(T,C,A,R,M),this)},setCollisionByProperty:function(T,C,A,R){return C===void 0&&(C=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(d.SetCollisionByProperty(T,C,A,R),this)},setCollisionByExclusion:function(T,C,A,R){return C===void 0&&(C=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(d.SetCollisionByExclusion(T,C,A,R),this)},setCollisionFromCollisionGroup:function(T,C,A){return T===void 0&&(T=!0),C===void 0&&(C=!0),A=this.getLayer(A),A===null?null:(d.SetCollisionFromCollisionGroup(T,C,A),this)},setTileIndexCallback:function(T,C,A,R){return R=this.getLayer(R),R===null?null:(d.SetTileIndexCallback(T,C,A,R),this)},setTileLocationCallback:function(T,C,A,R,M,L,I){return I=this.getLayer(I),I===null?null:(d.SetTileLocationCallback(T,C,A,R,M,L,I),this)},setLayer:function(T){var C=this.getLayerIndex(T);return C!==null&&(this.currentLayerIndex=C),this},setBaseTileSize:function(T,C){this.tileWidth=T,this.tileHeight=C,this.widthInPixels=this.width*T,this.heightInPixels=this.height*C;for(var A=0;A<this.layers.length;A++){this.layers[A].baseTileWidth=T,this.layers[A].baseTileHeight=C;for(var R=this.layers[A].data,M=this.layers[A].width,L=this.layers[A].height,I=0;I<L;I++)for(var O=0;O<M;O++){var D=R[I][O];D!==null&&D.setSize(void 0,void 0,T,C)}}return this},setLayerTileSize:function(T,C,A){if(A=this.getLayer(A),A===null)return this;A.tileWidth=T,A.tileHeight=C;for(var R=A.data,M=A.width,L=A.height,I=0;I<L;I++)for(var O=0;O<M;O++){var D=R[I][O];D!==null&&D.setSize(T,C)}return this},shuffle:function(T,C,A,R,M){return M=this.getLayer(M),M===null?null:(d.Shuffle(T,C,A,R,M),this)},swapByIndex:function(T,C,A,R,M,L,I){return I=this.getLayer(I),I===null?null:(d.SwapByIndex(T,C,A,R,M,L,I),this)},tileToWorldX:function(T,C,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldX(T,C,A)},tileToWorldY:function(T,C,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldY(T,C,A)},tileToWorldXY:function(T,C,A,R,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldXY(T,C,A,R,M)},getTileCorners:function(T,C,A,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(T,C,A,R)},weightedRandomize:function(T,C,A,R,M,L){return L=this.getLayer(L),L===null?null:(d.WeightedRandomize(C,A,R,M,T,L),this)},worldToTileX:function(T,C,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(T,C,A,R)},worldToTileY:function(T,C,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(T,C,A,R)},worldToTileXY:function(T,C,A,R,M,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileXY(T,C,A,R,M,L)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});c.exports=y},45939:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(31989);o.register("tilemap",function(a){var n=a!==void 0?a:{};return g(this.scene,n.key,n.tileWidth,n.tileHeight,n.width,n.height,n.data,n.insertNull)})},46029:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(31989);o.register("tilemap",function(a,n,r,e,s,h,i){return a===null&&(a=void 0),n===null&&(n=void 0),r===null&&(r=void 0),e===null&&(e=void 0),s===null&&(s=void 0),g(this.scene,a,n,r,e,s,h,i)})},20442:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(78389),a=t(31401),n=t(95643),r=t(81086),e=t(19218),s=t(26099),h=new o({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,g,e],initialize:function(l,u,f,d,p,x){n.call(this,l,"TilemapLayer"),this.isTilemap=!0,this.tilemap=u,this.layerIndex=f,this.layer=u.layers[f],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=r.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new s,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(d),this.setAlpha(this.layer.alpha),this.setPosition(p,x),this.setOrigin(0,0),this.setSize(u.tileWidth*this.layer.width,u.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(i){var l=[],u=[],f=this.tilemap;Array.isArray(i)||(i=[i]);for(var d=0;d<i.length;d++){var p=i[d];if(typeof p=="string"&&(p=f.getTileset(p)),p){u.push(p);for(var x=p.firstgid,y=0;y<p.total;y++)l[x+y]=p}}this.gidMap=l,this.tileset=u},setRenderOrder:function(i){var l=["right-down","left-down","right-up","left-up"];return typeof i=="string"&&(i=l.indexOf(i)),i>=0&&i<4&&(this._renderOrder=i),this},calculateFacesAt:function(i,l){return r.CalculateFacesAt(i,l,this.layer),this},calculateFacesWithin:function(i,l,u,f){return r.CalculateFacesWithin(i,l,u,f,this.layer),this},createFromTiles:function(i,l,u,f,d){return r.CreateFromTiles(i,l,u,f,d,this.layer)},cull:function(i){return this.cullCallback(this.layer,i,this.culledTiles,this._renderOrder)},copy:function(i,l,u,f,d,p,x){return r.Copy(i,l,u,f,d,p,x,this.layer),this},fill:function(i,l,u,f,d,p){return r.Fill(i,l,u,f,d,p,this.layer),this},filterTiles:function(i,l,u,f,d,p,x){return r.FilterTiles(i,l,u,f,d,p,x,this.layer)},findByIndex:function(i,l,u){return r.FindByIndex(i,l,u,this.layer)},findTile:function(i,l,u,f,d,p,x){return r.FindTile(i,l,u,f,d,p,x,this.layer)},forEachTile:function(i,l,u,f,d,p,x){return r.ForEachTile(i,l,u,f,d,p,x,this.layer),this},setTint:function(i,l,u,f,d,p){i===void 0&&(i=16777215);var x=function(y){y.tint=i,y.tintFill=!1};return this.forEachTile(x,this,l,u,f,d,p)},setTintFill:function(i,l,u,f,d,p){i===void 0&&(i=16777215);var x=function(y){y.tint=i,y.tintFill=!0};return this.forEachTile(x,this,l,u,f,d,p)},getTileAt:function(i,l,u){return r.GetTileAt(i,l,u,this.layer)},getTileAtWorldXY:function(i,l,u,f){return r.GetTileAtWorldXY(i,l,u,f,this.layer)},getIsoTileAtWorldXY:function(i,l,u,f,d){u===void 0&&(u=!0);var p=this.tempVec;return r.IsometricWorldToTileXY(i,l,!0,p,d,this.layer,u),this.getTileAt(p.x,p.y,f)},getTilesWithin:function(i,l,u,f,d){return r.GetTilesWithin(i,l,u,f,d,this.layer)},getTilesWithinShape:function(i,l,u){return r.GetTilesWithinShape(i,l,u,this.layer)},getTilesWithinWorldXY:function(i,l,u,f,d,p){return r.GetTilesWithinWorldXY(i,l,u,f,d,p,this.layer)},hasTileAt:function(i,l){return r.HasTileAt(i,l,this.layer)},hasTileAtWorldXY:function(i,l,u){return r.HasTileAtWorldXY(i,l,u,this.layer)},putTileAt:function(i,l,u,f){return r.PutTileAt(i,l,u,f,this.layer)},putTileAtWorldXY:function(i,l,u,f,d){return r.PutTileAtWorldXY(i,l,u,f,d,this.layer)},putTilesAt:function(i,l,u,f){return r.PutTilesAt(i,l,u,f,this.layer),this},randomize:function(i,l,u,f,d){return r.Randomize(i,l,u,f,d,this.layer),this},removeTileAt:function(i,l,u,f){return r.RemoveTileAt(i,l,u,f,this.layer)},removeTileAtWorldXY:function(i,l,u,f,d){return r.RemoveTileAtWorldXY(i,l,u,f,d,this.layer)},renderDebug:function(i,l){return r.RenderDebug(i,l,this.layer),this},replaceByIndex:function(i,l,u,f,d,p){return r.ReplaceByIndex(i,l,u,f,d,p,this.layer),this},setSkipCull:function(i){return i===void 0&&(i=!0),this.skipCull=i,this},setCullPadding:function(i,l){return i===void 0&&(i=1),l===void 0&&(l=1),this.cullPaddingX=i,this.cullPaddingY=l,this},setCollision:function(i,l,u,f){return r.SetCollision(i,l,u,this.layer,f),this},setCollisionBetween:function(i,l,u,f){return r.SetCollisionBetween(i,l,u,f,this.layer),this},setCollisionByProperty:function(i,l,u){return r.SetCollisionByProperty(i,l,u,this.layer),this},setCollisionByExclusion:function(i,l,u){return r.SetCollisionByExclusion(i,l,u,this.layer),this},setCollisionFromCollisionGroup:function(i,l){return r.SetCollisionFromCollisionGroup(i,l,this.layer),this},setTileIndexCallback:function(i,l,u){return r.SetTileIndexCallback(i,l,u,this.layer),this},setTileLocationCallback:function(i,l,u,f,d,p){return r.SetTileLocationCallback(i,l,u,f,d,p,this.layer),this},shuffle:function(i,l,u,f){return r.Shuffle(i,l,u,f,this.layer),this},swapByIndex:function(i,l,u,f,d,p){return r.SwapByIndex(i,l,u,f,d,p,this.layer),this},tileToWorldX:function(i,l){return this.tilemap.tileToWorldX(i,l,this)},tileToWorldY:function(i,l){return this.tilemap.tileToWorldY(i,l,this)},tileToWorldXY:function(i,l,u,f){return this.tilemap.tileToWorldXY(i,l,u,f,this)},getTileCorners:function(i,l,u){return this.tilemap.getTileCorners(i,l,u,this)},weightedRandomize:function(i,l,u,f,d){return r.WeightedRandomize(l,u,f,d,i,this.layer),this},worldToTileX:function(i,l,u){return this.tilemap.worldToTileX(i,l,u,this)},worldToTileY:function(i,l,u){return this.tilemap.worldToTileY(i,l,u,this)},worldToTileXY:function(i,l,u,f,d){return this.tilemap.worldToTileXY(i,l,u,f,d,this)},destroy:function(i){i===void 0&&(i=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),i&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});c.exports=h},16153:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=new o,a=new o,n=new o,r=function(e,s,h,i){var l=s.cull(h),u=l.length,f=h.alpha*s.alpha;if(!(u===0||f<=0)){var d=g,p=a,x=n;p.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),d.copyFrom(h.matrix);var y=e.currentContext,T=s.gidMap;y.save(),i?(d.multiplyWithOffset(i,-h.scrollX*s.scrollFactorX,-h.scrollY*s.scrollFactorY),p.e=s.x,p.f=s.y,d.multiply(p,x),x.copyToContext(y)):(p.e-=h.scrollX*s.scrollFactorX,p.f-=h.scrollY*s.scrollFactorY,p.copyToContext(y)),(!e.antialias||s.scaleX>1||s.scaleY>1)&&(y.imageSmoothingEnabled=!1);for(var C=0;C<u;C++){var A=l[C],R=T[A.index];if(R){var M=R.image.getSourceImage(),L=R.getTileTextureCoordinates(A.index),I=R.tileWidth,O=R.tileHeight;if(!(L===null||I===0||O===0)){var D=I*.5,B=O*.5;L.x+=R.tileOffset.x,L.y+=R.tileOffset.y,y.save(),y.translate(A.pixelX+D,A.pixelY+B),A.rotation!==0&&y.rotate(A.rotation),(A.flipX||A.flipY)&&y.scale(A.flipX?-1:1,A.flipY?-1:1),y.globalAlpha=f*A.alpha,y.drawImage(M,L.x,L.y,I,O,-D,-B,I,O),y.restore()}}}y.restore()}};c.exports=r},19218:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99558),a=t(16153),c.exports={renderWebGL:g,renderCanvas:a}},99558:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,n,r){var e=n.cull(r),s=e.length,h=r.alpha*n.alpha;if(!(s===0||h<=0)){var i=n.gidMap,l=a.pipelines.set(n.pipeline,n),u=o.getTintAppendFloatAlpha,f=n.scrollFactorX,d=n.scrollFactorY,p=n.x,x=n.y,y=n.scaleX,T=n.scaleY;a.pipelines.preBatch(n);for(var C=0;C<s;C++){var A=e[C],R=i[A.index];if(R){var M=R.getTileTextureCoordinates(A.index),L=R.tileWidth,I=R.tileHeight;if(!(!M||L===0||I===0)){var O=L*.5,D=I*.5,B=R.glTexture,V=l.setTexture2D(B,n),W=L,Y=I,X=M.x,U=M.y,z=R.tileOffset.x,G=R.tileOffset.y,b=u(A.tint,h*A.alpha);l.batchTexture(n,B,B.width,B.height,p+A.pixelX*y+(O*y-z),x+A.pixelY*T+(D*T-G),L,I,y,T,A.rotation,A.flipX,A.flipY,f,d,O,D,X,U,W,Y,b,b,b,b,A.tintFill,0,0,r,null,!0,V,!0)}}}a.pipelines.postBatch(n)}};c.exports=g},33629:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(r,e,s,h,i,l,u,f,d){(s===void 0||s<=0)&&(s=32),(h===void 0||h<=0)&&(h=32),i===void 0&&(i=0),l===void 0&&(l=0),u===void 0&&(u={}),f===void 0&&(f={}),this.name=r,this.firstgid=e,this.tileWidth=s,this.tileHeight=h,this.tileMargin=i,this.tileSpacing=l,this.tileProperties=u,this.tileData=f,this.tileOffset=new g,d!==void 0&&this.tileOffset.set(d.x,d.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var r=this.getTileData(n);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){this.image=n;var r=n.get(),e=n.getFrameBounds();return this.glTexture=r.source.glTexture,r.width>e.width||r.height>e.height?this.updateTileData(r.width,r.height):this.updateTileData(e.width,e.height,e.x,e.y),this},setTileSize:function(n,r){return n!==void 0&&(this.tileWidth=n),r!==void 0&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,r){return n!==void 0&&(this.tileMargin=n),r!==void 0&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,r,e,s){e===void 0&&(e=0),s===void 0&&(s=0);var h=(r-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(h%1!==0||i%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),h=Math.floor(h),i=Math.floor(i),this.rows=h,this.columns=i,this.total=h*i,this.texCoordinates.length=0;for(var l=this.tileMargin+e,u=this.tileMargin+s,f=0;f<this.rows;f++){for(var d=0;d<this.columns;d++)this.texCoordinates.push({x:l,y:u}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin+e,u+=this.tileHeight+this.tileSpacing}return this}});c.exports=a},72023:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=function(a,n,r){var e=o(a,n,!0,r),s=o(a,n-1,!0,r),h=o(a,n+1,!0,r),i=o(a-1,n,!0,r),l=o(a+1,n,!0,r),u=e&&e.collides;return u&&(e.faceTop=!0,e.faceBottom=!0,e.faceLeft=!0,e.faceRight=!0),s&&s.collides&&(u&&(e.faceTop=!1),s.faceBottom=!u),h&&h.collides&&(u&&(e.faceBottom=!1),h.faceTop=!u),i&&i.collides&&(u&&(e.faceLeft=!1),i.faceRight=!u),l&&l.collides&&(u&&(e.faceRight=!1),l.faceLeft=!u),e&&!e.collides&&e.resetFaces(),e};c.exports=g},42573:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=t(7386),a=function(n,r,e,s,h){for(var i=null,l=null,u=null,f=null,d=g(n,r,e,s,null,h),p=0;p<d.length;p++){var x=d[p];x&&(x.collides?(i=o(x.x,x.y-1,!0,h),l=o(x.x,x.y+1,!0,h),u=o(x.x-1,x.y,!0,h),f=o(x.x+1,x.y,!0,h),x.faceTop=!(i&&i.collides),x.faceBottom=!(l&&l.collides),x.faceLeft=!(u&&u.collides),x.faceRight=!(f&&f.collides)):x.resetFaces())}};c.exports=a},33528:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=new o,a=function(n,r,e,s){var h=e.tilemapLayer,i=h.cullPaddingX,l=h.cullPaddingY,u=h.tilemap.tileToWorldXY(n,r,g,s,h);return u.x>s.worldView.x+h.scaleX*e.tileWidth*(-i-.5)&&u.x<s.worldView.right+h.scaleX*e.tileWidth*(i-.5)&&u.y>s.worldView.y+h.scaleY*e.tileHeight*(-l-1)&&u.y<s.worldView.bottom+h.scaleY*e.tileHeight*(l-.5)};c.exports=a},1785:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42573),g=t(7386),a=t(62991),n=t(23029),r=function(e,s,h,i,l,u,f,d){f===void 0&&(f=!0);var p=g(e,s,h,i,null,d),x=[];p.forEach(function(L){var I=new n(L.layer,L.index,L.x,L.y,L.width,L.height,L.baseWidth,L.baseHeight);I.copy(L),x.push(I)});for(var y=l-e,T=u-s,C=0;C<x.length;C++){var A=x[C],R=A.x+y,M=A.y+T;a(R,M,d)&&d.data[M][R]&&(A.x=R,A.y=M,A.updatePixelXY(),d.data[M][R]=A)}f&&o(l-1,u-1,h+2,i+2,d),p.length=0,x.length=0};c.exports=r},78419:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g=t(7386),a=t(27987),n=function(r,e,s,h,i,l){s||(s={}),Array.isArray(r)||(r=[r]);var u=l.tilemapLayer;h||(h=u.scene),i||(i=h.cameras.main);var f=l.width,d=l.height,p=g(0,0,f,d,null,l),x=[],y,T=function(M,L,I){for(var O=0;O<I.length;O++){var D=I[O];M.hasOwnProperty(D)||(M[D]=L[D])}};for(y=0;y<p.length;y++){var C=p[y],A=o(s);if(r.indexOf(C.index)!==-1){var R=u.tileToWorldXY(C.x,C.y,void 0,i,l);A.x=R.x,A.y=R.y,T(A,C,["rotation","flipX","flipY","alpha","visible","tint"]),A.hasOwnProperty("origin")||(A.x+=C.width*.5,A.y+=C.height*.5),A.hasOwnProperty("useSpriteSheet")&&(A.key=C.tileset.image,A.frame=C.index-1),x.push(h.make.sprite(A))}}if(Array.isArray(e))for(y=0;y<r.length;y++)a(r[y],e[y],0,0,f,d,l);else if(e!==null)for(y=0;y<r.length;y++)a(r[y],e,0,0,f,d,l);return x};c.exports=n},19545:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(63448),a=t(56583),n=new o,r=function(e,s){var h=e.tilemapLayer.tilemap,i=e.tilemapLayer,l=Math.floor(h.tileWidth*i.scaleX),u=Math.floor(h.tileHeight*i.scaleY),f=a(s.worldView.x-i.x,l,0,!0)-i.cullPaddingX,d=g(s.worldView.right-i.x,l,0,!0)+i.cullPaddingX,p=a(s.worldView.y-i.y,u,0,!0)-i.cullPaddingY,x=g(s.worldView.bottom-i.y,u,0,!0)+i.cullPaddingY;return n.setTo(f,p,d-f,x-p)};c.exports=r},30003:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19545),g=t(32483),a=function(n,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var h=n.tilemapLayer,i=o(n,r);return(h.skipCull||h.scrollFactorX!==1||h.scrollFactorY!==1)&&(i.left=0,i.right=n.width,i.top=0,i.bottom=n.height),g(n,i,s,e),e};c.exports=a},35137:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(42573),a=t(20576),n=function(r,e,s,h,i,l,u){for(var f=u.collideIndexes.indexOf(r)!==-1,d=o(e,s,h,i,null,u),p=0;p<d.length;p++)d[p].index=r,a(d[p],f);l&&g(e-1,s-1,h+2,i+2,u)};c.exports=n},40253:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i,l){var u=o(r,e,s,h,i,l);return u.filter(a,n)};c.exports=g},52692:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o===void 0&&(o=0),g===void 0&&(g=!1);var n=0,r,e,s;if(g){for(e=a.height-1;e>=0;e--)for(r=a.width-1;r>=0;r--)if(s=a.data[e][r],s&&s.index===t){if(n===o)return s;n+=1}}else for(e=0;e<a.height;e++)for(r=0;r<a.width;r++)if(s=a.data[e][r],s&&s.index===t){if(n===o)return s;n+=1}return null};c.exports=S},66151:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i,l){var u=o(r,e,s,h,i,l);return u.find(a,n)||null};c.exports=g},97560:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i,l){var u=o(r,e,s,h,i,l);u.forEach(a,n)};c.exports=g},43305:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(30003),a=t(9474),n=t(14018),r=t(29747),e=t(54503),s=function(h){return h===o.ORTHOGONAL?g:h===o.HEXAGONAL?a:h===o.STAGGERED?e:h===o.ISOMETRIC?n:r};c.exports=s},7423:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62991),g=function(a,n,r,e){if(o(a,n,e)){var s=e.data[n][a]||null;return s?s.index===-1?r?s:null:s:null}else return null};c.exports=g},60540:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=t(26099),a=new g,n=function(r,e,s,h,i){return i.tilemapLayer.worldToTileXY(r,e,!0,a,h),o(a.x,a.y,s,i)};c.exports=n},55826:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e){var s=e.baseTileWidth,h=e.baseTileHeight,i=e.tilemapLayer,l=0,u=0;i&&(r||(r=i.scene.cameras.main),l=i.x+r.scrollX*(1-i.scrollFactorX),u=i.y+r.scrollY*(1-i.scrollFactorY),s*=i.scaleX,h*=i.scaleY);var f=l+a*s,d=u+n*h;return[new o(f,d),new o(f+s,d),new o(f+s,d+h),new o(f,d+h)]};c.exports=g},11758:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(27229),a=t(29747),n=t(55826),r=function(e){return e===o.ORTHOGONAL?n:e===o.ISOMETRIC?a:e===o.HEXAGONAL?g:(e===o.STAGGERED,a)};c.exports=r},39167:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(29747),a=t(97281),n=function(r){return r===o.ORTHOGONAL?a:g};c.exports=n},62e3:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(19951),a=t(14127),n=t(29747),r=t(97202),e=t(70326),s=function(h){return h===o.ORTHOGONAL?e:h===o.ISOMETRIC?a:h===o.HEXAGONAL?g:h===o.STAGGERED?r:n};c.exports=s},5984:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(29747),a=t(28054),n=t(29650),r=function(e){return e===o.ORTHOGONAL?n:e===o.STAGGERED?a:g};c.exports=r},7386:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,n,r,e,s,h){a===void 0&&(a=0),n===void 0&&(n=0),r===void 0&&(r=h.width),e===void 0&&(e=h.height),s||(s={});var i=o(s,"isNotEmpty",!1),l=o(s,"isColliding",!1),u=o(s,"hasInterestingFace",!1);a<0&&(r+=a,a=0),n<0&&(e+=n,n=0),a+r>h.width&&(r=Math.max(h.width-a,0)),n+e>h.height&&(e=Math.max(h.height-n,0));for(var f=[],d=n;d<n+e;d++)for(var p=a;p<a+r;p++){var x=h.data[d][p];if(x!==null){if(i&&x.index===-1||l&&!x.collides||u&&!x.hasInterestingFace)continue;f.push(x)}}return f};c.exports=g},91141:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55738),g=t(7386),a=t(91865),n=t(29747),r=t(26099),e=function(u,f){return a.RectangleToTriangle(f,u)},s=new r,h=new r,i=new r,l=function(u,f,d,p){if(u===void 0)return[];var x=n;u instanceof o.Circle?x=a.CircleToRectangle:u instanceof o.Rectangle?x=a.RectangleToRectangle:u instanceof o.Triangle?x=e:u instanceof o.Line&&(x=a.LineToRectangle),p.tilemapLayer.worldToTileXY(u.left,u.top,!0,h,d);var y=h.x,T=h.y;p.tilemapLayer.worldToTileXY(u.right,u.bottom,!1,i,d);var C=Math.ceil(i.x),A=Math.ceil(i.y),R=Math.max(C-y,1),M=Math.max(A-T,1),L=g(y,T,R,M,f,p),I=p.tileWidth,O=p.tileHeight;p.tilemapLayer&&(I*=p.tilemapLayer.scaleX,O*=p.tilemapLayer.scaleY);for(var D=[],B=new o.Rectangle(0,0,I,O),V=0;V<L.length;V++){var W=L[V];p.tilemapLayer.tileToWorldXY(W.x,W.y,s,d),B.x=s.x,B.y=s.y,x(u,B)&&D.push(W)}return D};c.exports=l},96523:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(26099),a=new g,n=new g,r=function(e,s,h,i,l,u,f){var d=f.tilemapLayer.tilemap._convert.WorldToTileXY;d(e,s,!0,a,u,f);var p=a.x,x=a.y;d(e+h,s+i,!1,n,u,f);var y=Math.ceil(n.x),T=Math.ceil(n.y);return o(p,x,y-p,T-x,l,f)};c.exports=r},96113:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(20242),a=t(10095),n=function(r){return r===o.ORTHOGONAL?a:g};c.exports=n},16926:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(86625),a=t(96897),n=t(29747),r=t(15108),e=t(85896),s=function(h){return h===o.ORTHOGONAL?e:h===o.ISOMETRIC?a:h===o.HEXAGONAL?g:h===o.STAGGERED?r:n};c.exports=s},55762:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(20242),a=t(51900),n=t(63288),r=function(e){return e===o.ORTHOGONAL?n:e===o.STAGGERED?a:g};c.exports=r},45091:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62991),g=function(a,n,r){if(o(a,n,r)){var e=r.data[n][a];return e!==null&&e.index>-1}else return!1};c.exports=g},24152:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45091),g=t(26099),a=new g,n=function(r,e,s,h){h.tilemapLayer.worldToTileXY(r,e,!0,a,s);var i=a.x,l=a.y;return o(i,l,h)};c.exports=n},90454:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63448),g=t(56583),a=function(n,r){var e=n.tilemapLayer.tilemap,s=n.tilemapLayer,h=Math.floor(e.tileWidth*s.scaleX),i=Math.floor(e.tileHeight*s.scaleY),l=n.hexSideLength,u,f,d,p;if(n.staggerAxis==="y"){var x=(i-l)/2+l;u=g(r.worldView.x-s.x,h,0,!0)-s.cullPaddingX,f=o(r.worldView.right-s.x,h,0,!0)+s.cullPaddingX,d=g(r.worldView.y-s.y,x,0,!0)-s.cullPaddingY,p=o(r.worldView.bottom-s.y,x,0,!0)+s.cullPaddingY}else{var y=(h-l)/2+l;u=g(r.worldView.x-s.x,y,0,!0)-s.cullPaddingX,f=o(r.worldView.right-s.x,y,0,!0)+s.cullPaddingX,d=g(r.worldView.y-s.y,i,0,!0)-s.cullPaddingY,p=o(r.worldView.bottom-s.y,i,0,!0)+s.cullPaddingY}return{left:u,right:f,top:d,bottom:p}};c.exports=a},9474:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90454),g=t(32483),a=function(n,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var h=n.tilemapLayer,i=o(n,r);return h.skipCull&&h.scrollFactorX===1&&h.scrollFactorY===1&&(i.left=0,i.right=n.width,i.top=0,i.bottom=n.height),g(n,i,s,e),e};c.exports=a},27229:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19951),g=t(26099),a=new g,n=function(r,e,s,h){var i=h.baseTileWidth,l=h.baseTileHeight,u=h.tilemapLayer;u&&(i*=u.scaleX,l*=u.scaleY);var f=o(r,e,a,s,h),d=[],p=.5773502691896257,x,y;h.staggerAxis==="y"?(x=p*i,y=l/2):(x=i/2,y=p*l);for(var T=0;T<6;T++){var C=2*Math.PI*(.5-T)/6;d.push(new g(f.x+x*Math.cos(C),f.y+y*Math.sin(C)))}return d};c.exports=n},19951:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s){r||(r=new o);var h=s.baseTileWidth,i=s.baseTileHeight,l=s.tilemapLayer,u=0,f=0;l&&(e||(e=l.scene.cameras.main),u=l.x+e.scrollX*(1-l.scrollFactorX),f=l.y+e.scrollY*(1-l.scrollFactorY),h*=l.scaleX,i*=l.scaleY);var d=h/2,p=i/2,x,y,T=s.staggerAxis,C=s.staggerIndex;return T==="y"?(x=u+h*a+h,y=f+1.5*n*p+p,n%2===0&&(C==="odd"?x-=d:x+=d)):T==="x"&&C==="odd"&&(x=u+1.5*a*d+d,y=f+i*a+i,a%2===0&&(C==="odd"?y-=p:y+=p)),r.set(x,y)};c.exports=g},86625:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s,h){e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,u=h.tilemapLayer;u&&(s||(s=u.scene.cameras.main),a=a-(u.x+s.scrollX*(1-u.scrollFactorX)),n=n-(u.y+s.scrollY*(1-u.scrollFactorY)),i*=u.scaleX,l*=u.scaleY);var f=.5773502691896257,d=-.3333333333333333,p=0,x=.6666666666666666,y=i/2,T=l/2,C,A,R,M,L;h.staggerAxis==="y"?(C=(a-y)/(f*i),A=(n-T)/T,R=f*C+d*A,M=p*C+x*A):(C=(a-y)/y,A=(n-T)/(f*l),R=d*C+f*A,M=x*C+p*A),L=-R-M;var I=Math.round(R),O=Math.round(M),D=Math.round(L),B=Math.abs(I-R),V=Math.abs(O-M),W=Math.abs(D-L);B>V&&B>W?I=-O-D:V>W&&(O=-I-D);var Y,X=O;return h.staggerIndex==="odd"?Y=X%2===0?O/2+I:O/2+I-.5:Y=X%2===0?O/2+I:O/2+I+.5,e.set(Y,X)};c.exports=g},62991:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t>=0&&t<g.width&&o>=0&&o<g.height};c.exports=S},14018:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33528),g=function(a,n,r,e){r===void 0&&(r=[]),e===void 0&&(e=0),r.length=0;var s=a.tilemapLayer,h=a.data,i=a.width,l=a.height,u=s.skipCull,f=0,d=i,p=0,x=l,y,T,C;if(e===0)for(T=p;T<x;T++)for(y=f;y<d;y++)C=h[T][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&(!u&&!o(y,T,a,n)||r.push(C));else if(e===1)for(T=p;T<x;T++)for(y=d;y>=f;y--)C=h[T][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&(!u&&!o(y,T,a,n)||r.push(C));else if(e===2)for(T=x;T>=p;T--)for(y=f;y<d;y++)C=h[T][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&(!u&&!o(y,T,a,n)||r.push(C));else if(e===3)for(T=x;T>=p;T--)for(y=d;y>=f;y--)C=h[T][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&(!u&&!o(y,T,a,n)||r.push(C));return s.tilesDrawn=r.length,s.tilesTotal=i*l,r};c.exports=g},14127:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s){r||(r=new o);var h=s.baseTileWidth,i=s.baseTileHeight,l=s.tilemapLayer,u=0,f=0;l&&(e||(e=l.scene.cameras.main),u=l.x+e.scrollX*(1-l.scrollFactorX),h*=l.scaleX,f=l.y+e.scrollY*(1-l.scrollFactorY),i*=l.scaleY);var d=u+(a-n)*(h/2),p=f+(a+n)*(i/2);return r.set(d,p)};c.exports=g},96897:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s,h,i){e||(e=new o);var l=h.baseTileWidth,u=h.baseTileHeight,f=h.tilemapLayer;f&&(s||(s=f.scene.cameras.main),n=n-(f.y+s.scrollY*(1-f.scrollFactorY)),u*=f.scaleY,a=a-(f.x+s.scrollX*(1-f.scrollFactorX)),l*=f.scaleX);var d=l/2,p=u/2;a=a-d,i||(n=n-u);var x=.5*(a/d+n/p),y=.5*(-a/d+n/p);return r&&(x=Math.floor(x),y=Math.floor(y)),e.set(x,y)};c.exports=g},71558:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23029),g=t(62991),a=t(72023),n=t(20576),r=function(e,s,h,i,l){if(i===void 0&&(i=!0),!g(s,h,l))return null;var u,f=l.data[h][s],d=f&&f.collides;e instanceof o?(l.data[h][s]===null&&(l.data[h][s]=new o(l,e.index,s,h,l.tileWidth,l.tileHeight)),l.data[h][s].copy(e)):(u=e,l.data[h][s]===null?l.data[h][s]=new o(l,u,s,h,l.tileWidth,l.tileHeight):l.data[h][s].index=u);var p=l.data[h][s],x=l.collideIndexes.indexOf(p.index)!==-1;if(u=e instanceof o?e.index:e,u===-1)p.width=l.tileWidth,p.height=l.tileHeight;else{var y=l.tilemapLayer.tilemap,T=y.tiles,C=T[u][2],A=y.tilesets[C];p.width=A.tileWidth,p.height=A.tileHeight}return n(p,x),i&&d!==p.collides&&a(s,h,l),p};c.exports=r},26303:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71558),g=t(26099),a=new g,n=function(r,e,s,h,i,l){return l.tilemapLayer.worldToTileXY(e,s,!0,a,i,l),o(r,a.x,a.y,h,l)};c.exports=n},14051:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42573),g=t(71558),a=function(n,r,e,s,h){if(s===void 0&&(s=!0),!Array.isArray(n))return null;Array.isArray(n[0])||(n=[n]);for(var i=n.length,l=n[0].length,u=0;u<i;u++)for(var f=0;f<l;f++){var d=n[u][f];g(d,r+f,e+u,!1,h)}s&&o(r-1,e-1,l+2,i+2,h)};c.exports=a},77389:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(26546),a=function(n,r,e,s,h,i){var l,u=o(n,r,e,s,{},i);if(!h)for(h=[],l=0;l<u.length;l++)h.indexOf(u[l].index)===-1&&h.push(u[l].index);for(l=0;l<u.length;l++)u[l].index=g(h)};c.exports=a},63557:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23029),g=t(62991),a=t(72023),n=function(r,e,s,h,i){if(s===void 0&&(s=!0),h===void 0&&(h=!0),!g(r,e,i))return null;var l=i.data[e][r];if(l)i.data[e][r]=s?null:new o(i,-1,r,e,i.tileWidth,i.tileHeight);else return null;return h&&l&&l.collides&&a(r,e,i),l};c.exports=n},94178:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63557),g=t(26099),a=new g,n=function(r,e,s,h,i,l){return l.tilemapLayer.worldToTileXY(r,e,!0,a,i,l),o(a.x,a.y,s,h,l)};c.exports=n},15533:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(3956),a=new g(105,210,231,150),n=new g(243,134,48,200),r=new g(40,39,37,150),e=function(s,h,i){h===void 0&&(h={});var l=h.tileColor!==void 0?h.tileColor:a,u=h.collidingTileColor!==void 0?h.collidingTileColor:n,f=h.faceColor!==void 0?h.faceColor:r,d=o(0,0,i.width,i.height,null,i);s.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),s.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var p=0;p<d.length;p++){var x=d[p],y=x.width,T=x.height,C=x.pixelX,A=x.pixelY,R=x.collides?u:l;R!==null&&(s.fillStyle(R.color,R.alpha/255),s.fillRect(C,A,y,T)),C+=1,A+=1,y-=2,T-=2,f!==null&&(s.lineStyle(1,f.color,f.alpha/255),x.faceTop&&s.lineBetween(C,A,C+y,A),x.faceRight&&s.lineBetween(C+y,A,C+y,A+T),x.faceBottom&&s.lineBetween(C,A+T,C+y,A+T),x.faceLeft&&s.lineBetween(C,A,C,A+T))}};c.exports=e},27987:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i){for(var l=o(r,e,s,h,null,i),u=0;u<l.length;u++)l[u]&&l[u].index===a&&(l[u].index=n)};c.exports=g},32483:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=t.data,r=t.width,e=t.height,s=t.tilemapLayer,h=Math.max(0,o.left),i=Math.min(r,o.right),l=Math.max(0,o.top),u=Math.min(e,o.bottom),f,d,p;if(g===0)for(d=l;d<u;d++)for(f=h;n[d]&&f<i;f++)p=n[d][f],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===1)for(d=l;d<u;d++)for(f=i;n[d]&&f>=h;f--)p=n[d][f],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===2)for(d=u;d>=l;d--)for(f=h;n[d]&&f<i;f++)p=n[d][f],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===3)for(d=u;d>=l;d--)for(f=i;n[d]&&f>=h;f--)p=n[d][f],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);return s.tilesDrawn=a.length,s.tilesTotal=r*e,a};c.exports=S},57068:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),n=function(r,e,s,h,i){e===void 0&&(e=!0),s===void 0&&(s=!0),i===void 0&&(i=!0),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++)a(r[l],e,h);if(i)for(var u=0;u<h.height;u++)for(var f=0;f<h.width;f++){var d=h.data[u][f];d&&r.indexOf(d.index)!==-1&&o(d,e)}s&&g(0,0,h.width,h.height,h)};c.exports=n},37266:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),n=function(r,e,s,h,i,l){if(s===void 0&&(s=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),!(r>e)){for(var u=r;u<=e;u++)a(u,s,i);if(l)for(var f=0;f<i.height;f++)for(var d=0;d<i.width;d++){var p=i.data[f][d];p&&p.index>=r&&p.index<=e&&o(p,s)}h&&g(0,0,i.width,i.height,i)}};c.exports=n},75661:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),n=function(r,e,s,h){e===void 0&&(e=!0),s===void 0&&(s=!0),Array.isArray(r)||(r=[r]);for(var i=0;i<h.height;i++)for(var l=0;l<h.width;l++){var u=h.data[i][l];u&&r.indexOf(u.index)===-1&&(o(u,e),a(u.index,e,h))}s&&g(0,0,h.width,h.height,h)};c.exports=n},64740:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(97022),n=function(r,e,s,h){e===void 0&&(e=!0),s===void 0&&(s=!0);for(var i=0;i<h.height;i++)for(var l=0;l<h.width;l++){var u=h.data[i][l];if(u){for(var f in r)if(a(u.properties,f)){var d=r[f];Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++)u.properties[f]===d[p]&&o(u,e)}}}s&&g(0,0,h.width,h.height,h)};c.exports=n},63307:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=function(n,r,e){n===void 0&&(n=!0),r===void 0&&(r=!0);for(var s=0;s<e.height;s++)for(var h=0;h<e.width;h++){var i=e.data[s][h];if(i){var l=i.getCollisionGroup();l&&l.objects&&l.objects.length>0&&o(i,n)}}r&&g(0,0,e.width,e.height,e)};c.exports=a},9589:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=g.collideIndexes.indexOf(t);o&&a===-1?g.collideIndexes.push(t):!o&&a!==-1&&g.collideIndexes.splice(a,1)};c.exports=S},20576:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};c.exports=S},79583:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){if(typeof t=="number")a.callbacks[t]=o!==null?{callback:o,callbackContext:g}:void 0;else for(var n=0,r=t.length;n<r;n++)a.callbacks[t[n]]=o!==null?{callback:o,callbackContext:g}:void 0};c.exports=S},93254:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i){for(var l=o(a,n,r,e,null,i),u=0;u<l.length;u++)l[u].setCollisionCallback(s,h)};c.exports=g},32903:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(33680),a=function(n,r,e,s,h){var i=o(n,r,e,s,null,h),l=i.map(function(f){return f.index});g(l);for(var u=0;u<i.length;u++)i[u].index=l[u]};c.exports=a},61325:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63448),g=t(56583),a=function(n,r){var e=n.tilemapLayer.tilemap,s=n.tilemapLayer,h=Math.floor(e.tileWidth*s.scaleX),i=Math.floor(e.tileHeight*s.scaleY),l=g(r.worldView.x-s.x,h,0,!0)-s.cullPaddingX,u=o(r.worldView.right-s.x,h,0,!0)+s.cullPaddingX,f=g(r.worldView.y-s.y,i/2,0,!0)-s.cullPaddingY,d=o(r.worldView.bottom-s.y,i/2,0,!0)+s.cullPaddingY;return{left:l,right:u,top:f,bottom:d}};c.exports=a},54503:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61325),g=t(32483),a=function(n,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var h=n.tilemapLayer,i=o(n,r);return h.skipCull&&h.scrollFactorX===1&&h.scrollFactorY===1&&(i.left=0,i.right=n.width,i.top=0,i.bottom=n.height),g(n,i,s,e),e};c.exports=a},97202:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s){r||(r=new o);var h=s.baseTileWidth,i=s.baseTileHeight,l=s.tilemapLayer,u=0,f=0;l&&(e||(e=l.scene.cameras.main),u=l.x+e.scrollX*(1-l.scrollFactorX),h*=l.scaleX,f=l.y+e.scrollY*(1-l.scrollFactorY),i*=l.scaleY);var d=u+a*h+n%2*(h/2),p=f+n*(i/2);return r.set(d,p)};c.exports=g},28054:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=g.baseTileHeight,n=g.tilemapLayer,r=0;return n&&(o===void 0&&(o=n.scene.cameras.main),r=n.y+o.scrollY*(1-n.scrollFactorY),a*=n.scaleY),r+t*(a/2)+a};c.exports=S},15108:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s,h){e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,u=h.tilemapLayer;u&&(s||(s=u.scene.cameras.main),n=n-(u.y+s.scrollY*(1-u.scrollFactorY)),l*=u.scaleY,a=a-(u.x+s.scrollX*(1-u.scrollFactorX)),i*=u.scaleX);var f=r?Math.floor(n/(l/2)):n/(l/2),d=r?Math.floor((a+f%2*.5*i)/i):(a+f%2*.5*i)/i;return e.set(d,f)};c.exports=g},51900:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=a.baseTileHeight,r=a.tilemapLayer;return r&&(g||(g=r.scene.cameras.main),t=t-(r.y+g.scrollY*(1-r.scrollFactorY)),n*=r.scaleY),o?Math.floor(t/(n/2)):t/(n/2)};c.exports=S},86560:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,n,r,e,s,h,i){for(var l=o(r,e,s,h,null,i),u=0;u<l.length;u++)l[u]&&(l[u].index===a?l[u].index=n:l[u].index===n&&(l[u].index=a))};c.exports=g},97281:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=g.baseTileWidth,n=g.tilemapLayer,r=0;return n&&(o||(o=n.scene.cameras.main),r=n.x+o.scrollX*(1-n.scrollFactorX),a*=n.scaleX),r+t*a};c.exports=S},70326:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97281),g=t(29650),a=t(26099),n=function(r,e,s,h,i){return s||(s=new a(0,0)),s.x=o(r,h,i),s.y=g(e,h,i),s};c.exports=n},29650:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=g.baseTileHeight,n=g.tilemapLayer,r=0;return n&&(o||(o=n.scene.cameras.main),r=n.y+o.scrollY*(1-n.scrollFactorY),a*=n.scaleY),r+t*a};c.exports=S},77366:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(75508),a=function(n,r,e,s,h,i){if(h){var l,u=o(n,r,e,s,null,i),f=0;for(l=0;l<h.length;l++)f+=h[l].weight;if(!(f<=0))for(l=0;l<u.length;l++){for(var d=g.RND.frac()*f,p=0,x=-1,y=0;y<h.length;y++)if(p+=h[y].weight,d<=p){var T=h[y].index;x=Array.isArray(T)?T[Math.floor(g.RND.frac()*T.length)]:T;break}u[l].index=x}}};c.exports=a},10095:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85896),g=t(26099),a=new g,n=function(r,e,s,h){return o(r,0,e,a,s,h),a.x};c.exports=n},85896:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,n,r,e,s,h){r===void 0&&(r=!0),e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,u=h.tilemapLayer;u&&(s||(s=u.scene.cameras.main),a=a-(u.x+s.scrollX*(1-u.scrollFactorX)),n=n-(u.y+s.scrollY*(1-u.scrollFactorY)),i*=u.scaleX,l*=u.scaleY);var f=a/i,d=n/l;return r&&(f=Math.floor(f),d=Math.floor(d)),e.set(f,d)};c.exports=g},63288:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85896),g=t(26099),a=new g,n=function(r,e,s,h){return o(0,r,e,a,s,h),a.y};c.exports=n},81086:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CalculateFacesAt:t(72023),CalculateFacesWithin:t(42573),CheckIsoBounds:t(33528),Copy:t(1785),CreateFromTiles:t(78419),CullBounds:t(19545),CullTiles:t(30003),Fill:t(35137),FilterTiles:t(40253),FindByIndex:t(52692),FindTile:t(66151),ForEachTile:t(97560),GetCullTilesFunction:t(43305),GetTileAt:t(7423),GetTileAtWorldXY:t(60540),GetTileCorners:t(55826),GetTileCornersFunction:t(11758),GetTilesWithin:t(7386),GetTilesWithinShape:t(91141),GetTilesWithinWorldXY:t(96523),GetTileToWorldXFunction:t(39167),GetTileToWorldXYFunction:t(62e3),GetTileToWorldYFunction:t(5984),GetWorldToTileXFunction:t(96113),GetWorldToTileXYFunction:t(16926),GetWorldToTileYFunction:t(55762),HasTileAt:t(45091),HasTileAtWorldXY:t(24152),HexagonalCullBounds:t(90454),HexagonalCullTiles:t(9474),HexagonalGetTileCorners:t(27229),HexagonalTileToWorldXY:t(19951),HexagonalWorldToTileXY:t(86625),IsInLayerBounds:t(62991),IsometricCullTiles:t(14018),IsometricTileToWorldXY:t(14127),IsometricWorldToTileXY:t(96897),PutTileAt:t(71558),PutTileAtWorldXY:t(26303),PutTilesAt:t(14051),Randomize:t(77389),RemoveTileAt:t(63557),RemoveTileAtWorldXY:t(94178),RenderDebug:t(15533),ReplaceByIndex:t(27987),RunCull:t(32483),SetCollision:t(57068),SetCollisionBetween:t(37266),SetCollisionByExclusion:t(75661),SetCollisionByProperty:t(64740),SetCollisionFromCollisionGroup:t(63307),SetLayerCollisionIndex:t(9589),SetTileCollision:t(20576),SetTileIndexCallback:t(79583),SetTileLocationCallback:t(93254),Shuffle:t(32903),StaggeredCullBounds:t(61325),StaggeredCullTiles:t(54503),StaggeredTileToWorldXY:t(97202),StaggeredTileToWorldY:t(28054),StaggeredWorldToTileXY:t(15108),StaggeredWorldToTileY:t(51900),SwapByIndex:t(86560),TileToWorldX:t(97281),TileToWorldXY:t(70326),TileToWorldY:t(29650),WeightedRandomize:t(77366),WorldToTileX:t(10095),WorldToTileXY:t(85896),WorldToTileY:t(63288)}},91907:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ORIENTATION:t(91907)};c.exports=o},62501:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(21829),a={Components:t(81086),Parsers:t(57442),Formats:t(80341),ImageCollection:t(16536),ParseToTilemap:t(31989),Tile:t(23029),Tilemap:t(49075),TilemapCreator:t(45939),TilemapFactory:t(46029),Tileset:t(33629),TilemapLayer:t(20442),Orientation:t(91907),LayerData:t(14977),MapData:t(87010),ObjectLayer:t(48700)};a=o(!1,a,g.ORIENTATION),c.exports=a},14977:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91907),a=t(95540),n=new o({initialize:function(e){e===void 0&&(e={}),this.name=a(e,"name","layer"),this.id=a(e,"id",0),this.x=a(e,"x",0),this.y=a(e,"y",0),this.width=a(e,"width",0),this.height=a(e,"height",0),this.tileWidth=a(e,"tileWidth",0),this.tileHeight=a(e,"tileHeight",0),this.baseTileWidth=a(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(e,"baseTileHeight",this.tileHeight),this.orientation=a(e,"orientation",g.ORTHOGONAL),this.widthInPixels=a(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(e,"alpha",1),this.visible=a(e,"visible",!0),this.properties=a(e,"properties",[]),this.indexes=a(e,"indexes",[]),this.collideIndexes=a(e,"collideIndexes",[]),this.callbacks=a(e,"callbacks",[]),this.bodies=a(e,"bodies",[]),this.data=a(e,"data",[]),this.tilemapLayer=a(e,"tilemapLayer",null),this.hexSideLength=a(e,"hexSideLength",0),this.staggerAxis=a(e,"staggerAxis","y"),this.staggerIndex=a(e,"staggerIndex","odd")}});c.exports=n},87010:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91907),a=t(95540),n=new o({initialize:function(e){e===void 0&&(e={}),this.name=a(e,"name","map"),this.width=a(e,"width",0),this.height=a(e,"height",0),this.infinite=a(e,"infinite",!1),this.tileWidth=a(e,"tileWidth",0),this.tileHeight=a(e,"tileHeight",0),this.widthInPixels=a(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(e,"heightInPixels",this.height*this.tileHeight),this.format=a(e,"format",null),this.orientation=a(e,"orientation",g.ORTHOGONAL),this.renderOrder=a(e,"renderOrder","right-down"),this.version=a(e,"version","1"),this.properties=a(e,"properties",{}),this.layers=a(e,"layers",[]),this.images=a(e,"images",[]),this.objects=a(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=a(e,"collision",{}),this.tilesets=a(e,"tilesets",[]),this.imageCollections=a(e,"imageCollections",[]),this.tiles=a(e,"tiles",[]),this.hexSideLength=a(e,"hexSideLength",0),this.staggerAxis=a(e,"staggerAxis","y"),this.staggerIndex=a(e,"staggerIndex","odd")}});c.exports=n},48700:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=new o({initialize:function(r){r===void 0&&(r={}),this.name=g(r,"name","object layer"),this.id=g(r,"id",0),this.opacity=g(r,"opacity",1),this.properties=g(r,"properties",{}),this.propertyTypes=g(r,"propertytypes",{}),this.type=g(r,"type","objectgroup"),this.visible=g(r,"visible",!0),this.objects=g(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});c.exports=a},6641:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=function(a){return a=a.toLowerCase(),a==="isometric"?o.ISOMETRIC:a==="staggered"?o.STAGGERED:a==="hexagonal"?o.HEXAGONAL:o.ORTHOGONAL};c.exports=g},46177:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(2342),a=t(82593),n=t(46594),r=t(87021),e=function(s,h,i,l,u,f){var d;switch(h){case o.ARRAY_2D:d=g(s,i,l,u,f);break;case o.CSV:d=a(s,i,l,u,f);break;case o.TILED_JSON:d=n(s,i,f);break;case o.WELTMEISTER:d=r(s,i,f);break;default:console.warn("Unrecognized tilemap data format: "+h),d=null}return d};c.exports=e},2342:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(14977),a=t(87010),n=t(23029),r=function(e,s,h,i,l){for(var u=new g({tileWidth:h,tileHeight:i}),f=new a({name:e,tileWidth:h,tileHeight:i,format:o.ARRAY_2D,layers:[u]}),d=[],p=s.length,x=0,y=0;y<s.length;y++){d[y]=[];for(var T=s[y],C=0;C<T.length;C++){var A=parseInt(T[C],10);isNaN(A)||A===-1?d[y][C]=l?null:new n(u,-1,C,y,h,i):d[y][C]=new n(u,A,C,y,h,i)}x===0&&(x=T.length)}return f.width=u.width=x,f.height=u.height=p,f.widthInPixels=u.widthInPixels=x*h,f.heightInPixels=u.heightInPixels=p*i,u.data=d,f};c.exports=r},82593:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(2342),a=function(n,r,e,s,h){var i=r.trim().split(`
`).map(function(u){return u.split(",")}),l=g(n,i,e,s,h);return l.format=o.CSV,l};c.exports=a},6656:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14977),g=t(23029),a=function(n,r){for(var e=[],s=0;s<n.layer.length;s++){for(var h=n.layer[s],i=new o({name:h.name,width:h.width,height:h.height,tileWidth:h.tilesize,tileHeight:h.tilesize,visible:h.visible===1}),l=[],u=[],f=0;f<h.data.length;f++){for(var d=0;d<h.data[f].length;d++){var p=h.data[f][d]-1,x;p>-1?x=new g(i,p,d,f,h.tilesize,h.tilesize):x=r?null:new g(i,-1,d,f,h.tilesize,h.tilesize),l.push(x)}u.push(l),l=[]}i.data=u,e.push(i)}return e};c.exports=a},96483:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=function(a){for(var n=[],r=[],e=0;e<a.layer.length;e++){var s=a.layer[e],h=s.tilesetName;h!==""&&r.indexOf(h)===-1&&(r.push(h),n.push(new o(h,0,s.tilesize,s.tilesize,0,0)))}return n};c.exports=g},87021:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(87010),a=t(6656),n=t(96483),r=function(e,s,h){if(s.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var i=0,l=0,u=0;u<s.layer.length;u++)s.layer[u].width>i&&(i=s.layer[u].width),s.layer[u].height>l&&(l=s.layer[u].height);var f=new g({width:i,height:l,name:e,tileWidth:s.layer[0].tilesize,tileHeight:s.layer[0].tilesize,format:o.WELTMEISTER});return f.layers=a(s,h),f.tilesets=n(s),f};c.exports=r},52833:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ParseTileLayers:t(6656),ParseTilesets:t(96483),ParseWeltmeister:t(87021)}},57442:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={FromOrientationString:t(6641),Parse:t(46177),Parse2DArray:t(2342),ParseCSV:t(82593),Impact:t(52833),Tiled:t(96761)}},51233:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=function(a){for(var n,r,e,s,h,i=0;i<a.layers.length;i++){n=a.layers[i],s=null;for(var l=0;l<n.data.length;l++){h=n.data[l];for(var u=0;u<h.length;u++)r=h[u],!(r===null||r.index<0)&&(e=a.tiles[r.index][2],s=a.tilesets[e],r.width=s.tileWidth,r.height=s.tileHeight,s.tileProperties&&s.tileProperties[r.index-s.firstgid]&&(r.properties=o(r.properties,s.tileProperties[r.index-s.firstgid])))}}};c.exports=g},41868:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=window.atob(t),g=o.length,a=new Array(g/4),n=0;n<g;n+=4)a[n/4]=(o.charCodeAt(n)|o.charCodeAt(n+1)<<8|o.charCodeAt(n+2)<<16|o.charCodeAt(n+3)<<24)>>>0;return a};c.exports=S},84101:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=function(a){var n,r,e=[];for(n=0;n<a.imageCollections.length;n++)for(var s=a.imageCollections[n],h=s.images,i=0;i<h.length;i++){var l=h[i];r=new o(l.image,l.gid,s.imageWidth,s.imageHeight,0,0),r.updateTileData(s.imageWidth,s.imageHeight),a.tilesets.push(r)}for(n=0;n<a.tilesets.length;n++){r=a.tilesets[n];for(var u=r.tileMargin,f=r.tileMargin,d=0,p=0,x=0,y=r.firstgid;y<r.firstgid+r.total&&(e[y]=[u,f,n],u+=r.tileWidth+r.tileSpacing,d++,!(d===r.total||(p++,p===r.columns&&(u=r.tileMargin,f+=r.tileHeight+r.tileSpacing,p=0,x++,x===r.rows))));y++);}return e};c.exports=g},79677:(c,S,t)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,n,r){if(!n)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var e=n.x+o(n,"startx",0)*a.tilewidth+o(n,"offsetx",0),s=n.y+o(n,"starty",0)*a.tileheight+o(n,"offsety",0);return{i:0,layers:n.layers,name:r.name+n.name+"/",opacity:r.opacity*n.opacity,visible:r.visible&&n.visible,x:r.x+e,y:r.y+s}};c.exports=g},29920:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=2147483648,t=1073741824,o=536870912,g=function(a){var n=!!(a&S),r=!!(a&t),e=!!(a&o);a=a&536870911;var s=0,h=!1;return n&&r&&e?(s=Math.PI/2,h=!0):n&&r&&!e?(s=Math.PI,h=!1):n&&!r&&e?(s=Math.PI/2,h=!1):n&&!r&&!e?(s=0,h=!0):!n&&r&&e?(s=3*Math.PI/2,h=!1):!n&&r&&!e?(s=Math.PI,h=!0):!n&&!r&&e?(s=3*Math.PI/2,h=!0):!n&&!r&&!e&&(s=0,h=!1),{gid:a,flippedHorizontal:n,flippedVertical:r,flippedAntiDiagonal:e,rotation:s,flipped:h}};c.exports=g},12635:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(79677),a=function(n){for(var r=[],e=[],s=g(n);s.i<s.layers.length||e.length>0;){if(s.i>=s.layers.length){if(e.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=e.pop();continue}var h=s.layers[s.i];if(s.i++,h.type!=="imagelayer"){if(h.type==="group"){var i=g(n,h,s);e.push(s),s=i}continue}var l=o(h,"offsetx",0)+o(h,"startx",0),u=o(h,"offsety",0)+o(h,"starty",0);r.push({name:s.name+h.name,image:h.image,x:s.x+l+h.x,y:s.y+u+h.y,alpha:s.opacity*h.opacity,visible:s.visible&&h.visible,properties:o(h,"properties",{})})}return r};c.exports=a},46594:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(51233),g=t(84101),a=t(91907),n=t(62644),r=t(80341),e=t(6641),s=t(87010),h=t(12635),i=t(22611),l=t(28200),u=t(24619),f=function(d,p,x){var y=n(p),T=new s({width:y.width,height:y.height,name:d,tileWidth:y.tilewidth,tileHeight:y.tileheight,orientation:e(y.orientation),format:r.TILED_JSON,version:y.version,properties:y.properties,renderOrder:y.renderorder,infinite:y.infinite});T.orientation===a.HEXAGONAL&&(T.hexSideLength=y.hexsidelength,T.staggerAxis=y.staggeraxis,T.staggerIndex=y.staggerindex),T.layers=l(y,x),T.images=h(y);var C=u(y);return T.tilesets=C.tilesets,T.imageCollections=C.imageCollections,T.objects=i(y),T.tiles=g(T),o(T),T};c.exports=f},52205:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(18254),g=t(29920),a=function(e){return{x:e.x,y:e.y}},n=["id","name","type","rotation","properties","visible","x","y","width","height"],r=function(e,s,h){s===void 0&&(s=0),h===void 0&&(h=0);var i=o(e,n);if(i.x+=s,i.y+=h,e.gid){var l=g(e.gid);i.gid=l.gid,i.flippedHorizontal=l.flippedHorizontal,i.flippedVertical=l.flippedVertical,i.flippedAntiDiagonal=l.flippedAntiDiagonal}else e.polyline?i.polyline=e.polyline.map(a):e.polygon?i.polygon=e.polygon.map(a):e.ellipse?i.ellipse=e.ellipse:e.text?i.text=e.text:e.point?i.point=!0:i.rectangle=!0;return i};c.exports=r},22611:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(52205),a=t(48700),n=t(79677),r=function(e){for(var s=[],h=[],i=n(e);i.i<i.layers.length||h.length>0;){if(i.i>=i.layers.length){if(h.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}i=h.pop();continue}var l=i.layers[i.i];if(i.i++,l.opacity*=i.opacity,l.visible=i.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var u=n(e,l,i);h.push(i),i=u}continue}l.name=i.name+l.name;for(var f=i.x+o(l,"startx",0)+o(l,"offsetx",0),d=i.y+o(l,"starty",0)+o(l,"offsety",0),p=[],x=0;x<l.objects.length;x++){var y=g(l.objects[x],f,d);p.push(y)}var T=new a(l);T.objects=p,s.push(T)}return s};c.exports=r},28200:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41868),g=t(91907),a=t(79677),n=t(6641),r=t(95540),e=t(14977),s=t(29920),h=t(23029),i=function(l,u){for(var f=r(l,"infinite",!1),d=[],p=[],x=a(l);x.i<x.layers.length||p.length>0;){if(x.i>=x.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}x=p.pop();continue}var y=x.layers[x.i];if(x.i++,y.type!=="tilelayer"){if(y.type==="group"){var T=a(l,y,x);p.push(x),x=T}continue}if(y.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+y.name+"'");continue}else if(y.encoding&&y.encoding==="base64"){if(y.chunks)for(var C=0;C<y.chunks.length;C++)y.chunks[C].data=o(y.chunks[C].data);y.data&&(y.data=o(y.data)),delete y.encoding}var A,R,M,L,I=[],O=0;if(f){var D=r(y,"startx",0)+y.x,B=r(y,"starty",0)+y.y;A=new e({name:x.name+y.name,id:y.id,x:x.x+r(y,"offsetx",0)+D*l.tilewidth,y:x.y+r(y,"offsety",0)+B*l.tileheight,width:y.width,height:y.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:x.opacity*y.opacity,visible:x.visible&&y.visible,properties:r(y,"properties",[]),orientation:n(l.orientation)}),A.orientation===g.HEXAGONAL&&(A.hexSideLength=l.hexsidelength,A.staggerAxis=l.staggeraxis,A.staggerIndex=l.staggerindex);for(var V=0;V<y.height;V++){I[V]=[null];for(var W=0;W<y.width;W++)I[V][W]=null}for(V=0,Q=y.chunks.length;V<Q;V++)for(var Y=y.chunks[V],X=Y.x-D,U=Y.y-B,z=0,G=0,b=Y.data.length;G<b;G++){var H=O+X,j=z+U;R=s(Y.data[G]),R.gid>0?(M=new h(A,R.gid,H,j,l.tilewidth,l.tileheight),M.rotation=R.rotation,M.flipX=R.flipped,I[j][H]=M):(L=u?null:new h(A,-1,H,j,l.tilewidth,l.tileheight),I[j][H]=L),O++,O===Y.width&&(z++,O=0)}}else{A=new e({name:x.name+y.name,id:y.id,x:x.x+r(y,"offsetx",0)+y.x,y:x.y+r(y,"offsety",0)+y.y,width:y.width,height:y.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:x.opacity*y.opacity,visible:x.visible&&y.visible,properties:r(y,"properties",[]),orientation:n(l.orientation)}),A.orientation===g.HEXAGONAL&&(A.hexSideLength=l.hexsidelength,A.staggerAxis=l.staggeraxis,A.staggerIndex=l.staggerindex);for(var $=[],k=0,Q=y.data.length;k<Q;k++)R=s(y.data[k]),R.gid>0?(M=new h(A,R.gid,O,I.length,l.tilewidth,l.tileheight),M.rotation=R.rotation,M.flipX=R.flipped,$.push(M)):(L=u?null:new h(A,-1,O,I.length,l.tilewidth,l.tileheight),$.push(L)),O++,O===y.width&&(I.push($),O=0,$=[])}A.data=I,d.push(A)}return d};c.exports=i},24619:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=t(16536),a=t(52205),n=t(57880),r=function(e){for(var s=[],h=[],i=null,l,u=0;u<e.tilesets.length;u++){var f=e.tilesets[u];if(f.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(f.image){var d=new o(f.name,f.firstgid,f.tilewidth,f.tileheight,f.margin,f.spacing,void 0,void 0,f.tileoffset);if(e.version>1){var p=void 0,x=void 0;if(Array.isArray(f.tiles)){p=p||{},x=x||{};for(var y=0;y<f.tiles.length;y++){var T=f.tiles[y];if(T.properties){var C={};T.properties.forEach(function(V){C[V.name]=V.value}),x[T.id]=C}if(T.objectgroup&&((p[T.id]||(p[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var A=T.objectgroup.objects.map(function(V){return a(V)});p[T.id].objectgroup.objects=A}T.animation&&((p[T.id]||(p[T.id]={})).animation=T.animation),T.type&&((p[T.id]||(p[T.id]={})).type=T.type)}}Array.isArray(f.wangsets)&&(p=p||{},x=x||{},n(f.wangsets,p)),p&&(d.tileData=p,d.tileProperties=x)}else if(f.tileproperties&&(d.tileProperties=f.tileproperties),f.tiles){d.tileData=f.tiles;for(l in d.tileData){var R=d.tileData[l].objectgroup;if(R&&R.objects){var M=R.objects.map(function(V){return a(V)});d.tileData[l].objectgroup.objects=M}}}d.updateTileData(f.imagewidth,f.imageheight),s.push(d)}else{var L=new g(f.name,f.firstgid,f.tilewidth,f.tileheight,f.margin,f.spacing,f.properties),I=0;for(y=0;y<f.tiles.length;y++){T=f.tiles[y];var O=T.image,D=parseInt(T.id,10),B=f.firstgid+D;L.addImage(B,O),I=Math.max(D,I)}L.maxId=I,h.push(L)}i&&(i.lastgid=f.firstgid-1),i=f}return{tilesets:s,imageCollections:h}};c.exports=r},57880:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){for(var g=0;g<t.length;g++){var a=t[g],n=g;if(a.name&&a.name!==""&&(n=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var r={},e={},s,h,i;if(Array.isArray(a.edgecolors))for(s=0;s<a.edgecolors.length;s++)i=1+s,h=a.edgecolors[s],h.name!==""&&(r[i]=h.name);if(Array.isArray(a.cornercolors))for(s=0;s<a.cornercolors.length;s++)i=1+s,h=a.cornercolors[s],h.name!==""&&(e[i]=h.name);if(Array.isArray(a.colors))for(s=0;s<a.colors.length;s++)h=a.colors[s],i=1+s,h.name!==""&&(r[i]=e[i]=h.name);for(var l=[r,e,r,e,r,e,r,e],u=0;u<a.wangtiles.length;u++){var f=a.wangtiles[u],d=o[f.tileid]||(o[f.tileid]={});d=d.wangid||(d.wangid={});for(var p=[],x=0;x<Math.min(l.length,f.wangid.length);x++){if(h=f.wangid[x],h===0){p.push(void 0);continue}var y=l[x][h];if(y!==void 0){p.push(y);continue}p.push(h)}d[n]=p}}}};c.exports=S},96761:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={AssignTileProperties:t(51233),Base64Decode:t(41868),BuildTilesetIndex:t(84101),CreateGroupLayer:t(79677),ParseGID:t(29920),ParseImageLayers:t(12635),ParseJSONTiled:t(46594),ParseObject:t(52205),ParseObjectLayers:t(22611),ParseTileLayers:t(28200),ParseTilesets:t(24619)}},33385:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),n=t(94880),r=t(72905),e=new o({initialize:function(h){this.scene=h,this.systems=h.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var s=this.systems.events;s.on(a.PRE_UPDATE,this.preUpdate,this),s.on(a.UPDATE,this.update,this),s.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(s){var h;return s instanceof n?(h=s,this.removeEvent(h),h.elapsed=h.startAt,h.hasDispatched=!1,h.repeatCount=h.repeat===-1||h.loop?999999999999:h.repeat):h=new n(s),this._pendingInsertion.push(h),h},delayedCall:function(s,h,i,l){return this.addEvent({delay:s,callback:h,args:i,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(s){Array.isArray(s)||(s=[s]);for(var h=0;h<s.length;h++){var i=s[h];r(this._pendingRemoval,i),r(this._pendingInsertion,i),r(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var s=this._pendingRemoval.length,h=this._pendingInsertion.length;if(!(s===0&&h===0)){var i,l;for(i=0;i<s;i++){l=this._pendingRemoval[i];var u=this._active.indexOf(l);u>-1&&this._active.splice(u,1),l.destroy()}for(i=0;i<h;i++)l=this._pendingInsertion[i],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(s,h){if(this.now=s,!this.paused){h*=this.timeScale;for(var i=0;i<this._active.length;i++){var l=this._active[i];if(!l.paused&&(l.elapsed+=h*l.timeScale,l.elapsed>=l.delay)){var u=l.elapsed-l.delay;if(l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0){if(l.repeatCount--,u>=l.delay)for(;u>=l.delay&&l.repeatCount>0;)l.callback&&l.callback.apply(l.callbackScope,l.args),u-=l.delay,l.repeatCount--;l.elapsed=u,l.hasDispatched=!1}else l.hasDispatched&&this._pendingRemoval.push(l)}}}},shutdown:function(){var s;for(s=0;s<this._pendingInsertion.length;s++)this._pendingInsertion[s].destroy();for(s=0;s<this._active.length;s++)this._active[s].destroy();for(s=0;s<this._pendingRemoval.length;s++)this._pendingRemoval[s].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var h=this.systems.events;h.off(a.PRE_UPDATE,this.preUpdate,this),h.off(a.UPDATE,this.update,this),h.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",e,"time"),c.exports=e},96120:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(39429),n=t(95540),r=t(44594),e=t(89809),s=new o({Extends:g,initialize:function(i,l){g.call(this),this.scene=i,this.systems=i.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var u=this.systems.events;u.on(r.PRE_UPDATE,this.preUpdate,this),u.on(r.UPDATE,this.update,this),u.once(r.SHUTDOWN,this.destroy,this),l&&this.add(l)},preUpdate:function(h,i){this.paused||(this.elapsed+=i*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var h,i=this.events,l=!1,u=this.systems,f;for(h=0;h<i.length;h++){var d=i[h];if(!d.complete&&d.time<=this.elapsed){if(d.complete=!0,this.totalComplete++,f=d.target?d.target:this,d.if&&!d.if.call(f,d))continue;if(d.once&&(l=!0),d.set&&d.target)for(var p in d.set)d.target[p]=d.set[p];this.iteration&&d.repeat++,d.loop&&d.repeat&&d.loop.call(f),d.tween&&(d.tweenInstance=u.tweens.add(d.tween)),d.sound&&(typeof d.sound=="string"?u.sound.play(d.sound):u.sound.play(d.sound.key,d.sound.config)),d.event&&this.emit(d.event,f),d.run&&d.run.call(f),d.stop&&this.stop()}}if(l)for(h=0;h<i.length;h++)i[h].complete&&i[h].once&&(i.splice(h,1),h--);this.totalComplete>=i.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(e.COMPLETE,this)}},play:function(h){return h===void 0&&(h=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,h&&this.reset(),this},pause:function(){this.paused=!0;for(var h=this.events,i=0;i<h.length;i++){var l=h[i];l.tweenInstance&&(l.tweenInstance.paused=!0)}return this},repeat:function(h){return(h===void 0||h===!0)&&(h=-1),h===!1&&(h=0),this.loop=h,this},resume:function(){this.paused=!1;for(var h=this.events,i=0;i<h.length;i++){var l=h[i];l.tweenInstance&&(l.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(h){h===void 0&&(h=!1),this.elapsed=0,h||(this.iteration=0);for(var i=this.events,l=0;l<i.length;l++){var u=i[l];u.complete=!1,h||(u.repeat=0),u.tweenInstance&&u.tweenInstance.stop()}return this.play(!1)},add:function(h){Array.isArray(h)||(h=[h]);var i=this.events,l=0;i.length>0&&(l=i[i.length-1].time);for(var u=0;u<h.length;u++){var f=h[u],d=n(f,"at",0),p=n(f,"in",null);p!==null&&(d=this.elapsed+p);var x=n(f,"from",null);x!==null&&(d=l+x),i.push({complete:!1,time:d,repeat:0,if:n(f,"if",null),run:n(f,"run",null),loop:n(f,"loop",null),event:n(f,"event",null),target:n(f,"target",null),set:n(f,"set",null),tween:n(f,"tween",null),sound:n(f,"sound",null),once:n(f,"once",!1),stop:n(f,"stop",!1)}),l=d}return this.complete=!1,this},clear:function(){for(var h=this.events,i=0;i<h.length;i++){var l=h[i];l.tweenInstance&&l.tweenInstance.stop()}return h=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var h=Math.min(this.totalComplete,this.events.length);return h/this.events.length},destroy:function(){var h=this.systems.events;h.off(r.PRE_UPDATE,this.preUpdate,this),h.off(r.UPDATE,this.update,this),h.off(r.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});a.register("timeline",function(h){return new s(this.scene,h)}),c.exports=s},94880:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=new o({initialize:function(r){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(r)},reset:function(n){if(this.delay=g(n,"delay",0),this.repeat=g(n,"repeat",0),this.loop=g(n,"loop",!1),this.callback=g(n,"callback",void 0),this.callbackScope=g(n,"callbackScope",this),this.args=g(n,"args",[]),this.timeScale=g(n,"timeScale",1),this.startAt=g(n,"startAt",0),this.paused=g(n,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var n=this.delay+this.delay*this.repeat,r=this.elapsed+this.delay*(this.repeat-this.repeatCount);return r/n}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(n){n===void 0&&(n=!1),this.elapsed=this.delay,this.hasDispatched=!n,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});c.exports=a},35945:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},89809:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={COMPLETE:t(35945)}},90291:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Clock:t(33385),Events:t(89809),Timeline:t(96120),TimerEvent:t(94880)}},40382:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(83419),a=t(43491),n=t(88032),r=t(37277),e=t(44594),s=t(93109),h=t(86081),i=t(8357),l=t(43960),u=t(26012),f=new g({initialize:function(p){this.scene=p,this.events=p.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(e.UPDATE,this.update,this),this.events.once(e.SHUTDOWN,this.shutdown,this)},create:function(d){Array.isArray(d)||(d=[d]);for(var p=[],x=0;x<d.length;x++){var y=d[x];y instanceof h||y instanceof l?p.push(y):Array.isArray(y.tweens)?p.push(u(this,y)):p.push(i(this,y))}return p.length===1?p[0]:p},add:function(d){var p=d,x=this.tweens;return p instanceof h||p instanceof l||(Array.isArray(p.tweens)?p=u(this,p):p=i(this,p)),x.push(p.reset()),p},addMultiple:function(d){for(var p,x=[],y=this.tweens,T=0;T<d.length;T++)p=d[T],p instanceof h||p instanceof l||(Array.isArray(p.tweens)?p=u(this,p):p=i(this,p)),y.push(p.reset()),x.push(p);return x},chain:function(d){var p=u(this,d);return this.tweens.push(p.init()),p},getChainedTweens:function(d){return d.getChainedTweens()},has:function(d){return this.tweens.indexOf(d)>-1},existing:function(d){return this.has(d)||this.tweens.push(d.reset()),this},addCounter:function(d){var p=n(this,d);return this.tweens.push(p.reset()),p},stagger:function(d,p){return s(d,p)},setLagSmooth:function(d,p){return d===void 0&&(d=1/1e-8),p===void 0&&(p=0),this.maxLag=d,this.lagSkip=Math.min(p,this.maxLag),this},setFps:function(d){return d===void 0&&(d=240),this.gap=1e3/d,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(d){var p=Date.now()-this.prevTime;p>this.maxLag&&(this.startTime+=p-this.lagSkip),this.prevTime+=p;var x=this.prevTime-this.startTime,y=x-this.nextTime,T=x-this.time*1e3;return y>0||d?(x/=1e3,this.time=x,this.nextTime+=y+(y>=this.gap?4:this.gap-y)):T=0,T},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(d){d===void 0&&(d=!1);var p=this.getDelta(d);if(!(p<=0)){this.processing=!0;var x,y,T=[],C=this.tweens;for(x=0;x<C.length;x++)y=C[x],y.update(p)&&T.push(y);var A=T.length;if(A&&C.length>0){for(x=0;x<A;x++){y=T[x];var R=C.indexOf(y);R>-1&&(y.isPendingRemove()||y.isDestroyed())&&(C.splice(R,1),y.destroy())}T.length=0}this.processing=!1}},remove:function(d){return this.processing?d.setPendingRemoveState():(o(this.tweens,d),d.setRemovedState()),this},reset:function(d){return this.existing(d),d.seek(),d.setActiveState(),this},makeActive:function(d){return this.existing(d),d.setActiveState(),this},each:function(d,p){var x,y=[null];for(x=1;x<arguments.length;x++)y.push(arguments[x]);return this.tweens.forEach(function(T){y[0]=T,d.apply(p,y)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(d){var p=[],x=this.tweens;Array.isArray(d)?d=a(d):d=[d];for(var y=d.length,T=0;T<x.length;T++)for(var C=x[T],A=0;A<y;A++)!C.isDestroyed()&&C.hasTarget(d[A])&&p.push(C);return p},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(d){return this.timeScale=d,this},isTweening:function(d){for(var p=this.tweens,x,y=0;y<p.length;y++)if(x=p[y],x.isPlaying()&&x.hasTarget(d))return!0;return!1},killAll:function(){for(var d=this.processing?this.getTweens():this.tweens,p=0;p<d.length;p++)d[p].destroy();return this.processing||(d.length=0),this},killTweensOf:function(d){for(var p=this.getTweensOf(d),x=0;x<p.length;x++)p[x].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(e.UPDATE,this.update,this),this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.events=null}});r.register("TweenManager",f,"tweens"),c.exports=f},57355:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){return t&&t.hasOwnProperty(o)?t[o]:g};c.exports=S},6113:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62640),g=t(35355),a=function(n,r){var e=o.Power0;if(typeof n=="string")if(o.hasOwnProperty(n))e=o[n];else{var s="";if(n.indexOf(".")){s=n.substring(n.indexOf(".")+1);var h=s.toLowerCase();h==="in"?s="easeIn":h==="out"?s="easeOut":h==="inout"&&(s="easeInOut")}n=g(n.substring(0,n.indexOf(".")+1)+s),o.hasOwnProperty(n)&&(e=o[n])}else typeof n=="function"&&(e=n);if(!r)return e;var i=r.slice(0);return i.unshift(0),function(l){return i[0]=l,e.apply(this,i)}};c.exports=a},91389:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89318),g=t(77259),a=t(28392),n={bezier:o,catmull:g,catmullrom:g,linear:a},r=function(e){if(e===null)return null;var s=n.linear;return typeof e=="string"?n.hasOwnProperty(e)&&(s=n[e]):typeof e=="function"&&(s=e),s};c.exports=r},55292:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a;if(t.hasOwnProperty(o)){var n=typeof t[o];n==="function"?a=function(r,e,s,h,i,l){return t[o](r,e,s,h,i,l)}:a=function(){return t[o]}}else typeof g=="function"?a=g:a=function(){return g};return a};c.exports=S},82985:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81076),g=function(a){var n,r=[];if(a.hasOwnProperty("props"))for(n in a.props)n.substring(0,1)!=="_"&&r.push({key:n,value:a.props[n]});else for(n in a)o.indexOf(n)===-1&&n.substring(0,1)!=="_"&&r.push({key:n,value:a[n]});return r};c.exports=g},62329:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=function(a){var n=o(a,"targets",null);return n===null||(typeof n=="function"&&(n=n.call()),Array.isArray(n)||(n=[n])),n};c.exports=g},17777:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(99472);function a(h){return!!h.getActive&&typeof h.getActive=="function"}function n(h){return!!h.getStart&&typeof h.getStart=="function"}function r(h){return!!h.getEnd&&typeof h.getEnd=="function"}function e(h){return n(h)||r(h)||a(h)}var s=function(h,i){var l,u=function(Y,X,U){return U},f=function(Y,X,U){return U},d=null,p=typeof i;if(p==="number")u=function(){return i};else if(Array.isArray(i))f=function(){return i[0]},u=function(){return i[i.length-1]};else if(p==="string"){var x=i.toLowerCase(),y=x.substring(0,6)==="random",T=x.substring(0,3)==="int";if(y||T){var C=x.indexOf("("),A=x.indexOf(")"),R=x.indexOf(",");if(C&&A&&R){var M=parseFloat(x.substring(C+1,R)),L=parseFloat(x.substring(R+1,A));y?u=function(){return g(M,L)}:u=function(){return o(M,L)}}else throw new Error("invalid random() format")}else{x=x[0];var I=parseFloat(i.substr(2));switch(x){case"+":u=function(Y,X,U){return U+I};break;case"-":u=function(Y,X,U){return U-I};break;case"*":u=function(Y,X,U){return U*I};break;case"/":u=function(Y,X,U){return U/I};break;default:u=function(){return parseFloat(i)}}}}else if(p==="function")u=i;else if(p==="object")if(e(i))a(i)&&(d=i.getActive),r(i)&&(u=i.getEnd),n(i)&&(f=i.getStart);else if(i.hasOwnProperty("value"))l=s(h,i.value);else{var O=i.hasOwnProperty("to"),D=i.hasOwnProperty("from"),B=i.hasOwnProperty("start");if(O&&(D||B)){if(l=s(h,i.to),B){var V=s(h,i.start);l.getActive=V.getEnd}if(D){var W=s(h,i.from);l.getStart=W.getEnd}}}return l||(l={getActive:d,getEnd:u,getStart:f}),l};c.exports=s},88032:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(69902),a=t(23568),n=t(57355),r=t(6113),e=t(55292),s=t(35154),h=t(17777),i=t(269),l=t(86081),u=function(f,d,p){if(d instanceof l)return d.parent=f,d;p===void 0?p=g:p=i(g,p);var x=s(d,"from",0),y=s(d,"to",1),T=[{value:x}],C=s(d,"delay",p.delay),A=s(d,"easeParams",p.easeParams),R=s(d,"ease",p.ease),M=h("value",y),L=new l(f,T),I=L.add(0,"value",M.getEnd,M.getStart,M.getActive,r(s(d,"ease",R),s(d,"easeParams",A)),e(d,"delay",C),s(d,"duration",p.duration),n(d,"yoyo",p.yoyo),s(d,"hold",p.hold),s(d,"repeat",p.repeat),s(d,"repeatDelay",p.repeatDelay),!1,!1);I.start=x,I.current=x,L.completeDelay=a(d,"completeDelay",0),L.loop=Math.round(a(d,"loop",0)),L.loopDelay=Math.round(a(d,"loopDelay",0)),L.paused=n(d,"paused",!1),L.persist=n(d,"persist",!1),L.callbackScope=s(d,"callbackScope",L);for(var O=o.TYPES,D=0;D<O.length;D++){var B=O[D],V=s(d,B,!1);if(V){var W=s(d,B+"Params",[]);L.setCallback(B,V,W)}}return L};c.exports=u},93109:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6113),g=t(35154),a=t(36383),n=function(r,e){e===void 0&&(e={});var s,h=g(e,"start",0),i=g(e,"ease",null),l=g(e,"grid",null),u=g(e,"from",0),f=u==="first",d=u==="center",p=u==="last",x=typeof u=="number",y=Array.isArray(r),T=parseFloat(y?r[0]:r),C=y?parseFloat(r[1]):0,A=Math.max(T,C);if(y&&(h+=T),l){var R=l[0],M=l[1],L=0,I=0,O=0,D=0,B=[];p?(L=R-1,I=M-1):x?(L=u%R,I=Math.floor(u/R)):d&&(L=(R-1)/2,I=(M-1)/2);for(var V=a.MIN_SAFE_INTEGER,W=0;W<M;W++){B[W]=[];for(var Y=0;Y<R;Y++){O=L-Y,D=I-W;var X=Math.sqrt(O*O+D*D);X>V&&(V=X),B[W][Y]=X}}}var U=i?o(i):null;return l?s=function(z,G,b,H){var j=0,$=H%R,k=Math.floor(H/R);$>=0&&$<R&&k>=0&&k<M&&(j=B[k][$]);var Q;if(y){var _=C-T;U?Q=j/V*_*U(j/V):Q=j/V*_}else U?Q=j*T*U(j/V):Q=j*T;return Q+h}:s=function(z,G,b,H,j){j--;var $;f?$=H:d?$=Math.abs(j/2-H):p?$=j-H:x&&($=Math.abs(u-H));var k;if(y){var Q;d?Q=(C-T)/j*($*2):Q=(C-T)/j*$,U?k=Q*U($/j):k=Q}else U?k=j*A*U($/j):k=$*T;return k+h},s};c.exports=n},8357:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(69902),a=t(23568),n=t(57355),r=t(6113),e=t(91389),s=t(55292),h=t(82985),i=t(62329),l=t(35154),u=t(17777),f=t(269),d=t(86081),p=function(x,y,T){if(y instanceof d)return y.parent=x,y;T===void 0?T=g:T=f(g,T);var C=i(y);!C&&T.targets&&(C=T.targets);for(var A=h(y),R=l(y,"delay",T.delay),M=l(y,"duration",T.duration),L=l(y,"easeParams",T.easeParams),I=l(y,"ease",T.ease),O=l(y,"hold",T.hold),D=l(y,"repeat",T.repeat),B=l(y,"repeatDelay",T.repeatDelay),V=n(y,"yoyo",T.yoyo),W=n(y,"flipX",T.flipX),Y=n(y,"flipY",T.flipY),X=l(y,"interpolation",T.interpolation),U=function(et,it,ot,nt){if(ot==="texture"){var ut=nt,ct=void 0;Array.isArray(nt)?(ut=nt[0],ct=nt[1]):nt.hasOwnProperty("value")?(ut=nt.value,Array.isArray(nt.value)?(ut=nt.value[0],ct=nt.value[1]):typeof nt.value=="string"&&(ut=nt.value)):typeof nt=="string"&&(ut=nt),et.addFrame(it,ut,ct,s(nt,"delay",R),l(nt,"duration",M),l(nt,"hold",O),l(nt,"repeat",D),l(nt,"repeatDelay",B),n(nt,"flipX",W),n(nt,"flipY",Y))}else{var pt=u(ot,nt),mt=e(l(nt,"interpolation",X));et.add(it,ot,pt.getEnd,pt.getStart,pt.getActive,r(l(nt,"ease",I),l(nt,"easeParams",L)),s(nt,"delay",R),l(nt,"duration",M),n(nt,"yoyo",V),l(nt,"hold",O),l(nt,"repeat",D),l(nt,"repeatDelay",B),n(nt,"flipX",W),n(nt,"flipY",Y),mt,mt?nt:null)}},z=new d(x,C),G=0;G<A.length;G++)for(var b=A[G].key,H=A[G].value,j=0;j<C.length;j++)b==="scale"&&!C[j].hasOwnProperty("scale")?(U(z,j,"scaleX",H),U(z,j,"scaleY",H)):U(z,j,b,H);z.completeDelay=a(y,"completeDelay",0),z.loop=Math.round(a(y,"loop",0)),z.loopDelay=Math.round(a(y,"loopDelay",0)),z.paused=n(y,"paused",!1),z.persist=n(y,"persist",!1),z.callbackScope=l(y,"callbackScope",z);for(var $=o.TYPES,k=0;k<$.length;k++){var Q=$[k],_=l(y,Q,!1);if(_){var tt=l(y,Q+"Params",[]);z.setCallback(Q,_,tt)}}return z};c.exports=p},26012:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(23568),a=t(57355),n=t(62329),r=t(35154),e=t(8357),s=t(43960),h=function(i,l){if(l instanceof s)return l.parent=i,l;var u=new s(i);u.startDelay=r(l,"delay",0),u.completeDelay=g(l,"completeDelay",0),u.loop=Math.round(g(l,"loop",r(l,"repeat",0))),u.loopDelay=Math.round(g(l,"loopDelay",r(l,"repeatDelay",0))),u.paused=a(l,"paused",!1),u.persist=a(l,"persist",!1),u.callbackScope=r(l,"callbackScope",u);var f,d=o.TYPES;for(f=0;f<d.length;f++){var p=d[f],x=r(l,p,!1);if(x){var y=r(l,p+"Params",[]);u.setCallback(p,x,y)}}var T=r(l,"tweens",null);if(Array.isArray(T)){var C=[],A=n(l),R=void 0;for(A&&(R={targets:A}),f=0;f<T.length;f++)C.push(e(u,T[f],R));u.add(C)}return u};c.exports=h},30231:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={GetBoolean:t(57355),GetEaseFunction:t(6113),GetInterpolationFunction:t(91389),GetNewValue:t(55292),GetProps:t(82985),GetTargets:t(62329),GetValueOp:t(17777),NumberTweenBuilder:t(88032),StaggerBuilder:t(93109),TweenBuilder:t(8357)}},73685:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="active"},98540:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="complete"},67233:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="loop"},2859:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="pause"},98336:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="repeat"},25764:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="resume"},32193:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="start"},84371:c=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="stop"},70766:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="update"},55659:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports="yoyo"},842:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={TWEEN_ACTIVE:t(73685),TWEEN_COMPLETE:t(98540),TWEEN_LOOP:t(67233),TWEEN_PAUSE:t(2859),TWEEN_RESUME:t(25764),TWEEN_REPEAT:t(98336),TWEEN_START:t(32193),TWEEN_STOP:t(84371),TWEEN_UPDATE:t(70766),TWEEN_YOYO:t(55659)}},43066:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={States:t(86353),Builders:t(30231),Events:t(842),TweenManager:t(40382),Tween:t(86081),TweenData:t(48177),TweenFrameData:t(42220),BaseTween:t(70402),TweenChain:t(43960)};c.exports=o},70402:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(842),n=t(86353),r=new o({Extends:g,initialize:function(s){g.call(this),this.parent=s,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=n.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(a.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(a.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(a.TWEEN_COMPLETE,"onComplete")},complete:function(e){return e===void 0&&(e=0),e?(this.setCompleteDelayState(),this.countdown=e):this.onCompleteHandler(),this},completeAfterLoop:function(e){return e===void 0&&(e=0),this.loopCounter>e&&(this.loopCounter=e),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(a.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(e){this.countdown-=e,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(e){return this.countdown-=e,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(a.TWEEN_START,"onStart"),e=0),e},updateCompleteDelay:function(e){this.countdown-=e,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(e,s,h){return h===void 0&&(h=[]),this.callbacks.hasOwnProperty(e)&&(this.callbacks[e]={func:s,params:h}),this},setPendingState:function(){this.state=n.PENDING},setActiveState:function(){this.state=n.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=n.LOOP_DELAY},setCompleteDelayState:function(){this.state=n.COMPLETE_DELAY},setStartDelayState:function(){this.state=n.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=n.PENDING_REMOVE},setRemovedState:function(){this.state=n.REMOVED},setFinishedState:function(){this.state=n.FINISHED},setDestroyedState:function(){this.state=n.DESTROYED},isPending:function(){return this.state===n.PENDING},isActive:function(){return this.state===n.ACTIVE},isLoopDelayed:function(){return this.state===n.LOOP_DELAY},isCompleteDelayed:function(){return this.state===n.COMPLETE_DELAY},isStartDelayed:function(){return this.state===n.START_DELAY},isPendingRemove:function(){return this.state===n.PENDING_REMOVE},isRemoved:function(){return this.state===n.REMOVED},isFinished:function(){return this.state===n.FINISHED},isDestroyed:function(){return this.state===n.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(e){e.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});r.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],c.exports=r},95042:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(842),a=t(86353),n=new o({initialize:function(e,s,h,i,l,u,f,d,p,x){this.tween=e,this.targetIndex=s,this.duration=i,this.totalDuration=0,this.delay=0,this.getDelay=h,this.yoyo=l,this.hold=u,this.repeat=f,this.repeatDelay=d,this.repeatCounter=0,this.flipX=p,this.flipY=x,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(r){r===void 0&&(r=this.current),this.tween.targets[this.targetIndex][this.key]=r},setCreatedState:function(){this.state=a.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=a.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=a.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=a.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=a.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=a.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=a.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=a.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===a.CREATED},isDelayed:function(){return this.state===a.DELAY},isPendingRender:function(){return this.state===a.PENDING_RENDER},isPlayingForward:function(){return this.state===a.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===a.PLAYING_BACKWARD},isHolding:function(){return this.state===a.HOLD_DELAY},isRepeating:function(){return this.state===a.REPEAT_DELAY},isComplete:function(){return this.state===a.COMPLETE},setStateFromEnd:function(r){this.yoyo?this.onRepeat(r,!0,!0):this.repeatCounter>0?this.onRepeat(r,!0,!1):this.setCompleteState()},setStateFromStart:function(r){this.repeatCounter>0?this.onRepeat(r,!1):this.setCompleteState()},reset:function(){var r=this.tween,e=r.totalTargets,s=this.targetIndex,h=r.targets[s],i=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(h,i,0,s,e,r),this.repeatCounter=this.repeat===-1?a.MAX:this.repeat,this.setPendingRenderState();var l=this.duration+this.hold;this.yoyo&&(l+=this.duration);var u=l+this.repeatDelay;this.totalDuration=this.delay+l,this.repeat===-1?(this.totalDuration+=u*a.MAX,r.isInfinite=!0):this.repeat>0&&(this.totalDuration+=u*this.repeat),this.totalDuration>r.duration&&(r.duration=this.totalDuration),this.delay<r.startDelay&&(r.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(r,e,s){var h=this.tween,i=h.totalTargets,l=this.targetIndex,u=h.targets[l],f=this.key,d=f!=="texture";if(this.elapsed=r,this.progress=r/this.duration,this.flipX&&u.toggleFlipX(),this.flipY&&u.toggleFlipY(),d&&(e||s)&&(this.start=this.getStartValue(u,f,this.start,l,i,h)),s){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,d&&(this.end=this.getEndValue(u,f,this.start,l,i,h)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-r,d&&(this.current=this.start,u[f]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});c.exports=n},69902:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};c.exports=S},81076:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(83419),a=t(842),n=t(44603),r=t(39429),e=t(36383),s=t(86353),h=t(48177),i=t(42220),l=new g({Extends:o,initialize:function(f,d){o.call(this,f),this.targets=d,this.totalTargets=d.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(u,f,d,p,x,y,T,C,A,R,M,L,I,O,D,B){var V=new h(this,u,f,d,p,x,y,T,C,A,R,M,L,I,O,D,B);return this.totalData=this.data.push(V),V},addFrame:function(u,f,d,p,x,y,T,C,A,R){var M=new i(this,u,f,d,p,x,y,T,C,A,R);return this.totalData=this.data.push(M),M},getValue:function(u){u===void 0&&(u=0);var f=null;return this.data&&(f=this.data[u].current),f},hasTarget:function(u){return this.targets&&this.targets.indexOf(u)!==-1},updateTo:function(u,f,d){if(d===void 0&&(d=!1),u!=="texture")for(var p=0;p<this.totalData;p++){var x=this.data[p];x.key===u&&(x.isPlayingForward()||x.isPlayingBackward())&&(x.end=f,d&&(x.start=x.current))}return this},restart:function(){switch(this.state){case s.REMOVED:case s.FINISHED:this.seek(),this.parent.makeActive(this);break;case s.PENDING:case s.PENDING_REMOVE:this.parent.reset(this);break;case s.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,o.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(u,f,d){if(u===void 0&&(u=0),f===void 0&&(f=16.6),d===void 0&&(d=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;d||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive");var p=this.paused;if(this.paused=!1,u>0){for(var x=Math.floor(u/f),y=u-x*f,T=0;T<x;T++)this.update(f);y>0&&this.update(y)}return this.paused=p,this.isSeeking=!1,this},initTweenData:function(u){u===void 0&&(u=!1),this.duration=0,this.startDelay=e.MAX_SAFE_INTEGER;for(var f=this.data,d=0;d<this.totalData;d++)f[d].reset(u);this.duration=Math.max(this.duration,.01);var p=this.duration,x=this.completeDelay,y=this.loopCounter,T=this.loopDelay;y>0?this.totalDuration=p+x+(p+T)*y:this.totalDuration=p+x},reset:function(u){return u===void 0&&(u=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=s.MAX),u||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")),this},update:function(u){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(u*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(u),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(u),!1;this.hasStarted||(this.startDelay-=u,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),u=0));var f=!1;if(this.isActive())for(var d=this.data,p=0;p<this.totalData;p++)d[p].update(u)&&(f=!0);this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),f||this.nextState();var x=this.isPendingRemove();return x&&this.persist&&(this.setFinishedState(),x=!1),x},forward:function(u){return this.update(u),this},rewind:function(u){return this.update(-u),this},dispatchEvent:function(u,f){if(!this.isSeeking){this.emit(u,this,this.targets);var d=this.callbacks[f];d&&d.func.apply(this.callbackScope,[this,this.targets].concat(d.params))}},destroy:function(){o.prototype.destroy.call(this),this.targets=null}});r.register("tween",function(u){return this.scene.sys.tweens.add(u)}),n.register("tween",function(u){return this.scene.sys.tweens.create(u)}),c.exports=l},43960:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(70402),a=t(83419),n=t(842),r=t(44603),e=t(39429),s=t(86353),h=new a({Extends:g,initialize:function(l){g.call(this,l),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?s.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(i){var l=this.parent.create(i);Array.isArray(l)||(l=[l]);for(var u=this.data,f=0;f<l.length;f++){var d=l[f];d.parent=this,u.push(d.reset())}return this.totalData=u.length,this},remove:function(i){return o(this.data,i),i.setRemovedState(),i===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(i){for(var l=this.data,u=0;u<this.totalData;u++)if(l[u].hasTarget(i))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(i){return i.seek(),i.setActiveState(),this},makeActive:function(i){return i.reset(),i.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var i=this.data,l=this.totalData,u=0;u<l;u++)i[u].reset(!1);this.setCurrentTween(0)},update:function(i){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;i*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(i):this.isCompleteDelayed()?this.updateCompleteDelay(i):this.isStartDelayed()&&(i=this.updateStartCountdown(i));var l=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(i)&&this.nextTween()&&this.nextState(),l=this.isPendingRemove(),l&&this.persist&&(this.setFinishedState(),l=!1)),l},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(i){this.currentIndex=i,this.currentTween=this.data[i],this.currentTween.setActiveState()},dispatchEvent:function(i,l){this.emit(i,this);var u=this.callbacks[l];u&&u.func.apply(this.callbackScope,[this].concat(u.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});e.register("tweenchain",function(i){return this.scene.sys.tweens.chain(i)}),r.register("tweenchain",function(i){return this.scene.sys.tweens.create(i)}),c.exports=h},48177:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95042),g=t(45319),a=t(83419),n=t(842),r=new a({Extends:o,initialize:function(s,h,i,l,u,f,d,p,x,y,T,C,A,R,M,L,I){o.call(this,s,h,p,x,y,T,C,A,R,M),this.key=i,this.getActiveValue=f,this.getEndValue=l,this.getStartValue=u,this.ease=d,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=L,this.interpolationData=I},reset:function(e){o.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex],h=this.key;e&&(s[h]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(s[h]=this.getActiveValue(s,h,0))},update:function(e){var s=this.tween,h=s.totalTargets,i=this.targetIndex,l=s.targets[i],u=this.key;if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(n.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(l,u,l[u],i,h,s),this.end=this.getEndValue(l,u,this.start,i,h,s),this.current=this.start,l[u]=this.start,this.setPlayingForwardState(),!0;var f=this.isPlayingForward(),d=this.isPlayingBackward();if(f||d){var p=this.elapsed,x=this.duration,y=0,T=!1;p+=e,p>=x?(y=p-x,p=x,T=!0):p<0&&(p=0);var C=g(p/x,0,1);this.elapsed=p,this.progress=C,this.previous=this.current,f||(C=1-C);var A=this.ease(C);this.interpolation?this.current=this.interpolation(this.interpolationData,A):this.current=this.start+(this.end-this.start)*A,l[u]=this.current,T&&(f?this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y):this.setStateFromStart(y)),this.dispatchEvent(n.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,s){var h=this.tween;if(!h.isSeeking){var i=h.targets[this.targetIndex],l=this.key,u=this.current,f=this.previous;h.emit(e,h,l,i,u,f);var d=h.callbacks[s];d&&d.func.apply(h.callbackScope,[h,i,l,u,f].concat(d.params))}},destroy:function(){o.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});c.exports=r},42220:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95042),g=t(45319),a=t(83419),n=t(842),r=new a({Extends:o,initialize:function(s,h,i,l,u,f,d,p,x,y,T){o.call(this,s,h,u,f,!1,d,p,x,y,T),this.key="texture",this.startTexture=null,this.endTexture=i,this.startFrame=null,this.endFrame=l,this.yoyo=p!==0},reset:function(e){o.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=s.texture.key,this.startFrame=s.frame.name),e&&s.setTexture(this.startTexture,this.startFrame)},update:function(e){var s=this.tween,h=this.targetIndex,i=s.targets[h];if(!i)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(n.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&i.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var l=this.isPlayingForward(),u=this.isPlayingBackward();if(l||u){var f=this.elapsed,d=this.duration,p=0,x=!1;f+=e,f>=d?(p=f-d,f=d,x=!0):f<0&&(f=0);var y=g(f/d,0,1);this.elapsed=f,this.progress=y,x&&(l?(i.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(p)):(i.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(p))),this.dispatchEvent(n.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,s){var h=this.tween;if(!h.isSeeking){var i=h.targets[this.targetIndex],l=this.key;h.emit(e,h,l,i);var u=h.callbacks[s];u&&u.func.apply(h.callbackScope,[h,i,l].concat(u.params))}},destroy:function(){o.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});c.exports=r},86353:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};c.exports=S},83419:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function t(r,e,s){var h=s?r[e]:Object.getOwnPropertyDescriptor(r,e);return!s&&h.value&&typeof h.value=="object"&&(h=h.value),h&&S(h)?(typeof h.enumerable>"u"&&(h.enumerable=!0),typeof h.configurable>"u"&&(h.configurable=!0),h):!1}function o(r,e){var s=Object.getOwnPropertyDescriptor(r,e);return s?(s.value&&typeof s.value=="object"&&(s=s.value),s.configurable===!1):!1}function g(r,e,s,h){for(var i in e)if(e.hasOwnProperty(i)){var l=t(e,i,s);if(l!==!1){var u=h||r;if(o(u.prototype,i)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+i+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,i,l)}else r.prototype[i]=e[i]}}function a(r,e){if(e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)g(r,e[s].prototype||e[s])}}function n(r){r||(r={});var e,s;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");e=r.initialize,delete r.initialize}else if(r.Extends){var h=r.Extends;e=function(){h.apply(this,arguments)}}else e=function(){};r.Extends?(e.prototype=Object.create(r.Extends.prototype),e.prototype.constructor=e,s=r.Extends,delete r.Extends):e.prototype.constructor=e;var i=null;return r.Mixins&&(i=r.Mixins,delete r.Mixins),a(e,i),g(e,r,!0,s),e}n.extend=g,n.mixin=a,n.ignoreFinals=!1,c.exports=n},29747:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};c.exports=S},20242:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return null};c.exports=S},71146:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n){if(n===void 0&&(n=t),g>0){var r=g-t.length;if(r<=0)return null}if(!Array.isArray(o))return t.indexOf(o)===-1?(t.push(o),a&&a.call(n,o),o):null;for(var e=o.length-1;e>=0;)t.indexOf(o[e])!==-1&&o.splice(e,1),e--;if(e=o.length,e===0)return null;g>0&&e>r&&(o.splice(r),e=r);for(var s=0;s<e;s++){var h=o[s];t.push(h),a&&a.call(n,h)}return o};c.exports=S},51067:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a,n,r){if(g===void 0&&(g=0),r===void 0&&(r=t),a>0){var e=a-t.length;if(e<=0)return null}if(!Array.isArray(o))return t.indexOf(o)===-1?(t.splice(g,0,o),n&&n.call(r,o),o):null;for(var s=o.length-1;s>=0;)t.indexOf(o[s])!==-1&&o.pop(),s--;if(s=o.length,s===0)return null;a>0&&s>e&&(o.splice(e),s=e);for(var h=s-1;h>=0;h--){var i=o[h];t.splice(g,0,i),n&&n.call(r,i)}return o};c.exports=S},66905:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.indexOf(o);return g!==-1&&g<t.length&&(t.splice(g,1),t.push(o)),o};c.exports=S},21612:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){e===void 0&&(e=0),s===void 0&&(s=a.length);var h=0;if(o(a,e,s))for(var i=e;i<s;i++){var l=a[i];l[n]===r&&h++}return h};c.exports=g},95428:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a,n=[null];for(a=3;a<arguments.length;a++)n.push(arguments[a]);for(a=0;a<t.length;a++)n[0]=t[a],o.apply(g,n);return t};c.exports=S},36914:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=a.length),o(a,e,s)){var h,i=[null];for(h=5;h<arguments.length;h++)i.push(arguments[h]);for(h=e;h<s;h++)i[0]=a[h],n.apply(r,i)}return a};c.exports=g},81957:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o.length){if(o.length===1)return o[0]}else return NaN;var a=1,n,r;if(g){if(t<o[0][g])return o[0];for(;o[a][g]<t;)a++}else for(;o[a]<t;)a++;return a>o.length&&(a=o.length),g?(n=o[a-1][g],r=o[a][g],r-t<=t-n?o[a]:o[a-1]):(n=o[a-1],r=o[a],r-t<=t-n?r:n)};c.exports=S},43491:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=[]);for(var g=0;g<t.length;g++)Array.isArray(t[g])?S(t[g],o):o.push(t[g]);return o};c.exports=S},46710:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){e===void 0&&(e=0),s===void 0&&(s=a.length);var h=[];if(o(a,e,s))for(var i=e;i<s;i++){var l=a[i];(!n||n&&r===void 0&&l.hasOwnProperty(n)||n&&r!==void 0&&l[n]===r)&&h.push(l)}return h};c.exports=g},58731:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=a.length),o(a,e,s))for(var h=e;h<s;h++){var i=a[h];if(!n||n&&r===void 0&&i.hasOwnProperty(n)||n&&r!==void 0&&i[n]===r)return i}return null};c.exports=g},26546:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=t.length);var a=o+Math.floor(Math.random()*g);return t[a]===void 0?null:t[a]};c.exports=S},85835:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),n=t.indexOf(g);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return a>n||(t.splice(a,1),n=t.indexOf(g),t.splice(n+1,0,o)),t};c.exports=S},83371:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),n=t.indexOf(g);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return a<n||(t.splice(a,1),n===0?t.unshift(o):t.splice(n,0,o)),t};c.exports=S},70864:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.indexOf(o);if(g>0){var a=t[g-1],n=t.indexOf(a);t[g]=a,t[n]=o}return t};c.exports=S},69693:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=t.indexOf(o);if(a===-1||g<0||g>=t.length)throw new Error("Supplied index out of bounds");return a!==g&&(t.splice(a,1),t.splice(g,0,o)),o};c.exports=S},40853:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.indexOf(o);if(g!==-1&&g<t.length-1){var a=t[g+1],n=t.indexOf(a);t[g]=a,t[n]=o}return t};c.exports=S},20283:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=[],r,e=!1;if((g||a)&&(e=!0,g||(g=""),a||(a="")),o<t)for(r=t;r>=o;r--)e?n.push(g+r.toString()+a):n.push(r);else for(r=t;r<=o;r++)e?n.push(g+r.toString()+a):n.push(r);return n};c.exports=S},593:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2284),g=function(a,n,r){a===void 0&&(a=0),n===void 0&&(n=null),r===void 0&&(r=1),n===null&&(n=a,a=0);for(var e=[],s=Math.max(o((n-a)/(r||1)),0),h=0;h<s;h++)e.push(a),a+=r;return e};c.exports=g},43886:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(g,a,n){var r=g[a];g[a]=g[n],g[n]=r}function t(g,a){return g<a?-1:g>a?1:0}var o=function(g,a,n,r,e){for(n===void 0&&(n=0),r===void 0&&(r=g.length-1),e===void 0&&(e=t);r>n;){if(r-n>600){var s=r-n+1,h=a-n+1,i=Math.log(s),l=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*l*(s-l)/s)*(h-s/2<0?-1:1),f=Math.max(n,Math.floor(a-h*l/s+u)),d=Math.min(r,Math.floor(a+(s-h)*l/s+u));o(g,a,f,d,e)}var p=g[a],x=n,y=r;for(S(g,n,a),e(g[r],p)>0&&S(g,n,r);x<y;){for(S(g,x,y),x++,y--;e(g[x],p)<0;)x++;for(;e(g[y],p)>0;)y--}e(g[n],p)===0?S(g,n,y):(y++,S(g,y,r)),y<=a&&(n=y+1),a<=y&&(r=y-1)}};c.exports=o},88492:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=t(33680),a=function(r,e,s){for(var h=[],i=0;i<r.length;i++)for(var l=0;l<e.length;l++)for(var u=0;u<s;u++)h.push({a:r[i],b:e[l]});return h},n=function(r,e,s){var h=o(s,"max",0),i=o(s,"qty",1),l=o(s,"random",!1),u=o(s,"randomB",!1),f=o(s,"repeat",0),d=o(s,"yoyo",!1),p=[];if(u&&g(e),f===-1)if(h===0)f=0;else{var x=r.length*e.length*i;d&&(x*=2),f=Math.ceil(h/x)}for(var y=0;y<=f;y++){var T=a(r,e,i);l&&g(T),p=p.concat(T),d&&(T.reverse(),p=p.concat(T))}return h&&p.splice(h),p};c.exports=n},72905:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,n,r,e){e===void 0&&(e=a);var s;if(!Array.isArray(n))return s=a.indexOf(n),s!==-1?(o(a,s),r&&r.call(e,n),n):null;for(var h=n.length-1,i=[];h>=0;){var l=n[h];s=a.indexOf(l),s!==-1&&(o(a,s),i.push(l),r&&r.call(e,l)),h--}return i};c.exports=g},60248:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,n,r,e){if(e===void 0&&(e=a),n<0||n>a.length-1)throw new Error("Index out of bounds");var s=o(a,n);return r&&r.call(e,s),s};c.exports=g},81409:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){if(n===void 0&&(n=0),r===void 0&&(r=a.length),s===void 0&&(s=a),o(a,n,r)){var h=r-n,i=a.splice(n,h);if(e)for(var l=0;l<i.length;l++){var u=i[l];e.call(s,u)}return i}else return[]};c.exports=g},31856:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,n,r){n===void 0&&(n=0),r===void 0&&(r=a.length);var e=n+Math.floor(Math.random()*r);return o(a,e)};c.exports=g},42169:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=t.indexOf(o),n=t.indexOf(g);return a!==-1&&n===-1?(t[a]=g,!0):!1};c.exports=S},86003:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=1);for(var g=null,a=0;a<o;a++)g=t.shift(),t.push(g);return g};c.exports=S},49498:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){o===void 0&&(o=1);for(var g=null,a=0;a<o;a++)g=t.pop(),t.unshift(g);return g};c.exports=S},82011:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){var n=t.length;if(o<0||o>n||o>=g||g>n){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};c.exports=S},89545:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){var g=t.indexOf(o);return g!==-1&&g>0&&(t.splice(g,1),t.unshift(o)),o};c.exports=S},17810:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,n,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=a.length),o(a,e,s))for(var h=e;h<s;h++){var i=a[h];i.hasOwnProperty(n)&&(i[n]=r)}return a};c.exports=g},33680:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=t.length-1;o>0;o--){var g=Math.floor(Math.random()*(o+1)),a=t[o];t[o]=t[g],t[g]=a}return t};c.exports=S},90126:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o=/\D/g;return t.sort(function(g,a){return parseInt(g.replace(o,""),10)-parseInt(a.replace(o,""),10)}),t};c.exports=S},19133:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){if(!(o>=t.length)){for(var g=t.length-1,a=t[o],n=o;n<g;n++)t[n]=t[n+1];return t.length=g,a}};c.exports=S},19186:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82264);function g(e,s){return String(e).localeCompare(s)}function a(e,s){var h=e.length;if(h<=1)return e;for(var i=new Array(h),l=1;l<h;l*=2){n(e,s,l,i);var u=e;e=i,i=u}return e}function n(e,s,h,i){var l=e.length,u=0,f=h*2,d,p,x,y,T;for(d=0;d<l;d+=f)for(p=d+h,x=p+h,p>l&&(p=l),x>l&&(x=l),y=d,T=p;;)if(y<p&&T<x)s(e[y],e[T])<=0?i[u++]=e[y++]:i[u++]=e[T++];else if(y<p)i[u++]=e[y++];else if(T<x)i[u++]=e[T++];else break}var r=function(e,s){if(s===void 0&&(s=g),!e||e.length<2)return e;if(o.features.stableSort)return e.sort(s);var h=a(e,s);return h!==e&&n(h,null,e.length,e),e};c.exports=r},25630:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),n=t.indexOf(g);if(a<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[a]=g,t[n]=o,t};c.exports=S},37105:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Matrix:t(54915),Add:t(71146),AddAt:t(51067),BringToTop:t(66905),CountAllMatching:t(21612),Each:t(95428),EachInRange:t(36914),FindClosestInSorted:t(81957),Flatten:t(43491),GetAll:t(46710),GetFirst:t(58731),GetRandom:t(26546),MoveDown:t(70864),MoveTo:t(69693),MoveUp:t(40853),MoveAbove:t(85835),MoveBelow:t(83371),NumberArray:t(20283),NumberArrayStep:t(593),QuickSelect:t(43886),Range:t(88492),Remove:t(72905),RemoveAt:t(60248),RemoveBetween:t(81409),RemoveRandomElement:t(31856),Replace:t(42169),RotateLeft:t(86003),RotateRight:t(49498),SafeRange:t(82011),SendToBack:t(89545),SetAll:t(17810),Shuffle:t(33680),SortByDigits:t(90126),SpliceOne:t(19133),StableSort:t(19186),Swap:t(25630)}},86922:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var o=t[0].length,g=1;g<t.length;g++)if(t[g].length!==o)return!1;return!0};c.exports=S},63362:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41836),g=t(86922),a=function(n){var r="";if(!g(n))return r;for(var e=0;e<n.length;e++){for(var s=0;s<n[e].length;s++){var h=n[e][s].toString();h!=="undefined"?r+=o(h,2):r+="?",s<n[e].length-1&&(r+=" |")}if(e<n.length-1){r+=`
`;for(var i=0;i<n[e].length;i++)r+="---",i<n[e].length-1&&(r+="+");r+=`
`}}return r};c.exports=a},92598:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.reverse()};c.exports=S},21224:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=0;o<t.length;o++)t[o].reverse();return t};c.exports=S},98717:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a){return o(a,180)};c.exports=g},44657:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a,n){n===void 0&&(n=1);for(var r=0;r<n;r++)a=o(a,90);return a};c.exports=g},37829:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(86922),g=t(2429),a=function(n,r){if(r===void 0&&(r=90),!o(n))return null;if(typeof r!="string"&&(r=(r%360+360)%360),r===90||r===-270||r==="rotateLeft")n=g(n),n.reverse();else if(r===-90||r===270||r==="rotateRight")n.reverse(),n=g(n);else if(Math.abs(r)===180||r==="rotate180"){for(var e=0;e<n.length;e++)n[e].reverse();n.reverse()}return n};c.exports=a},92632:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a,n){n===void 0&&(n=1);for(var r=0;r<n;r++)a=o(a,-90);return a};c.exports=g},69512:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(86003),g=t(49498),a=function(n,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),e!==0&&(e<0?o(n,Math.abs(e)):g(n,e)),r!==0)for(var s=0;s<n.length;s++){var h=n[s];r<0?o(h,Math.abs(r)):g(h,r)}return n};c.exports=a},2429:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var o=t.length,g=t[0].length,a=new Array(g),n=0;n<g;n++){a[n]=new Array(o);for(var r=o-1;r>-1;r--)a[n][r]=t[r][n]}return a};c.exports=S},54915:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={CheckMatrix:t(86922),MatrixToString:t(63362),ReverseColumns:t(92598),ReverseRows:t(21224),Rotate180:t(98717),RotateLeft:t(44657),RotateMatrix:t(37829),RotateRight:t(92632),Translate:t(69512),TransposeMatrix:t(2429)}},71334:c=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(o,g){for(var a=new Uint8Array(o),n=a.length,r=g?"data:"+g+";base64,":"",e=0;e<n;e+=3)r+=S[a[e]>>2],r+=S[(a[e]&3)<<4|a[e+1]>>4],r+=S[(a[e+1]&15)<<2|a[e+2]>>6],r+=S[a[e+2]&63];return n%3===2?r=r.substring(0,r.length-1)+"=":n%3===1&&(r=r.substring(0,r.length-2)+"=="),r};c.exports=t},53134:c=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),o=0;o<S.length;o++)t[S.charCodeAt(o)]=o;var g=function(a){a=a.substr(a.indexOf(",")+1);var n=a.length,r=n*.75,e=0,s,h,i,l;a[n-1]==="="&&(r--,a[n-2]==="="&&r--);for(var u=new ArrayBuffer(r),f=new Uint8Array(u),d=0;d<n;d+=4)s=t[a.charCodeAt(d)],h=t[a.charCodeAt(d+1)],i=t[a.charCodeAt(d+2)],l=t[a.charCodeAt(d+3)],f[e++]=s<<2|h>>4,f[e++]=(h&15)<<4|i>>2,f[e++]=(i&3)<<6|l&63;return u};c.exports=g},65839:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={ArrayBufferToBase64:t(71334),Base64ToArrayBuffer:t(53134)}},91799:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Array:t(37105),Base64:t(65839),Objects:t(1183),String:t(31749),NOOP:t(29747),NULL:t(20242)}},41786:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o={};for(var g in t)Array.isArray(t[g])?o[g]=t[g].slice(0):o[g]=t[g];return o};c.exports=S},62644:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var o,g,a;if(typeof t!="object"||t===null)return t;o=Array.isArray(t)?[]:{};for(a in t)g=t[a],o[a]=S(g);return o};c.exports=S},79291:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41212),g=function(){var a,n,r,e,s,h,i=arguments[0]||{},l=1,u=arguments.length,f=!1;for(typeof i=="boolean"&&(f=i,i=arguments[1]||{},l=2),u===l&&(i=this,--l);l<u;l++)if((a=arguments[l])!=null)for(n in a)r=i[n],e=a[n],i!==e&&(f&&e&&(o(e)||(s=Array.isArray(e)))?(s?(s=!1,h=r&&Array.isArray(r)?r:[]):h=r&&o(r)?r:{},i[n]=g(f,h,e)):e!==void 0&&(i[n]=e));return i};c.exports=g},23568:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(75508),g=t(35154),a=function(n,r,e){var s=g(n,r,null);if(s===null)return e;if(Array.isArray(s))return o.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return o.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return o.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(r);return s};c.exports=a},95540:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){var a=typeof t;return!t||a==="number"||a==="string"?g:t.hasOwnProperty(o)&&t[o]!==void 0?t[o]:g};c.exports=S},82840:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=t(45319),a=function(n,r,e,s,h){h===void 0&&(h=e);var i=o(n,r,h);return g(i,e,s)};c.exports=a},35154:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){if(!t&&!a||typeof t=="number")return g;if(t&&t.hasOwnProperty(o))return t[o];if(a&&a.hasOwnProperty(o))return a[o];if(o.indexOf(".")!==-1){for(var n=o.split("."),r=t,e=a,s=g,h=g,i=!0,l=!0,u=0;u<n.length;u++)r&&r.hasOwnProperty(n[u])?(s=r[n[u]],r=r[n[u]]):i=!1,e&&e.hasOwnProperty(n[u])?(h=e[n[u]],e=e[n[u]]):l=!1;return i?s:l?h:g}else return g};c.exports=S},69036:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){for(var g=0;g<o.length;g++)if(!t.hasOwnProperty(o[g]))return!1;return!0};c.exports=S},1985:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){for(var g=0;g<o.length;g++)if(t.hasOwnProperty(o[g]))return!0;return!1};c.exports=S},97022:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.hasOwnProperty(o)};c.exports=S},41212:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};c.exports=S},46975:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,n){var r=o(a);for(var e in n)r.hasOwnProperty(e)||(r[e]=n[e]);return r};c.exports=g},269:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,n){var r=o(a);for(var e in n)r.hasOwnProperty(e)&&(r[e]=n[e]);return r};c.exports=g},18254:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97022),g=function(a,n){for(var r={},e=0;e<n.length;e++){var s=n[e];o(a,s)&&(r[s]=a[s])}return r};c.exports=g},61622:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(o))return t[o]=g,!0;if(o.indexOf(".")!==-1){for(var a=o.split("."),n=t,r=t,e=0;e<a.length;e++)if(n.hasOwnProperty(a[e]))r=n,n=n[a[e]];else return!1;return r[a[a.length-1]]=g,!0}return!1};c.exports=S},1183:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Clone:t(41786),DeepCopy:t(62644),Extend:t(79291),GetAdvancedValue:t(23568),GetFastValue:t(95540),GetMinMaxValue:t(82840),GetValue:t(35154),HasAll:t(69036),HasAny:t(1985),HasValue:t(97022),IsPlainObject:t(41212),Merge:t(46975),MergeRight:t(269),Pick:t(18254),SetValue:t(61622)}},27902:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return t.replace(/%([0-9]+)/g,function(g,a){return o[Number(a)-1]})};c.exports=S},41836:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o,g,a){o===void 0&&(o=0),g===void 0&&(g=" "),a===void 0&&(a=3),t=t.toString();var n=0;if(o+1>=t.length)switch(a){case 1:t=new Array(o+1-t.length).join(g)+t;break;case 3:var r=Math.ceil((n=o-t.length)/2),e=n-r;t=new Array(e+1).join(g)+t+new Array(r+1).join(g);break;default:t=t+new Array(o+1-t.length).join(g);break}return t};c.exports=S},33628:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,o){return o===0?t.slice(1):t.slice(0,o)+t.slice(o+1)};c.exports=S},27671:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.split("").reverse().join("")};c.exports=S},45650:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=Math.random()*16|0,g=t==="x"?o:o&3|8;return g.toString(16)})};c.exports=S},35355:c=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t&&t[0].toUpperCase()+t.slice(1)};c.exports=S},31749:(c,S,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */c.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}}},P={};function w(c){var S=P[c];if(S!==void 0)return S.exports;var t=P[c]={exports:{}};return m[c](t,t.exports,w),t.exports}w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var F=w(85454);return F})())}(mo)),mo.exports}var yt=Wm();const Nc=Um(yt),ue={PRELOAD_SCENE:"PRELOAD_SCENE",LOADING:"LOAD_SCENE",INTRO_SCENE:"INTRO_SCENE",GAME_SCENE:"GAME_SCENE",UI_SCENE:"UI_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",AUTH_SCENE:"AUTH_SCENE",SAGE_TRIAL_SCENE:"SageTrialScene"},Bc={MAIN:"MAIN"},Rt={PLAYER:"PLAYER",POT:"POT",POT_BREAK:"POT_BREAK",SPIDER:"SPIDER",WISP:"WISP",DROW:"DROW",DAGGER:"DAGGER",SAGE:"SAGE",DUNGEON_1_BACKGROUND:"DUNGEON_1_BACKGROUND",DUNGEON_1_FOREGROUND:"DUNGEON_1_FOREGROUND",DUNGEON_1_LEVEL:"DUNGEON_1_LEVEL",COLLISION:"COLLISION",DUNGEON_OBJECTS:"DUNGEON_OBJECTS",ENEMY_DEATH:"ENEMY_DEATH",UI_DIALOG:"UI_DIALOG",UI_ICONS:"UI_ICONS",UI_CURSOR:"UI_CURSOR",WORLD_BACKGROUND:"WORLD_BACKGROUND",WORLD_FOREGROUND:"WORLD_FOREGROUND",WORLD_LEVEL:"WORLD_LEVEL",HUD_NUMBERS:"HUD_NUMBERS",FONT_PRESS_START_2P:"FONT_PRESS_START_2P"},Vt={WALK_DOWN:"player_walk_down",WALK_UP:"player_walk_up",WALK_SIDE:"player_walk_side",IDLE_DOWN:"player_idle_down",IDLE_UP:"player_idle_up",IDLE_SIDE:"player_idle_side",IDLE_HOLD_DOWN:"player_hand_in_air_down",IDLE_HOLD_UP:"player_hand_in_air_up",IDLE_HOLD_SIDE:"player_hand_in_air_side",WALK_HOLD_DOWN:"player_walk_hand_in_air_down",WALK_HOLD_UP:"player_walk_hand_in_air_up",WALK_HOLD_SIDE:"player_walk_hand_in_air_side",LIFT_DOWN:"player_open_chest_down",LIFT_UP:"player_open_chest_up",LIFT_SIDE:"player_open_chest_side",HURT_DOWN:"player_hit_down",HURT_UP:"player_hit_up",HURT_SIDE:"player_hit_side",DIE_DOWN:"player_die_down",DIE_UP:"player_die_up",DIE_SIDE:"player_die_side",SWORD_1_ATTACK_DOWN:"player_atk_1_down",SWORD_1_ATTACK_UP:"player_atk_1_up",SWORD_1_ATTACK_SIDE:"player_atk_1_side"},Fh={WALK:"spider_walk",HIT:"spider_hit",DEATH:Rt.ENEMY_DEATH},Be={WALK_DOWN:"drow_walk_down",WALK_UP:"drow_walk_up",WALK_LEFT:"drow_walk_left",WALK_RIGHT:"drow_walk_right",IDLE_DOWN:"drow_idle_down",IDLE_UP:"drow_idle_up",IDLE_SIDE:"drow_idle_right",HIT:"drow_hit",ATTACK_DOWN:"drow_atk_down",ATTACK_UP:"drow_atk_up",ATTACK_SIDE:"drow_atk_right"},zm={IDLE:"wisp_idle"},bc={HURT_DOWN:"HURT_DOWN",DIE_DOWN:"DIE_DOWN"},ao={BIG_CHEST_CLOSED:"big_chest_closed.png",SMALL_CHEST_CLOSED:"chest_closed.png",BIG_CHEST_OPEN:"big_chest_open.png",SMALL_CHEST_OPEN:"chest_open.png"},Hm={TRAP_LEFT:"trap_left.png",TRAP_RIGHT:"trap_right.png",TRAP_UP:"trap_up.png",TRAP_DOWN:"trap_down.png",BOSS_LEFT:"boss_left.png",BOSS_RIGHT:"boss_right.png",BOSS_UP:"boss_up.png",BOSS_DOWN:"boss_down.png",LOCK_LEFT:"lock_left.png",LOCK_RIGHT:"lock_right.png",LOCK_UP:"lock_up.png",LOCK_DOWN:"lock_down.png"},Of={FLOOR_SWITCH:"floor_switch.png",PLATE_SWITCH:"plate_switch.png"},Ym={SMALL_KEY:119,BOSS_KEY:121,MAP:117,COMPASS:118,NOTHING:126},Lf={LOSE_LAST_HALF:"heart_lose_last_half",LOSE_FIRST_HALF:"heart_lost_first_half"},oo={NONE:"15",FULL:"10",EMPTY:"14",HALF:"12"};var Zo,Gc;class Xm extends yt.Scene{constructor(){super({key:ue.PRELOAD_SCENE});lt(this,Zo)}preload(){this.load.pack(Bc.MAIN,"assets/data/assets.json"),this.load.image("bg-image","assets/images/ui/bg-image.png"),this.load.image("gemini-bot","assets/images/ui/chatbot-icon.png")}create(){xt(this,Zo,Gc).call(this),this.scene.start(ue.AUTH_SCENE)}}Zo=new WeakSet,Gc=function(){this.anims.createFromAseprite(Rt.HUD_NUMBERS),this.anims.createFromAseprite(Rt.PLAYER),this.anims.createFromAseprite(Rt.SPIDER),this.anims.createFromAseprite(Rt.WISP),this.anims.createFromAseprite(Rt.DROW),this.anims.create({key:Rt.ENEMY_DEATH,frames:this.anims.generateFrameNumbers(Rt.ENEMY_DEATH),frameRate:6,repeat:0,delay:0}),this.anims.create({key:Rt.POT_BREAK,frames:this.anims.generateFrameNumbers(Rt.POT_BREAK),frameRate:6,repeat:0,delay:0,hideOnComplete:!0}),this.anims.create({key:Rt.DAGGER,frames:this.anims.generateFrameNumbers(Rt.DAGGER),frameRate:16,repeat:-1,delay:0})};const Et={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"},Ji={HIDDEN:"HIDDEN",REVEALED:"REVEALED",OPEN:"OPEN"},In={AUTO:"AUTO",PICKUP:"PICKUP",OPEN:"OPEN"},Uc={WORLD:"WORLD",DUNGEON_1:"DUNGEON_1"},ho={SMALL_KEY:"SMALL_KEY",BOSS_KEY:"BOSS_KEY",MAP:"MAP",COMPASS:"COMPASS"},xo={align:"center",fontFamily:Rt.FONT_PRESS_START_2P,fontSize:8,wordWrap:{width:170},color:"#FFFFFF"},Km={SMALL_KEY:"You found a small key! You can use this to open locked doors.",BOSS_KEY:"You got the Big Key! This is the master key of the dungeon. It can open many locks that small keys cannot.",MAP:"You got the Map! You can use it to see your current position and the rest of the dungeon (Press X).",COMPASS:"You fond the Compass! Now you can pinpoint the lair of the dungeon's evil master!",NOTHING:"...The chest was empty!"};function gs(E){throw new Error(`Error! Reached forbidden guard function with unexpected value: ${JSON.stringify(E)}`)}function ms(E){return E==null?!1:E instanceof yt.Physics.Arcade.Body}function jm(E){return E in Et}function $m(E){const v=E;return v.disableObject!==void 0&&v.enableObject!==void 0}function Jm(E,v){return E.y<v.y?Et.DOWN:E.y>v.y?Et.UP:E.x<v.x?Et.RIGHT:Et.LEFT}function km(E){return E in Uc}var ua;class Fe{constructor(v,m){wt(this,"_gameObject");wt(this,"_stateMachine");lt(this,ua);this._gameObject=m,rt(this,ua,v)}get name(){return Z(this,ua)}set stateMachine(v){this._stateMachine=v}_resetObjectVelocity(){ms(this._gameObject.body)&&(this._gameObject.body.velocity.x=0,this._gameObject.body.velocity.y=0)}}ua=new WeakMap;const Pt={IDLE_STATE:"IDLE_STATE",MOVE_STATE:"MOVE_STATE",BOUNCE_MOVE_STATE:"BOUNCE_MOVE_STATE",HURT_STATE:"HURT_STATE",DEATH_STATE:"DEATH_STATE",LIFT_STATE:"LIFT_STATE",OPEN_CHEST_STATE:"OPEN_CHEST_STATE",IDLE_HOLDING_STATE:"IDLE_HOLDING_STATE",MOVE_HOLDING_STATE:"MOVE_HOLDING_STATE",THROW_STATE:"THROW_STATE",ATTACK_STATE:"ATTACK_STATE",HIDDEN_STATE:"HIDDEN_STATE",TELEPORT_STATE:"TELEPORT_STATE",PREPARE_ATTACK_STATE:"PREPARE_ATTACK_STATE"};class li{constructor(v){wt(this,"scene");wt(this,"gameObject");this.scene=v.scene,this.gameObject=v,this.assignComponentToObject(v)}static getComponent(v){return v[`_${this.name}`]}static removeComponent(v){delete v[`_${this.name}`]}assignComponentToObject(v){v[`_${this.constructor.name}`]=this}}var Un;class gn extends li{constructor(m){super(m);lt(this,Un)}get object(){return Z(this,Un)}set object(m){rt(this,Un,m)}drop(){rt(this,Un,void 0)}}Un=new WeakMap;const Zm=0,Qm=80,qm=1e3,_m=50,Hr=6,t0=1,e0=80,Df=500,Ff=1500,i0=200,s0=50,n0=2,r0=50,a0=1.2,o0=1.2,h0=500,l0=1,u0=80,f0=6,d0=3e3,c0=3e3,v0=1e3,p0=150,g0=500,m0=500,x0=1,y0=160,T0=1e3,E0=200,S0=50,C0=300,A0=200,P0=0,R0=250,M0=750,w0=250,I0=1e3,O0=1200,L0=1e3,D0=500;var Gs;class Ga extends li{constructor(m,P=()=>{}){super(m);lt(this,Gs);rt(this,Gs,P)}drop(){Z(this,Gs).call(this)}throw(m){if(!ms(this.gameObject.body)||!$m(this.gameObject)){Z(this,Gs).call(this);return}const P=this.gameObject.body;P.velocity.x=0,P.velocity.y=0;const w=C0;switch(m){case Et.DOWN:this.gameObject.y+=20,P.velocity.y=w;break;case Et.UP:P.velocity.y=w*-1;break;case Et.LEFT:P.velocity.x=w*-1;break;case Et.RIGHT:P.velocity.x=w;break;default:gs(m)}this.gameObject.enableObject(),this.gameObject.scene.time.delayedCall(A0,()=>{P.velocity.x=0,P.velocity.y=0,Z(this,Gs).call(this)})}}Gs=new WeakMap;class Vc extends Fe{constructor(v){super(Pt.IDLE_STATE,v)}onEnter(){this._gameObject.animationComponent.playAnimation(`IDLE_${this._gameObject.direction}`),this._resetObjectVelocity();const v=gn.getComponent(this._gameObject);if(v!==void 0&&v.object!==void 0){const m=Ga.getComponent(v.object);m!==void 0&&m.drop(),v.drop()}}onUpdate(){const v=this._gameObject.controls;if(!v.isMovementLocked){if(v.isAttackKeyJustDown){this._stateMachine.setState(Pt.ATTACK_STATE);return}!v.isDownDown&&!v.isUpDown&&!v.isLeftDown&&!v.isRightDown||this._stateMachine.setState(Pt.MOVE_STATE)}}}var Us;class Wc extends li{constructor(m){super(m);lt(this,Us);rt(this,Us,[])}get objects(){return Z(this,Us)}add(m){Z(this,Us).push(m)}reset(){rt(this,Us,[])}}Us=new WeakMap;var fa,da,ca;class ta extends li{constructor(m,P,w=()=>!0,F=()=>{}){super(m);lt(this,fa);lt(this,da);lt(this,ca);rt(this,fa,P),rt(this,da,F),rt(this,ca,w)}get objectType(){return Z(this,fa)}interact(){Z(this,da).call(this)}canInteractWith(){return Z(this,ca).call(this)}}fa=new WeakMap,da=new WeakMap,ca=new WeakMap;class zc extends Fe{constructor(m,P,w){super(m,P);wt(this,"_moveAnimationPrefix");this._moveAnimationPrefix=w}isNoInputMovement(m){return!m.isDownDown&&!m.isUpDown&&!m.isLeftDown&&!m.isRightDown||m.isMovementLocked}handleCharacterMovement(){const m=this._gameObject.controls;m.isUpDown?(this.updateVelocity(!1,-1),this.updateDirection(Et.UP)):m.isDownDown?(this.updateVelocity(!1,1),this.updateDirection(Et.DOWN)):this.updateVelocity(!1,0);const P=m.isDownDown||m.isUpDown;m.isLeftDown?(this.flip(!0),this.updateVelocity(!0,-1),P||this.updateDirection(Et.LEFT)):m.isRightDown?(this.flip(!1),this.updateVelocity(!0,1),P||this.updateDirection(Et.RIGHT)):this.updateVelocity(!0,0),this.normalizeVelocity()}normalizeVelocity(){ms(this._gameObject.body)&&this._gameObject.body.velocity.normalize().scale(this._gameObject.speed)}flip(m){this._gameObject.setFlipX(m)}updateVelocity(m,P){if(ms(this._gameObject.body)){if(m){this._gameObject.body.velocity.x=P;return}this._gameObject.body.velocity.y=P}}updateDirection(m){this._gameObject.direction=m,this._gameObject.animationComponent.playAnimation(`${this._moveAnimationPrefix}_${this._gameObject.direction}`)}}var Qo,Yc;class Hc extends zc{constructor(m){super(Pt.MOVE_STATE,m,"WALK");lt(this,Qo)}onUpdate(){const m=this._gameObject.controls;if(m.isAttackKeyJustDown){this._stateMachine.setState(Pt.ATTACK_STATE);return}if(this.isNoInputMovement(m)){this._stateMachine.setState(Pt.IDLE_STATE);return}xt(this,Qo,Yc).call(this,m)||this.handleCharacterMovement()}}Qo=new WeakSet,Yc=function(m){const P=Wc.getComponent(this._gameObject);if(P===void 0||P.objects.length===0)return!1;const w=P.objects[0],F=ta.getComponent(w);if(F===void 0||!m.isActionKeyJustDown||!F.canInteractWith())return!1;if(F.interact(),F.objectType===In.PICKUP)return this._stateMachine.setState(Pt.LIFT_STATE,w),!0;if(F.objectType===In.OPEN)return this._stateMachine.setState(Pt.OPEN_CHEST_STATE,w),!0;if(F.objectType===In.AUTO)return!1;gs(F.objectType)};var va;class F0 extends li{constructor(m,P){super(m);lt(this,va);rt(this,va,P)}get controls(){return Z(this,va)}}va=new WeakMap;var Vn,Vs,Ce,Ws,Wn,vn,Xc,il;const Wu=class Wu{constructor(v){lt(this,vn);lt(this,Vn);lt(this,Vs);lt(this,Ce);lt(this,Ws);lt(this,Wn);v===void 0?rt(this,Vn,Phaser.Math.RND.uuid()):rt(this,Vn,v),rt(this,Ws,!1),rt(this,Wn,[]),rt(this,Ce,void 0),rt(this,Vs,new Map)}get currentStateName(){var v;return(v=Z(this,Ce))==null?void 0:v.name}update(){const v=Z(this,Wn).shift();v!==void 0&&this.setState(v.state,v.args),Z(this,Ce)&&Z(this,Ce).onUpdate&&Z(this,Ce).onUpdate()}setState(v,...m){var w;const P="setState";if(!Z(this,Vs).has(v)){console.warn(`[${Wu.name}-${Z(this,Vn)}:${P}] tried to change to unknown state: ${v}`);return}if(!xt(this,vn,Xc).call(this,v)){if(Z(this,Ws)){Z(this,Wn).push({state:v,args:m});return}rt(this,Ws,!0),xt(this,vn,il).call(this,P,`change from ${((w=Z(this,Ce))==null?void 0:w.name)??"none"} to ${v}`),rt(this,Ce,Z(this,Vs).get(v)),Z(this,Ce).onEnter&&(xt(this,vn,il).call(this,P,`${Z(this,Ce).name} on enter invoked`),Z(this,Ce).onEnter(m)),rt(this,Ws,!1)}}addState(v){v.stateMachine=this,Z(this,Vs).set(v.name,v)}};Vn=new WeakMap,Vs=new WeakMap,Ce=new WeakMap,Ws=new WeakMap,Wn=new WeakMap,vn=new WeakSet,Xc=function(v){return Z(this,Ce)?Z(this,Ce).name===v:!1},il=function(v,m){};let el=Wu;var pa;class N0 extends li{constructor(m,P){super(m);lt(this,pa);rt(this,pa,P)}get speed(){return Z(this,pa)}}pa=new WeakMap;var zs,zn;class B0 extends li{constructor(m,P=()=>{}){super(m);lt(this,zs);lt(this,zn);rt(this,zs,Et.DOWN),rt(this,zn,P)}get direction(){return Z(this,zs)}set direction(m){rt(this,zs,m),Z(this,zn).call(this,Z(this,zs))}set callback(m){rt(this,zn,m)}}zs=new WeakMap,zn=new WeakMap;var me;class b0 extends li{constructor(m,P){super(m);lt(this,me);rt(this,me,P)}getAnimationKey(m){if(Z(this,me)[m]!==void 0)return Z(this,me)[m].key}playAnimation(m,P){if(Z(this,me)[m]===void 0){P&&P();return}const w={key:Z(this,me)[m].key,repeat:Z(this,me)[m].repeat,timeScale:1};if(P){const F=Phaser.Animations.Events.ANIMATION_COMPLETE_KEY+Z(this,me)[m].key;this.gameObject.once(F,()=>{P()})}this.gameObject.play(w,Z(this,me)[m].ignoreIfPlaying)}playAnimationInReverse(m,P){if(Z(this,me)[m]===void 0){P&&P();return}const w={key:Z(this,me)[m].key,repeat:Z(this,me)[m].repeat,timeScale:1.75};if(P){const F=Phaser.Animations.Events.ANIMATION_COMPLETE_KEY+Z(this,me)[m].key;this.gameObject.once(F,()=>{P()})}this.gameObject.playReverse(w,Z(this,me)[m].ignoreIfPlaying)}isAnimationPlaying(){return this.gameObject.anims.isPlaying}}me=new WeakMap;var Hn,ga;class G0 extends li{constructor(m,P=!1,w=0){super(m);lt(this,Hn);lt(this,ga);rt(this,Hn,P),rt(this,ga,w)}get invulnerable(){return Z(this,Hn)}set invulnerable(m){rt(this,Hn,m)}get invulnerableAfterHitAnimationDuration(){return Z(this,ga)}}Hn=new WeakMap,ga=new WeakMap;var ma,Ri;class U0 extends li{constructor(m,P,w=P){super(m);lt(this,ma);lt(this,Ri);rt(this,ma,P),rt(this,Ri,w)}get life(){return Z(this,Ri)}get maxLife(){return Z(this,ma)}takeDamage(m){Z(this,Ri)!==0&&(rt(this,Ri,Z(this,Ri)-m),Z(this,Ri)<0&&rt(this,Ri,0))}}ma=new WeakMap,Ri=new WeakMap;const Kt=new yt.Events.EventEmitter,jt={OPENED_CHEST:"OPENED_CHEST",ENEMY_DESTROYED:"ENEMY_DESTROYED",PLAYER_DEFEATED:"PLAYER_DEFEATED",PLAYER_HEALTH_UPDATED:"PLAYER_HEALTH_UPDATED",SHOW_DIALOG:"SHOW_DIALOG",DIALOG_CLOSED:"DIALOG_CLOSED",BOSS_DEFEATED:"BOSS_DEFEATED",CHAT_OPENED:"CHAT_OPENED",CHAT_CLOSED:"CHAT_CLOSED"},sl={INCREASE:"INCREASE",DECREASE:"DECREASE"};var Yn,ie,Xn,yo;const Ls=class Ls{constructor(){lt(this,Xn);lt(this,ie);rt(this,ie,{currentHealth:Hr,maxHealth:Hr,currentArea:{name:Uc.DUNGEON_1,startRoomId:3,startDoorId:3},areaDetails:{DUNGEON_1:{bossDefeated:!1},WORLD:{}}})}static get instance(){return Z(Ls,Yn)||rt(Ls,Yn,new Ls),Z(Ls,Yn)}get data(){return{...Z(this,ie)}}set data(v){rt(this,ie,{...v})}updateAreaData(v,m,P){Z(this,ie).currentArea={name:v,startDoorId:P,startRoomId:m}}updateChestData(v,m,P,w){xt(this,Xn,yo).call(this,v),Z(this,ie).areaDetails[Z(this,ie).currentArea.name][v].chests[m]={revealed:P,opened:w}}updateDoorData(v,m,P){xt(this,Xn,yo).call(this,v),Z(this,ie).areaDetails[Z(this,ie).currentArea.name][v].doors[m]={unlocked:P}}resetPlayerHealthToMin(){Z(this,ie).currentHealth=Hr}updatePlayerCurrentHealth(v){if(v===Z(this,ie).currentHealth)return;let m=sl.DECREASE;v>Z(this,ie).currentHealth&&(m=sl.INCREASE);const P={previousHealth:Z(this,ie).currentHealth,currentHealth:v,type:m};Kt.emit(jt.PLAYER_HEALTH_UPDATED,P),Z(this,ie).currentHealth=v}defeatedCurrentAreaBoss(){Z(this,ie).areaDetails[Z(this,ie).currentArea.name].bossDefeated=!0}updateSageUnlocked(v,m){xt(this,Xn,yo).call(this,v),Z(this,ie).areaDetails[Z(this,ie).currentArea.name][v].sageUnlocked=m}};Yn=new WeakMap,ie=new WeakMap,Xn=new WeakSet,yo=function(v){Z(this,ie).areaDetails[Z(this,ie).currentArea.name][v]===void 0&&(Z(this,ie).areaDetails[Z(this,ie).currentArea.name][v]={chests:{},doors:{}})},lt(Ls,Yn);let Ht=Ls;var Mi,Hs;class nn extends li{constructor(m){super(m);lt(this,Mi);lt(this,Hs);rt(this,Hs,m.scene.physics.add.body(m.x,m.y,1,1)),Z(this,Hs).enable=!1,this.assignComponentToObject(Z(this,Hs))}get weapon(){return Z(this,Mi)}set weapon(m){rt(this,Mi,m)}get body(){return Z(this,Hs)}get weaponDamage(){return Z(this,Mi)===void 0?0:Z(this,Mi).baseDamage}update(){Z(this,Mi)!==void 0&&Z(this,Mi).update()}}Mi=new WeakMap,Hs=new WeakMap;class Ua extends yt.Physics.Arcade.Sprite{constructor(m){const{scene:P,position:w,assetKey:F,frame:c,speed:S,animationConfig:t,inputComponent:o,id:g,isPlayer:a,invulnerableAfterHitAnimationDuration:n,isInvulnerable:r,maxLife:e,currentLife:s}=m,{x:h,y:i}=w;super(P,h,i,F,c||0);wt(this,"_controlsComponent");wt(this,"_speedComponent");wt(this,"_directionComponent");wt(this,"_animationComponent");wt(this,"_invulnerableComponent");wt(this,"_lifeComponent");wt(this,"_stateMachine");wt(this,"_isPlayer");wt(this,"_isDefeated");P.add.existing(this),P.physics.add.existing(this),this._controlsComponent=new F0(this,o),this._speedComponent=new N0(this,S),this._directionComponent=new B0(this),this._animationComponent=new b0(this,t),this._invulnerableComponent=new G0(this,r||!1,n),this._lifeComponent=new U0(this,e,s),this._stateMachine=new el(g),this._isPlayer=a,this._isDefeated=!1,this._isPlayer||this.disableObject()}get isDefeated(){return this._isDefeated}get isEnemy(){return!this._isPlayer}get controls(){return this._controlsComponent.controls}get speed(){return this._speedComponent.speed}get direction(){return this._directionComponent.direction}set direction(m){this._directionComponent.direction=m}get animationComponent(){return this._animationComponent}get invulnerableComponent(){return this._invulnerableComponent}get stateMachine(){return this._stateMachine}update(){this._stateMachine.update()}hit(m,P){if(!this._isDefeated&&!this._invulnerableComponent.invulnerable){if(this._lifeComponent.takeDamage(P),this._isPlayer&&Ht.instance.updatePlayerCurrentHealth(this._lifeComponent.life),this._lifeComponent.life===0){this._isDefeated=!0,this._stateMachine.setState(Pt.DEATH_STATE,m);return}this._stateMachine.setState(Pt.HURT_STATE,m)}}disableObject(){this.body.enable=!1,this.active=!1,this._isPlayer||(this.visible=!1);const m=nn.getComponent(this);m!==void 0&&m.weapon!==void 0&&m.weapon.isAttacking&&m.weapon.onCollisionCallback()}enableObject(){this._isDefeated||(this.body.enable=!0,this.active=!0,this.visible=!0)}}var es,xa,ya,qo,Kc;class zl extends Fe{constructor(m,P,w=()=>{},F=Pt.IDLE_STATE){super(Pt.HURT_STATE,m);lt(this,qo);lt(this,es);lt(this,xa);lt(this,ya);rt(this,es,P),rt(this,xa,w),rt(this,ya,F)}onEnter(m){const P=m[0];this._resetObjectVelocity();const w=gn.getComponent(this._gameObject);if(w!==void 0&&w.object!==void 0){const F=Ga.getComponent(w.object);F!==void 0&&F.drop(),w.drop()}if(ms(this._gameObject.body)){const F=this._gameObject.body;switch(P){case Et.DOWN:F.velocity.y=Z(this,es);break;case Et.UP:F.velocity.y=Z(this,es)*-1;break;case Et.LEFT:F.velocity.x=Z(this,es)*-1;break;case Et.RIGHT:F.velocity.x=Z(this,es);break;default:gs(P)}this._gameObject.scene.time.delayedCall(E0,()=>{this._resetObjectVelocity()})}this._gameObject.invulnerableComponent.invulnerable=!0,Z(this,xa).call(this),this._gameObject.animationComponent.playAnimation(bc.HURT_DOWN,()=>{xt(this,qo,Kc).call(this)})}}es=new WeakMap,xa=new WeakMap,ya=new WeakMap,qo=new WeakSet,Kc=function(){this._gameObject.scene.time.delayedCall(this._gameObject.invulnerableComponent.invulnerableAfterHitAnimationDuration,()=>{this._gameObject.invulnerableComponent.invulnerable=!1}),this._stateMachine.setState(Z(this,ya))};function jc(E,v){const m=E.scene.time.addEvent({delay:250,callback:()=>{E.setTintFill(16777215),E.setAlpha(.7),E.scene.time.addEvent({delay:150,callback:()=>{E.setTint(16777215),E.setAlpha(1),m.getOverallProgress()===1&&v&&v()}})},startAt:150,repeat:3})}var Ta,_o,$c;class Hl extends Fe{constructor(m,P=()=>{}){super(Pt.DEATH_STATE,m);lt(this,_o);lt(this,Ta);rt(this,Ta,P)}onEnter(){this._resetObjectVelocity();const m=gn.getComponent(this._gameObject);if(m!==void 0&&m.object!==void 0){const P=Ga.getComponent(m.object);P!==void 0&&P.drop(),m.drop()}this._gameObject.invulnerableComponent.invulnerable=!0,this._gameObject.body.enable=!1,this._gameObject.animationComponent.playAnimation(bc.DIE_DOWN,()=>{xt(this,_o,$c).call(this)})}}Ta=new WeakMap,_o=new WeakSet,$c=function(){this._gameObject.disableObject(),this._gameObject.isEnemy?Kt.emit(jt.ENEMY_DESTROYED):Kt.emit(jt.PLAYER_DEFEATED),Z(this,Ta).call(this)};class V0 extends Fe{constructor(v){super(Pt.LIFT_STATE,v)}onEnter(v){const m=v[0];this._resetObjectVelocity();const P=gn.getComponent(this._gameObject);if(P===void 0){this._stateMachine.setState(Pt.IDLE_STATE);return}this._gameObject.animationComponent.playAnimation(`LIFT_${this._gameObject.direction}`),P.object=m,ms(m.body)&&(m.body.enable=!1),m.setDepth(2).setOrigin(.5,.5);const w=new yt.Math.Vector2(m.x+8,m.y-8),F=new yt.Math.Vector2(m.x+8,m.y-24),c=new yt.Math.Vector2(m.x+8,m.y-24),S=new yt.Math.Vector2(this._gameObject.x,this._gameObject.y-8),t=new yt.Curves.CubicBezier(w,F,c,S),o=new yt.Curves.Path(w.x,w.y).add(t);m.setAlpha(0);const g=this._gameObject.scene.add.follower(o,w.x,w.y,m.texture).setAlpha(1);g.startFollow({delay:P0,duration:R0,onComplete:()=>{g.destroy(),m.setPosition(g.x,g.y).setAlpha(1)}})}onUpdate(){this._gameObject.animationComponent.isAnimationPlaying()||this._stateMachine.setState(Pt.IDLE_HOLDING_STATE)}}class W0 extends Fe{constructor(v){super(Pt.OPEN_CHEST_STATE,v)}onEnter(v){const m=v[0];this._gameObject.invulnerableComponent.invulnerable=!0,this._resetObjectVelocity(),this._gameObject.animationComponent.playAnimation(`LIFT_${this._gameObject.direction}`,()=>{Kt.emit(jt.OPENED_CHEST,m),Kt.once(jt.DIALOG_CLOSED,()=>{this._gameObject.invulnerableComponent.invulnerable=!1,this._stateMachine.setState(Pt.IDLE_STATE)})})}}class z0 extends Fe{constructor(v){super(Pt.IDLE_HOLDING_STATE,v)}onEnter(){this._gameObject.animationComponent.playAnimation(`IDLE_HOLD_${this._gameObject.direction}`),this._resetObjectVelocity()}onUpdate(){const v=this._gameObject.controls;if(v.isActionKeyJustDown){this._stateMachine.setState(Pt.THROW_STATE);return}!v.isDownDown&&!v.isUpDown&&!v.isLeftDown&&!v.isRightDown||this._stateMachine.setState(Pt.MOVE_HOLDING_STATE)}}class H0 extends zc{constructor(v){super(Pt.MOVE_HOLDING_STATE,v,"WALK_HOLD")}onUpdate(){const v=this._gameObject.controls;if(v.isActionKeyJustDown){this._stateMachine.setState(Pt.THROW_STATE);return}if(this.isNoInputMovement(v)){this._stateMachine.setState(Pt.IDLE_HOLDING_STATE);return}this.handleCharacterMovement();const m=gn.getComponent(this._gameObject);if(m===void 0||m.object===void 0){this._stateMachine.setState(Pt.IDLE_STATE);return}this._gameObject.direction===Et.DOWN?m.object.setPosition(this._gameObject.x+1,this._gameObject.y-2):this._gameObject.direction===Et.UP?m.object.setPosition(this._gameObject.x+1,this._gameObject.y-6):m.object.setPosition(this._gameObject.x,this._gameObject.y-8),this._gameObject.flipX&&m.object.setX(this._gameObject.x)}}class Y0 extends Fe{constructor(v){super(Pt.THROW_STATE,v)}onEnter(){this._resetObjectVelocity(),this._gameObject.animationComponent.playAnimationInReverse(`LIFT_${this._gameObject.direction}`);const v=gn.getComponent(this._gameObject);if(v===void 0||v.object===void 0)return;const m=Ga.getComponent(v.object);m!==void 0&&m.throw(this._gameObject.direction),v.drop()}onUpdate(){this._gameObject.animationComponent.isAnimationPlaying()||this._stateMachine.setState(Pt.IDLE_STATE)}}class Jc extends Fe{constructor(v){super(Pt.ATTACK_STATE,v)}onEnter(){this._resetObjectVelocity();const v=nn.getComponent(this._gameObject);if(v===void 0||v.weapon===void 0){this._stateMachine.setState(Pt.IDLE_STATE);return}const m=v.weapon;switch(this._gameObject.direction){case Et.UP:return m.attackUp();case Et.DOWN:return m.attackDown();case Et.LEFT:return m.attackLeft();case Et.RIGHT:return m.attackRight();default:gs(this._gameObject.direction)}}onUpdate(){const v=nn.getComponent(this._gameObject);if(v===void 0||v.weapon===void 0){this._stateMachine.setState(Pt.IDLE_STATE);return}v.weapon.isAttacking||this._stateMachine.setState(Pt.IDLE_STATE)}}class kc{constructor(v,m,P,w){wt(this,"_weaponComponent");wt(this,"_attacking");wt(this,"_sprite");wt(this,"_attackAnimationConfig");wt(this,"_baseDamage");this._sprite=v,this._weaponComponent=m,this._attackAnimationConfig=P,this._baseDamage=w,this._attacking=!1}get isAttacking(){return this._attacking}get baseDamage(){return this._baseDamage}attack(v){const m=this._attackAnimationConfig[v];this._attacking=!0,this._sprite.play({key:m,repeat:0},!0),this._weaponComponent.body.enable=!0,this._sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE_KEY+m,()=>{this.attackAnimationCompleteHandler()})}attackAnimationCompleteHandler(){this._attacking=!1,this._weaponComponent.body.enable=!1}update(){}onCollisionCallback(){}}class X0 extends kc{attackUp(){this._weaponComponent.body.setSize(30,18),this._weaponComponent.body.position.set(this._sprite.x-16,this._sprite.y-22),this.attack(Et.UP)}attackDown(){this._weaponComponent.body.setSize(30,18),this._sprite.flipX?this._weaponComponent.body.position.set(this._sprite.x-20,this._sprite.y+10):this._weaponComponent.body.position.set(this._sprite.x-10,this._sprite.y+10),this.attack(Et.DOWN)}attackRight(){this._weaponComponent.body.setSize(18,30),this._weaponComponent.body.position.set(this._sprite.x+10,this._sprite.y-10),this.attack(Et.RIGHT)}attackLeft(){this._weaponComponent.body.setSize(18,30),this._weaponComponent.body.position.set(this._sprite.x-30,this._sprite.y-10),this.attack(Et.LEFT)}}var Kn,is;class K0 extends Ua{constructor(m){const P={WALK_DOWN:{key:Vt.WALK_DOWN,repeat:-1,ignoreIfPlaying:!0},WALK_UP:{key:Vt.WALK_UP,repeat:-1,ignoreIfPlaying:!0},WALK_LEFT:{key:Vt.WALK_SIDE,repeat:-1,ignoreIfPlaying:!0},WALK_RIGHT:{key:Vt.WALK_SIDE,repeat:-1,ignoreIfPlaying:!0},IDLE_DOWN:{key:Vt.IDLE_DOWN,repeat:-1,ignoreIfPlaying:!0},IDLE_UP:{key:Vt.IDLE_UP,repeat:-1,ignoreIfPlaying:!0},IDLE_LEFT:{key:Vt.IDLE_SIDE,repeat:-1,ignoreIfPlaying:!0},IDLE_RIGHT:{key:Vt.IDLE_SIDE,repeat:-1,ignoreIfPlaying:!0},HURT_DOWN:{key:Vt.HURT_DOWN,repeat:0,ignoreIfPlaying:!0},HURT_UP:{key:Vt.HURT_UP,repeat:0,ignoreIfPlaying:!0},HURT_LEFT:{key:Vt.HURT_SIDE,repeat:0,ignoreIfPlaying:!0},HURT_RIGHT:{key:Vt.HURT_SIDE,repeat:0,ignoreIfPlaying:!0},DIE_DOWN:{key:Vt.DIE_DOWN,repeat:0,ignoreIfPlaying:!0},DIE_UP:{key:Vt.DIE_UP,repeat:0,ignoreIfPlaying:!0},DIE_LEFT:{key:Vt.DIE_SIDE,repeat:0,ignoreIfPlaying:!0},DIE_RIGHT:{key:Vt.DIE_SIDE,repeat:0,ignoreIfPlaying:!0},IDLE_HOLD_DOWN:{key:Vt.IDLE_HOLD_DOWN,repeat:-1,ignoreIfPlaying:!0},IDLE_HOLD_UP:{key:Vt.IDLE_HOLD_UP,repeat:-1,ignoreIfPlaying:!0},IDLE_HOLD_LEFT:{key:Vt.IDLE_HOLD_SIDE,repeat:-1,ignoreIfPlaying:!0},IDLE_HOLD_RIGHT:{key:Vt.IDLE_HOLD_SIDE,repeat:-1,ignoreIfPlaying:!0},WALK_HOLD_DOWN:{key:Vt.WALK_HOLD_DOWN,repeat:-1,ignoreIfPlaying:!0},WALK_HOLD_UP:{key:Vt.WALK_HOLD_UP,repeat:-1,ignoreIfPlaying:!0},WALK_HOLD_LEFT:{key:Vt.WALK_HOLD_SIDE,repeat:-1,ignoreIfPlaying:!0},WALK_HOLD_RIGHT:{key:Vt.WALK_HOLD_SIDE,repeat:-1,ignoreIfPlaying:!0},LIFT_DOWN:{key:Vt.LIFT_DOWN,repeat:0,ignoreIfPlaying:!0},LIFT_UP:{key:Vt.LIFT_UP,repeat:0,ignoreIfPlaying:!0},LIFT_LEFT:{key:Vt.LIFT_SIDE,repeat:0,ignoreIfPlaying:!0},LIFT_RIGHT:{key:Vt.LIFT_SIDE,repeat:0,ignoreIfPlaying:!0}};super({scene:m.scene,position:m.position,assetKey:Rt.PLAYER,frame:0,id:"player",isPlayer:!0,animationConfig:P,speed:Qm,inputComponent:m.controls,isInvulnerable:!1,invulnerableAfterHitAnimationDuration:qm,maxLife:m.maxLife,currentLife:m.currentLife});lt(this,Kn);lt(this,is);this._stateMachine.addState(new Vc(this)),this._stateMachine.addState(new Hc(this)),this._stateMachine.addState(new zl(this,_m,()=>{jc(this)})),this._stateMachine.addState(new Hl(this)),this._stateMachine.addState(new V0(this)),this._stateMachine.addState(new W0(this)),this._stateMachine.addState(new z0(this)),this._stateMachine.addState(new H0(this)),this._stateMachine.addState(new Y0(this)),this._stateMachine.addState(new Jc(this)),this._stateMachine.setState(Pt.IDLE_STATE),rt(this,Kn,new Wc(this)),new gn(this),rt(this,is,new nn(this)),Z(this,is).weapon=new X0(this,Z(this,is),{DOWN:Vt.SWORD_1_ATTACK_DOWN,UP:Vt.SWORD_1_ATTACK_UP,LEFT:Vt.SWORD_1_ATTACK_SIDE,RIGHT:Vt.SWORD_1_ATTACK_SIDE},t0),m.scene.events.on(yt.Scenes.Events.UPDATE,this.update,this),m.scene.events.once(yt.Scenes.Events.SHUTDOWN,()=>{m.scene.events.off(yt.Scenes.Events.UPDATE,this.update,this)},this),this.physicsBody.setSize(12,16,!0).setOffset(this.width/2-5,this.height/2)}get physicsBody(){return this.body}get weaponComponent(){return Z(this,is)}collidedWithGameObject(m){Z(this,Kn).add(m)}update(){super.update(),Z(this,Kn).reset(),Z(this,is).update()}}Kn=new WeakMap,is=new WeakMap;var ss,ns,Ys,Xs,Ks,js,$s,Js,ks;class ih{constructor(){lt(this,ss);lt(this,ns);lt(this,Ys);lt(this,Xs);lt(this,Ks);lt(this,js);lt(this,$s);lt(this,Js);lt(this,ks);rt(this,ss,!1),rt(this,Ys,!1),rt(this,Xs,!1),rt(this,ns,!1),rt(this,Ks,!1),rt(this,js,!1),rt(this,$s,!1),rt(this,Js,!1),rt(this,ks,!1)}get isMovementLocked(){return Z(this,ks)}set isMovementLocked(v){rt(this,ks,v)}get isUpDown(){return Z(this,ss)}get isUpJustDown(){return Z(this,ss)}set isUpDown(v){rt(this,ss,v)}get isDownDown(){return Z(this,ns)}get isDownJustDown(){return Z(this,ns)}set isDownDown(v){rt(this,ns,v)}get isLeftDown(){return Z(this,Ys)}set isLeftDown(v){rt(this,Ys,v)}get isRightDown(){return Z(this,Xs)}set isRightDown(v){rt(this,Xs,v)}get isActionKeyJustDown(){return Z(this,Ks)}set isActionKeyJustDown(v){rt(this,Ks,v)}get isAttackKeyJustDown(){return Z(this,js)}set isAttackKeyJustDown(v){rt(this,js,v)}get isSelectKeyJustDown(){return Z(this,$s)}set isSelectKeyJustDown(v){rt(this,$s,v)}get isEnterKeyJustDown(){return Z(this,Js)}set isEnterKeyJustDown(v){rt(this,Js,v)}reset(){rt(this,ns,!1),rt(this,ss,!1),rt(this,Ys,!1),rt(this,Xs,!1),rt(this,js,!1),rt(this,Ks,!1),rt(this,$s,!1),rt(this,Js,!1),rt(this,ks,!1)}}ss=new WeakMap,ns=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Ks=new WeakMap,js=new WeakMap,$s=new WeakMap,Js=new WeakMap,ks=new WeakMap;var Qe,Ea,Sa,Ca;class Zc extends ih{constructor(m){super();lt(this,Qe);lt(this,Ea);lt(this,Sa);lt(this,Ca);rt(this,Qe,m.createCursorKeys()),rt(this,Ea,m.addKey(yt.Input.Keyboard.KeyCodes.Z)),rt(this,Sa,m.addKey(yt.Input.Keyboard.KeyCodes.X)),rt(this,Ca,m.addKey(yt.Input.Keyboard.KeyCodes.ENTER))}get isUpDown(){return Z(this,Qe).up.isDown}get isUpJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Qe).up)}get isDownDown(){return Z(this,Qe).down.isDown}get isDownJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Qe).down)}get isLeftDown(){return Z(this,Qe).left.isDown}get isRightDown(){return Z(this,Qe).right.isDown}get isActionKeyJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Sa))}get isAttackKeyJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Ea))}get isSelectKeyJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Qe).shift)}get isEnterKeyJustDown(){return yt.Input.Keyboard.JustDown(Z(this,Ca))}}Qe=new WeakMap,Ea=new WeakMap,Sa=new WeakMap,Ca=new WeakMap;var pn,Qc,nl;class j0 extends Ua{constructor(m){const P={key:Fh.WALK,repeat:-1,ignoreIfPlaying:!0},w={key:Fh.HIT,repeat:0,ignoreIfPlaying:!0},F={key:Fh.DEATH,repeat:0,ignoreIfPlaying:!0},c={WALK_DOWN:P,WALK_UP:P,WALK_LEFT:P,WALK_RIGHT:P,IDLE_DOWN:P,IDLE_UP:P,IDLE_LEFT:P,IDLE_RIGHT:P,HURT_DOWN:w,HURT_UP:w,HURT_LEFT:w,HURT_RIGHT:w,DIE_DOWN:F,DIE_UP:F,DIE_LEFT:F,DIE_RIGHT:F};super({scene:m.scene,position:m.position,assetKey:Rt.SPIDER,frame:0,id:`spider-${yt.Math.RND.uuid()}`,isPlayer:!1,animationConfig:c,speed:e0,inputComponent:new ih,isInvulnerable:!1,maxLife:n0});lt(this,pn);this._directionComponent.callback=S=>{xt(this,pn,Qc).call(this,S)},this._stateMachine.addState(new Vc(this)),this._stateMachine.addState(new Hc(this)),this._stateMachine.addState(new zl(this,s0)),this._stateMachine.addState(new Hl(this)),this._stateMachine.setState(Pt.IDLE_STATE)}enableObject(){super.enableObject(),this.scene.time.addEvent({delay:yt.Math.Between(Df,Ff),callback:xt(this,pn,nl),callbackScope:this,loop:!1})}}pn=new WeakSet,Qc=function(m){switch(m){case Et.DOWN:this.setAngle(0);return;case Et.UP:this.setAngle(180);return;case Et.LEFT:this.setAngle(90);return;case Et.RIGHT:this.setAngle(270);return;default:gs(m)}},nl=function(){this.controls.reset(),this.active&&this.scene.time.delayedCall(i0,()=>{const m=yt.Math.Between(0,3);m===0?this.controls.isUpDown=!0:m===1?this.controls.isRightDown=!0:m===2?this.controls.isDownDown=!0:this.controls.isLeftDown=!0,this.scene.time.addEvent({delay:yt.Math.Between(Df,Ff),callback:xt(this,pn,nl),callbackScope:this,loop:!1})})};class $0 extends Fe{constructor(v){super(Pt.BOUNCE_MOVE_STATE,v)}onEnter(){this._gameObject.animationComponent.playAnimation(`IDLE_${this._gameObject.direction}`);const v=this._gameObject.speed,m=yt.Math.Between(0,3);m===0?this._gameObject.setVelocity(v,v*-1):m===1?this._gameObject.setVelocity(v,v):m===2?this._gameObject.setVelocity(v*-1,v):this._gameObject.setVelocity(v*-1,v*-1),this._gameObject.setBounce(1)}}class Nh extends Ua{constructor(v){const m={key:zm.IDLE,repeat:-1,ignoreIfPlaying:!0},P={IDLE_DOWN:m,IDLE_UP:m,IDLE_LEFT:m,IDLE_RIGHT:m};super({scene:v.scene,position:v.position,assetKey:Rt.WISP,frame:0,id:`wisp-${yt.Math.RND.uuid()}`,isPlayer:!1,animationConfig:P,speed:r0,inputComponent:new ih,isInvulnerable:!0,maxLife:l0}),this._stateMachine.addState(new $0(this)),this._stateMachine.setState(Pt.BOUNCE_MOVE_STATE),this.scene.tweens.add({targets:this,scaleX:a0,scaleY:o0,yoyo:!0,repeat:-1,duration:h0})}}var jn;class lo extends yt.Physics.Arcade.Sprite{constructor(m,P){super(m,P.x,P.y,Rt.POT,0);lt(this,jn);m.add.existing(this),m.physics.add.existing(this),this.setOrigin(0,1).setImmovable(!0),rt(this,jn,{x:P.x,y:P.y}),new ta(this,In.PICKUP),new Ga(this,()=>{this.break()}),this.disableObject()}disableObject(){this.body.enable=!1,this.active=!1,this.visible=!1}enableObject(){this.body.enable=!0,this.active=!0,this.visible=!0}break(){this.body.enable=!1,this.setTexture(Rt.POT_BREAK,0).play(Rt.POT_BREAK),this.once(yt.Animations.Events.ANIMATION_COMPLETE_KEY+Rt.POT_BREAK,()=>{this.setTexture(Rt.POT,0),this.disableObject()})}resetPosition(){this.scene.time.delayedCall(1,()=>{this.setPosition(Z(this,jn).x,Z(this,jn).y).setOrigin(0,1),this.enableObject()})}}jn=new WeakMap;const J0={ID:"id"},Pi={ROOMS:"rooms",SWITCHES:"switches",POTS:"pots",DOORS:"doors",CHESTS:"chests",ENEMIES:"enemies",COLLISION:"collision",ENEMY_COLLISION:"enemy_collision"},k0={COLLISION:"collision"},Ei={OPEN:"OPEN",LOCK:"LOCK",TRAP:"TRAP",BOSS:"BOSS",OPEN_ENTRANCE:"OPEN_ENTRANCE"},Yr={NONE:"NONE",ENEMIES_DEFEATED:"ENEMIES_DEFEATED",SWITCH:"SWITCH",BOSS_DEFEATED:"BOSS_DEFEATED"},ki={TARGET_DOOR_ID:"targetDoorId",TARGET_ROOM_ID:"targetRoomId",TARGET_LEVEL:"targetLevel",ID:"id",DIRECTION:"direction",DOOR_TYPE:"doorType",TRAP_DOOR_TRIGGER:"trapDoorTrigger",IS_LEVEL_TRANSITION:"isLevelTransition"},qc={SMALL_KEY:"SMALL_KEY",BOSS_KEY:"BOSS_KEY",MAP:"MAP",COMPASS:"COMPASS",NOTHING:"NOTHING"},uo={CONTENTS:"contents",ID:"id",REVEAL_CHEST_TRIGGER:"revealChestTrigger",REQUIRES_BOSS_KEY:"requiresBossKey"},Bh={TARGET_IDS:"targetIds",ACTION:"action",TEXTURE:"texture"},_c={PLATE:"PLATE",FLOOR:"FLOOR"},Ur={NOTHING:"NOTHING",OPEN_DOOR:"OPEN_DOOR",REVEAL_CHEST:"REVEAL_CHEST",REVEAL_KEY:"REVEAL_KEY"};var $n,Jn,be;const Ds=class Ds{constructor(){lt(this,Jn);lt(this,be);rt(this,Jn,{sword:!0}),rt(this,be,{DUNGEON_1:{map:!1,bossKey:!1,compass:!1,keys:0},WORLD:{map:!1,bossKey:!1,compass:!1,keys:0}})}static get instance(){return Z(Ds,$n)||rt(Ds,$n,new Ds),Z(Ds,$n)}get data(){return{general:{...Z(this,Jn)},area:{...Z(this,be)}}}set data(v){rt(this,be,{...v.area}),rt(this,Jn,{...v.general})}addDungeonItem(v,m){switch(m){case ho.MAP:Z(this,be)[v].map=!0;return;case ho.COMPASS:Z(this,be)[v].compass=!0;return;case ho.BOSS_KEY:Z(this,be)[v].bossKey=!0;return;case ho.SMALL_KEY:Z(this,be)[v].keys+=1;return;default:gs(m)}}getAreaInventory(v){return{...Z(this,be)[v]}}useAreaSmallKey(v){Z(this,be)[v].keys>0&&(Z(this,be)[v].keys-=1)}};$n=new WeakMap,Jn=new WeakMap,be=new WeakMap,lt(Ds,$n);let On=Ds;var qe,Zs,Aa,kn,Pa;class Z0 extends yt.Physics.Arcade.Image{constructor(m,P,w=Ji.HIDDEN){const F=P.requiresBossKey?ao.BIG_CHEST_CLOSED:ao.SMALL_CHEST_CLOSED;super(m,P.x,P.y,Rt.DUNGEON_OBJECTS,F);lt(this,qe);lt(this,Zs);lt(this,Aa);lt(this,kn);lt(this,Pa);if(m.add.existing(this),m.physics.add.existing(this),this.setOrigin(0,1).setImmovable(!0),rt(this,qe,w),rt(this,Zs,P.requiresBossKey),rt(this,Aa,P.id),rt(this,kn,P.revealChestTrigger),rt(this,Pa,P.contents),Z(this,Zs)&&this.body.setSize(32,24).setOffset(0,8),new ta(this,In.OPEN,()=>Z(this,Zs)?!!On.instance.getAreaInventory(Ht.instance.data.currentArea.name).bossKey:!0,()=>{this.open()}),Z(this,kn)===Yr.NONE){Z(this,qe)===Ji.HIDDEN&&rt(this,qe,Ji.REVEALED);return}this.disableObject()}get revealTrigger(){return Z(this,kn)}get id(){return Z(this,Aa)}get contents(){return Z(this,Pa)}open(){if(Z(this,qe)!==Ji.REVEALED)return;rt(this,qe,Ji.OPEN);const m=Z(this,Zs)?ao.BIG_CHEST_OPEN:ao.SMALL_CHEST_OPEN;this.setFrame(m),ta.removeComponent(this)}disableObject(){this.body.enable=!1,this.active=!1,this.visible=!1}enableObject(){Z(this,qe)!==Ji.HIDDEN&&(this.body.enable=!0,this.active=!0,this.visible=!0)}reveal(){Z(this,qe)===Ji.HIDDEN&&(rt(this,qe,Ji.REVEALED),this.enableObject())}}qe=new WeakMap,Zs=new WeakMap,Aa=new WeakMap,kn=new WeakMap,Pa=new WeakMap;const Q0={TYPE:"type"};function q0(E){if(typeof E!="object"||E===null||E===void 0)return!1;const v=E;return v.name!==void 0&&v.type!==void 0&&v.value!==void 0}function _0(E){const v=[];return typeof E!="object"||E===null||E===void 0||!Array.isArray(E)||E.forEach(m=>{q0(m)&&v.push(m)}),v}function pe(E,v){const m=E.find(P=>P.name===v);if(m!==void 0)return m.value}function vr(E,v){const m=[],P=E.getObjectLayer(v);return P&&P.objects.forEach(F=>{F.x===void 0||F.y===void 0||F.width===void 0||F.height===void 0||m.push({x:F.x,y:F.y,width:F.width,height:F.height,properties:_0(F.properties)})}),m}function tx(E,v){const m=[];return vr(E,v).forEach(w=>{const F=pe(w.properties,J0.ID);F!==void 0&&m.push({x:w.x,y:w.y,width:w.width,height:w.height,id:F})}),m}function ex(E,v){return E.getObjectLayerNames().filter(m=>m.startsWith(`${v}/`)).filter(m=>m.split("/").length===3)}function ix(E,v){const m=[];return vr(E,v).forEach(w=>{const F=pe(w.properties,ki.ID),c=pe(w.properties,ki.TARGET_DOOR_ID),S=pe(w.properties,ki.DIRECTION),t=pe(w.properties,ki.DOOR_TYPE),o=pe(w.properties,ki.TRAP_DOOR_TRIGGER),g=pe(w.properties,ki.IS_LEVEL_TRANSITION),a=pe(w.properties,ki.TARGET_LEVEL),n=pe(w.properties,ki.TARGET_ROOM_ID);F===void 0||c===void 0||S===void 0||t===void 0||o===void 0||g===void 0||a===void 0||n===void 0||!jm(S)||!sx(t)||!tv(o)||m.push({x:w.x,y:w.y,width:w.width,height:w.height,id:F,targetDoorId:c,direction:S,doorType:t,trapDoorTrigger:o,isLevelTransition:g,targetLevel:a,targetRoomId:n,isUnlocked:!1})}),m}function sx(E){return E in Ei}function tv(E){return E in Yr}function nx(E,v){const m=[];return vr(E,v).forEach(w=>{m.push({x:w.x,y:w.y,width:w.width,height:w.height})}),m}function rx(E,v){const m=[];return vr(E,v).forEach(w=>{const F=pe(w.properties,uo.CONTENTS),c=pe(w.properties,uo.ID),S=pe(w.properties,uo.REVEAL_CHEST_TRIGGER),t=pe(w.properties,uo.REQUIRES_BOSS_KEY);F===void 0||c===void 0||S===void 0||t===void 0||!tv(S)||!ax(F)||m.push({x:w.x,y:w.y,width:w.width,height:w.height,id:c,revealChestTrigger:S,contents:F,requiresBossKey:t})}),m}function ax(E){return E in qc}function ox(E,v){const m=[];return vr(E,v).forEach(w=>{const F=pe(w.properties,Q0.TYPE);F!==void 0&&m.push({x:w.x,y:w.y,width:w.width,height:w.height,type:F})}),m}function hx(E,v){const m=[];return vr(E,v).forEach(w=>{const F=pe(w.properties,Bh.ACTION),c=pe(w.properties,Bh.TARGET_IDS),S=pe(w.properties,Bh.TEXTURE);F===void 0||c===void 0||S===void 0||!ux(F)||!lx(S)||m.push({x:w.x,y:w.y,width:w.width,height:w.height,action:F,targetIds:c.split(",").map(t=>parseInt(t,10)),texture:S})}),m}function lx(E){return E in _c}function ux(E){return E in Ur}var Qs,Ra,Ma,wa,Zn,Ia,Oa,gi,Wl,qs,La,Qn,Ge,Da,mi;class fx{constructor(v,m,P){lt(this,Qs);lt(this,Ra);lt(this,Ma);lt(this,wa);lt(this,Zn);lt(this,Ia);lt(this,Oa);lt(this,gi);lt(this,Wl);lt(this,qs);lt(this,La);lt(this,Qn);lt(this,Ge);lt(this,Da);lt(this,mi);if(rt(this,Qs,v),rt(this,La,m.id),rt(this,Ra,P),rt(this,Ma,m.targetDoorId),rt(this,wa,m.targetRoomId),rt(this,Oa,m.targetLevel),rt(this,Zn,m.x),rt(this,Ia,m.y),rt(this,qs,m.direction),rt(this,mi,m.doorType),rt(this,Qn,m.isUnlocked),rt(this,Da,m.trapDoorTrigger),rt(this,gi,Z(this,Qs).add.zone(m.x,m.y,m.width,m.height).setOrigin(0,1).setName(m.id.toString(10))),Z(this,Qs).physics.world.enable(Z(this,gi)),Z(this,mi)!==Ei.OPEN&&Z(this,mi)!==Ei.OPEN_ENTRANCE){const w=Hm[`${Z(this,mi)}_${Z(this,qs)}`],F=Z(this,Qs).physics.add.image(Z(this,Zn),this.y,Rt.DUNGEON_OBJECTS,w).setImmovable(!0).setName(m.id.toString(10));switch(Z(this,qs)){case Et.UP:F.setOrigin(0,.5);break;case Et.DOWN:F.setOrigin(0,.75);break;case Et.LEFT:F.setOrigin(.25,1);break;case Et.RIGHT:F.setOrigin(.5,1);break}rt(this,Ge,F)}this.disableObject()}get x(){return Z(this,Zn)}get y(){return Z(this,Ia)}get roomId(){return Z(this,Ra)}get targetRoomId(){return Z(this,wa)}get targetDoorId(){return Z(this,Ma)}get doorTransitionZone(){return Z(this,gi)}get targetLevel(){return Z(this,Oa)}get direction(){return Z(this,qs)}get doorObject(){return Z(this,Ge)}get id(){return Z(this,La)}get trapDoorTrigger(){return Z(this,Da)}get doorType(){return Z(this,mi)}disableObject(v=!0){v&&(Z(this,gi).body.enable=!1,Z(this,gi).active=!0),Z(this,Ge)!==void 0&&(Z(this,Ge).body.enable=!1,Z(this,Ge).active=!1,Z(this,Ge).visible=!1)}enableObject(){Z(this,gi).body.enable=!0,Z(this,gi).active=!0,!Z(this,Qn)&&Z(this,Ge)!==void 0&&(Z(this,Ge).body.enable=!0,Z(this,Ge).active=!0,Z(this,Ge).visible=!0)}open(){(Z(this,mi)===Ei.LOCK||Z(this,mi)===Ei.BOSS)&&rt(this,Qn,!0),this.disableObject(!1)}}Qs=new WeakMap,Ra=new WeakMap,Ma=new WeakMap,wa=new WeakMap,Zn=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,gi=new WeakMap,Wl=new WeakMap,qs=new WeakMap,La=new WeakMap,Qn=new WeakMap,Ge=new WeakMap,Da=new WeakMap,mi=new WeakMap;var Fa,Na;class dx extends yt.Physics.Arcade.Image{constructor(m,P){const w=P.texture===_c.FLOOR?Of.FLOOR_SWITCH:Of.PLATE_SWITCH;super(m,P.x,P.y,Rt.DUNGEON_OBJECTS,w);lt(this,Fa);lt(this,Na);m.add.existing(this),m.physics.add.existing(this),this.setOrigin(0,1).setImmovable(!0),rt(this,Fa,P.targetIds),rt(this,Na,P.action),this.disableObject()}press(){return this.disableObject(),{action:Z(this,Na),targetIds:Z(this,Fa)}}disableObject(){this.body.enable=!1,this.active=!1,this.visible=!1}enableObject(){this.body.enable=!0,this.active=!0,this.visible=!0}}Fa=new WeakMap,Na=new WeakMap;class cx extends Fe{constructor(v){super(Pt.HIDDEN_STATE,v)}onEnter(){this._gameObject.disableObject(),this._gameObject.scene.time.delayedCall(v0,()=>{this._gameObject.enableObject(),this._stateMachine.setState(Pt.TELEPORT_STATE)})}}class vx extends Fe{constructor(v){super(Pt.PREPARE_ATTACK_STATE,v)}onEnter(){const v=this._gameObject.scene.player,P=new yt.Math.Vector2(v.x-this._gameObject.x,v.y-this._gameObject.y).angle(),w=yt.Math.RadToDeg(P);this._gameObject.setFlipX(!1),w>=45&&w<135?this._gameObject.direction=Et.DOWN:w>=135&&w<225?(this._gameObject.setFlipX(!0),this._gameObject.direction=Et.LEFT):w>=225&&w<315?this._gameObject.direction=Et.UP:this._gameObject.direction=Et.RIGHT,this._gameObject.direction===Et.DOWN||this._gameObject.direction===Et.UP?this._gameObject.setX(v.x):this._gameObject.setY(v.y),this._gameObject.animationComponent.playAnimation(`IDLE_${this._gameObject.direction}`),this._gameObject.scene.time.delayedCall(m0,()=>{this._stateMachine.setState(Pt.ATTACK_STATE)})}}var rs,th,ev;class px extends Fe{constructor(m,P){super(Pt.TELEPORT_STATE,m);lt(this,th);lt(this,rs);rt(this,rs,P)}onEnter(){this._gameObject.invulnerableComponent.invulnerable=!0;const m=this._gameObject.scene.time.addEvent({delay:p0,callback:()=>{if(m.getOverallProgress()===1){xt(this,th,ev).call(this);return}this._gameObject.direction=Et.DOWN,this._gameObject.animationComponent.playAnimation(`IDLE_${this._gameObject.direction}`);const P=Z(this,rs)[m.repeatCount%Z(this,rs).length];this._gameObject.setPosition(P.x,P.y)},callbackScope:this,repeat:Z(this,rs).length*3-1})}}rs=new WeakMap,th=new WeakSet,ev=function(){this._gameObject.visible=!1,this._gameObject.scene.time.delayedCall(g0,()=>{const m=yt.Utils.Array.GetRandom(Z(this,rs));this._gameObject.setPosition(m.x,m.y),this._gameObject.visible=!0,this._gameObject.invulnerableComponent.invulnerable=!1,this._stateMachine.setState(Pt.PREPARE_ATTACK_STATE)})};class gx extends Fe{constructor(v){super(Pt.IDLE_STATE,v)}onEnter(){this._gameObject.animationComponent.playAnimation(`IDLE_${this._gameObject.direction}`),this._gameObject.scene.time.delayedCall(c0,()=>{this._stateMachine.currentStateName===Pt.IDLE_STATE&&this._stateMachine.setState(Pt.TELEPORT_STATE)})}}var He,as;class mx extends kc{constructor(m,P,w,F,c){super(m,P,w,F);lt(this,He);lt(this,as);rt(this,He,m.scene.add.sprite(0,0,Rt.DAGGER,0).setVisible(!1).setOrigin(0,1).play(Rt.DAGGER)),rt(this,as,c),this._weaponComponent.body.setSize(Z(this,He).width,Z(this,He).height)}attackUp(){this._weaponComponent.body.position.set(this._sprite.x-8,this._sprite.y-25),this._weaponComponent.body.setVelocityY(Z(this,as)*-1),Z(this,He).setPosition(this._weaponComponent.body.position.x,this._weaponComponent.body.y).setVisible(!0).setOrigin(0,0).setAngle(0).setFlipY(!1),this.attack(Et.UP)}attackDown(){this._weaponComponent.body.position.set(this._sprite.x-7,this._sprite.y+20),this._weaponComponent.body.setVelocityY(Z(this,as)),Z(this,He).setPosition(this._weaponComponent.body.position.x,this._weaponComponent.body.y).setVisible(!0).setOrigin(1,1).setAngle(180).setFlipY(!1),this.attack(Et.DOWN)}attackRight(){this._weaponComponent.body.position.set(this._sprite.x+10,this._sprite.y-5),this._weaponComponent.body.setVelocityX(Z(this,as)),Z(this,He).setPosition(this._weaponComponent.body.position.x,this._weaponComponent.body.y).setVisible(!0).setOrigin(0,1).setAngle(90).setFlipY(!1),this.attack(Et.RIGHT)}attackLeft(){this._weaponComponent.body.position.set(this._sprite.x-25,this._sprite.y-5),this._weaponComponent.body.setVelocityX(Z(this,as)*-1),Z(this,He).setPosition(this._weaponComponent.body.position.x,this._weaponComponent.body.y).setVisible(!0).setOrigin(0,1).setAngle(90).setFlipY(!0),this.attack(Et.LEFT)}update(){Z(this,He).setPosition(this._weaponComponent.body.position.x,this._weaponComponent.body.position.y)}attackAnimationCompleteHandler(){super.attackAnimationCompleteHandler(),Z(this,He).setVisible(!1),this._weaponComponent.body.setVelocityX(0),this._weaponComponent.body.setVelocityY(0)}onCollisionCallback(){this.attackAnimationCompleteHandler()}}He=new WeakMap,as=new WeakMap;var _s;class xx extends Ua{constructor(m){const P={key:Be.HIT,repeat:0,ignoreIfPlaying:!0},w={WALK_DOWN:{key:Be.WALK_DOWN,repeat:-1,ignoreIfPlaying:!0},WALK_UP:{key:Be.WALK_UP,repeat:-1,ignoreIfPlaying:!0},WALK_LEFT:{key:Be.WALK_LEFT,repeat:-1,ignoreIfPlaying:!0},WALK_RIGHT:{key:Be.WALK_RIGHT,repeat:-1,ignoreIfPlaying:!0},HURT_DOWN:P,HURT_UP:P,HURT_LEFT:P,HURT_RIGHT:P,IDLE_DOWN:{key:Be.IDLE_DOWN,repeat:-1,ignoreIfPlaying:!0},IDLE_UP:{key:Be.IDLE_UP,repeat:-1,ignoreIfPlaying:!0},IDLE_LEFT:{key:Be.IDLE_SIDE,repeat:-1,ignoreIfPlaying:!0},IDLE_RIGHT:{key:Be.IDLE_SIDE,repeat:-1,ignoreIfPlaying:!0}};super({scene:m.scene,position:m.position,assetKey:Rt.DROW,frame:0,id:`drow-${yt.Math.RND.uuid()}`,isPlayer:!1,animationConfig:w,speed:u0,inputComponent:new ih,isInvulnerable:!1,maxLife:f0});lt(this,_s);rt(this,_s,new nn(this)),Z(this,_s).weapon=new mx(this,Z(this,_s),{DOWN:Be.ATTACK_DOWN,UP:Be.ATTACK_UP,LEFT:Be.ATTACK_SIDE,RIGHT:Be.ATTACK_SIDE},x0,y0),this._stateMachine.addState(new gx(this)),this._stateMachine.addState(new cx(this)),this._stateMachine.addState(new vx(this)),this._stateMachine.addState(new px(this,[new yt.Math.Vector2(this.scene.scale.width/2,80),new yt.Math.Vector2(64,180),new yt.Math.Vector2(192,180)])),this._stateMachine.addState(new Jc(this)),this._stateMachine.addState(new zl(this,S0,void 0,Pt.TELEPORT_STATE)),this._stateMachine.addState(new Hl(this,()=>{this.visible=!0,jc(this,()=>{const F=this.postFX.addWipe(.1,0,1);this.scene.add.tween({targets:F,progress:1,duration:d0,onComplete:()=>{this.visible=!1,Kt.emit(jt.BOSS_DEFEATED)}})})})),this.setScale(1.25),this.physicsBody.setSize(12,24,!0).setOffset(this.displayWidth/4,this.displayHeight/4-3)}get physicsBody(){return this.body}update(){super.update(),Z(this,_s).update()}enableObject(){super.enableObject(),!this._isDefeated&&this._stateMachine.currentStateName===void 0&&(this.visible=!1,this.scene.time.delayedCall(T0,()=>{this.visible=!0,this._stateMachine.setState(Pt.HIDDEN_STATE)}))}}_s=new WeakMap;var eh,qn,_n;class yx extends yt.Physics.Arcade.Sprite{constructor(m,P,w){super(m,P.x,P.y,Rt.SAGE);lt(this,eh);lt(this,qn);lt(this,_n,!1);m.add.existing(this),m.physics.add.existing(this),this.setOrigin(0,1).setImmovable(!0).setDepth(1);const F=this.scene.textures.get(Rt.SAGE);if(F){const S=Math.min(32/F.source[0].width,32/F.source[0].height);this.setScale(S)}else this.setScale(.3);this.body&&this.body.setSize(24,24),rt(this,eh,{x:P.x,y:P.y}),rt(this,qn,w),new ta(this,In.AUTO,()=>!0,()=>{this.interact()}),this.disableObject()}get roomId(){return Z(this,qn)}get hasInteracted(){return Z(this,_n)}disableObject(){this.body.enable=!1,this.active=!1,this.visible=!1}enableObject(){this.body.enable=!0,this.active=!0,this.visible=!0}interact(){Z(this,_n)||(console.log("Sage interact() called"),rt(this,_n,!0),Ht.instance.updateSageUnlocked(Z(this,qn),!0))}}eh=new WeakMap,qn=new WeakMap,_n=new WeakMap;var Ae,wi,Qt,_e,St,ti,os,tr,oe,er,ir,hs,sr,nr,Tt,iv,sv,rl,nv,rv,av,ov,hv,lv,uv,fv,dv,cv,vv,pv,To,al,ol,gv,hl,ll,ul,fl,dl;class Tx extends yt.Scene{constructor(){super({key:ue.GAME_SCENE});lt(this,Tt);lt(this,Ae);lt(this,wi);lt(this,Qt);lt(this,_e);lt(this,St);lt(this,ti);lt(this,os);lt(this,tr);lt(this,oe);lt(this,er);lt(this,ir);lt(this,hs);lt(this,sr);lt(this,nr)}get player(){return Z(this,Qt)}init(m){rt(this,Ae,m),rt(this,oe,m.roomId)}create(){if(!this.input.keyboard){console.warn("Phaser keyboard plugin is not setup properly.");return}if(rt(this,wi,new Zc(this.input.keyboard)),xt(this,Tt,nv).call(this),Z(this,ti)===void 0||Z(this,os)===void 0){console.warn("Missing required collision layers for game.");return}xt(this,Tt,ol).call(this,Z(this,Ae).roomId),xt(this,Tt,av).call(this),xt(this,Tt,rv).call(this),rt(this,hs,this.add.image(0,0,Rt.UI_ICONS,0).setVisible(!1).setOrigin(0,1)),this.input.keyboard&&rt(this,nr,this.input.keyboard.addKey(yt.Input.Keyboard.KeyCodes.S)),xt(this,Tt,iv).call(this),xt(this,Tt,sv).call(this),this.scene.launch(ue.UI_SCENE)}update(){var m;Z(this,nr)&&yt.Input.Keyboard.JustDown(Z(this,nr))&&(console.log("S key pressed, transitioning to Sage Trial Scene"),(((m=Z(this,St)[Z(this,oe)])==null?void 0:m.sages)||[]).forEach(w=>{w.hasInteracted||w.interact()}),this.scene.start(ue.SAGE_TRIAL_SCENE))}}Ae=new WeakMap,wi=new WeakMap,Qt=new WeakMap,_e=new WeakMap,St=new WeakMap,ti=new WeakMap,os=new WeakMap,tr=new WeakMap,oe=new WeakMap,er=new WeakMap,ir=new WeakMap,hs=new WeakMap,sr=new WeakMap,nr=new WeakMap,Tt=new WeakSet,iv=function(){Z(this,ti).setCollision([Z(this,ti).tileset[0].firstgid]),Z(this,os).setCollision([Z(this,ti).tileset[0].firstgid]),this.physics.add.collider(Z(this,Qt),Z(this,ti)),this.physics.add.overlap(Z(this,Qt),Z(this,tr),(m,P)=>{xt(this,Tt,vv).call(this,P)}),this.physics.add.collider(Z(this,Qt),Z(this,_e),(m,P)=>{Z(this,Qt).collidedWithGameObject(P)}),this.physics.add.overlap(Z(this,Qt),Z(this,ir),(m,P)=>{xt(this,Tt,pv).call(this,P)}),this.physics.add.collider(Z(this,Qt),Z(this,sr),(m,P)=>{const w=P;Z(this,Qt).collidedWithGameObject(w)}),this.physics.add.collider(Z(this,Qt),Z(this,er),(m,P)=>{const w=P,F=Z(this,St)[Z(this,oe)].doorMap[parseInt(w.name,10)];if(F.doorType!==Ei.LOCK&&F.doorType!==Ei.BOSS)return;const c=On.instance.getAreaInventory(Z(this,Ae).level);if(F.doorType===Ei.LOCK){c.keys>0&&(On.instance.useAreaSmallKey(Z(this,Ae).level),F.open(),Ht.instance.updateDoorData(Z(this,oe),F.id,!0));return}c.bossKey&&(Ht.instance.updateDoorData(Z(this,oe),F.id,!0),F.open())}),Object.keys(Z(this,St)).forEach(m=>{const P=parseInt(m,10);if(Z(this,St)[P]!==void 0){if(Z(this,St)[P].enemyGroup!==void 0){this.physics.add.collider(Z(this,St)[P].enemyGroup,Z(this,os)),this.physics.add.overlap(Z(this,Qt),Z(this,St)[P].enemyGroup,()=>{Z(this,Qt).hit(Et.DOWN,1)}),this.physics.add.collider(Z(this,St)[P].enemyGroup,Z(this,_e),(F,c)=>{if(c instanceof lo&&ms(c.body)&&(c.body.velocity.x!==0||c.body.velocity.y!==0)){const S=F;S instanceof Ua&&(S.hit(Z(this,Qt).direction,1),c.break())}},(F,c)=>{const S=c.body;return!(F instanceof Nh&&ms(S)&&(S.velocity.x!==0||S.velocity.y!==0))}),this.physics.add.overlap(Z(this,St)[P].enemyGroup,Z(this,Qt).weaponComponent.body,F=>{F.hit(Z(this,Qt).direction,Z(this,Qt).weaponComponent.weaponDamage)});const w=Z(this,St)[P].enemyGroup.getChildren().flatMap(F=>{const c=nn.getComponent(F);return c!==void 0?[c.body]:[]});w.length>0&&this.physics.add.overlap(w,Z(this,Qt),F=>{const c=nn.getComponent(F);c===void 0||c.weapon===void 0||(c.weapon.onCollisionCallback(),Z(this,Qt).hit(Et.DOWN,c.weaponDamage))})}Z(this,St)[P].pots.length>0&&(this.physics.add.collider(Z(this,St)[P].pots,Z(this,_e),w=>{w instanceof lo&&w.break()}),this.physics.add.collider(Z(this,St)[P].pots,Z(this,ti),w=>{w instanceof lo&&w.break()}))}})},sv=function(){Kt.on(jt.OPENED_CHEST,xt(this,Tt,rl),this),Kt.on(jt.ENEMY_DESTROYED,xt(this,Tt,To),this),Kt.on(jt.PLAYER_DEFEATED,xt(this,Tt,hl),this),Kt.on(jt.DIALOG_CLOSED,xt(this,Tt,ll),this),Kt.on(jt.BOSS_DEFEATED,xt(this,Tt,ul),this),Kt.on(jt.CHAT_OPENED,xt(this,Tt,fl),this),Kt.on(jt.CHAT_CLOSED,xt(this,Tt,dl),this),this.events.once(yt.Scenes.Events.SHUTDOWN,()=>{Kt.off(jt.OPENED_CHEST,xt(this,Tt,rl),this),Kt.off(jt.ENEMY_DESTROYED,xt(this,Tt,To),this),Kt.off(jt.PLAYER_DEFEATED,xt(this,Tt,hl),this),Kt.off(jt.DIALOG_CLOSED,xt(this,Tt,ll),this),Kt.off(jt.BOSS_DEFEATED,xt(this,Tt,ul),this),Kt.off(jt.CHAT_OPENED,xt(this,Tt,fl),this),Kt.off(jt.CHAT_CLOSED,xt(this,Tt,dl),this)})},rl=function(m){Ht.instance.updateChestData(Z(this,oe),m.id,!0,!0),m.contents!==qc.NOTHING&&On.instance.addDungeonItem(Z(this,Ae).level,m.contents),Z(this,hs).setFrame(Ym[m.contents]).setVisible(!0).setPosition(m.x,m.y),this.tweens.add({targets:Z(this,hs),y:Z(this,hs).y-16,duration:500,onComplete:()=>{Kt.emit(jt.SHOW_DIALOG,Km[m.contents]),this.scene.pause()}})},nv=function(){this.add.image(0,0,Rt[`${Z(this,Ae).level}_BACKGROUND`],0).setOrigin(0),this.add.image(0,0,Rt[`${Z(this,Ae).level}_FOREGROUND`],0).setOrigin(0).setDepth(2);const m=this.make.tilemap({key:Rt[`${Z(this,Ae).level}_LEVEL`]}),P=m.addTilesetImage(k0.COLLISION,Rt.COLLISION);if(P===null){console.log("encountered error while creating collision tiles from tiled");return}const w=m.createLayer(Pi.COLLISION,P,0,0);if(w===null){console.log("encountered error while creating collision layer using data from tiled");return}rt(this,ti,w),Z(this,ti).setDepth(2).setAlpha(Zm);const F=m.createLayer(Pi.ENEMY_COLLISION,P,0,0);if(F===null){console.log("encountered error while creating enemy collision layer using data from tiled");return}rt(this,os,F),Z(this,os).setDepth(2).setVisible(!1),rt(this,St,{}),rt(this,tr,this.add.group([])),rt(this,_e,this.add.group([])),rt(this,er,this.add.group([])),rt(this,ir,this.add.group([])),rt(this,sr,this.add.group([])),xt(this,Tt,ov).call(this,m,Pi.ROOMS);const c=ex(m,Pi.ROOMS).map(n=>({name:n,roomId:parseInt(n.split("/")[1],10)})),S=c.filter(n=>n.name.endsWith(`/${Pi.SWITCHES}`)),t=c.filter(n=>n.name.endsWith(`/${Pi.POTS}`)),o=c.filter(n=>n.name.endsWith(`/${Pi.DOORS}`)),g=c.filter(n=>n.name.endsWith(`/${Pi.CHESTS}`)),a=c.filter(n=>n.name.endsWith(`/${Pi.ENEMIES}`));o.forEach(n=>xt(this,Tt,hv).call(this,m,n.name,n.roomId)),S.forEach(n=>xt(this,Tt,lv).call(this,m,n.name,n.roomId)),t.forEach(n=>xt(this,Tt,uv).call(this,m,n.name,n.roomId)),g.forEach(n=>xt(this,Tt,fv).call(this,m,n.name,n.roomId)),a.forEach(n=>xt(this,Tt,dv).call(this,m,n.name,n.roomId)),xt(this,Tt,cv).call(this,m)},rv=function(){const m=Z(this,St)[Z(this,Ae).roomId].room;this.cameras.main.setBounds(m.x,m.y-m.height,m.width,m.height),this.cameras.main.startFollow(Z(this,Qt))},av=function(){const m=Z(this,St)[Z(this,Ae).roomId].doorMap[Z(this,Ae).doorId],P={x:m.x+m.doorTransitionZone.width/2,y:m.y-m.doorTransitionZone.height/2};switch(m.direction){case Et.UP:P.y+=40;break;case Et.DOWN:P.y-=40;break;case Et.LEFT:P.x+=40;break;case Et.RIGHT:P.x-=40;break;default:gs(m.direction)}rt(this,Qt,new K0({scene:this,position:{x:P.x,y:P.y},controls:Z(this,wi),maxLife:Hr,currentLife:Hr}))},ov=function(m,P){tx(m,P).forEach(F=>{Z(this,St)[F.id]={switches:[],pots:[],doors:[],chests:[],sages:[],room:F,chestMap:{},doorMap:{}}}),console.log("Room IDs found:",Object.keys(Z(this,St)).map(F=>parseInt(F,10)))},hv=function(m,P,w){ix(m,P).forEach(c=>{var o;const S=new fx(this,c,w);if(Z(this,St)[w].doors.push(S),Z(this,St)[w].doorMap[c.id]=S,Z(this,tr).add(S.doorTransitionZone),S.doorObject===void 0)return;const t=(o=Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name][w])==null?void 0:o.doors[c.id];if(t!==void 0&&t.unlocked){S.open();return}if(S.doorType===Ei.LOCK||S.doorType===Ei.BOSS){Z(this,er).add(S.doorObject);return}Z(this,_e).add(S.doorObject)})},lv=function(m,P,w){hx(m,P).forEach(c=>{const S=new dx(this,c);Z(this,St)[w].switches.push(S),Z(this,ir).add(S)})},uv=function(m,P,w){nx(m,P).forEach(c=>{const S=new lo(this,c);Z(this,St)[w].pots.push(S),Z(this,_e).add(S)})},fv=function(m,P,w){rx(m,P).forEach(c=>{var o;const S=new Z0(this,c);Z(this,St)[w].chests.push(S),Z(this,St)[w].chestMap[S.id]=S,Z(this,_e).add(S);const t=(o=Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name][w])==null?void 0:o.chests[c.id];t!==void 0&&(t.revealed&&S.reveal(),t.opened&&S.open())})},dv=function(m,P,w){Z(this,St)[w].enemyGroup===void 0&&(Z(this,St)[w].enemyGroup=this.add.group([],{runChildUpdate:!0}));const F=ox(m,P);for(const c of F)if(!(c.type!==1&&c.type!==2&&c.type!==3)){if(c.type===1){const S=new j0({scene:this,position:{x:c.x,y:c.y}});Z(this,St)[w].enemyGroup.add(S);continue}if(c.type===2){const S=new Nh({scene:this,position:{x:c.x,y:c.y}});Z(this,St)[w].enemyGroup.add(S);continue}if(c.type===3&&!Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name].bossDefeated){const S=new xx({scene:this,position:{x:c.x,y:c.y}});Z(this,St)[w].enemyGroup.add(S);continue}}},cv=function(m){const P=Z(this,Ae).roomId;if(Z(this,St)[P]===void 0){console.warn(`Starting room ${P} does not exist. Cannot create Sage.`);return}const w=Z(this,St)[P].room,S={x:w.x+128,y:w.y-w.height+80},t=new yx(this,S,P);Z(this,St)[P].sages.push(t),Z(this,_e).add(t),Z(this,sr).add(t),console.log(`Sage created in starting room ${P} at fixed position (${S.x}, ${S.y})`)},vv=function(m){Z(this,wi).isMovementLocked=!0;const P=Z(this,St)[Z(this,oe)].doorMap[parseInt(m.name,10)],w=P.targetLevel.toUpperCase();if(km(w)){const n={level:w,roomId:P.targetRoomId,doorId:P.targetDoorId};this.scene.start(ue.GAME_SCENE,n);return}const F=Z(this,St)[P.targetRoomId].doorMap[P.targetDoorId];P.disableObject(),xt(this,Tt,ol).call(this,F.roomId),F.disableObject(),Z(this,Qt).stateMachine.setState(Pt.IDLE_STATE);const c=Jm(P,F),S={x:Math.abs((P.doorTransitionZone.x-F.doorTransitionZone.x)/2),y:Math.abs((P.doorTransitionZone.y-F.doorTransitionZone.y)/2)};c===Et.UP&&(S.y*=-1),c===Et.LEFT&&(S.x*=-1);const t={x:P.x+P.doorTransitionZone.width/2+S.x,y:P.y-P.doorTransitionZone.height/2+S.y};this.tweens.add({targets:Z(this,Qt),y:t.y,x:t.x,duration:M0,delay:w0});const o=Z(this,St)[F.roomId].room;this.cameras.main.setBounds(this.cameras.main.worldView.x,this.cameras.main.worldView.y,this.cameras.main.worldView.width,this.cameras.main.worldView.height),this.cameras.main.stopFollow();const g=this.cameras.main.getBounds();this.tweens.add({targets:g,x:o.x,y:o.y-o.height,duration:L0,delay:D0,onUpdate:()=>{this.cameras.main.setBounds(g.x,g.y,o.width,o.height)}});const a={x:S.x*2,y:S.y*2};c===Et.UP||c===Et.DOWN?(a.y=Math.max(Math.abs(a.y),32),c===Et.UP&&(a.y*=-1)):(a.x=Math.max(Math.abs(a.x),32),c===Et.LEFT&&(a.x*=-1)),this.tweens.add({targets:Z(this,Qt),y:t.y+a.y,x:t.x+a.x,duration:I0,delay:O0,onComplete:()=>{F.enableObject(),xt(this,Tt,gv).call(this,P.roomId),rt(this,oe,F.roomId),xt(this,Tt,To).call(this),this.cameras.main.startFollow(Z(this,Qt)),Z(this,wi).isMovementLocked=!1}})},pv=function(m){const P=m.press();if(!(P.targetIds.length===0||P.action===Ur.NOTHING))switch(P.action){case Ur.OPEN_DOOR:P.targetIds.forEach(w=>Z(this,St)[Z(this,oe)].doorMap[w].open());break;case Ur.REVEAL_CHEST:P.targetIds.forEach(w=>{var c;Z(this,St)[Z(this,oe)].chestMap[w].reveal();const F=(c=Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name][Z(this,oe)])==null?void 0:c.chests[w];(!F||!F.revealed)&&Ht.instance.updateChestData(Z(this,oe),w,!0,!1)});break;case Ur.REVEAL_KEY:break;default:gs(P.action)}},To=function(){const m=Z(this,St)[Z(this,oe)].enemyGroup;if(m===void 0)return;m.getChildren().every(w=>!w.active||w instanceof Nh)&&xt(this,Tt,al).call(this)},al=function(){Z(this,St)[Z(this,oe)].chests.forEach(m=>{var P;if(m.revealTrigger===Yr.ENEMIES_DEFEATED){m.reveal();const w=(P=Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name][Z(this,oe)])==null?void 0:P.chests[m.id];(!w||!w.revealed)&&Ht.instance.updateChestData(Z(this,oe),m.id,!0,!1)}}),Z(this,St)[Z(this,oe)].doors.forEach(m=>{m.trapDoorTrigger===Yr.ENEMIES_DEFEATED&&m.open(),m.trapDoorTrigger===Yr.BOSS_DEFEATED&&Ht.instance.data.areaDetails[Ht.instance.data.currentArea.name].bossDefeated&&m.open()})},ol=function(m){if(Z(this,St)[m].doors.forEach(P=>P.enableObject()),Z(this,St)[m].switches.forEach(P=>P.enableObject()),Z(this,St)[m].pots.forEach(P=>P.resetPosition()),Z(this,St)[m].chests.forEach(P=>P.enableObject()),Z(this,St)[m].sages.forEach(P=>P.enableObject()),Z(this,St)[m].enemyGroup!==void 0)for(const P of Z(this,St)[m].enemyGroup.getChildren())P.enableObject()},gv=function(m){if(Z(this,St)[m].doors.forEach(P=>P.disableObject()),Z(this,St)[m].switches.forEach(P=>P.disableObject()),Z(this,St)[m].pots.forEach(P=>P.disableObject()),Z(this,St)[m].chests.forEach(P=>P.disableObject()),Z(this,St)[m].sages.forEach(P=>P.disableObject()),Z(this,St)[m].enemyGroup!==void 0)for(const P of Z(this,St)[m].enemyGroup.getChildren())P.disableObject()},hl=function(){this.cameras.main.once(yt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start(ue.GAME_OVER_SCENE)}),this.cameras.main.fadeOut(1e3,0,0,0)},ll=function(){Z(this,hs).setVisible(!1),this.scene.resume()},ul=function(){Ht.instance.defeatedCurrentAreaBoss(),xt(this,Tt,al).call(this)},fl=function(){Z(this,wi).isMovementLocked=!0},dl=function(){Z(this,wi).isMovementLocked=!1};var Nf;(function(E){E.STRING="string",E.NUMBER="number",E.INTEGER="integer",E.BOOLEAN="boolean",E.ARRAY="array",E.OBJECT="object"})(Nf||(Nf={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bf;(function(E){E.LANGUAGE_UNSPECIFIED="language_unspecified",E.PYTHON="python"})(Bf||(Bf={}));var bf;(function(E){E.OUTCOME_UNSPECIFIED="outcome_unspecified",E.OUTCOME_OK="outcome_ok",E.OUTCOME_FAILED="outcome_failed",E.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bf||(bf={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=["user","model","function","system"];var Uf;(function(E){E.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",E.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",E.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",E.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",E.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",E.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Uf||(Uf={}));var Vf;(function(E){E.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",E.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",E.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",E.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",E.BLOCK_NONE="BLOCK_NONE"})(Vf||(Vf={}));var Wf;(function(E){E.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",E.NEGLIGIBLE="NEGLIGIBLE",E.LOW="LOW",E.MEDIUM="MEDIUM",E.HIGH="HIGH"})(Wf||(Wf={}));var zf;(function(E){E.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",E.SAFETY="SAFETY",E.OTHER="OTHER"})(zf||(zf={}));var Xr;(function(E){E.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",E.STOP="STOP",E.MAX_TOKENS="MAX_TOKENS",E.SAFETY="SAFETY",E.RECITATION="RECITATION",E.LANGUAGE="LANGUAGE",E.BLOCKLIST="BLOCKLIST",E.PROHIBITED_CONTENT="PROHIBITED_CONTENT",E.SPII="SPII",E.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",E.OTHER="OTHER"})(Xr||(Xr={}));var Hf;(function(E){E.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",E.RETRIEVAL_QUERY="RETRIEVAL_QUERY",E.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",E.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",E.CLASSIFICATION="CLASSIFICATION",E.CLUSTERING="CLUSTERING"})(Hf||(Hf={}));var Yf;(function(E){E.MODE_UNSPECIFIED="MODE_UNSPECIFIED",E.AUTO="AUTO",E.ANY="ANY",E.NONE="NONE"})(Yf||(Yf={}));var Xf;(function(E){E.MODE_UNSPECIFIED="MODE_UNSPECIFIED",E.MODE_DYNAMIC="MODE_DYNAMIC"})(Xf||(Xf={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te extends Error{constructor(v){super(`[GoogleGenerativeAI Error]: ${v}`)}}class Pn extends Te{constructor(v,m){super(v),this.response=m}}class mv extends Te{constructor(v,m,P,w){super(v),this.status=m,this.statusText=P,this.errorDetails=w}}class ds extends Te{}class xv extends Te{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="https://generativelanguage.googleapis.com",Sx="v1beta",Cx="0.24.1",Ax="genai-js";var rn;(function(E){E.GENERATE_CONTENT="generateContent",E.STREAM_GENERATE_CONTENT="streamGenerateContent",E.COUNT_TOKENS="countTokens",E.EMBED_CONTENT="embedContent",E.BATCH_EMBED_CONTENTS="batchEmbedContents"})(rn||(rn={}));class Px{constructor(v,m,P,w,F){this.model=v,this.task=m,this.apiKey=P,this.stream=w,this.requestOptions=F}toString(){var v,m;const P=((v=this.requestOptions)===null||v===void 0?void 0:v.apiVersion)||Sx;let F=`${((m=this.requestOptions)===null||m===void 0?void 0:m.baseUrl)||Ex}/${P}/${this.model}:${this.task}`;return this.stream&&(F+="?alt=sse"),F}}function Rx(E){const v=[];return E!=null&&E.apiClient&&v.push(E.apiClient),v.push(`${Ax}/${Cx}`),v.join(" ")}async function Mx(E){var v;const m=new Headers;m.append("Content-Type","application/json"),m.append("x-goog-api-client",Rx(E.requestOptions)),m.append("x-goog-api-key",E.apiKey);let P=(v=E.requestOptions)===null||v===void 0?void 0:v.customHeaders;if(P){if(!(P instanceof Headers))try{P=new Headers(P)}catch(w){throw new ds(`unable to convert customHeaders value ${JSON.stringify(P)} to Headers: ${w.message}`)}for(const[w,F]of P.entries()){if(w==="x-goog-api-key")throw new ds(`Cannot set reserved header name ${w}`);if(w==="x-goog-api-client")throw new ds(`Header name ${w} can only be set using the apiClient field`);m.append(w,F)}}return m}async function wx(E,v,m,P,w,F){const c=new Px(E,v,m,P,F);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Dx(F)),{method:"POST",headers:await Mx(c),body:w})}}async function Va(E,v,m,P,w,F={},c=fetch){const{url:S,fetchOptions:t}=await wx(E,v,m,P,w,F);return Ix(S,t,c)}async function Ix(E,v,m=fetch){let P;try{P=await m(E,v)}catch(w){Ox(w,E)}return P.ok||await Lx(P,E),P}function Ox(E,v){let m=E;throw m.name==="AbortError"?(m=new xv(`Request aborted when fetching ${v.toString()}: ${E.message}`),m.stack=E.stack):E instanceof mv||E instanceof ds||(m=new Te(`Error fetching from ${v.toString()}: ${E.message}`),m.stack=E.stack),m}async function Lx(E,v){let m="",P;try{const w=await E.json();m=w.error.message,w.error.details&&(m+=` ${JSON.stringify(w.error.details)}`,P=w.error.details)}catch{}throw new mv(`Error fetching from ${v.toString()}: [${E.status} ${E.statusText}] ${m}`,E.status,E.statusText,P)}function Dx(E){const v={};if((E==null?void 0:E.signal)!==void 0||(E==null?void 0:E.timeout)>=0){const m=new AbortController;(E==null?void 0:E.timeout)>=0&&setTimeout(()=>m.abort(),E.timeout),E!=null&&E.signal&&E.signal.addEventListener("abort",()=>{m.abort()}),v.signal=m.signal}return v}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(E){return E.text=()=>{if(E.candidates&&E.candidates.length>0){if(E.candidates.length>1&&console.warn(`This response had ${E.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Eo(E.candidates[0]))throw new Pn(`${Qi(E)}`,E);return Fx(E)}else if(E.promptFeedback)throw new Pn(`Text not available. ${Qi(E)}`,E);return""},E.functionCall=()=>{if(E.candidates&&E.candidates.length>0){if(E.candidates.length>1&&console.warn(`This response had ${E.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Eo(E.candidates[0]))throw new Pn(`${Qi(E)}`,E);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Kf(E)[0]}else if(E.promptFeedback)throw new Pn(`Function call not available. ${Qi(E)}`,E)},E.functionCalls=()=>{if(E.candidates&&E.candidates.length>0){if(E.candidates.length>1&&console.warn(`This response had ${E.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Eo(E.candidates[0]))throw new Pn(`${Qi(E)}`,E);return Kf(E)}else if(E.promptFeedback)throw new Pn(`Function call not available. ${Qi(E)}`,E)},E}function Fx(E){var v,m,P,w;const F=[];if(!((m=(v=E.candidates)===null||v===void 0?void 0:v[0].content)===null||m===void 0)&&m.parts)for(const c of(w=(P=E.candidates)===null||P===void 0?void 0:P[0].content)===null||w===void 0?void 0:w.parts)c.text&&F.push(c.text),c.executableCode&&F.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&F.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return F.length>0?F.join(""):""}function Kf(E){var v,m,P,w;const F=[];if(!((m=(v=E.candidates)===null||v===void 0?void 0:v[0].content)===null||m===void 0)&&m.parts)for(const c of(w=(P=E.candidates)===null||P===void 0?void 0:P[0].content)===null||w===void 0?void 0:w.parts)c.functionCall&&F.push(c.functionCall);if(F.length>0)return F}const Nx=[Xr.RECITATION,Xr.SAFETY,Xr.LANGUAGE];function Eo(E){return!!E.finishReason&&Nx.includes(E.finishReason)}function Qi(E){var v,m,P;let w="";if((!E.candidates||E.candidates.length===0)&&E.promptFeedback)w+="Response was blocked",!((v=E.promptFeedback)===null||v===void 0)&&v.blockReason&&(w+=` due to ${E.promptFeedback.blockReason}`),!((m=E.promptFeedback)===null||m===void 0)&&m.blockReasonMessage&&(w+=`: ${E.promptFeedback.blockReasonMessage}`);else if(!((P=E.candidates)===null||P===void 0)&&P[0]){const F=E.candidates[0];Eo(F)&&(w+=`Candidate was blocked due to ${F.finishReason}`,F.finishMessage&&(w+=`: ${F.finishMessage}`))}return w}function ea(E){return this instanceof ea?(this.v=E,this):new ea(E)}function Bx(E,v,m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=m.apply(E,v||[]),w,F=[];return w={},c("next"),c("throw"),c("return"),w[Symbol.asyncIterator]=function(){return this},w;function c(n){P[n]&&(w[n]=function(r){return new Promise(function(e,s){F.push([n,r,e,s])>1||S(n,r)})})}function S(n,r){try{t(P[n](r))}catch(e){a(F[0][3],e)}}function t(n){n.value instanceof ea?Promise.resolve(n.value.v).then(o,g):a(F[0][2],n)}function o(n){S("next",n)}function g(n){S("throw",n)}function a(n,r){n(r),F.shift(),F.length&&S(F[0][0],F[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bx(E){const v=E.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),m=Vx(v),[P,w]=m.tee();return{stream:Ux(P),response:Gx(w)}}async function Gx(E){const v=[],m=E.getReader();for(;;){const{done:P,value:w}=await m.read();if(P)return Yl(Wx(v));v.push(w)}}function Ux(E){return Bx(this,arguments,function*(){const m=E.getReader();for(;;){const{value:P,done:w}=yield ea(m.read());if(w)break;yield yield ea(Yl(P))}})}function Vx(E){const v=E.getReader();return new ReadableStream({start(P){let w="";return F();function F(){return v.read().then(({value:c,done:S})=>{if(S){if(w.trim()){P.error(new Te("Failed to parse stream"));return}P.close();return}w+=c;let t=w.match(jf),o;for(;t;){try{o=JSON.parse(t[1])}catch{P.error(new Te(`Error parsing JSON response: "${t[1]}"`));return}P.enqueue(o),w=w.substring(t[0].length),t=w.match(jf)}return F()}).catch(c=>{let S=c;throw S.stack=c.stack,S.name==="AbortError"?S=new xv("Request aborted when reading from the stream"):S=new Te("Error reading from the stream"),S})}}})}function Wx(E){const v=E[E.length-1],m={promptFeedback:v==null?void 0:v.promptFeedback};for(const P of E){if(P.candidates){let w=0;for(const F of P.candidates)if(m.candidates||(m.candidates=[]),m.candidates[w]||(m.candidates[w]={index:w}),m.candidates[w].citationMetadata=F.citationMetadata,m.candidates[w].groundingMetadata=F.groundingMetadata,m.candidates[w].finishReason=F.finishReason,m.candidates[w].finishMessage=F.finishMessage,m.candidates[w].safetyRatings=F.safetyRatings,F.content&&F.content.parts){m.candidates[w].content||(m.candidates[w].content={role:F.content.role||"user",parts:[]});const c={};for(const S of F.content.parts)S.text&&(c.text=S.text),S.functionCall&&(c.functionCall=S.functionCall),S.executableCode&&(c.executableCode=S.executableCode),S.codeExecutionResult&&(c.codeExecutionResult=S.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),m.candidates[w].content.parts.push(c)}w++}P.usageMetadata&&(m.usageMetadata=P.usageMetadata)}return m}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yv(E,v,m,P){const w=await Va(v,rn.STREAM_GENERATE_CONTENT,E,!0,JSON.stringify(m),P);return bx(w)}async function Tv(E,v,m,P){const F=await(await Va(v,rn.GENERATE_CONTENT,E,!1,JSON.stringify(m),P)).json();return{response:Yl(F)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(E){if(E!=null){if(typeof E=="string")return{role:"system",parts:[{text:E}]};if(E.text)return{role:"system",parts:[E]};if(E.parts)return E.role?E:{role:"system",parts:E.parts}}}function ia(E){let v=[];if(typeof E=="string")v=[{text:E}];else for(const m of E)typeof m=="string"?v.push({text:m}):v.push(m);return zx(v)}function zx(E){const v={role:"user",parts:[]},m={role:"function",parts:[]};let P=!1,w=!1;for(const F of E)"functionResponse"in F?(m.parts.push(F),w=!0):(v.parts.push(F),P=!0);if(P&&w)throw new Te("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!P&&!w)throw new Te("No content is provided for sending chat message.");return P?v:m}function Hx(E,v){var m;let P={model:v==null?void 0:v.model,generationConfig:v==null?void 0:v.generationConfig,safetySettings:v==null?void 0:v.safetySettings,tools:v==null?void 0:v.tools,toolConfig:v==null?void 0:v.toolConfig,systemInstruction:v==null?void 0:v.systemInstruction,cachedContent:(m=v==null?void 0:v.cachedContent)===null||m===void 0?void 0:m.name,contents:[]};const w=E.generateContentRequest!=null;if(E.contents){if(w)throw new ds("CountTokensRequest must have one of contents or generateContentRequest, not both.");P.contents=E.contents}else if(w)P=Object.assign(Object.assign({},P),E.generateContentRequest);else{const F=ia(E);P.contents=[F]}return{generateContentRequest:P}}function $f(E){let v;return E.contents?v=E:v={contents:[ia(E)]},E.systemInstruction&&(v.systemInstruction=Ev(E.systemInstruction)),v}function Yx(E){return typeof E=="string"||Array.isArray(E)?{content:ia(E)}:E}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Xx={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Kx(E){let v=!1;for(const m of E){const{role:P,parts:w}=m;if(!v&&P!=="user")throw new Te(`First content should be with role 'user', got ${P}`);if(!Gf.includes(P))throw new Te(`Each item should include role field. Got ${P} but valid roles are: ${JSON.stringify(Gf)}`);if(!Array.isArray(w))throw new Te("Content should have 'parts' property with an array of Parts");if(w.length===0)throw new Te("Each Content should have at least one part");const F={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const S of w)for(const t of Jf)t in S&&(F[t]+=1);const c=Xx[P];for(const S of Jf)if(!c.includes(S)&&F[S]>0)throw new Te(`Content with role '${P}' can't contain '${S}' part`);v=!0}}function kf(E){var v;if(E.candidates===void 0||E.candidates.length===0)return!1;const m=(v=E.candidates[0])===null||v===void 0?void 0:v.content;if(m===void 0||m.parts===void 0||m.parts.length===0)return!1;for(const P of m.parts)if(P===void 0||Object.keys(P).length===0||P.text!==void 0&&P.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="SILENT_ERROR";class jx{constructor(v,m,P,w={}){this.model=m,this.params=P,this._requestOptions=w,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=v,P!=null&&P.history&&(Kx(P.history),this._history=P.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(v,m={}){var P,w,F,c,S,t;await this._sendPromise;const o=ia(v),g={safetySettings:(P=this.params)===null||P===void 0?void 0:P.safetySettings,generationConfig:(w=this.params)===null||w===void 0?void 0:w.generationConfig,tools:(F=this.params)===null||F===void 0?void 0:F.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(S=this.params)===null||S===void 0?void 0:S.systemInstruction,cachedContent:(t=this.params)===null||t===void 0?void 0:t.cachedContent,contents:[...this._history,o]},a=Object.assign(Object.assign({},this._requestOptions),m);let n;return this._sendPromise=this._sendPromise.then(()=>Tv(this._apiKey,this.model,g,a)).then(r=>{var e;if(kf(r.response)){this._history.push(o);const s=Object.assign({parts:[],role:"model"},(e=r.response.candidates)===null||e===void 0?void 0:e[0].content);this._history.push(s)}else{const s=Qi(r.response);s&&console.warn(`sendMessage() was unsuccessful. ${s}. Inspect response object for details.`)}n=r}).catch(r=>{throw this._sendPromise=Promise.resolve(),r}),await this._sendPromise,n}async sendMessageStream(v,m={}){var P,w,F,c,S,t;await this._sendPromise;const o=ia(v),g={safetySettings:(P=this.params)===null||P===void 0?void 0:P.safetySettings,generationConfig:(w=this.params)===null||w===void 0?void 0:w.generationConfig,tools:(F=this.params)===null||F===void 0?void 0:F.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(S=this.params)===null||S===void 0?void 0:S.systemInstruction,cachedContent:(t=this.params)===null||t===void 0?void 0:t.cachedContent,contents:[...this._history,o]},a=Object.assign(Object.assign({},this._requestOptions),m),n=yv(this._apiKey,this.model,g,a);return this._sendPromise=this._sendPromise.then(()=>n).catch(r=>{throw new Error(Zf)}).then(r=>r.response).then(r=>{if(kf(r)){this._history.push(o);const e=Object.assign({},r.candidates[0].content);e.role||(e.role="model"),this._history.push(e)}else{const e=Qi(r);e&&console.warn(`sendMessageStream() was unsuccessful. ${e}. Inspect response object for details.`)}}).catch(r=>{r.message!==Zf&&console.error(r)}),n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(E,v,m,P){return(await Va(v,rn.COUNT_TOKENS,E,!1,JSON.stringify(m),P)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(E,v,m,P){return(await Va(v,rn.EMBED_CONTENT,E,!1,JSON.stringify(m),P)).json()}async function kx(E,v,m,P){const w=m.requests.map(c=>Object.assign(Object.assign({},c),{model:v}));return(await Va(v,rn.BATCH_EMBED_CONTENTS,E,!1,JSON.stringify({requests:w}),P)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(v,m,P={}){this.apiKey=v,this._requestOptions=P,m.model.includes("/")?this.model=m.model:this.model=`models/${m.model}`,this.generationConfig=m.generationConfig||{},this.safetySettings=m.safetySettings||[],this.tools=m.tools,this.toolConfig=m.toolConfig,this.systemInstruction=Ev(m.systemInstruction),this.cachedContent=m.cachedContent}async generateContent(v,m={}){var P;const w=$f(v),F=Object.assign(Object.assign({},this._requestOptions),m);return Tv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(P=this.cachedContent)===null||P===void 0?void 0:P.name},w),F)}async generateContentStream(v,m={}){var P;const w=$f(v),F=Object.assign(Object.assign({},this._requestOptions),m);return yv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(P=this.cachedContent)===null||P===void 0?void 0:P.name},w),F)}startChat(v){var m;return new jx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(m=this.cachedContent)===null||m===void 0?void 0:m.name},v),this._requestOptions)}async countTokens(v,m={}){const P=Hx(v,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),w=Object.assign(Object.assign({},this._requestOptions),m);return $x(this.apiKey,this.model,P,w)}async embedContent(v,m={}){const P=Yx(v),w=Object.assign(Object.assign({},this._requestOptions),m);return Jx(this.apiKey,this.model,P,w)}async batchEmbedContents(v,m={}){const P=Object.assign(Object.assign({},this._requestOptions),m);return kx(this.apiKey,this.model,v,P)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(v){this.apiKey=v}getGenerativeModel(v,m){if(!v.model)throw new Te("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Qf(this.apiKey,v,m)}getGenerativeModelFromCachedContent(v,m,P){if(!v.name)throw new ds("Cached content must contain a `name` field.");if(!v.model)throw new ds("Cached content must contain a `model` field.");const w=["model","systemInstruction"];for(const c of w)if(m!=null&&m[c]&&v[c]&&(m==null?void 0:m[c])!==v[c]){if(c==="model"){const S=m.model.startsWith("models/")?m.model.replace("models/",""):m.model,t=v.model.startsWith("models/")?v.model.replace("models/",""):v.model;if(S===t)continue}throw new ds(`Different value for "${c}" specified in modelParams (${m[c]}) and cachedContent (${v[c]})`)}const F=Object.assign(Object.assign({},m),{model:v.model,tools:v.tools,toolConfig:v.toolConfig,systemInstruction:v.systemInstruction,cachedContent:v});return new Qf(this.apiKey,F,P)}}const Qx=new Zx("apiKAIzaSyDrJpyokEvzWyqYLjDPL0lpjUWh1kk_aEYey");async function qx(E){try{const v=Qx.getGenerativeModel({model:"gemini-1.5-flash"}),m=`You are the Ancient Guide in a Trial Dungeon. 
    Help the player with their journey. User says: ${E}`;return(await(await v.generateContent(m)).response).text()}catch(v){return console.error("Gemini API Error:",v),"The stars are clouded... I cannot see the answer right now."}}var Ba,ls,us,rr,ar,Ye,tn,Xe,Ie,fs,or,xi,yi,hr,se,Sv,Cv,Av,Pv,So,cl,Vr,Rv;class _x extends yt.Scene{constructor(){super({key:ue.UI_SCENE});lt(this,se);lt(this,Ba);lt(this,ls);lt(this,us);lt(this,rr);lt(this,ar);lt(this,Ye);lt(this,tn);lt(this,Xe);lt(this,Ie);lt(this,fs);lt(this,or);lt(this,xi);lt(this,yi,!1);lt(this,hr)}create(){rt(this,Ba,this.add.container(0,0,[])),rt(this,ls,[]);const m=Math.floor(Ht.instance.data.maxHealth/2),P=Math.floor(Ht.instance.data.currentHealth/2),w=Ht.instance.data.currentHealth%2===1;for(let F=0;F<20;F+=1){let c=157+8*F,S=25;F>=10&&(c=157+8*(F-10),S=33);let t=oo.NONE;F<P?t=oo.FULL:F<m&&(t=oo.EMPTY),w&&F===P&&(t=oo.HALF),Z(this,ls).push(this.add.sprite(c,S,Rt.HUD_NUMBERS,t).setOrigin(0))}Z(this,Ba).add(Z(this,ls)),rt(this,us,this.add.container(32,142,[this.add.image(0,0,Rt.UI_DIALOG,0).setOrigin(0)])),rt(this,rr,this.add.text(14,14,"",xo).setOrigin(0)),Z(this,us).add(Z(this,rr)),Z(this,us).visible=!1,xt(this,se,Sv).call(this),xt(this,se,Cv).call(this),this.input.keyboard&&rt(this,hr,this.input.keyboard.addKey(yt.Input.Keyboard.KeyCodes.ESC)),Kt.on(jt.PLAYER_HEALTH_UPDATED,this.updateHealthInHud,this),Kt.on(jt.SHOW_DIALOG,this.showDialog,this),this.events.once(yt.Scenes.Events.SHUTDOWN,()=>{Kt.off(jt.PLAYER_HEALTH_UPDATED,this.updateHealthInHud,this),Kt.off(jt.SHOW_DIALOG,this.showDialog,this)})}update(){Z(this,hr)&&yt.Input.Keyboard.JustDown(Z(this,hr))&&Z(this,yi)&&xt(this,se,So).call(this)}async updateHealthInHud(m){if(m.type===sl.INCREASE)return;const P=m.previousHealth-m.currentHealth;let w=m.previousHealth;for(let F=0;F<P;F+=1){const c=Math.round(w/2)-1,S=w%2===1;let t=Lf.LOSE_LAST_HALF;S||(t=Lf.LOSE_FIRST_HALF),await new Promise(o=>{Z(this,ls)[c].play(t),Z(this,ls)[c].once(yt.Animations.Events.ANIMATION_COMPLETE_KEY+t,()=>{o(void 0)})}),w-=1}}showDialog(m){Z(this,us).visible=!0,Z(this,rr).setText(m);const P=m.includes("You've crossed the second gate")?5e3:3e3;this.time.delayedCall(P,()=>{Z(this,us).visible=!1,Kt.emit(jt.DIALOG_CLOSED)})}}Ba=new WeakMap,ls=new WeakMap,us=new WeakMap,rr=new WeakMap,ar=new WeakMap,Ye=new WeakMap,tn=new WeakMap,Xe=new WeakMap,Ie=new WeakMap,fs=new WeakMap,or=new WeakMap,xi=new WeakMap,yi=new WeakMap,hr=new WeakMap,se=new WeakSet,Sv=function(){const{width:m}=this.scale,P=m-40,w=40,F=this.add.circle(P,w,18,1733608,.9);F.setStrokeStyle(2,4359668),F.setInteractive({useHandCursor:!0}),F.setScrollFactor(0);const c=this.add.image(P,w,"gemini-bot");c.setScale(.12),c.setScrollFactor(0),F.on("pointerover",()=>{this.tweens.add({targets:[F,c],scale:1.1,duration:100}),F.setFillStyle(4359668,1)}),F.on("pointerout",()=>{this.tweens.add({targets:[F,c],scale:1,duration:100}),F.setFillStyle(1733608,.9)}),F.on("pointerdown",()=>{xt(this,se,Av).call(this)}),rt(this,ar,this.add.container(0,0,[F,c])),Z(this,ar).setDepth(1e3),Z(this,ar).setScrollFactor(0)},Cv=function(){const{width:m,height:P}=this.scale,w=Math.min(m*.85,400),F=P*.7,c=m,S=P/2;rt(this,Ye,this.add.container(c,S)),Z(this,Ye).setDepth(2e3),Z(this,Ye).setVisible(!1),Z(this,Ye).setScrollFactor(0),rt(this,tn,this.add.rectangle(0,0,w,F,657946,.95)),Z(this,tn).setStrokeStyle(3,4886754),Z(this,tn).setScrollFactor(0);const t=this.add.text(0,-F/2+15,"Ancient Guide",{fontSize:"14px",fontFamily:"Arial",color:"#4a90e2",fontStyle:"bold"}).setOrigin(.5,0);t.setScrollFactor(0);const o=this.add.rectangle(w/2-15,-F/2+15,30,30,2763342,.8);o.setStrokeStyle(2,4886754),o.setInteractive({useHandCursor:!0}),o.setScrollFactor(0);const g=this.add.text(w/2-15,-F/2+15,"",{fontSize:"24px",color:"#ffffff"}).setOrigin(.5);g.setScrollFactor(0),o.on("pointerover",()=>o.setFillStyle(3816030,.9)),o.on("pointerout",()=>o.setFillStyle(2763342,.8)),o.on("pointerdown",()=>xt(this,se,So).call(this)),rt(this,or,this.add.container(0,0,[o,g])),Z(this,or).setScrollFactor(0);const a=F-120,n=this.add.rectangle(0,-20,w-20,a,0,.5);n.setStrokeStyle(1,3355443),n.setScrollFactor(0),rt(this,Xe,this.add.container(0,-20)),Z(this,Xe).setSize(w-20,a),Z(this,Xe).setScrollFactor(0),xt(this,se,Vr).call(this,"assistant","Greetings, seeker. I am an ancient spirit bound to these halls. Ask me of the trials ahead, and I shall guide you...",!1);const r=F/2-50,e=w-60,s=document.createElement("input");s.type="text",s.style.position="absolute",s.style.width=`${e}px`,s.style.height="30px",s.style.padding="5px 10px",s.style.backgroundColor="#1a1a2e",s.style.color="#ffffff",s.style.border="2px solid #4a90e2",s.style.borderRadius="4px",s.style.fontSize="14px",s.style.fontFamily="Arial",s.style.outline="none",s.placeholder="Ask the ancient guide...",s.maxLength=200;const h=(m-w)/2,i=P/2+r-15;s.style.left=`${h+30}px`,s.style.top=`${i}px`,rt(this,Ie,s),document.body.appendChild(s),s.style.display="none";const l=this.add.rectangle(w/2-30,r,80,30,4886754,.9);l.setStrokeStyle(2,6992114),l.setInteractive({useHandCursor:!0}),l.setScrollFactor(0);const u=this.add.text(w/2-30,r,"Send",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);u.setScrollFactor(0),l.on("pointerover",()=>l.setFillStyle(6992114,1)),l.on("pointerout",()=>l.setFillStyle(4886754,.9)),l.on("pointerdown",()=>xt(this,se,cl).call(this)),rt(this,fs,this.add.container(0,0,[l,u])),Z(this,fs).setScrollFactor(0);const f=this.add.rectangle(0,0,40,40,0,.8);f.setScrollFactor(0);const d=this.add.text(0,0,"...",{fontSize:"20px",color:"#4a90e2"}).setOrigin(.5);d.setScrollFactor(0),rt(this,xi,this.add.container(w/2-30,r,[f,d])),Z(this,xi).setVisible(!1),Z(this,xi).setScrollFactor(0),s.addEventListener("keydown",p=>{p.key==="Enter"&&Z(this,yi)&&xt(this,se,cl).call(this)}),Z(this,Ye).add([Z(this,tn),t,Z(this,or),n,Z(this,Xe),Z(this,fs),Z(this,xi)])},Av=function(){Z(this,yi)?xt(this,se,So).call(this):xt(this,se,Pv).call(this)},Pv=function(){if(Z(this,yi))return;rt(this,yi,!0),Z(this,Ye).setVisible(!0);const{width:m,height:P}=this.scale,w=Math.min(m*.85,400),F=P*.7,c=m/2,S=F/2-50,t=(m-w)/2,o=P/2+S-15;Z(this,Ie).style.display="block",Z(this,Ie).style.left=`${t+30}px`,Z(this,Ie).style.top=`${o}px`,Z(this,Ie).focus(),this.tweens.add({targets:Z(this,Ye),x:c,duration:300,ease:"Power2"}),Kt.emit(jt.CHAT_OPENED)},So=function(){if(!Z(this,yi))return;rt(this,yi,!1),Z(this,Ie).style.display="none",Z(this,Ie).blur(),Z(this,Ie).value="";const{width:m}=this.scale,P=m+200;this.tweens.add({targets:Z(this,Ye),x:P,duration:300,ease:"Power2",onComplete:()=>{Z(this,Ye).setVisible(!1)}}),Kt.emit(jt.CHAT_CLOSED)},cl=async function(){const m=Z(this,Ie).value.trim();if(!(!m||Z(this,xi).visible)){xt(this,se,Vr).call(this,"user",m,!0),Z(this,Ie).value="",Z(this,xi).setVisible(!0),Z(this,fs).setVisible(!1);try{const P=await qx(m);xt(this,se,Vr).call(this,"assistant",P,!0)}catch(P){console.error("Chat error:",P);const w=P instanceof Error&&P.message.includes("API key")?"The ancient guide cannot be summoned. The mystical connection requires proper configuration.":"The ancient spirit seems distant... Try again when the mystical energies align.";xt(this,se,Vr).call(this,"assistant",w,!0)}finally{Z(this,xi).setVisible(!1),Z(this,fs).setVisible(!0),Z(this,Ie).focus()}}},Vr=function(m,P,w=!1){const{width:F}=this.scale,S=Math.min(F*.85,400)-60,t=Z(this,Xe).list.filter(s=>s instanceof yt.GameObjects.Container),o=-Z(this,Xe).height/2+20+t.length*60,g=this.add.container(0,o),a=m==="user"?2771566:1714746,n=m==="user"?S/2-20:-S/2+20,r=this.add.rectangle(n,0,S-40,50,a,.8);r.setStrokeStyle(1,m==="user"?4886754:6982298),r.setScrollFactor(0);const e=this.add.text(n,0,P,{fontSize:"11px",fontFamily:"Arial",color:"#e0e0e0",wordWrap:{width:S-60},align:"left"}).setOrigin(.5);e.setScrollFactor(0),g.add([r,e]),Z(this,Xe).add(g),xt(this,se,Rv).call(this),w&&(g.setAlpha(0),this.tweens.add({targets:g,alpha:1,duration:200}))},Rv=function(){const m=Z(this,Xe).list.filter(c=>c instanceof yt.GameObjects.Container);if(m.length===0)return;const P=m[m.length-1],w=Z(this,Xe).height,F=P.y+30;if(F>w/2){const c=F-w/2+20;m.forEach(S=>{S.y-=c})}};var ba,lr,Ii,Ke;class ty extends yt.Scene{constructor(){super({key:ue.GAME_OVER_SCENE});lt(this,ba);lt(this,lr);lt(this,Ii);lt(this,Ke)}create(){this.input.keyboard&&(this.add.text(this.scale.width/2,100,"Game Over",xo).setOrigin(.5),rt(this,ba,this.add.container(32,142,[this.add.image(0,0,Rt.UI_DIALOG,0).setOrigin(0),this.add.text(32,16,"Continue",xo).setOrigin(0),this.add.text(32,32,"Quit",xo).setOrigin(0)])),rt(this,lr,this.add.image(20,14,Rt.UI_CURSOR,0).setOrigin(0)),Z(this,ba).add(Z(this,lr)),rt(this,Ii,new Zc(this.input.keyboard)),rt(this,Ke,0),Ht.instance.resetPlayerHealthToMin())}update(){if(Z(this,Ii).isActionKeyJustDown||Z(this,Ii).isAttackKeyJustDown||Z(this,Ii).isEnterKeyJustDown){if(Z(this,Ke)===1){window.location.reload();return}this.scene.start(ue.GAME_SCENE);return}if(Z(this,Ii).isUpJustDown)rt(this,Ke,Z(this,Ke)-1),Z(this,Ke)<0&&rt(this,Ke,0);else if(Z(this,Ii).isDownJustDown)rt(this,Ke,Z(this,Ke)+1),Z(this,Ke)>1&&rt(this,Ke,1);else return;Z(this,lr).setY(14+Z(this,Ke)*16)}}ba=new WeakMap,lr=new WeakMap,Ii=new WeakMap,Ke=new WeakMap;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=()=>{};var qf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt=function(E,v){if(!E)throw pr(v)},pr=function(E){return new Error("Firebase Database ("+Mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+E)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=function(E){const v=[];let m=0;for(let P=0;P<E.length;P++){let w=E.charCodeAt(P);w<128?v[m++]=w:w<2048?(v[m++]=w>>6|192,v[m++]=w&63|128):(w&64512)===55296&&P+1<E.length&&(E.charCodeAt(P+1)&64512)===56320?(w=65536+((w&1023)<<10)+(E.charCodeAt(++P)&1023),v[m++]=w>>18|240,v[m++]=w>>12&63|128,v[m++]=w>>6&63|128,v[m++]=w&63|128):(v[m++]=w>>12|224,v[m++]=w>>6&63|128,v[m++]=w&63|128)}return v},iy=function(E){const v=[];let m=0,P=0;for(;m<E.length;){const w=E[m++];if(w<128)v[P++]=String.fromCharCode(w);else if(w>191&&w<224){const F=E[m++];v[P++]=String.fromCharCode((w&31)<<6|F&63)}else if(w>239&&w<365){const F=E[m++],c=E[m++],S=E[m++],t=((w&7)<<18|(F&63)<<12|(c&63)<<6|S&63)-65536;v[P++]=String.fromCharCode(55296+(t>>10)),v[P++]=String.fromCharCode(56320+(t&1023))}else{const F=E[m++],c=E[m++];v[P++]=String.fromCharCode((w&15)<<12|(F&63)<<6|c&63)}}return v.join("")},Xl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(E,v){if(!Array.isArray(E))throw Error("encodeByteArray takes an array as a parameter");this.init_();const m=v?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let w=0;w<E.length;w+=3){const F=E[w],c=w+1<E.length,S=c?E[w+1]:0,t=w+2<E.length,o=t?E[w+2]:0,g=F>>2,a=(F&3)<<4|S>>4;let n=(S&15)<<2|o>>6,r=o&63;t||(r=64,c||(n=64)),P.push(m[g],m[a],m[n],m[r])}return P.join("")},encodeString(E,v){return this.HAS_NATIVE_SUPPORT&&!v?btoa(E):this.encodeByteArray(wv(E),v)},decodeString(E,v){return this.HAS_NATIVE_SUPPORT&&!v?atob(E):iy(this.decodeStringToByteArray(E,v))},decodeStringToByteArray(E,v){this.init_();const m=v?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let w=0;w<E.length;){const F=m[E.charAt(w++)],S=w<E.length?m[E.charAt(w)]:0;++w;const o=w<E.length?m[E.charAt(w)]:64;++w;const a=w<E.length?m[E.charAt(w)]:64;if(++w,F==null||S==null||o==null||a==null)throw new sy;const n=F<<2|S>>4;if(P.push(n),o!==64){const r=S<<4&240|o>>2;if(P.push(r),a!==64){const e=o<<6&192|a;P.push(e)}}}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let E=0;E<this.ENCODED_VALS.length;E++)this.byteToCharMap_[E]=this.ENCODED_VALS.charAt(E),this.charToByteMap_[this.byteToCharMap_[E]]=E,this.byteToCharMapWebSafe_[E]=this.ENCODED_VALS_WEBSAFE.charAt(E),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[E]]=E,E>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(E)]=E,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(E)]=E)}}};class sy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iv=function(E){const v=wv(E);return Xl.encodeByteArray(v,!0)},Io=function(E){return Iv(E).replace(/\./g,"")},Oo=function(E){try{return Xl.decodeString(E,!0)}catch(v){console.error("base64Decode failed: ",v)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(E){return Ov(void 0,E)}function Ov(E,v){if(!(v instanceof Object))return v;switch(v.constructor){case Date:const m=v;return new Date(m.getTime());case Object:E===void 0&&(E={});break;case Array:E=[];break;default:return v}for(const m in v)!v.hasOwnProperty(m)||!ry(m)||(E[m]=Ov(E[m],v[m]));return E}function ry(E){return E!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=()=>ay().__FIREBASE_DEFAULTS__,hy=()=>{if(typeof process>"u"||typeof qf>"u")return;const E=qf.__FIREBASE_DEFAULTS__;if(E)return JSON.parse(E)},ly=()=>{if(typeof document>"u")return;let E;try{E=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const v=E&&Oo(E[1]);return v&&JSON.parse(v)},Kl=()=>{try{return ey()||oy()||hy()||ly()}catch(E){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${E}`);return}},Lv=E=>{var v,m;return(m=(v=Kl())==null?void 0:v.emulatorHosts)==null?void 0:m[E]},Dv=E=>{const v=Lv(E);if(!v)return;const m=v.lastIndexOf(":");if(m<=0||m+1===v.length)throw new Error(`Invalid host ${v} with no separate hostname and port!`);const P=parseInt(v.substring(m+1),10);return v[0]==="["?[v.substring(1,m-1),P]:[v.substring(0,m),P]},Fv=()=>{var E;return(E=Kl())==null?void 0:E.config},Nv=E=>{var v;return(v=Kl())==null?void 0:v[`_${E}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((v,m)=>{this.resolve=v,this.reject=m})}wrapCallback(v){return(m,P)=>{m?this.reject(m):this.resolve(P),typeof v=="function"&&(this.promise.catch(()=>{}),v.length===1?v(m):v(m,P))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(E){try{return(E.startsWith("http://")||E.startsWith("https://")?new URL(E).hostname:E).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $l(E){return(await fetch(E,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(E,v){if(E.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const m={alg:"none",type:"JWT"},P=v||"demo-project",w=E.iat||0,F=E.sub||E.user_id;if(!F)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${P}`,aud:P,iat:w,exp:w+3600,auth_time:w,sub:F,user_id:F,firebase:{sign_in_provider:"custom",identities:{}},...E};return[Io(JSON.stringify(m)),Io(JSON.stringify(c)),""].join(".")}const Kr={};function uy(){const E={prod:[],emulator:[]};for(const v of Object.keys(Kr))Kr[v]?E.emulator.push(v):E.prod.push(v);return E}function fy(E){let v=document.getElementById(E),m=!1;return v||(v=document.createElement("div"),v.setAttribute("id",E),m=!0),{created:m,element:v}}let _f=!1;function Jl(E,v){if(typeof window>"u"||typeof document>"u"||!mn(window.location.host)||Kr[E]===v||Kr[E]||_f)return;Kr[E]=v;function m(n){return`__firebase__banner__${n}`}const P="__firebase__banner",F=uy().prod.length>0;function c(){const n=document.getElementById(P);n&&n.remove()}function S(n){n.style.display="flex",n.style.background="#7faaf0",n.style.position="fixed",n.style.bottom="5px",n.style.left="5px",n.style.padding=".5em",n.style.borderRadius="5px",n.style.alignItems="center"}function t(n,r){n.setAttribute("width","24"),n.setAttribute("id",r),n.setAttribute("height","24"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("fill","none"),n.style.marginLeft="-6px"}function o(){const n=document.createElement("span");return n.style.cursor="pointer",n.style.marginLeft="16px",n.style.fontSize="24px",n.innerHTML=" &times;",n.onclick=()=>{_f=!0,c()},n}function g(n,r){n.setAttribute("id",r),n.innerText="Learn more",n.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",n.setAttribute("target","__blank"),n.style.paddingLeft="5px",n.style.textDecoration="underline"}function a(){const n=fy(P),r=m("text"),e=document.getElementById(r)||document.createElement("span"),s=m("learnmore"),h=document.getElementById(s)||document.createElement("a"),i=m("preprendIcon"),l=document.getElementById(i)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.created){const u=n.element;S(u),g(h,s);const f=o();t(l,i),u.append(l,e,h,f),document.body.appendChild(u)}F?(e.innerText="Preview backend disconnected.",l.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(l.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,e.innerText="Preview backend running in this workspace."),e.setAttribute("id",r)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kl(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function dy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bv(){const E=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof E=="object"&&E.id!==void 0}function Gv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cy(){const E=Me();return E.indexOf("MSIE ")>=0||E.indexOf("Trident/")>=0}function vy(){return Mv.NODE_ADMIN===!0}function Uv(){try{return typeof indexedDB=="object"}catch{return!1}}function Vv(){return new Promise((E,v)=>{try{let m=!0;const P="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(P);w.onsuccess=()=>{w.result.close(),m||self.indexedDB.deleteDatabase(P),E(!0)},w.onupgradeneeded=()=>{m=!1},w.onerror=()=>{var F;v(((F=w.error)==null?void 0:F.message)||"")}}catch(m){v(m)}})}function py(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="FirebaseError";class ui extends Error{constructor(v,m,P){super(m),this.code=v,this.customData=P,this.name=gy,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}}class xn{constructor(v,m,P){this.service=v,this.serviceName=m,this.errors=P}create(v,...m){const P=m[0]||{},w=`${this.service}/${v}`,F=this.errors[v],c=F?my(F,P):"Error",S=`${this.serviceName}: ${c} (${w}).`;return new ui(w,S,P)}}function my(E,v){return E.replace(xy,(m,P)=>{const w=v[P];return w!=null?String(w):`<${P}?>`})}const xy=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(E){return JSON.parse(E)}function ge(E){return JSON.stringify(E)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=function(E){let v={},m={},P={},w="";try{const F=E.split(".");v=sa(Oo(F[0])||""),m=sa(Oo(F[1])||""),w=F[2],P=m.d||{},delete m.d}catch{}return{header:v,claims:m,data:P,signature:w}},yy=function(E){const v=Wv(E),m=v.claims;return!!m&&typeof m=="object"&&m.hasOwnProperty("iat")},Ty=function(E){const v=Wv(E).claims;return typeof v=="object"&&v.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(E,v){return Object.prototype.hasOwnProperty.call(E,v)}function ur(E,v){if(Object.prototype.hasOwnProperty.call(E,v))return E[v]}function vl(E){for(const v in E)if(Object.prototype.hasOwnProperty.call(E,v))return!1;return!0}function Lo(E,v,m){const P={};for(const w in E)Object.prototype.hasOwnProperty.call(E,w)&&(P[w]=v.call(m,E[w],w,E));return P}function Gi(E,v){if(E===v)return!0;const m=Object.keys(E),P=Object.keys(v);for(const w of m){if(!P.includes(w))return!1;const F=E[w],c=v[w];if(td(F)&&td(c)){if(!Gi(F,c))return!1}else if(F!==c)return!1}for(const w of P)if(!m.includes(w))return!1;return!0}function td(E){return E!==null&&typeof E=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(E){const v=[];for(const[m,P]of Object.entries(E))Array.isArray(P)?P.forEach(w=>{v.push(encodeURIComponent(m)+"="+encodeURIComponent(w))}):v.push(encodeURIComponent(m)+"="+encodeURIComponent(P));return v.length?"&"+v.join("&"):""}function Wr(E){const v={};return E.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[w,F]=P.split("=");v[decodeURIComponent(w)]=decodeURIComponent(F)}}),v}function zr(E){const v=E.indexOf("?");if(!v)return"";const m=E.indexOf("#",v);return E.substring(v,m>0?m:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let v=1;v<this.blockSize;++v)this.pad_[v]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(v,m){m||(m=0);const P=this.W_;if(typeof v=="string")for(let a=0;a<16;a++)P[a]=v.charCodeAt(m)<<24|v.charCodeAt(m+1)<<16|v.charCodeAt(m+2)<<8|v.charCodeAt(m+3),m+=4;else for(let a=0;a<16;a++)P[a]=v[m]<<24|v[m+1]<<16|v[m+2]<<8|v[m+3],m+=4;for(let a=16;a<80;a++){const n=P[a-3]^P[a-8]^P[a-14]^P[a-16];P[a]=(n<<1|n>>>31)&4294967295}let w=this.chain_[0],F=this.chain_[1],c=this.chain_[2],S=this.chain_[3],t=this.chain_[4],o,g;for(let a=0;a<80;a++){a<40?a<20?(o=S^F&(c^S),g=1518500249):(o=F^c^S,g=1859775393):a<60?(o=F&c|S&(F|c),g=2400959708):(o=F^c^S,g=3395469782);const n=(w<<5|w>>>27)+o+t+g+P[a]&4294967295;t=S,S=c,c=(F<<30|F>>>2)&4294967295,F=w,w=n}this.chain_[0]=this.chain_[0]+w&4294967295,this.chain_[1]=this.chain_[1]+F&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+S&4294967295,this.chain_[4]=this.chain_[4]+t&4294967295}update(v,m){if(v==null)return;m===void 0&&(m=v.length);const P=m-this.blockSize;let w=0;const F=this.buf_;let c=this.inbuf_;for(;w<m;){if(c===0)for(;w<=P;)this.compress_(v,w),w+=this.blockSize;if(typeof v=="string"){for(;w<m;)if(F[c]=v.charCodeAt(w),++c,++w,c===this.blockSize){this.compress_(F),c=0;break}}else for(;w<m;)if(F[c]=v[w],++c,++w,c===this.blockSize){this.compress_(F),c=0;break}}this.inbuf_=c,this.total_+=m}digest(){const v=[];let m=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let w=this.blockSize-1;w>=56;w--)this.buf_[w]=m&255,m/=256;this.compress_(this.buf_);let P=0;for(let w=0;w<5;w++)for(let F=24;F>=0;F-=8)v[P]=this.chain_[w]>>F&255,++P;return v}}function Sy(E,v){const m=new Cy(E,v);return m.subscribe.bind(m)}class Cy{constructor(v,m){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=m,this.task.then(()=>{v(this)}).catch(P=>{this.error(P)})}next(v){this.forEachObserver(m=>{m.next(v)})}error(v){this.forEachObserver(m=>{m.error(v)}),this.close(v)}complete(){this.forEachObserver(v=>{v.complete()}),this.close()}subscribe(v,m,P){let w;if(v===void 0&&m===void 0&&P===void 0)throw new Error("Missing Observer.");Ay(v,["next","error","complete"])?w=v:w={next:v,error:m,complete:P},w.next===void 0&&(w.next=bh),w.error===void 0&&(w.error=bh),w.complete===void 0&&(w.complete=bh);const F=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),F}unsubscribeOne(v){this.observers===void 0||this.observers[v]===void 0||(delete this.observers[v],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(v){if(!this.finalized)for(let m=0;m<this.observers.length;m++)this.sendOne(m,v)}sendOne(v,m){this.task.then(()=>{if(this.observers!==void 0&&this.observers[v]!==void 0)try{m(this.observers[v])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(v){this.finalized||(this.finalized=!0,v!==void 0&&(this.finalError=v),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ay(E,v){if(typeof E!="object"||E===null)return!1;for(const m of v)if(m in E&&typeof E[m]=="function")return!0;return!1}function bh(){}function Py(E,v){return`${E} failed: ${v} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=function(E){const v=[];let m=0;for(let P=0;P<E.length;P++){let w=E.charCodeAt(P);if(w>=55296&&w<=56319){const F=w-55296;P++,gt(P<E.length,"Surrogate pair missing trail surrogate.");const c=E.charCodeAt(P)-56320;w=65536+(F<<10)+c}w<128?v[m++]=w:w<2048?(v[m++]=w>>6|192,v[m++]=w&63|128):w<65536?(v[m++]=w>>12|224,v[m++]=w>>6&63|128,v[m++]=w&63|128):(v[m++]=w>>18|240,v[m++]=w>>12&63|128,v[m++]=w>>6&63|128,v[m++]=w&63|128)}return v},sh=function(E){let v=0;for(let m=0;m<E.length;m++){const P=E.charCodeAt(m);P<128?v++:P<2048?v+=2:P>=55296&&P<=56319?(v+=4,m++):v+=3}return v};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=1e3,wy=2,Iy=4*60*60*1e3,Oy=.5;function ed(E,v=My,m=wy){const P=v*Math.pow(m,E),w=Math.round(Oy*P*(Math.random()-.5)*2);return Math.min(Iy,P+w)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(E){return E&&E._delegate?E._delegate:E}class $e{constructor(v,m,P){this.name=v,this.instanceFactory=m,this.type=P,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(v){return this.instantiationMode=v,this}setMultipleInstances(v){return this.multipleInstances=v,this}setServiceProps(v){return this.serviceProps=v,this}setInstanceCreatedCallback(v){return this.onInstanceCreated=v,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(v,m){this.name=v,this.container=m,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(v){const m=this.normalizeInstanceIdentifier(v);if(!this.instancesDeferred.has(m)){const P=new jl;if(this.instancesDeferred.set(m,P),this.isInitialized(m)||this.shouldAutoInitialize())try{const w=this.getOrInitializeService({instanceIdentifier:m});w&&P.resolve(w)}catch{}}return this.instancesDeferred.get(m).promise}getImmediate(v){const m=this.normalizeInstanceIdentifier(v==null?void 0:v.identifier),P=(v==null?void 0:v.optional)??!1;if(this.isInitialized(m)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:m})}catch(w){if(P)return null;throw w}else{if(P)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(v){if(v.name!==this.name)throw Error(`Mismatching Component ${v.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=v,!!this.shouldAutoInitialize()){if(Fy(v))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[m,P]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(m);try{const F=this.getOrInitializeService({instanceIdentifier:w});P.resolve(F)}catch{}}}}clearInstance(v=ws){this.instancesDeferred.delete(v),this.instancesOptions.delete(v),this.instances.delete(v)}async delete(){const v=Array.from(this.instances.values());await Promise.all([...v.filter(m=>"INTERNAL"in m).map(m=>m.INTERNAL.delete()),...v.filter(m=>"_delete"in m).map(m=>m._delete())])}isComponentSet(){return this.component!=null}isInitialized(v=ws){return this.instances.has(v)}getOptions(v=ws){return this.instancesOptions.get(v)||{}}initialize(v={}){const{options:m={}}=v,P=this.normalizeInstanceIdentifier(v.instanceIdentifier);if(this.isInitialized(P))throw Error(`${this.name}(${P}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const w=this.getOrInitializeService({instanceIdentifier:P,options:m});for(const[F,c]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(F);P===S&&c.resolve(w)}return w}onInit(v,m){const P=this.normalizeInstanceIdentifier(m),w=this.onInitCallbacks.get(P)??new Set;w.add(v),this.onInitCallbacks.set(P,w);const F=this.instances.get(P);return F&&v(F,P),()=>{w.delete(v)}}invokeOnInitCallbacks(v,m){const P=this.onInitCallbacks.get(m);if(P)for(const w of P)try{w(v,m)}catch{}}getOrInitializeService({instanceIdentifier:v,options:m={}}){let P=this.instances.get(v);if(!P&&this.component&&(P=this.component.instanceFactory(this.container,{instanceIdentifier:Dy(v),options:m}),this.instances.set(v,P),this.instancesOptions.set(v,m),this.invokeOnInitCallbacks(P,v),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,v,P)}catch{}return P||null}normalizeInstanceIdentifier(v=ws){return this.component?this.component.multipleInstances?v:ws:v}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dy(E){return E===ws?void 0:E}function Fy(E){return E.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(v){this.name=v,this.providers=new Map}addComponent(v){const m=this.getProvider(v.name);if(m.isComponentSet())throw new Error(`Component ${v.name} has already been registered with ${this.name}`);m.setComponent(v)}addOrOverwriteComponent(v){this.getProvider(v.name).isComponentSet()&&this.providers.delete(v.name),this.addComponent(v)}getProvider(v){if(this.providers.has(v))return this.providers.get(v);const m=new Ly(v,this);return this.providers.set(v,m),m}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(E){E[E.DEBUG=0]="DEBUG",E[E.VERBOSE=1]="VERBOSE",E[E.INFO=2]="INFO",E[E.WARN=3]="WARN",E[E.ERROR=4]="ERROR",E[E.SILENT=5]="SILENT"})(Wt||(Wt={}));const By={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},by=Wt.INFO,Gy={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},Uy=(E,v,...m)=>{if(v<E.logLevel)return;const P=new Date().toISOString(),w=Gy[v];if(w)console[w](`[${P}]  ${E.name}:`,...m);else throw new Error(`Attempted to log a message with an invalid logType (value: ${v})`)};class Wa{constructor(v){this.name=v,this._logLevel=by,this._logHandler=Uy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(v){if(!(v in Wt))throw new TypeError(`Invalid value "${v}" assigned to \`logLevel\``);this._logLevel=v}setLogLevel(v){this._logLevel=typeof v=="string"?By[v]:v}get logHandler(){return this._logHandler}set logHandler(v){if(typeof v!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=v}get userLogHandler(){return this._userLogHandler}set userLogHandler(v){this._userLogHandler=v}debug(...v){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...v),this._logHandler(this,Wt.DEBUG,...v)}log(...v){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...v),this._logHandler(this,Wt.VERBOSE,...v)}info(...v){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...v),this._logHandler(this,Wt.INFO,...v)}warn(...v){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...v),this._logHandler(this,Wt.WARN,...v)}error(...v){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...v),this._logHandler(this,Wt.ERROR,...v)}}const Vy=(E,v)=>v.some(m=>E instanceof m);let id,sd;function Wy(){return id||(id=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zy(){return sd||(sd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zv=new WeakMap,pl=new WeakMap,Hv=new WeakMap,Gh=new WeakMap,Zl=new WeakMap;function Hy(E){const v=new Promise((m,P)=>{const w=()=>{E.removeEventListener("success",F),E.removeEventListener("error",c)},F=()=>{m(cs(E.result)),w()},c=()=>{P(E.error),w()};E.addEventListener("success",F),E.addEventListener("error",c)});return v.then(m=>{m instanceof IDBCursor&&zv.set(m,E)}).catch(()=>{}),Zl.set(v,E),v}function Yy(E){if(pl.has(E))return;const v=new Promise((m,P)=>{const w=()=>{E.removeEventListener("complete",F),E.removeEventListener("error",c),E.removeEventListener("abort",c)},F=()=>{m(),w()},c=()=>{P(E.error||new DOMException("AbortError","AbortError")),w()};E.addEventListener("complete",F),E.addEventListener("error",c),E.addEventListener("abort",c)});pl.set(E,v)}let gl={get(E,v,m){if(E instanceof IDBTransaction){if(v==="done")return pl.get(E);if(v==="objectStoreNames")return E.objectStoreNames||Hv.get(E);if(v==="store")return m.objectStoreNames[1]?void 0:m.objectStore(m.objectStoreNames[0])}return cs(E[v])},set(E,v,m){return E[v]=m,!0},has(E,v){return E instanceof IDBTransaction&&(v==="done"||v==="store")?!0:v in E}};function Xy(E){gl=E(gl)}function Ky(E){return E===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(v,...m){const P=E.call(Uh(this),v,...m);return Hv.set(P,v.sort?v.sort():[v]),cs(P)}:zy().includes(E)?function(...v){return E.apply(Uh(this),v),cs(zv.get(this))}:function(...v){return cs(E.apply(Uh(this),v))}}function jy(E){return typeof E=="function"?Ky(E):(E instanceof IDBTransaction&&Yy(E),Vy(E,Wy())?new Proxy(E,gl):E)}function cs(E){if(E instanceof IDBRequest)return Hy(E);if(Gh.has(E))return Gh.get(E);const v=jy(E);return v!==E&&(Gh.set(E,v),Zl.set(v,E)),v}const Uh=E=>Zl.get(E);function Yv(E,v,{blocked:m,upgrade:P,blocking:w,terminated:F}={}){const c=indexedDB.open(E,v),S=cs(c);return P&&c.addEventListener("upgradeneeded",t=>{P(cs(c.result),t.oldVersion,t.newVersion,cs(c.transaction),t)}),m&&c.addEventListener("blocked",t=>m(t.oldVersion,t.newVersion,t)),S.then(t=>{F&&t.addEventListener("close",()=>F()),w&&t.addEventListener("versionchange",o=>w(o.oldVersion,o.newVersion,o))}).catch(()=>{}),S}const $y=["get","getKey","getAll","getAllKeys","count"],Jy=["put","add","delete","clear"],Vh=new Map;function nd(E,v){if(!(E instanceof IDBDatabase&&!(v in E)&&typeof v=="string"))return;if(Vh.get(v))return Vh.get(v);const m=v.replace(/FromIndex$/,""),P=v!==m,w=Jy.includes(m);if(!(m in(P?IDBIndex:IDBObjectStore).prototype)||!(w||$y.includes(m)))return;const F=async function(c,...S){const t=this.transaction(c,w?"readwrite":"readonly");let o=t.store;return P&&(o=o.index(S.shift())),(await Promise.all([o[m](...S),w&&t.done]))[0]};return Vh.set(v,F),F}Xy(E=>({...E,get:(v,m,P)=>nd(v,m)||E.get(v,m,P),has:(v,m)=>!!nd(v,m)||E.has(v,m)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(v){this.container=v}getPlatformInfoString(){return this.container.getProviders().map(m=>{if(Zy(m)){const P=m.getImmediate();return`${P.library}/${P.version}`}else return null}).filter(m=>m).join(" ")}}function Zy(E){const v=E.getComponent();return(v==null?void 0:v.type)==="VERSION"}const ml="@firebase/app",rd="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Wa("@firebase/app"),Qy="@firebase/app-compat",qy="@firebase/analytics-compat",_y="@firebase/analytics",t1="@firebase/app-check-compat",e1="@firebase/app-check",i1="@firebase/auth",s1="@firebase/auth-compat",n1="@firebase/database",r1="@firebase/data-connect",a1="@firebase/database-compat",o1="@firebase/functions",h1="@firebase/functions-compat",l1="@firebase/installations",u1="@firebase/installations-compat",f1="@firebase/messaging",d1="@firebase/messaging-compat",c1="@firebase/performance",v1="@firebase/performance-compat",p1="@firebase/remote-config",g1="@firebase/remote-config-compat",m1="@firebase/storage",x1="@firebase/storage-compat",y1="@firebase/firestore",T1="@firebase/ai",E1="@firebase/firestore-compat",S1="firebase",C1="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="[DEFAULT]",A1={[ml]:"fire-core",[Qy]:"fire-core-compat",[_y]:"fire-analytics",[qy]:"fire-analytics-compat",[e1]:"fire-app-check",[t1]:"fire-app-check-compat",[i1]:"fire-auth",[s1]:"fire-auth-compat",[n1]:"fire-rtdb",[r1]:"fire-data-connect",[a1]:"fire-rtdb-compat",[o1]:"fire-fn",[h1]:"fire-fn-compat",[l1]:"fire-iid",[u1]:"fire-iid-compat",[f1]:"fire-fcm",[d1]:"fire-fcm-compat",[c1]:"fire-perf",[v1]:"fire-perf-compat",[p1]:"fire-rc",[g1]:"fire-rc-compat",[m1]:"fire-gcs",[x1]:"fire-gcs-compat",[y1]:"fire-fst",[E1]:"fire-fst-compat",[T1]:"fire-vertex","fire-js":"fire-js",[S1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Map,P1=new Map,yl=new Map;function ad(E,v){try{E.container.addComponent(v)}catch(m){Ui.debug(`Component ${v.name} failed to register with FirebaseApp ${E.name}`,m)}}function hi(E){const v=E.name;if(yl.has(v))return Ui.debug(`There were multiple attempts to register component ${v}.`),!1;yl.set(v,E);for(const m of Do.values())ad(m,E);for(const m of P1.values())ad(m,E);return!0}function Ts(E,v){const m=E.container.getProvider("heartbeat").getImmediate({optional:!0});return m&&m.triggerHeartbeat(),E.container.getProvider(v)}function Oe(E){return E==null?!1:E.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new xn("app","Firebase",R1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(v,m,P){this._isDeleted=!1,this._options={...v},this._config={...m},this._name=m.name,this._automaticDataCollectionEnabled=m.automaticDataCollectionEnabled,this._container=P,this.container.addComponent(new $e("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(v){this.checkDestroyed(),this._automaticDataCollectionEnabled=v}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(v){this._isDeleted=v}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=C1;function Xv(E,v={}){let m=E;typeof v!="object"&&(v={name:v});const P={name:xl,automaticDataCollectionEnabled:!0,...v},w=P.name;if(typeof w!="string"||!w)throw vs.create("bad-app-name",{appName:String(w)});if(m||(m=Fv()),!m)throw vs.create("no-options");const F=Do.get(w);if(F){if(Gi(m,F.options)&&Gi(P,F.config))return F;throw vs.create("duplicate-app",{appName:w})}const c=new Ny(w);for(const t of yl.values())c.addComponent(t);const S=new M1(m,P,c);return Do.set(w,S),S}function nh(E=xl){const v=Do.get(E);if(!v&&E===xl&&Fv())return Xv();if(!v)throw vs.create("no-app",{appName:E});return v}function De(E,v,m){let P=A1[E]??E;m&&(P+=`-${m}`);const w=P.match(/\s|\//),F=v.match(/\s|\//);if(w||F){const c=[`Unable to register library "${P}" with version "${v}":`];w&&c.push(`library name "${P}" contains illegal characters (whitespace or "/")`),w&&F&&c.push("and"),F&&c.push(`version name "${v}" contains illegal characters (whitespace or "/")`),Ui.warn(c.join(" "));return}hi(new $e(`${P}-version`,()=>({library:P,version:v}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebase-heartbeat-database",I1=1,na="firebase-heartbeat-store";let Wh=null;function Kv(){return Wh||(Wh=Yv(w1,I1,{upgrade:(E,v)=>{switch(v){case 0:try{E.createObjectStore(na)}catch(m){console.warn(m)}}}}).catch(E=>{throw vs.create("idb-open",{originalErrorMessage:E.message})})),Wh}async function O1(E){try{const m=(await Kv()).transaction(na),P=await m.objectStore(na).get(jv(E));return await m.done,P}catch(v){if(v instanceof ui)Ui.warn(v.message);else{const m=vs.create("idb-get",{originalErrorMessage:v==null?void 0:v.message});Ui.warn(m.message)}}}async function od(E,v){try{const P=(await Kv()).transaction(na,"readwrite");await P.objectStore(na).put(v,jv(E)),await P.done}catch(m){if(m instanceof ui)Ui.warn(m.message);else{const P=vs.create("idb-set",{originalErrorMessage:m==null?void 0:m.message});Ui.warn(P.message)}}}function jv(E){return`${E.name}!${E.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1024,D1=30;class F1{constructor(v){this.container=v,this._heartbeatsCache=null;const m=this.container.getProvider("app").getImmediate();this._storage=new B1(m),this._heartbeatsCachePromise=this._storage.read().then(P=>(this._heartbeatsCache=P,P))}async triggerHeartbeat(){var v,m;try{const w=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),F=hd();if(((v=this._heartbeatsCache)==null?void 0:v.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((m=this._heartbeatsCache)==null?void 0:m.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===F||this._heartbeatsCache.heartbeats.some(c=>c.date===F))return;if(this._heartbeatsCache.heartbeats.push({date:F,agent:w}),this._heartbeatsCache.heartbeats.length>D1){const c=b1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(P){Ui.warn(P)}}async getHeartbeatsHeader(){var v;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((v=this._heartbeatsCache)==null?void 0:v.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const m=hd(),{heartbeatsToSend:P,unsentEntries:w}=N1(this._heartbeatsCache.heartbeats),F=Io(JSON.stringify({version:2,heartbeats:P}));return this._heartbeatsCache.lastSentHeartbeatDate=m,w.length>0?(this._heartbeatsCache.heartbeats=w,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),F}catch(m){return Ui.warn(m),""}}}function hd(){return new Date().toISOString().substring(0,10)}function N1(E,v=L1){const m=[];let P=E.slice();for(const w of E){const F=m.find(c=>c.agent===w.agent);if(F){if(F.dates.push(w.date),ld(m)>v){F.dates.pop();break}}else if(m.push({agent:w.agent,dates:[w.date]}),ld(m)>v){m.pop();break}P=P.slice(1)}return{heartbeatsToSend:m,unsentEntries:P}}class B1{constructor(v){this.app=v,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uv()?Vv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const m=await O1(this.app);return m!=null&&m.heartbeats?m:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(v){if(await this._canUseIndexedDBPromise){const P=await this.read();return od(this.app,{lastSentHeartbeatDate:v.lastSentHeartbeatDate??P.lastSentHeartbeatDate,heartbeats:v.heartbeats})}else return}async add(v){if(await this._canUseIndexedDBPromise){const P=await this.read();return od(this.app,{lastSentHeartbeatDate:v.lastSentHeartbeatDate??P.lastSentHeartbeatDate,heartbeats:[...P.heartbeats,...v.heartbeats]})}else return}}function ld(E){return Io(JSON.stringify({version:2,heartbeats:E})).length}function b1(E){if(E.length===0)return-1;let v=0,m=E[0].date;for(let P=1;P<E.length;P++)E[P].date<m&&(m=E[P].date,v=P);return v}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(E){hi(new $e("platform-logger",v=>new ky(v),"PRIVATE")),hi(new $e("heartbeat",v=>new F1(v),"PRIVATE")),De(ml,rd,E),De(ml,rd,"esm2020"),De("fire-js","")}G1("");function $v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U1=$v,Jv=new xn("auth","Firebase",$v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Wa("@firebase/auth");function V1(E,...v){Fo.logLevel<=Wt.WARN&&Fo.warn(`Auth (${yn}): ${E}`,...v)}function Co(E,...v){Fo.logLevel<=Wt.ERROR&&Fo.error(`Auth (${yn}): ${E}`,...v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(E,...v){throw ql(E,...v)}function ai(E,...v){return ql(E,...v)}function Ql(E,v,m){const P={...U1(),[v]:m};return new xn("auth","Firebase",P).create(v,{appName:E.name})}function Bi(E){return Ql(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W1(E,v,m){const P=m;if(!(v instanceof P))throw P.name!==v.constructor.name&&Je(E,"argument-error"),Ql(E,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ql(E,...v){if(typeof E!="string"){const m=v[0],P=[...v.slice(1)];return P[0]&&(P[0].appName=E.name),E._errorFactory.create(m,...P)}return Jv.create(E,...v)}function At(E,v,...m){if(!E)throw ql(v,...m)}function Di(E){const v="INTERNAL ASSERTION FAILED: "+E;throw Co(v),new Error(v)}function Vi(E,v){E||Di(v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(){var E;return typeof self<"u"&&((E=self.location)==null?void 0:E.href)||""}function z1(){return ud()==="http:"||ud()==="https:"}function ud(){var E;return typeof self<"u"&&((E=self.location)==null?void 0:E.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z1()||bv()||"connection"in navigator)?navigator.onLine:!0}function Y1(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(v,m){this.shortDelay=v,this.longDelay=m,Vi(m>v,"Short delay should be less than long delay!"),this.isMobile=kl()||Gv()}get(){return H1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(E,v){Vi(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return v?`${m}${v.startsWith("/")?v.slice(1):v}`:m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{static initialize(v,m,P){this.fetchImpl=v,m&&(this.headersImpl=m),P&&(this.responseImpl=P)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j1=new za(3e4,6e4);function Es(E,v){return E.tenantId&&!v.tenantId?{...v,tenantId:E.tenantId}:v}async function Ss(E,v,m,P,w={}){return Zv(E,w,async()=>{let F={},c={};P&&(v==="GET"?c=P:F={body:JSON.stringify(P)});const S=gr({key:E.config.apiKey,...c}).slice(1),t=await E._getAdditionalHeaders();t["Content-Type"]="application/json",E.languageCode&&(t["X-Firebase-Locale"]=E.languageCode);const o={method:v,headers:t,...F};return dy()||(o.referrerPolicy="no-referrer"),E.emulatorConfig&&mn(E.emulatorConfig.host)&&(o.credentials="include"),kv.fetch()(await Qv(E,E.config.apiHost,m,S),o)})}async function Zv(E,v,m){E._canInitEmulator=!1;const P={...X1,...v};try{const w=new J1(E),F=await Promise.race([m(),w.promise]);w.clearNetworkTimeout();const c=await F.json();if("needConfirmation"in c)throw fo(E,"account-exists-with-different-credential",c);if(F.ok&&!("errorMessage"in c))return c;{const S=F.ok?c.errorMessage:c.error.message,[t,o]=S.split(" : ");if(t==="FEDERATED_USER_ID_ALREADY_LINKED")throw fo(E,"credential-already-in-use",c);if(t==="EMAIL_EXISTS")throw fo(E,"email-already-in-use",c);if(t==="USER_DISABLED")throw fo(E,"user-disabled",c);const g=P[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ql(E,g,o);Je(E,g)}}catch(w){if(w instanceof ui)throw w;Je(E,"network-request-failed",{message:String(w)})}}async function Ha(E,v,m,P,w={}){const F=await Ss(E,v,m,P,w);return"mfaPendingCredential"in F&&Je(E,"multi-factor-auth-required",{_serverResponse:F}),F}async function Qv(E,v,m,P){const w=`${v}${m}?${P}`,F=E,c=F.config.emulator?_l(E.config,w):`${E.config.apiScheme}://${w}`;return K1.includes(m)&&(await F._persistenceManagerAvailable,F._getPersistenceType()==="COOKIE")?F._getPersistence()._getFinalTarget(c).toString():c}function $1(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((m,P)=>{this.timer=setTimeout(()=>P(ai(this.auth,"network-request-failed")),j1.get())})}}function fo(E,v,m){const P={appName:E.name};m.email&&(P.email=m.email),m.phoneNumber&&(P.phoneNumber=m.phoneNumber);const w=ai(E,v,P);return w.customData._tokenResponse=m,w}function fd(E){return E!==void 0&&E.enterprise!==void 0}class k1{constructor(v){if(this.siteKey="",this.recaptchaEnforcementState=[],v.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=v.recaptchaEnforcementState}getProviderEnforcementState(v){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const m of this.recaptchaEnforcementState)if(m.provider&&m.provider===v)return $1(m.enforcementState);return null}isProviderEnabled(v){return this.getProviderEnforcementState(v)==="ENFORCE"||this.getProviderEnforcementState(v)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z1(E,v){return Ss(E,"GET","/v2/recaptchaConfig",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(E,v){return Ss(E,"POST","/v1/accounts:delete",v)}async function No(E,v){return Ss(E,"POST","/v1/accounts:lookup",v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(E){if(E)try{const v=new Date(Number(E));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}async function q1(E,v=!1){const m=We(E),P=await m.getIdToken(v),w=tu(P);At(w&&w.exp&&w.auth_time&&w.iat,m.auth,"internal-error");const F=typeof w.firebase=="object"?w.firebase:void 0,c=F==null?void 0:F.sign_in_provider;return{claims:w,token:P,authTime:jr(zh(w.auth_time)),issuedAtTime:jr(zh(w.iat)),expirationTime:jr(zh(w.exp)),signInProvider:c||null,signInSecondFactor:(F==null?void 0:F.sign_in_second_factor)||null}}function zh(E){return Number(E)*1e3}function tu(E){const[v,m,P]=E.split(".");if(v===void 0||m===void 0||P===void 0)return Co("JWT malformed, contained fewer than 3 sections"),null;try{const w=Oo(m);return w?JSON.parse(w):(Co("Failed to decode base64 JWT payload"),null)}catch(w){return Co("Caught error parsing JWT payload as JSON",w==null?void 0:w.toString()),null}}function dd(E){const v=tu(E);return At(v,"internal-error"),At(typeof v.exp<"u","internal-error"),At(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(E,v,m=!1){if(m)return v;try{return await v}catch(P){throw P instanceof ui&&_1(P)&&E.auth.currentUser===E&&await E.auth.signOut(),P}}function _1({code:E}){return E==="auth/user-disabled"||E==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(v){if(v){const m=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),m}else{this.errorBackoff=3e4;const P=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,P)}}schedule(v=!1){if(!this.isRunning)return;const m=this.getInterval(v);this.timerId=setTimeout(async()=>{await this.iteration()},m)}async iteration(){try{await this.user.getIdToken(!0)}catch(v){(v==null?void 0:v.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(v,m){this.createdAt=v,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=jr(this.lastLoginAt),this.creationTime=jr(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(E){var a;const v=E.auth,m=await E.getIdToken(),P=await ra(E,No(v,{idToken:m}));At(P==null?void 0:P.users.length,v,"internal-error");const w=P.users[0];E._notifyReloadListener(w);const F=(a=w.providerUserInfo)!=null&&a.length?qv(w.providerUserInfo):[],c=iT(E.providerData,F),S=E.isAnonymous,t=!(E.email&&w.passwordHash)&&!(c!=null&&c.length),o=S?t:!1,g={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:c,metadata:new El(w.createdAt,w.lastLoginAt),isAnonymous:o};Object.assign(E,g)}async function eT(E){const v=We(E);await Bo(v),await v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)}function iT(E,v){return[...E.filter(P=>!v.some(w=>w.providerId===P.providerId)),...v]}function qv(E){return E.map(({providerId:v,...m})=>({providerId:v,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(E,v){const m=await Zv(E,{},async()=>{const P=gr({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:w,apiKey:F}=E.config,c=await Qv(E,w,"/v1/token",`key=${F}`),S=await E._getAdditionalHeaders();S["Content-Type"]="application/x-www-form-urlencoded";const t={method:"POST",headers:S,body:P};return E.emulatorConfig&&mn(E.emulatorConfig.host)&&(t.credentials="include"),kv.fetch()(c,t)});return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}}async function nT(E,v){return Ss(E,"POST","/v2/accounts:revokeToken",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){At(v.idToken,"internal-error"),At(typeof v.idToken<"u","internal-error"),At(typeof v.refreshToken<"u","internal-error");const m="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):dd(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,m)}updateFromIdToken(v){At(v.length!==0,"internal-error");const m=dd(v);this.updateTokensAndExpiration(v,null,m)}async getToken(v,m=!1){return!m&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,v,"user-token-expired"),this.refreshToken?(await this.refresh(v,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(v,m){const{accessToken:P,refreshToken:w,expiresIn:F}=await sT(v,m);this.updateTokensAndExpiration(P,w,Number(F))}updateTokensAndExpiration(v,m,P){this.refreshToken=m||null,this.accessToken=v||null,this.expirationTime=Date.now()+P*1e3}static fromJSON(v,m){const{refreshToken:P,accessToken:w,expirationTime:F}=m,c=new Ln;return P&&(At(typeof P=="string","internal-error",{appName:v}),c.refreshToken=P),w&&(At(typeof w=="string","internal-error",{appName:v}),c.accessToken=w),F&&(At(typeof F=="number","internal-error",{appName:v}),c.expirationTime=F),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Ln,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(E,v){At(typeof E=="string"||typeof E>"u","internal-error",{appName:v})}class si{constructor({uid:v,auth:m,stsTokenManager:P,...w}){this.providerId="firebase",this.proactiveRefresh=new tT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=m,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new El(w.createdAt||void 0,w.lastLoginAt||void 0)}async getIdToken(v){const m=await ra(this,this.stsTokenManager.getToken(this.auth,v));return At(m,this.auth,"internal-error"),this.accessToken!==m&&(this.accessToken=m,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),m}getIdTokenResult(v){return q1(this,v)}reload(){return eT(this)}_assign(v){this!==v&&(At(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(m=>({...m})),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const m=new si({...this,auth:v,stsTokenManager:this.stsTokenManager._clone()});return m.metadata._copy(this.metadata),m}_onReload(v){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(v,m=!1){let P=!1;v.idToken&&v.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(v),P=!0),m&&await Bo(this),await this.auth._persistUserIfCurrent(this),P&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oe(this.auth.app))return Promise.reject(Bi(this.auth));const v=await this.getIdToken();return await ra(this,Q1(this.auth,{idToken:v})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>({...v})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,m){const P=m.displayName??void 0,w=m.email??void 0,F=m.phoneNumber??void 0,c=m.photoURL??void 0,S=m.tenantId??void 0,t=m._redirectEventId??void 0,o=m.createdAt??void 0,g=m.lastLoginAt??void 0,{uid:a,emailVerified:n,isAnonymous:r,providerData:e,stsTokenManager:s}=m;At(a&&s,v,"internal-error");const h=Ln.fromJSON(this.name,s);At(typeof a=="string",v,"internal-error"),Zi(P,v.name),Zi(w,v.name),At(typeof n=="boolean",v,"internal-error"),At(typeof r=="boolean",v,"internal-error"),Zi(F,v.name),Zi(c,v.name),Zi(S,v.name),Zi(t,v.name),Zi(o,v.name),Zi(g,v.name);const i=new si({uid:a,auth:v,email:w,emailVerified:n,displayName:P,isAnonymous:r,photoURL:c,phoneNumber:F,tenantId:S,stsTokenManager:h,createdAt:o,lastLoginAt:g});return e&&Array.isArray(e)&&(i.providerData=e.map(l=>({...l}))),t&&(i._redirectEventId=t),i}static async _fromIdTokenResponse(v,m,P=!1){const w=new Ln;w.updateFromServerResponse(m);const F=new si({uid:m.localId,auth:v,stsTokenManager:w,isAnonymous:P});return await Bo(F),F}static async _fromGetAccountInfoResponse(v,m,P){const w=m.users[0];At(w.localId!==void 0,"internal-error");const F=w.providerUserInfo!==void 0?qv(w.providerUserInfo):[],c=!(w.email&&w.passwordHash)&&!(F!=null&&F.length),S=new Ln;S.updateFromIdToken(P);const t=new si({uid:w.localId,auth:v,stsTokenManager:S,isAnonymous:c}),o={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:F,metadata:new El(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash)&&!(F!=null&&F.length)};return Object.assign(t,o),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Map;function Fi(E){Vi(E instanceof Function,"Expected a class definition");let v=cd.get(E);return v?(Vi(v instanceof E,"Instance stored in cache mismatched with class"),v):(v=new E,cd.set(E,v),v)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(v,m){this.storage[v]=m}async _get(v){const m=this.storage[v];return m===void 0?null:m}async _remove(v){delete this.storage[v]}_addListener(v,m){}_removeListener(v,m){}}_v.type="NONE";const vd=_v;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(E,v,m){return`firebase:${E}:${v}:${m}`}class Dn{constructor(v,m,P){this.persistence=v,this.auth=m,this.userKey=P;const{config:w,name:F}=this.auth;this.fullUserKey=Ao(this.userKey,w.apiKey,F),this.fullPersistenceKey=Ao("persistence",w.apiKey,F),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}async getCurrentUser(){const v=await this.persistence._get(this.fullUserKey);if(!v)return null;if(typeof v=="string"){const m=await No(this.auth,{idToken:v}).catch(()=>{});return m?si._fromGetAccountInfoResponse(this.auth,m,v):null}return si._fromJSON(this.auth,v)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(v){if(this.persistence===v)return;const m=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=v,m)return this.setCurrentUser(m)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(v,m,P="authUser"){if(!m.length)return new Dn(Fi(vd),v,P);const w=(await Promise.all(m.map(async o=>{if(await o._isAvailable())return o}))).filter(o=>o);let F=w[0]||Fi(vd);const c=Ao(P,v.config.apiKey,v.name);let S=null;for(const o of m)try{const g=await o._get(c);if(g){let a;if(typeof g=="string"){const n=await No(v,{idToken:g}).catch(()=>{});if(!n)break;a=await si._fromGetAccountInfoResponse(v,n,g)}else a=si._fromJSON(v,g);o!==F&&(S=a),F=o;break}}catch{}const t=w.filter(o=>o._shouldAllowMigration);return!F._shouldAllowMigration||!t.length?new Dn(F,v,P):(F=t[0],S&&await F._set(c,S.toJSON()),await Promise.all(m.map(async o=>{if(o!==F)try{await o._remove(c)}catch{}})),new Dn(F,v,P))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(E){const v=E.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(sp(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(tp(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(rp(v))return"Blackberry";if(ap(v))return"Webos";if(ep(v))return"Safari";if((v.includes("chrome/")||ip(v))&&!v.includes("edge/"))return"Chrome";if(np(v))return"Android";{const m=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,P=E.match(m);if((P==null?void 0:P.length)===2)return P[1]}return"Other"}function tp(E=Me()){return/firefox\//i.test(E)}function ep(E=Me()){const v=E.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function ip(E=Me()){return/crios\//i.test(E)}function sp(E=Me()){return/iemobile/i.test(E)}function np(E=Me()){return/android/i.test(E)}function rp(E=Me()){return/blackberry/i.test(E)}function ap(E=Me()){return/webos/i.test(E)}function eu(E=Me()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function rT(E=Me()){var v;return eu(E)&&!!((v=window.navigator)!=null&&v.standalone)}function aT(){return cy()&&document.documentMode===10}function op(E=Me()){return eu(E)||np(E)||ap(E)||rp(E)||/windows phone/i.test(E)||sp(E)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(E,v=[]){let m;switch(E){case"Browser":m=pd(Me());break;case"Worker":m=`${pd(Me())}-${E}`;break;default:m=E}const P=v.length?v.join(","):"FirebaseCore-web";return`${m}/JsCore/${yn}/${P}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,m){const P=F=>new Promise((c,S)=>{try{const t=v(F);c(t)}catch(t){S(t)}});P.onAbort=m,this.queue.push(P);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}async runMiddleware(v){if(this.auth.currentUser===v)return;const m=[];try{for(const P of this.queue)await P(v),P.onAbort&&m.push(P.onAbort)}catch(P){m.reverse();for(const w of m)try{w()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:P==null?void 0:P.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(E,v={}){return Ss(E,"GET","/v2/passwordPolicy",Es(E,v))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=6;class uT{constructor(v){var P;const m=v.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=m.minPasswordLength??lT,m.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=m.maxPasswordLength),m.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=m.containsLowercaseCharacter),m.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=m.containsUppercaseCharacter),m.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=m.containsNumericCharacter),m.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=m.containsNonAlphanumericCharacter),this.enforcementState=v.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((P=v.allowedNonAlphanumericCharacters)==null?void 0:P.join(""))??"",this.forceUpgradeOnSignin=v.forceUpgradeOnSignin??!1,this.schemaVersion=v.schemaVersion}validatePassword(v){const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(v,m),this.validatePasswordCharacterOptions(v,m),m.isValid&&(m.isValid=m.meetsMinPasswordLength??!0),m.isValid&&(m.isValid=m.meetsMaxPasswordLength??!0),m.isValid&&(m.isValid=m.containsLowercaseLetter??!0),m.isValid&&(m.isValid=m.containsUppercaseLetter??!0),m.isValid&&(m.isValid=m.containsNumericCharacter??!0),m.isValid&&(m.isValid=m.containsNonAlphanumericCharacter??!0),m}validatePasswordLengthOptions(v,m){const P=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;P&&(m.meetsMinPasswordLength=v.length>=P),w&&(m.meetsMaxPasswordLength=v.length<=w)}validatePasswordCharacterOptions(v,m){this.updatePasswordCharacterOptionsStatuses(m,!1,!1,!1,!1);let P;for(let w=0;w<v.length;w++)P=v.charAt(w),this.updatePasswordCharacterOptionsStatuses(m,P>="a"&&P<="z",P>="A"&&P<="Z",P>="0"&&P<="9",this.allowedNonAlphanumericCharacters.includes(P))}updatePasswordCharacterOptionsStatuses(v,m,P,w,F){this.customStrengthOptions.containsLowercaseLetter&&(v.containsLowercaseLetter||(v.containsLowercaseLetter=m)),this.customStrengthOptions.containsUppercaseLetter&&(v.containsUppercaseLetter||(v.containsUppercaseLetter=P)),this.customStrengthOptions.containsNumericCharacter&&(v.containsNumericCharacter||(v.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(v.containsNonAlphanumericCharacter||(v.containsNonAlphanumericCharacter=F))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(v,m,P,w){this.app=v,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=P,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gd(this),this.idTokenSubscription=new gd(this),this.beforeStateQueue=new oT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=w.sdkClientVersion,this._persistenceManagerAvailable=new Promise(F=>this._resolvePersistenceManagerAvailable=F)}_initializeWithPersistence(v,m){return m&&(this._popupRedirectResolver=Fi(m)),this._initializationPromise=this.queue(async()=>{var P,w,F;if(!this._deleted&&(this.persistenceManager=await Dn.create(this,v),(P=this._resolvePersistenceManagerAvailable)==null||P.call(this),!this._deleted)){if((w=this._popupRedirectResolver)!=null&&w._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(m),this.lastNotifiedUid=((F=this.currentUser)==null?void 0:F.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const v=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!v)){if(this.currentUser&&v&&this.currentUser.uid===v.uid){this._currentUser._assign(v),await this.currentUser.getIdToken();return}await this._updateCurrentUser(v,!0)}}async initializeCurrentUserFromIdToken(v){try{const m=await No(this,{idToken:v}),P=await si._fromGetAccountInfoResponse(this,m,v);await this.directlySetCurrentUser(P)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(v){var F;if(Oe(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(S=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(S,S))}):this.directlySetCurrentUser(null)}const m=await this.assertedPersistence.getCurrentUser();let P=m,w=!1;if(v&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(F=this.redirectUser)==null?void 0:F._redirectEventId,S=P==null?void 0:P._redirectEventId,t=await this.tryRedirectSignIn(v);(!c||c===S)&&(t!=null&&t.user)&&(P=t.user,w=!0)}if(!P)return this.directlySetCurrentUser(null);if(!P._redirectEventId){if(w)try{await this.beforeStateQueue.runMiddleware(P)}catch(c){P=m,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return P?this.reloadAndSetCurrentUserOrClear(P):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===P._redirectEventId?this.directlySetCurrentUser(P):this.reloadAndSetCurrentUserOrClear(P)}async tryRedirectSignIn(v){let m=null;try{m=await this._popupRedirectResolver._completeRedirectFn(this,v,!0)}catch{await this._setRedirectUser(null)}return m}async reloadAndSetCurrentUserOrClear(v){try{await Bo(v)}catch(m){if((m==null?void 0:m.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(v)}useDeviceLanguage(){this.languageCode=Y1()}async _delete(){this._deleted=!0}async updateCurrentUser(v){if(Oe(this.app))return Promise.reject(Bi(this));const m=v?We(v):null;return m&&At(m.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(m&&m._clone(this))}async _updateCurrentUser(v,m=!1){if(!this._deleted)return v&&At(this.tenantId===v.tenantId,this,"tenant-id-mismatch"),m||await this.beforeStateQueue.runMiddleware(v),this.queue(async()=>{await this.directlySetCurrentUser(v),this.notifyAuthListeners()})}async signOut(){return Oe(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(v){return Oe(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(v))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(v){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const m=this._getPasswordPolicyInternal();return m.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(v)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const v=await hT(this),m=new uT(v);this.tenantId===null?this._projectPasswordPolicy=m:this._tenantPasswordPolicies[this.tenantId]=m}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(v){this._errorFactory=new xn("auth","Firebase",v())}onAuthStateChanged(v,m,P){return this.registerStateListener(this.authStateSubscription,v,m,P)}beforeAuthStateChanged(v,m){return this.beforeStateQueue.pushCallback(v,m)}onIdTokenChanged(v,m,P){return this.registerStateListener(this.idTokenSubscription,v,m,P)}authStateReady(){return new Promise((v,m)=>{if(this.currentUser)v();else{const P=this.onAuthStateChanged(()=>{P(),v()},m)}})}async revokeAccessToken(v){if(this.currentUser){const m=await this.currentUser.getIdToken(),P={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:v,idToken:m};this.tenantId!=null&&(P.tenantId=this.tenantId),await nT(this,P)}}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(v=this._currentUser)==null?void 0:v.toJSON()}}async _setRedirectUser(v,m){const P=await this.getOrInitRedirectPersistenceManager(m);return v===null?P.removeCurrentUser():P.setCurrentUser(v)}async getOrInitRedirectPersistenceManager(v){if(!this.redirectPersistenceManager){const m=v&&Fi(v)||this._popupRedirectResolver;At(m,this,"argument-error"),this.redirectPersistenceManager=await Dn.create(this,[Fi(m._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(v){var m,P;return this._isInitialized&&await this.queue(async()=>{}),((m=this._currentUser)==null?void 0:m._redirectEventId)===v?this._currentUser:((P=this.redirectUser)==null?void 0:P._redirectEventId)===v?this.redirectUser:null}async _persistUserIfCurrent(v){if(v===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(v))}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=((m=this.currentUser)==null?void 0:m.uid)??null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,m,P,w){if(this._deleted)return()=>{};const F=typeof m=="function"?m:m.next.bind(m);let c=!1;const S=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(S,this,"internal-error"),S.then(()=>{c||F(this.currentUser)}),typeof m=="function"){const t=v.addObserver(m,P,w);return()=>{c=!0,t()}}else{const t=v.addObserver(m);return()=>{c=!0,t()}}}async directlySetCurrentUser(v){this.currentUser&&this.currentUser!==v&&this._currentUser._stopProactiveRefresh(),v&&this.isProactiveRefreshEnabled&&v._startProactiveRefresh(),this.currentUser=v,v?await this.assertedPersistence.setCurrentUser(v):await this.assertedPersistence.removeCurrentUser()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=hp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var w;const v={"X-Client-Version":this.clientVersion};this.app.options.appId&&(v["X-Firebase-gmpid"]=this.app.options.appId);const m=await((w=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:w.getHeartbeatsHeader());m&&(v["X-Firebase-Client"]=m);const P=await this._getAppCheckToken();return P&&(v["X-Firebase-AppCheck"]=P),v}async _getAppCheckToken(){var m;if(Oe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const v=await((m=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:m.getToken());return v!=null&&v.error&&V1(`Error while retrieving App Check token: ${v.error}`),v==null?void 0:v.token}}function Cs(E){return We(E)}class gd{constructor(v){this.auth=v,this.observer=null,this.addObserver=Sy(m=>this.observer=m)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dT(E){rh=E}function lp(E){return rh.loadJS(E)}function cT(){return rh.recaptchaEnterpriseScript}function vT(){return rh.gapiScript}function pT(E){return`__${E}${Math.floor(Math.random()*1e6)}`}class gT{constructor(){this.enterprise=new mT}ready(v){v()}execute(v,m){return Promise.resolve("token")}render(v,m){return""}}class mT{ready(v){v()}execute(v,m){return Promise.resolve("token")}render(v,m){return""}}const xT="recaptcha-enterprise",up="NO_RECAPTCHA";class yT{constructor(v){this.type=xT,this.auth=Cs(v)}async verify(v="verify",m=!1){async function P(F){if(!m){if(F.tenantId==null&&F._agentRecaptchaConfig!=null)return F._agentRecaptchaConfig.siteKey;if(F.tenantId!=null&&F._tenantRecaptchaConfigs[F.tenantId]!==void 0)return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(async(c,S)=>{Z1(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(t=>{if(t.recaptchaKey===void 0)S(new Error("recaptcha Enterprise site key undefined"));else{const o=new k1(t);return F.tenantId==null?F._agentRecaptchaConfig=o:F._tenantRecaptchaConfigs[F.tenantId]=o,c(o.siteKey)}}).catch(t=>{S(t)})})}function w(F,c,S){const t=window.grecaptcha;fd(t)?t.enterprise.ready(()=>{t.enterprise.execute(F,{action:v}).then(o=>{c(o)}).catch(()=>{c(up)})}):S(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gT().execute("siteKey",{action:"verify"}):new Promise((F,c)=>{P(this.auth).then(S=>{if(!m&&fd(window.grecaptcha))w(S,F,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let t=cT();t.length!==0&&(t+=S),lp(t).then(()=>{w(S,F,c)}).catch(o=>{c(o)})}}).catch(S=>{c(S)})})}}async function md(E,v,m,P=!1,w=!1){const F=new yT(E);let c;if(w)c=up;else try{c=await F.verify(m)}catch{c=await F.verify(m,!0)}const S={...v};if(m==="mfaSmsEnrollment"||m==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in S){const t=S.phoneEnrollmentInfo.phoneNumber,o=S.phoneEnrollmentInfo.recaptchaToken;Object.assign(S,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:o,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in S){const t=S.phoneSignInInfo.recaptchaToken;Object.assign(S,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return S}return P?Object.assign(S,{captchaResp:c}):Object.assign(S,{captchaResponse:c}),Object.assign(S,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(S,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),S}async function Sl(E,v,m,P,w){var F;if((F=E._getRecaptchaConfig())!=null&&F.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await md(E,v,m,m==="getOobCode");return P(E,c)}else return P(E,v).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${m} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const S=await md(E,v,m,m==="getOobCode");return P(E,S)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(E,v){const m=Ts(E,"auth");if(m.isInitialized()){const w=m.getImmediate(),F=m.getOptions();if(Gi(F,v??{}))return w;Je(w,"already-initialized")}return m.initialize({options:v})}function ET(E,v){const m=(v==null?void 0:v.persistence)||[],P=(Array.isArray(m)?m:[m]).map(Fi);v!=null&&v.errorMap&&E._updateErrorMap(v.errorMap),E._initializeWithPersistence(P,v==null?void 0:v.popupRedirectResolver)}function ST(E,v,m){const P=Cs(E);At(/^https?:\/\//.test(v),P,"invalid-emulator-scheme");const w=!1,F=fp(v),{host:c,port:S}=CT(v),t=S===null?"":`:${S}`,o={url:`${F}//${c}${t}/`},g=Object.freeze({host:c,port:S,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:w})});if(!P._canInitEmulator){At(P.config.emulator&&P.emulatorConfig,P,"emulator-config-failed"),At(Gi(o,P.config.emulator)&&Gi(g,P.emulatorConfig),P,"emulator-config-failed");return}P.config.emulator=o,P.emulatorConfig=g,P.settings.appVerificationDisabledForTesting=!0,mn(c)?($l(`${F}//${c}${t}`),Jl("Auth",!0)):AT()}function fp(E){const v=E.indexOf(":");return v<0?"":E.substr(0,v+1)}function CT(E){const v=fp(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(v.length));if(!m)return{host:"",port:null};const P=m[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(P);if(w){const F=w[1];return{host:F,port:xd(P.substr(F.length+1))}}else{const[F,c]=P.split(":");return{host:F,port:xd(c)}}}function xd(E){if(!E)return null;const v=Number(E);return isNaN(v)?null:v}function AT(){function E(){const v=document.createElement("p"),m=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(v,m){this.providerId=v,this.signInMethod=m}toJSON(){return Di("not implemented")}_getIdTokenResponse(v){return Di("not implemented")}_linkToIdToken(v,m){return Di("not implemented")}_getReauthenticationResolver(v){return Di("not implemented")}}async function PT(E,v){return Ss(E,"POST","/v1/accounts:signUp",v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(E,v){return Ha(E,"POST","/v1/accounts:signInWithPassword",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(E,v){return Ha(E,"POST","/v1/accounts:signInWithEmailLink",Es(E,v))}async function wT(E,v){return Ha(E,"POST","/v1/accounts:signInWithEmailLink",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends iu{constructor(v,m,P,w=null){super("password",P),this._email=v,this._password=m,this._tenantId=w}static _fromEmailAndPassword(v,m){return new aa(v,m,"password")}static _fromEmailAndCode(v,m,P=null){return new aa(v,m,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const m=typeof v=="string"?JSON.parse(v):v;if(m!=null&&m.email&&(m!=null&&m.password)){if(m.signInMethod==="password")return this._fromEmailAndPassword(m.email,m.password);if(m.signInMethod==="emailLink")return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}async _getIdTokenResponse(v){switch(this.signInMethod){case"password":const m={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sl(v,m,"signInWithPassword",RT);case"emailLink":return MT(v,{email:this._email,oobCode:this._password});default:Je(v,"internal-error")}}async _linkToIdToken(v,m){switch(this.signInMethod){case"password":const P={idToken:m,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sl(v,P,"signUpPassword",PT);case"emailLink":return wT(v,{idToken:m,email:this._email,oobCode:this._password});default:Je(v,"internal-error")}}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fn(E,v){return Ha(E,"POST","/v1/accounts:signInWithIdp",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="http://localhost";class an extends iu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const m=new an(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(m.idToken=v.idToken),v.accessToken&&(m.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(m.nonce=v.nonce),v.pendingToken&&(m.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(m.accessToken=v.oauthToken,m.secret=v.oauthTokenSecret):Je("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const m=typeof v=="string"?JSON.parse(v):v,{providerId:P,signInMethod:w,...F}=m;if(!P||!w)return null;const c=new an(P,w);return c.idToken=F.idToken||void 0,c.accessToken=F.accessToken||void 0,c.secret=F.secret,c.nonce=F.nonce,c.pendingToken=F.pendingToken||null,c}_getIdTokenResponse(v){const m=this.buildRequest();return Fn(v,m)}_linkToIdToken(v,m){const P=this.buildRequest();return P.idToken=m,Fn(v,P)}_getReauthenticationResolver(v){const m=this.buildRequest();return m.autoCreate=!1,Fn(v,m)}buildRequest(){const v={requestUri:IT,returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),v.postBody=gr(m)}return v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LT(E){const v=Wr(zr(E)).link,m=v?Wr(zr(v)).deep_link_id:null,P=Wr(zr(E)).deep_link_id;return(P?Wr(zr(P)).link:null)||P||m||v||E}class su{constructor(v){const m=Wr(zr(v)),P=m.apiKey??null,w=m.oobCode??null,F=OT(m.mode??null);At(P&&w&&F,"argument-error"),this.apiKey=P,this.operation=F,this.code=w,this.continueUrl=m.continueUrl??null,this.languageCode=m.lang??null,this.tenantId=m.tenantId??null}static parseLink(v){const m=LT(v);try{return new su(m)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.providerId=mr.PROVIDER_ID}static credential(v,m){return aa._fromEmailAndPassword(v,m)}static credentialWithLink(v,m){const P=su.parseLink(m);return At(P,"argument-error"),aa._fromEmailAndCode(v,P.code,P.tenantId)}}mr.PROVIDER_ID="password";mr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends nu{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Ya{constructor(){super("facebook.com")}static credential(v){return an._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return qi.credentialFromTaggedObject(v)}static credentialFromError(v){return qi.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return qi.credential(v.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(v,m){return an._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:m})}static credentialFromResult(v){return Oi.credentialFromTaggedObject(v)}static credentialFromError(v){return Oi.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:m,oauthAccessToken:P}=v;if(!m&&!P)return null;try{return Oi.credential(m,P)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Ya{constructor(){super("github.com")}static credential(v){return an._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return _i.credentialFromTaggedObject(v)}static credentialFromError(v){return _i.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return _i.credential(v.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Ya{constructor(){super("twitter.com")}static credential(v,m){return an._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:m})}static credentialFromResult(v){return ts.credentialFromTaggedObject(v)}static credentialFromError(v){return ts.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:m,oauthTokenSecret:P}=v;if(!m||!P)return null;try{return ts.credential(m,P)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(E,v){return Ha(E,"POST","/v1/accounts:signUp",Es(E,v))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static async _fromIdTokenResponse(v,m,P,w=!1){const F=await si._fromIdTokenResponse(v,P,w),c=yd(P);return new on({user:F,providerId:c,_tokenResponse:P,operationType:m})}static async _forOperation(v,m,P){await v._updateTokensIfNecessary(P,!0);const w=yd(P);return new on({user:v,providerId:w,_tokenResponse:P,operationType:m})}}function yd(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends ui{constructor(v,m,P,w){super(m.code,m.message),this.operationType=P,this.user=w,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:v.name,tenantId:v.tenantId??void 0,_serverResponse:m.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(v,m,P,w){return new bo(v,m,P,w)}}function dp(E,v,m,P){return(v==="reauthenticate"?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(F=>{throw F.code==="auth/multi-factor-auth-required"?bo._fromErrorAndOperation(E,F,v,P):F})}async function FT(E,v,m=!1){const P=await ra(E,v._linkToIdToken(E.auth,await E.getIdToken()),m);return on._forOperation(E,"link",P)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(E,v,m=!1){const{auth:P}=E;if(Oe(P.app))return Promise.reject(Bi(P));const w="reauthenticate";try{const F=await ra(E,dp(P,w,v,E),m);At(F.idToken,P,"internal-error");const c=tu(F.idToken);At(c,P,"internal-error");const{sub:S}=c;return At(E.uid===S,P,"user-mismatch"),on._forOperation(E,w,F)}catch(F){throw(F==null?void 0:F.code)==="auth/user-not-found"&&Je(P,"user-mismatch"),F}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(E,v,m=!1){if(Oe(E.app))return Promise.reject(Bi(E));const P="signIn",w=await dp(E,P,v),F=await on._fromIdTokenResponse(E,P,w);return m||await E._updateCurrentUser(F.user),F}async function BT(E,v){return cp(Cs(E),v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(E){const v=Cs(E);v._getPasswordPolicyInternal()&&await v._updatePasswordPolicy()}async function bT(E,v,m){if(Oe(E.app))return Promise.reject(Bi(E));const P=Cs(E),c=await Sl(P,{returnSecureToken:!0,email:v,password:m,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DT).catch(t=>{throw t.code==="auth/password-does-not-meet-requirements"&&vp(E),t}),S=await on._fromIdTokenResponse(P,"signIn",c);return await P._updateCurrentUser(S.user),S}function GT(E,v,m){return Oe(E.app)?Promise.reject(Bi(E)):BT(We(E),mr.credential(v,m)).catch(async P=>{throw P.code==="auth/password-does-not-meet-requirements"&&vp(E),P})}function UT(E,v,m,P){return We(E).onIdTokenChanged(v,m,P)}function VT(E,v,m){return We(E).beforeAuthStateChanged(v,m)}const Go="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(v,m){this.storageRetriever=v,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Go,"1"),this.storage.removeItem(Go),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,m){return this.storage.setItem(v,JSON.stringify(m)),Promise.resolve()}_get(v){const m=this.storage.getItem(v);return Promise.resolve(m?JSON.parse(m):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=1e3,zT=10;class gp extends pp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,m)=>this.onStorageEvent(v,m),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=op(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const m of Object.keys(this.listeners)){const P=this.storage.getItem(m),w=this.localCache[m];P!==w&&v(m,w,P)}}onStorageEvent(v,m=!1){if(!v.key){this.forAllChangedKeys((c,S,t)=>{this.notifyListeners(c,t)});return}const P=v.key;m?this.detachListener():this.stopPolling();const w=()=>{const c=this.storage.getItem(P);!m&&this.localCache[P]===c||this.notifyListeners(P,c)},F=this.storage.getItem(P);aT()&&F!==v.newValue&&v.newValue!==v.oldValue?setTimeout(w,zT):w()}notifyListeners(v,m){this.localCache[v]=m;const P=this.listeners[v];if(P)for(const w of Array.from(P))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,m,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:m,newValue:P}),!0)})},WT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,m){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(m)}_removeListener(v,m){this.listeners[v]&&(this.listeners[v].delete(m),this.listeners[v].size===0&&delete this.listeners[v]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(v,m){await super._set(v,m),this.localCache[v]=JSON.stringify(m)}async _get(v){const m=await super._get(v);return this.localCache[v]=JSON.stringify(m),m}async _remove(v){await super._remove(v),delete this.localCache[v]}}gp.type="LOCAL";const HT=gp;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends pp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,m){}_removeListener(v,m){}}mp.type="SESSION";const xp=mp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(E){return Promise.all(E.map(async v=>{try{return{fulfilled:!0,value:await v}}catch(m){return{fulfilled:!1,reason:m}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const m=this.receivers.find(w=>w.isListeningto(v));if(m)return m;const P=new ah(v);return this.receivers.push(P),P}isListeningto(v){return this.eventTarget===v}async handleEvent(v){const m=v,{eventId:P,eventType:w,data:F}=m.data,c=this.handlersMap[w];if(!(c!=null&&c.size))return;m.ports[0].postMessage({status:"ack",eventId:P,eventType:w});const S=Array.from(c).map(async o=>o(m.origin,F)),t=await YT(S);m.ports[0].postMessage({status:"done",eventId:P,eventType:w,response:t})}_subscribe(v,m){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(m)}_unsubscribe(v,m){this.handlersMap[v]&&m&&this.handlersMap[v].delete(m),(!m||this.handlersMap[v].size===0)&&delete this.handlersMap[v],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(E="",v=10){let m="";for(let P=0;P<v;P++)m+=Math.floor(Math.random()*10);return E+m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}async _send(v,m,P=50){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let F,c;return new Promise((S,t)=>{const o=ru("",20);w.port1.start();const g=setTimeout(()=>{t(new Error("unsupported_event"))},P);c={messageChannel:w,onMessage(a){const n=a;if(n.data.eventId===o)switch(n.data.status){case"ack":clearTimeout(g),F=setTimeout(()=>{t(new Error("timeout"))},3e3);break;case"done":clearTimeout(F),S(n.data.response);break;default:clearTimeout(g),clearTimeout(F),t(new Error("invalid_response"));break}}},this.handlers.add(c),w.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:v,eventId:o,data:m},[w.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function KT(E){Ai().location.href=E}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function jT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $T(){var E;return((E=navigator==null?void 0:navigator.serviceWorker)==null?void 0:E.controller)||null}function JT(){return yp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="firebaseLocalStorageDb",kT=1,Uo="firebaseLocalStorage",Ep="fbase_key";class Xa{constructor(v){this.request=v}toPromise(){return new Promise((v,m)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function oh(E,v){return E.transaction([Uo],v?"readwrite":"readonly").objectStore(Uo)}function ZT(){const E=indexedDB.deleteDatabase(Tp);return new Xa(E).toPromise()}function Cl(){const E=indexedDB.open(Tp,kT);return new Promise((v,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const P=E.result;try{P.createObjectStore(Uo,{keyPath:Ep})}catch(w){m(w)}}),E.addEventListener("success",async()=>{const P=E.result;P.objectStoreNames.contains(Uo)?v(P):(P.close(),await ZT(),v(await Cl()))})})}async function Td(E,v,m){const P=oh(E,!0).put({[Ep]:v,value:m});return new Xa(P).toPromise()}async function QT(E,v){const m=oh(E,!1).get(v),P=await new Xa(m).toPromise();return P===void 0?null:P.value}function Ed(E,v){const m=oh(E,!0).delete(v);return new Xa(m).toPromise()}const qT=800,_T=3;class Sp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cl(),this.db)}async _withRetries(v){let m=0;for(;;)try{const P=await this._openDb();return await v(P)}catch(P){if(m++>_T)throw P;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(JT()),this.receiver._subscribe("keyChanged",async(v,m)=>({keyProcessed:(await this._poll()).includes(m.key)})),this.receiver._subscribe("ping",async(v,m)=>["keyChanged"])}async initializeSender(){var m,P;if(this.activeServiceWorker=await jT(),!this.activeServiceWorker)return;this.sender=new XT(this.activeServiceWorker);const v=await this.sender._send("ping",{},800);v&&(m=v[0])!=null&&m.fulfilled&&(P=v[0])!=null&&P.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(v){if(!(!this.sender||!this.activeServiceWorker||$T()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:v},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const v=await Cl();return await Td(v,Go,"1"),await Ed(v,Go),!0}catch{}return!1}async _withPendingWrite(v){this.pendingWrites++;try{await v()}finally{this.pendingWrites--}}async _set(v,m){return this._withPendingWrite(async()=>(await this._withRetries(P=>Td(P,v,m)),this.localCache[v]=m,this.notifyServiceWorker(v)))}async _get(v){const m=await this._withRetries(P=>QT(P,v));return this.localCache[v]=m,m}async _remove(v){return this._withPendingWrite(async()=>(await this._withRetries(m=>Ed(m,v)),delete this.localCache[v],this.notifyServiceWorker(v)))}async _poll(){const v=await this._withRetries(w=>{const F=oh(w,!1).getAll();return new Xa(F).toPromise()});if(!v)return[];if(this.pendingWrites!==0)return[];const m=[],P=new Set;if(v.length!==0)for(const{fbase_key:w,value:F}of v)P.add(w),JSON.stringify(this.localCache[w])!==JSON.stringify(F)&&(this.notifyListeners(w,F),m.push(w));for(const w of Object.keys(this.localCache))this.localCache[w]&&!P.has(w)&&(this.notifyListeners(w,null),m.push(w));return m}notifyListeners(v,m){this.localCache[v]=m;const P=this.listeners[v];if(P)for(const w of Array.from(P))w(m)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,m){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(m)}_removeListener(v,m){this.listeners[v]&&(this.listeners[v].delete(m),this.listeners[v].size===0&&delete this.listeners[v]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sp.type="LOCAL";const tE=Sp;new za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(E,v){return v?Fi(v):(At(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends iu{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Fn(v,this._buildIdpRequest())}_linkToIdToken(v,m){return Fn(v,this._buildIdpRequest(m))}_getReauthenticationResolver(v){return Fn(v,this._buildIdpRequest())}_buildIdpRequest(v){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(m.idToken=v),m}}function eE(E){return cp(E.auth,new au(E),E.bypassAuthState)}function iE(E){const{auth:v,user:m}=E;return At(m,v,"internal-error"),NT(m,new au(E),E.bypassAuthState)}async function sE(E){const{auth:v,user:m}=E;return At(m,v,"internal-error"),FT(m,new au(E),E.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(v,m,P,w,F=!1){this.auth=v,this.resolver=P,this.user=w,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){return new Promise(async(v,m)=>{this.pendingPromise={resolve:v,reject:m};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(P){this.reject(P)}})}async onAuthEvent(v){const{urlResponse:m,sessionId:P,postBody:w,tenantId:F,error:c,type:S}=v;if(c){this.reject(c);return}const t={auth:this.auth,requestUri:m,sessionId:P,tenantId:F||void 0,postBody:w||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(S)(t))}catch(o){this.reject(o)}}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return eE;case"linkViaPopup":case"linkViaRedirect":return sE;case"reauthViaPopup":case"reauthViaRedirect":return iE;default:Je(this.auth,"internal-error")}}resolve(v){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new za(2e3,1e4);async function rE(E,v,m){if(Oe(E.app))return Promise.reject(ai(E,"operation-not-supported-in-this-environment"));const P=Cs(E);W1(E,v,nu);const w=Cp(P,m);return new Fs(P,"signInViaPopup",v,w).executeNotNull()}class Fs extends Ap{constructor(v,m,P,w,F){super(v,m,w,F),this.provider=P,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const v=await this.execute();return At(v,this.auth,"internal-error"),v}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const v=ru();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],v),this.authWindow.associatedEvent=v,this.resolver._originValidation(this.auth).catch(m=>{this.reject(m)}),this.resolver._isIframeWebStorageSupported(this.auth,m=>{m||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var v;return((v=this.authWindow)==null?void 0:v.associatedEvent)||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const v=()=>{var m,P;if((P=(m=this.authWindow)==null?void 0:m.window)!=null&&P.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(v,nE.get())};v()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="pendingRedirect",Po=new Map;class oE extends Ap{constructor(v,m,P=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,P),this.eventId=null}async execute(){let v=Po.get(this.auth._key());if(!v){try{const P=await hE(this.resolver,this.auth)?await super.execute():null;v=()=>Promise.resolve(P)}catch(m){v=()=>Promise.reject(m)}Po.set(this.auth._key(),v)}return this.bypassAuthState||Po.set(this.auth._key(),()=>Promise.resolve(null)),v()}async onAuthEvent(v){if(v.type==="signInViaRedirect")return super.onAuthEvent(v);if(v.type==="unknown"){this.resolve(null);return}if(v.eventId){const m=await this.auth._redirectUserForId(v.eventId);if(m)return this.user=m,super.onAuthEvent(v);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hE(E,v){const m=fE(v),P=uE(E);if(!await P._isAvailable())return!1;const w=await P._get(m)==="true";return await P._remove(m),w}function lE(E,v){Po.set(E._key(),v)}function uE(E){return Fi(E._redirectPersistence)}function fE(E){return Ao(aE,E.config.apiKey,E.name)}async function dE(E,v,m=!1){if(Oe(E.app))return Promise.reject(Bi(E));const P=Cs(E),w=Cp(P,v),c=await new oE(P,w,m).execute();return c&&!m&&(delete c.user._redirectEventId,await P._persistUserIfCurrent(c.user),await P._setRedirectUser(null,v)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=10*60*1e3;class vE{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let m=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(v,P)&&(m=!0,this.sendToConsumer(v,P),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!pE(v)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=v,m=!0)),m}sendToConsumer(v,m){var P;if(v.error&&!Pp(v)){const w=((P=v.error.code)==null?void 0:P.split("auth/")[1])||"internal-error";m.onError(ai(this.auth,w))}else m.onAuthEvent(v)}isEventForConsumer(v,m){const P=m.eventId===null||!!v.eventId&&v.eventId===m.eventId;return m.filter.includes(v.type)&&P}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=cE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sd(v))}saveEventToCache(v){this.cachedEventUids.add(Sd(v)),this.lastProcessedEventTime=Date.now()}}function Sd(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(v=>v).join("-")}function Pp({type:E,error:v}){return E==="unknown"&&(v==null?void 0:v.code)==="auth/no-auth-event"}function pE(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pp(E);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gE(E,v={}){return Ss(E,"GET","/v1/projects",v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xE=/^https?/;async function yE(E){if(E.config.emulator)return;const{authorizedDomains:v}=await gE(E);for(const m of v)try{if(TE(m))return}catch{}Je(E,"unauthorized-domain")}function TE(E){const v=Tl(),{protocol:m,hostname:P}=new URL(v);if(E.startsWith("chrome-extension://")){const c=new URL(E);return c.hostname===""&&P===""?m==="chrome-extension:"&&E.replace("chrome-extension://","")===v.replace("chrome-extension://",""):m==="chrome-extension:"&&c.hostname===P}if(!xE.test(m))return!1;if(mE.test(E))return P===E;const w=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(P)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new za(3e4,6e4);function Cd(){const E=Ai().___jsl;if(E!=null&&E.H){for(const v of Object.keys(E.H))if(E.H[v].r=E.H[v].r||[],E.H[v].L=E.H[v].L||[],E.H[v].r=[...E.H[v].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}}function SE(E){return new Promise((v,m)=>{var w,F,c;function P(){Cd(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Cd(),m(ai(E,"network-request-failed"))},timeout:EE.get()})}if((F=(w=Ai().gapi)==null?void 0:w.iframes)!=null&&F.Iframe)v(gapi.iframes.getContext());else if((c=Ai().gapi)!=null&&c.load)P();else{const S=pT("iframefcb");return Ai()[S]=()=>{gapi.load?P():m(ai(E,"network-request-failed"))},lp(`${vT()}?onload=${S}`).catch(t=>m(t))}}).catch(v=>{throw Ro=null,v})}let Ro=null;function CE(E){return Ro=Ro||SE(E),Ro}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new za(5e3,15e3),PE="__/auth/iframe",RE="emulator/auth/iframe",ME={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IE(E){const v=E.config;At(v.authDomain,E,"auth-domain-config-required");const m=v.emulator?_l(v,RE):`https://${E.config.authDomain}/${PE}`,P={apiKey:v.apiKey,appName:E.name,v:yn},w=wE.get(E.config.apiHost);w&&(P.eid=w);const F=E._getFrameworks();return F.length&&(P.fw=F.join(",")),`${m}?${gr(P).slice(1)}`}async function OE(E){const v=await CE(E),m=Ai().gapi;return At(m,E,"internal-error"),v.open({where:document.body,url:IE(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ME,dontclear:!0},P=>new Promise(async(w,F)=>{await P.restyle({setHideOnLeave:!1});const c=ai(E,"network-request-failed"),S=Ai().setTimeout(()=>{F(c)},AE.get());function t(){Ai().clearTimeout(S),w(P)}P.ping(t).then(t,()=>{F(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DE=500,FE=600,NE="_blank",BE="http://localhost";class Ad{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bE(E,v,m,P=DE,w=FE){const F=Math.max((window.screen.availHeight-w)/2,0).toString(),c=Math.max((window.screen.availWidth-P)/2,0).toString();let S="";const t={...LE,width:P.toString(),height:w.toString(),top:F,left:c},o=Me().toLowerCase();m&&(S=ip(o)?NE:m),tp(o)&&(v=v||BE,t.scrollbars="yes");const g=Object.entries(t).reduce((n,[r,e])=>`${n}${r}=${e},`,"");if(rT(o)&&S!=="_self")return GE(v||"",S),new Ad(null);const a=window.open(v||"",S,g);At(a,E,"popup-blocked");try{a.focus()}catch{}return new Ad(a)}function GE(E,v){const m=document.createElement("a");m.href=E,m.target=v;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(P)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="__/auth/handler",VE="emulator/auth/handler",WE=encodeURIComponent("fac");async function Pd(E,v,m,P,w,F){At(E.config.authDomain,E,"auth-domain-config-required"),At(E.config.apiKey,E,"invalid-api-key");const c={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:P,v:yn,eventId:w};if(v instanceof nu){v.setDefaultLanguage(E.languageCode),c.providerId=v.providerId||"",vl(v.getCustomParameters())||(c.customParameters=JSON.stringify(v.getCustomParameters()));for(const[g,a]of Object.entries({}))c[g]=a}if(v instanceof Ya){const g=v.getScopes().filter(a=>a!=="");g.length>0&&(c.scopes=g.join(","))}E.tenantId&&(c.tid=E.tenantId);const S=c;for(const g of Object.keys(S))S[g]===void 0&&delete S[g];const t=await E._getAppCheckToken(),o=t?`#${WE}=${encodeURIComponent(t)}`:"";return`${zE(E)}?${gr(S).slice(1)}${o}`}function zE({config:E}){return E.emulator?_l(E,VE):`https://${E.authDomain}/${UE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="webStorageSupport";class HE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xp,this._completeRedirectFn=dE,this._overrideRedirectResult=lE}async _openPopup(v,m,P,w){var c;Vi((c=this.eventManagers[v._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const F=await Pd(v,m,P,Tl(),w);return bE(v,F,ru())}async _openRedirect(v,m,P,w){await this._originValidation(v);const F=await Pd(v,m,P,Tl(),w);return KT(F),new Promise(()=>{})}_initialize(v){const m=v._key();if(this.eventManagers[m]){const{manager:w,promise:F}=this.eventManagers[m];return w?Promise.resolve(w):(Vi(F,"If manager is not set, promise should be"),F)}const P=this.initAndGetManager(v);return this.eventManagers[m]={promise:P},P.catch(()=>{delete this.eventManagers[m]}),P}async initAndGetManager(v){const m=await OE(v),P=new vE(v);return m.register("authEvent",w=>(At(w==null?void 0:w.authEvent,v,"invalid-auth-event"),{status:P.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[v._key()]={manager:P},this.iframes[v._key()]=m,P}_isIframeWebStorageSupported(v,m){this.iframes[v._key()].send(Hh,{type:Hh},w=>{var c;const F=(c=w==null?void 0:w[0])==null?void 0:c[Hh];F!==void 0&&m(!!F),Je(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const m=v._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=yE(v)),this.originValidationPromises[m]}get _shouldInitProactively(){return op()||ep()||eu()}}const YE=HE;var Rd="@firebase/auth",Md="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),((v=this.auth.currentUser)==null?void 0:v.uid)||null}async getToken(v){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(v)}:null}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const m=this.auth.onIdTokenChanged(P=>{v((P==null?void 0:P.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,m),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const m=this.internalListeners.get(v);m&&(this.internalListeners.delete(v),m(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jE(E){hi(new $e("auth",(v,{options:m})=>{const P=v.getProvider("app").getImmediate(),w=v.getProvider("heartbeat"),F=v.getProvider("app-check-internal"),{apiKey:c,authDomain:S}=P.options;At(c&&!c.includes(":"),"invalid-api-key",{appName:P.name});const t={apiKey:c,authDomain:S,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hp(E)},o=new fT(P,w,F,t);return ET(o,m),o},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,m,P)=>{v.getProvider("auth-internal").initialize()})),hi(new $e("auth-internal",v=>{const m=Cs(v.getProvider("auth").getImmediate());return(P=>new XE(P))(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(Rd,Md,KE(E)),De(Rd,Md,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=5*60,JE=Nv("authIdTokenMaxAge")||$E;let wd=null;const kE=E=>async v=>{const m=v&&await v.getIdTokenResult(),P=m&&(new Date().getTime()-Date.parse(m.issuedAtTime))/1e3;if(P&&P>JE)return;const w=m==null?void 0:m.token;wd!==w&&(wd=w,await fetch(E,{method:w?"POST":"DELETE",headers:w?{Authorization:`Bearer ${w}`}:{}}))};function ZE(E=nh()){const v=Ts(E,"auth");if(v.isInitialized())return v.getImmediate();const m=TT(E,{popupRedirectResolver:YE,persistence:[tE,HT,xp]}),P=Nv("authTokenSyncURL");if(P&&typeof isSecureContext=="boolean"&&isSecureContext){const F=new URL(P,location.origin);if(location.origin===F.origin){const c=kE(F.toString());VT(m,c,()=>c(m.currentUser)),UT(m,S=>c(S))}}const w=Lv("auth");return w&&ST(m,`http://${w}`),m}function QE(){var E;return((E=document.getElementsByTagName("head"))==null?void 0:E[0])??document}dT({loadJS(E){return new Promise((v,m)=>{const P=document.createElement("script");P.setAttribute("src",E),P.onload=v,P.onerror=w=>{const F=ai("internal-error");F.customData=w,m(F)},P.type="text/javascript",P.charset="UTF-8",QE().appendChild(P)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jE("Browser");var qE="firebase",_E="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */De(qE,_E,"app");const Rp="@firebase/installations",ou="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=1e4,wp=`w:${ou}`,Ip="FIS_v2",tS="https://firebaseinstallations.googleapis.com/v1",eS=60*60*1e3,iS="installations",sS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hn=new xn(iS,sS,nS);function Op(E){return E instanceof ui&&E.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp({projectId:E}){return`${tS}/projects/${E}/installations`}function Dp(E){return{token:E.token,requestStatus:2,expiresIn:aS(E.expiresIn),creationTime:Date.now()}}async function Fp(E,v){const P=(await v.json()).error;return hn.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})}function Np({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function rS(E,{refreshToken:v}){const m=Np(E);return m.append("Authorization",oS(v)),m}async function Bp(E){const v=await E();return v.status>=500&&v.status<600?E():v}function aS(E){return Number(E.replace("s","000"))}function oS(E){return`${Ip} ${E}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS({appConfig:E,heartbeatServiceProvider:v},{fid:m}){const P=Lp(E),w=Np(E),F=v.getImmediate({optional:!0});if(F){const o=await F.getHeartbeatsHeader();o&&w.append("x-firebase-client",o)}const c={fid:m,authVersion:Ip,appId:E.appId,sdkVersion:wp},S={method:"POST",headers:w,body:JSON.stringify(c)},t=await Bp(()=>fetch(P,S));if(t.ok){const o=await t.json();return{fid:o.fid||m,registrationStatus:2,refreshToken:o.refreshToken,authToken:Dp(o.authToken)}}else throw await Fp("Create Installation",t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(E){return new Promise(v=>{setTimeout(v,E)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=/^[cdef][\w-]{21}$/,Al="";function fS(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const m=dS(E);return uS.test(m)?m:Al}catch{return Al}}function dS(E){return lS(E).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(E){return`${E.appName}!${E.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Map;function Up(E,v){const m=hh(E);Vp(m,v),cS(m,v)}function Vp(E,v){const m=Gp.get(E);if(m)for(const P of m)P(v)}function cS(E,v){const m=vS();m&&m.postMessage({key:E,fid:v}),pS()}let Ns=null;function vS(){return!Ns&&"BroadcastChannel"in self&&(Ns=new BroadcastChannel("[Firebase] FID Change"),Ns.onmessage=E=>{Vp(E.data.key,E.data.fid)}),Ns}function pS(){Gp.size===0&&Ns&&(Ns.close(),Ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firebase-installations-database",mS=1,ln="firebase-installations-store";let Yh=null;function hu(){return Yh||(Yh=Yv(gS,mS,{upgrade:(E,v)=>{switch(v){case 0:E.createObjectStore(ln)}}})),Yh}async function Vo(E,v){const m=hh(E),w=(await hu()).transaction(ln,"readwrite"),F=w.objectStore(ln),c=await F.get(m);return await F.put(v,m),await w.done,(!c||c.fid!==v.fid)&&Up(E,v.fid),v}async function Wp(E){const v=hh(E),P=(await hu()).transaction(ln,"readwrite");await P.objectStore(ln).delete(v),await P.done}async function lh(E,v){const m=hh(E),w=(await hu()).transaction(ln,"readwrite"),F=w.objectStore(ln),c=await F.get(m),S=v(c);return S===void 0?await F.delete(m):await F.put(S,m),await w.done,S&&(!c||c.fid!==S.fid)&&Up(E,S.fid),S}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(E){let v;const m=await lh(E.appConfig,P=>{const w=xS(P),F=yS(E,w);return v=F.registrationPromise,F.installationEntry});return m.fid===Al?{installationEntry:await v}:{installationEntry:m,registrationPromise:v}}function xS(E){const v=E||{fid:fS(),registrationStatus:0};return zp(v)}function yS(E,v){if(v.registrationStatus===0){if(!navigator.onLine){const w=Promise.reject(hn.create("app-offline"));return{installationEntry:v,registrationPromise:w}}const m={fid:v.fid,registrationStatus:1,registrationTime:Date.now()},P=TS(E,m);return{installationEntry:m,registrationPromise:P}}else return v.registrationStatus===1?{installationEntry:v,registrationPromise:ES(E)}:{installationEntry:v}}async function TS(E,v){try{const m=await hS(E,v);return Vo(E.appConfig,m)}catch(m){throw Op(m)&&m.customData.serverCode===409?await Wp(E.appConfig):await Vo(E.appConfig,{fid:v.fid,registrationStatus:0}),m}}async function ES(E){let v=await Id(E.appConfig);for(;v.registrationStatus===1;)await bp(100),v=await Id(E.appConfig);if(v.registrationStatus===0){const{installationEntry:m,registrationPromise:P}=await lu(E);return P||m}return v}function Id(E){return lh(E,v=>{if(!v)throw hn.create("installation-not-found");return zp(v)})}function zp(E){return SS(E)?{fid:E.fid,registrationStatus:0}:E}function SS(E){return E.registrationStatus===1&&E.registrationTime+Mp<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS({appConfig:E,heartbeatServiceProvider:v},m){const P=AS(E,m),w=rS(E,m),F=v.getImmediate({optional:!0});if(F){const o=await F.getHeartbeatsHeader();o&&w.append("x-firebase-client",o)}const c={installation:{sdkVersion:wp,appId:E.appId}},S={method:"POST",headers:w,body:JSON.stringify(c)},t=await Bp(()=>fetch(P,S));if(t.ok){const o=await t.json();return Dp(o)}else throw await Fp("Generate Auth Token",t)}function AS(E,{fid:v}){return`${Lp(E)}/${v}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(E,v=!1){let m;const P=await lh(E.appConfig,F=>{if(!Hp(F))throw hn.create("not-registered");const c=F.authToken;if(!v&&MS(c))return F;if(c.requestStatus===1)return m=PS(E,v),F;{if(!navigator.onLine)throw hn.create("app-offline");const S=IS(F);return m=RS(E,S),S}});return m?await m:P.authToken}async function PS(E,v){let m=await Od(E.appConfig);for(;m.authToken.requestStatus===1;)await bp(100),m=await Od(E.appConfig);const P=m.authToken;return P.requestStatus===0?uu(E,v):P}function Od(E){return lh(E,v=>{if(!Hp(v))throw hn.create("not-registered");const m=v.authToken;return OS(m)?{...v,authToken:{requestStatus:0}}:v})}async function RS(E,v){try{const m=await CS(E,v),P={...v,authToken:m};return await Vo(E.appConfig,P),m}catch(m){if(Op(m)&&(m.customData.serverCode===401||m.customData.serverCode===404))await Wp(E.appConfig);else{const P={...v,authToken:{requestStatus:0}};await Vo(E.appConfig,P)}throw m}}function Hp(E){return E!==void 0&&E.registrationStatus===2}function MS(E){return E.requestStatus===2&&!wS(E)}function wS(E){const v=Date.now();return v<E.creationTime||E.creationTime+E.expiresIn<v+eS}function IS(E){const v={requestStatus:1,requestTime:Date.now()};return{...E,authToken:v}}function OS(E){return E.requestStatus===1&&E.requestTime+Mp<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(E){const v=E,{installationEntry:m,registrationPromise:P}=await lu(v);return P?P.catch(console.error):uu(v).catch(console.error),m.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(E,v=!1){const m=E;return await FS(m),(await uu(m,v)).token}async function FS(E){const{registrationPromise:v}=await lu(E);v&&await v}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(E){if(!E||!E.options)throw Xh("App Configuration");if(!E.name)throw Xh("App Name");const v=["projectId","apiKey","appId"];for(const m of v)if(!E.options[m])throw Xh(m);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}function Xh(E){return hn.create("missing-app-config-values",{valueName:E})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="installations",BS="installations-internal",bS=E=>{const v=E.getProvider("app").getImmediate(),m=NS(v),P=Ts(v,"heartbeat");return{app:v,appConfig:m,heartbeatServiceProvider:P,_delete:()=>Promise.resolve()}},GS=E=>{const v=E.getProvider("app").getImmediate(),m=Ts(v,Yp).getImmediate();return{getId:()=>LS(m),getToken:w=>DS(m,w)}};function US(){hi(new $e(Yp,bS,"PUBLIC")),hi(new $e(BS,GS,"PRIVATE"))}US();De(Rp,ou);De(Rp,ou,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="analytics",VS="firebase_id",WS="origin",zS=60*1e3,HS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fu="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=new Wa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ue=new xn("analytics","Analytics",YS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(E){if(!E.startsWith(fu)){const v=Ue.create("invalid-gtag-resource",{gtagURL:E});return Re.warn(v.message),""}return E}function Xp(E){return Promise.all(E.map(v=>v.catch(m=>m)))}function KS(E,v){let m;return window.trustedTypes&&(m=window.trustedTypes.createPolicy(E,v)),m}function jS(E,v){const m=KS("firebase-js-sdk-policy",{createScriptURL:XS}),P=document.createElement("script"),w=`${fu}?l=${E}&id=${v}`;P.src=m?m==null?void 0:m.createScriptURL(w):w,P.async=!0,document.head.appendChild(P)}function $S(E){let v=[];return Array.isArray(window[E])?v=window[E]:window[E]=v,v}async function JS(E,v,m,P,w,F){const c=P[w];try{if(c)await v[c];else{const t=(await Xp(m)).find(o=>o.measurementId===w);t&&await v[t.appId]}}catch(S){Re.error(S)}E("config",w,F)}async function kS(E,v,m,P,w){try{let F=[];if(w&&w.send_to){let c=w.send_to;Array.isArray(c)||(c=[c]);const S=await Xp(m);for(const t of c){const o=S.find(a=>a.measurementId===t),g=o&&v[o.appId];if(g)F.push(g);else{F=[];break}}}F.length===0&&(F=Object.values(v)),await Promise.all(F),E("event",P,w||{})}catch(F){Re.error(F)}}function ZS(E,v,m,P){async function w(F,...c){try{if(F==="event"){const[S,t]=c;await kS(E,v,m,S,t)}else if(F==="config"){const[S,t]=c;await JS(E,v,m,P,S,t)}else if(F==="consent"){const[S,t]=c;E("consent",S,t)}else if(F==="get"){const[S,t,o]=c;E("get",S,t,o)}else if(F==="set"){const[S]=c;E("set",S)}else E(F,...c)}catch(S){Re.error(S)}}return w}function QS(E,v,m,P,w){let F=function(...c){window[P].push(arguments)};return window[w]&&typeof window[w]=="function"&&(F=window[w]),window[w]=ZS(F,E,v,m),{gtagCore:F,wrappedGtag:window[w]}}function qS(E){const v=window.document.getElementsByTagName("script");for(const m of Object.values(v))if(m.src&&m.src.includes(fu)&&m.src.includes(E))return m;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=30,tC=1e3;class eC{constructor(v={},m=tC){this.throttleMetadata=v,this.intervalMillis=m}getThrottleMetadata(v){return this.throttleMetadata[v]}setThrottleMetadata(v,m){this.throttleMetadata[v]=m}deleteThrottleMetadata(v){delete this.throttleMetadata[v]}}const Kp=new eC;function iC(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}async function sC(E){var c;const{appId:v,apiKey:m}=E,P={method:"GET",headers:iC(m)},w=HS.replace("{app-id}",v),F=await fetch(w,P);if(F.status!==200&&F.status!==304){let S="";try{const t=await F.json();(c=t.error)!=null&&c.message&&(S=t.error.message)}catch{}throw Ue.create("config-fetch-failed",{httpStatus:F.status,responseMessage:S})}return F.json()}async function nC(E,v=Kp,m){const{appId:P,apiKey:w,measurementId:F}=E.options;if(!P)throw Ue.create("no-app-id");if(!w){if(F)return{measurementId:F,appId:P};throw Ue.create("no-api-key")}const c=v.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},S=new oC;return setTimeout(async()=>{S.abort()},zS),jp({appId:P,apiKey:w,measurementId:F},c,S,v)}async function jp(E,{throttleEndTimeMillis:v,backoffCount:m},P,w=Kp){var S;const{appId:F,measurementId:c}=E;try{await rC(P,v)}catch(t){if(c)return Re.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${t==null?void 0:t.message}]`),{appId:F,measurementId:c};throw t}try{const t=await sC(E);return w.deleteThrottleMetadata(F),t}catch(t){const o=t;if(!aC(o)){if(w.deleteThrottleMetadata(F),c)return Re.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${o==null?void 0:o.message}]`),{appId:F,measurementId:c};throw t}const g=Number((S=o==null?void 0:o.customData)==null?void 0:S.httpStatus)===503?ed(m,w.intervalMillis,_S):ed(m,w.intervalMillis),a={throttleEndTimeMillis:Date.now()+g,backoffCount:m+1};return w.setThrottleMetadata(F,a),Re.debug(`Calling attemptFetch again in ${g} millis`),jp(E,a,P,w)}}function rC(E,v){return new Promise((m,P)=>{const w=Math.max(v-Date.now(),0),F=setTimeout(m,w);E.addEventListener(()=>{clearTimeout(F),P(Ue.create("fetch-throttle",{throttleEndTimeMillis:v}))})})}function aC(E){if(!(E instanceof ui)||!E.customData)return!1;const v=Number(E.customData.httpStatus);return v===429||v===500||v===503||v===504}class oC{constructor(){this.listeners=[]}addEventListener(v){this.listeners.push(v)}abort(){this.listeners.forEach(v=>v())}}async function hC(E,v,m,P,w){if(w&&w.global){E("event",m,P);return}else{const F=await v,c={...P,send_to:F};E("event",m,c)}}async function lC(E,v,m,P){if(P&&P.global){const w={};for(const F of Object.keys(m))w[`user_properties.${F}`]=m[F];return E("set",w),Promise.resolve()}else{const w=await v;E("config",w,{update:!0,user_properties:m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(){if(Uv())try{await Vv()}catch(E){return Re.warn(Ue.create("indexeddb-unavailable",{errorInfo:E==null?void 0:E.toString()}).message),!1}else return Re.warn(Ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function fC(E,v,m,P,w,F,c){const S=nC(E);S.then(n=>{m[n.measurementId]=n.appId,E.options.measurementId&&n.measurementId!==E.options.measurementId&&Re.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(n=>Re.error(n)),v.push(S);const t=uC().then(n=>{if(n)return P.getId()}),[o,g]=await Promise.all([S,t]);qS(F)||jS(F,o.measurementId),w("js",new Date);const a=(c==null?void 0:c.config)??{};return a[WS]="firebase",a.update=!0,g!=null&&(a[VS]=g),w("config",o.measurementId,a),o.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(v){this.app=v}_delete(){return delete Nn[this.app.options.appId],Promise.resolve()}}let Nn={},Ld=[];const Dd={};let Kh="dataLayer",cC="gtag",Fd,du,Nd=!1;function vC(){const E=[];if(bv()&&E.push("This is a browser extension environment."),py()||E.push("Cookies are not available."),E.length>0){const v=E.map((P,w)=>`(${w+1}) ${P}`).join(" "),m=Ue.create("invalid-analytics-context",{errorInfo:v});Re.warn(m.message)}}function pC(E,v,m){vC();const P=E.options.appId;if(!P)throw Ue.create("no-app-id");if(!E.options.apiKey)if(E.options.measurementId)Re.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ue.create("no-api-key");if(Nn[P]!=null)throw Ue.create("already-exists",{id:P});if(!Nd){$S(Kh);const{wrappedGtag:F,gtagCore:c}=QS(Nn,Ld,Dd,Kh,cC);du=F,Fd=c,Nd=!0}return Nn[P]=fC(E,Ld,Dd,v,Fd,Kh,m),new dC(E)}function gC(E=nh()){E=We(E);const v=Ts(E,Wo);return v.isInitialized()?v.getImmediate():mC(E)}function mC(E,v={}){const m=Ts(E,Wo);if(m.isInitialized()){const w=m.getImmediate();if(Gi(v,m.getOptions()))return w;throw Ue.create("already-initialized")}return m.initialize({options:v})}function xC(E,v,m){E=We(E),lC(du,Nn[E.app.options.appId],v,m).catch(P=>Re.error(P))}function yC(E,v,m,P){E=We(E),hC(du,Nn[E.app.options.appId],v,m,P).catch(w=>Re.error(w))}const Bd="@firebase/analytics",bd="0.10.19";function TC(){hi(new $e(Wo,(v,{options:m})=>{const P=v.getProvider("app").getImmediate(),w=v.getProvider("installations-internal").getImmediate();return pC(P,w,m)},"PUBLIC")),hi(new $e("analytics-internal",E,"PRIVATE")),De(Bd,bd),De(Bd,bd,"esm2020");function E(v){try{const m=v.getProvider(Wo).getImmediate();return{logEvent:(P,w,F)=>yC(m,P,w,F),setUserProperties:(P,w)=>xC(m,P,w)}}catch(m){throw Ue.create("interop-component-reg-failed",{reason:m})}}}TC();var Gd={};const Ud="@firebase/database",Vd="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $p="";function EC(E){$p=E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(v){this.domStorage_=v,this.prefix_="firebase:"}set(v,m){m==null?this.domStorage_.removeItem(this.prefixedName_(v)):this.domStorage_.setItem(this.prefixedName_(v),ge(m))}get(v){const m=this.domStorage_.getItem(this.prefixedName_(v));return m==null?null:sa(m)}remove(v){this.domStorage_.removeItem(this.prefixedName_(v))}prefixedName_(v){return this.prefix_+v}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(v,m){m==null?delete this.cache_[v]:this.cache_[v]=m}get(v){return zi(this.cache_,v)?this.cache_[v]:null}remove(v){delete this.cache_[v]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=function(E){try{if(typeof window<"u"&&typeof window[E]<"u"){const v=window[E];return v.setItem("firebase:sentinel","cache"),v.removeItem("firebase:sentinel"),new SC(v)}}catch{}return new CC},Bs=Jp("localStorage"),AC=Jp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Wa("@firebase/database"),PC=function(){let E=1;return function(){return E++}}(),kp=function(E){const v=Ry(E),m=new Ey;m.update(v);const P=m.digest();return Xl.encodeByteArray(P)},Ka=function(...E){let v="";for(let m=0;m<E.length;m++){const P=E[m];Array.isArray(P)||P&&typeof P=="object"&&typeof P.length=="number"?v+=Ka.apply(null,P):typeof P=="object"?v+=ge(P):v+=P,v+=" "}return v};let $r=null,Wd=!0;const RC=function(E,v){gt(!0,"Can't turn on custom loggers persistently."),Bn.logLevel=Wt.VERBOSE,$r=Bn.log.bind(Bn)},xe=function(...E){if(Wd===!0&&(Wd=!1,$r===null&&AC.get("logging_enabled")===!0&&RC()),$r){const v=Ka.apply(null,E);$r(v)}},ja=function(E){return function(...v){xe(E,...v)}},Pl=function(...E){const v="FIREBASE INTERNAL ERROR: "+Ka(...E);Bn.error(v)},Wi=function(...E){const v=`FIREBASE FATAL ERROR: ${Ka(...E)}`;throw Bn.error(v),new Error(v)},Ve=function(...E){const v="FIREBASE WARNING: "+Ka(...E);Bn.warn(v)},MC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ve("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zp=function(E){return typeof E=="number"&&(E!==E||E===Number.POSITIVE_INFINITY||E===Number.NEGATIVE_INFINITY)},wC=function(E){if(document.readyState==="complete")E();else{let v=!1;const m=function(){if(!document.body){setTimeout(m,Math.floor(10));return}v||(v=!0,E())};document.addEventListener?(document.addEventListener("DOMContentLoaded",m,!1),window.addEventListener("load",m,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&m()}),window.attachEvent("onload",m))}},fr="[MIN_NAME]",un="[MAX_NAME]",xr=function(E,v){if(E===v)return 0;if(E===fr||v===un)return-1;if(v===fr||E===un)return 1;{const m=zd(E),P=zd(v);return m!==null?P!==null?m-P===0?E.length-v.length:m-P:-1:P!==null?1:E<v?-1:1}},IC=function(E,v){return E===v?0:E<v?-1:1},Nr=function(E,v){if(v&&E in v)return v[E];throw new Error("Missing required key ("+E+") in object: "+ge(v))},cu=function(E){if(typeof E!="object"||E===null)return ge(E);const v=[];for(const P in E)v.push(P);v.sort();let m="{";for(let P=0;P<v.length;P++)P!==0&&(m+=","),m+=ge(v[P]),m+=":",m+=cu(E[v[P]]);return m+="}",m},Qp=function(E,v){const m=E.length;if(m<=v)return[E];const P=[];for(let w=0;w<m;w+=v)w+v>m?P.push(E.substring(w,m)):P.push(E.substring(w,w+v));return P};function ke(E,v){for(const m in E)E.hasOwnProperty(m)&&v(m,E[m])}const qp=function(E){gt(!Zp(E),"Invalid JSON number");const v=11,m=52,P=(1<<v-1)-1;let w,F,c,S,t;E===0?(F=0,c=0,w=1/E===-1/0?1:0):(w=E<0,E=Math.abs(E),E>=Math.pow(2,1-P)?(S=Math.min(Math.floor(Math.log(E)/Math.LN2),P),F=S+P,c=Math.round(E*Math.pow(2,m-S)-Math.pow(2,m))):(F=0,c=Math.round(E/Math.pow(2,1-P-m))));const o=[];for(t=m;t;t-=1)o.push(c%2?1:0),c=Math.floor(c/2);for(t=v;t;t-=1)o.push(F%2?1:0),F=Math.floor(F/2);o.push(w?1:0),o.reverse();const g=o.join("");let a="";for(t=0;t<64;t+=8){let n=parseInt(g.substr(t,8),2).toString(16);n.length===1&&(n="0"+n),a=a+n}return a.toLowerCase()},OC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},LC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},DC=new RegExp("^-?(0*)\\d{1,10}$"),FC=-2147483648,NC=2147483647,zd=function(E){if(DC.test(E)){const v=Number(E);if(v>=FC&&v<=NC)return v}return null},$a=function(E){try{E()}catch(v){setTimeout(()=>{const m=v.stack||"";throw Ve("Exception was thrown by user callback.",m),v},Math.floor(0))}},BC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jr=function(E,v){const m=setTimeout(E,v);return typeof m=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(m):typeof m=="object"&&m.unref&&m.unref(),m};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(v,m){this.appCheckProvider=m,this.appName=v.name,Oe(v)&&v.settings.appCheckToken&&(this.serverAppAppCheckToken=v.settings.appCheckToken),this.appCheck=m==null?void 0:m.getImmediate({optional:!0}),this.appCheck||m==null||m.get().then(P=>this.appCheck=P)}getToken(v){if(this.serverAppAppCheckToken){if(v)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(v):new Promise((m,P)=>{setTimeout(()=>{this.appCheck?this.getToken(v).then(m,P):m(null)},0)})}addTokenChangeListener(v){var m;(m=this.appCheckProvider)==null||m.get().then(P=>P.addTokenListener(v))}notifyForInvalidToken(){Ve(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(v,m,P){this.appName_=v,this.firebaseOptions_=m,this.authProvider_=P,this.auth_=null,this.auth_=P.getImmediate({optional:!0}),this.auth_||P.onInit(w=>this.auth_=w)}getToken(v){return this.auth_?this.auth_.getToken(v).catch(m=>m&&m.code==="auth/token-not-initialized"?(xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(m)):new Promise((m,P)=>{setTimeout(()=>{this.auth_?this.getToken(v).then(m,P):m(null)},0)})}addTokenChangeListener(v){this.auth_?this.auth_.addAuthTokenListener(v):this.authProvider_.get().then(m=>m.addAuthTokenListener(v))}removeTokenChangeListener(v){this.authProvider_.get().then(m=>m.removeAuthTokenListener(v))}notifyForInvalidToken(){let v='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?v+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?v+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':v+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ve(v)}}class Mo{constructor(v){this.accessToken=v}getToken(v){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(v){v(this.accessToken)}removeTokenChangeListener(v){}notifyForInvalidToken(){}}Mo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="5",_p="v",tg="s",eg="r",ig="f",sg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ng="ls",rg="p",Rl="ac",ag="websocket",og="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(v,m,P,w,F=!1,c="",S=!1,t=!1,o=null){this.secure=m,this.namespace=P,this.webSocketOnly=w,this.nodeAdmin=F,this.persistenceKey=c,this.includeNamespaceInQueryParams=S,this.isUsingEmulator=t,this.emulatorOptions=o,this._host=v.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+v)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(v){v!==this.internalHost&&(this.internalHost=v,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))}toString(){let v=this.toURLString();return this.persistenceKey&&(v+="<"+this.persistenceKey+">"),v}toURLString(){const v=this.secure?"https://":"http://",m=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${v}${this.host}/${m}`}}function UC(E){return E.host!==E.internalHost||E.isCustomHost()||E.includeNamespaceInQueryParams}function lg(E,v,m){gt(typeof v=="string","typeof type must == string"),gt(typeof m=="object","typeof params must == object");let P;if(v===ag)P=(E.secure?"wss://":"ws://")+E.internalHost+"/.ws?";else if(v===og)P=(E.secure?"https://":"http://")+E.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+v);UC(E)&&(m.ns=E.namespace);const w=[];return ke(m,(F,c)=>{w.push(F+"="+c)}),P+w.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.counters_={}}incrementCounter(v,m=1){zi(this.counters_,v)||(this.counters_[v]=0),this.counters_[v]+=m}get(){return ny(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh={},$h={};function pu(E){const v=E.toString();return jh[v]||(jh[v]=new VC),jh[v]}function WC(E,v){const m=E.toString();return $h[m]||($h[m]=v()),$h[m]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(v){this.onMessage_=v,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(v,m){this.closeAfterResponse=v,this.onClose=m,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(v,m){for(this.pendingResponses[v]=m;this.pendingResponses[this.currentResponseNum];){const P=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let w=0;w<P.length;++w)P[w]&&$a(()=>{this.onMessage_(P[w])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="start",HC="close",YC="pLPCommand",XC="pRTLPCB",ug="id",fg="pw",dg="ser",KC="cb",jC="seg",$C="ts",JC="d",kC="dframe",cg=1870,vg=30,ZC=cg-vg,QC=25e3,qC=3e4;class Mn{constructor(v,m,P,w,F,c,S){this.connId=v,this.repoInfo=m,this.applicationId=P,this.appCheckToken=w,this.authToken=F,this.transportSessionId=c,this.lastSessionId=S,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ja(v),this.stats_=pu(m),this.urlFn=t=>(this.appCheckToken&&(t[Rl]=this.appCheckToken),lg(m,og,t))}open(v,m){this.curSegmentNum=0,this.onDisconnect_=m,this.myPacketOrderer=new zC(v),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qC)),wC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gu((...F)=>{const[c,S,t,o,g]=F;if(this.incrementIncomingBytes_(F),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Hd)this.id=S,this.password=t;else if(c===HC)S?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(S,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...F)=>{const[c,S]=F;this.incrementIncomingBytes_(F),this.myPacketOrderer.handleResponse(c,S)},()=>{this.onClosed_()},this.urlFn);const P={};P[Hd]="t",P[dg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(P[KC]=this.scriptTagHolder.uniqueCallbackIdentifier),P[_p]=vu,this.transportSessionId&&(P[tg]=this.transportSessionId),this.lastSessionId&&(P[ng]=this.lastSessionId),this.applicationId&&(P[rg]=this.applicationId),this.appCheckToken&&(P[Rl]=this.appCheckToken),typeof location<"u"&&location.hostname&&sg.test(location.hostname)&&(P[eg]=ig);const w=this.urlFn(P);this.log_("Connecting via long-poll to "+w),this.scriptTagHolder.addTag(w,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mn.forceAllow_=!0}static forceDisallow(){Mn.forceDisallow_=!0}static isAvailable(){return Mn.forceAllow_?!0:!Mn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!OC()&&!LC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(v){const m=ge(v);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const P=Iv(m),w=Qp(P,ZC);for(let F=0;F<w.length;F++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,w.length,w[F]),this.curSegmentNum++}addDisconnectPingFrame(v,m){this.myDisconnFrame=document.createElement("iframe");const P={};P[kC]="t",P[ug]=v,P[fg]=m,this.myDisconnFrame.src=this.urlFn(P),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(v){const m=ge(v).length;this.bytesReceived+=m,this.stats_.incrementCounter("bytes_received",m)}}class gu{constructor(v,m,P,w){this.onDisconnect=P,this.urlFn=w,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PC(),window[YC+this.uniqueCallbackIdentifier]=v,window[XC+this.uniqueCallbackIdentifier]=m,this.myIFrame=gu.createIFrame_();let F="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(F='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+F+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(S){xe("frame writing exception"),S.stack&&xe(S.stack),xe(S)}}}static createIFrame_(){const v=document.createElement("iframe");if(v.style.display="none",document.body){document.body.appendChild(v);try{v.contentWindow.document||xe("No IE domain setting required")}catch{const P=document.domain;v.src="javascript:void((function(){document.open();document.domain='"+P+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return v.contentDocument?v.doc=v.contentDocument:v.contentWindow?v.doc=v.contentWindow.document:v.document&&(v.doc=v.document),v}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const v=this.onDisconnect;v&&(this.onDisconnect=null,v())}startLongPoll(v,m){for(this.myID=v,this.myPW=m,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const v={};v[ug]=this.myID,v[fg]=this.myPW,v[dg]=this.currentSerial;let m=this.urlFn(v),P="",w=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vg+P.length<=cg;){const c=this.pendingSegs.shift();P=P+"&"+jC+w+"="+c.seg+"&"+$C+w+"="+c.ts+"&"+JC+w+"="+c.d,w++}return m=m+P,this.addLongPollTag_(m,this.currentSerial),!0}else return!1}enqueueSegment(v,m,P){this.pendingSegs.push({seg:v,ts:m,d:P}),this.alive&&this.newRequest_()}addLongPollTag_(v,m){this.outstandingRequests.add(m);const P=()=>{this.outstandingRequests.delete(m),this.newRequest_()},w=setTimeout(P,Math.floor(QC)),F=()=>{clearTimeout(w),P()};this.addTag(v,F)}addTag(v,m){setTimeout(()=>{try{if(!this.sendNewPolls)return;const P=this.myIFrame.doc.createElement("script");P.type="text/javascript",P.async=!0,P.src=v,P.onload=P.onreadystatechange=function(){const w=P.readyState;(!w||w==="loaded"||w==="complete")&&(P.onload=P.onreadystatechange=null,P.parentNode&&P.parentNode.removeChild(P),m())},P.onerror=()=>{xe("Long-poll script failed to load: "+v),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(P)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=16384,t2=45e3;let zo=null;typeof MozWebSocket<"u"?zo=MozWebSocket:typeof WebSocket<"u"&&(zo=WebSocket);class ii{constructor(v,m,P,w,F,c,S){this.connId=v,this.applicationId=P,this.appCheckToken=w,this.authToken=F,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ja(this.connId),this.stats_=pu(m),this.connURL=ii.connectionURL_(m,c,S,w,P),this.nodeAdmin=m.nodeAdmin}static connectionURL_(v,m,P,w,F){const c={};return c[_p]=vu,typeof location<"u"&&location.hostname&&sg.test(location.hostname)&&(c[eg]=ig),m&&(c[tg]=m),P&&(c[ng]=P),w&&(c[Rl]=w),F&&(c[rg]=F),lg(v,ag,c)}open(v,m){this.onDisconnect=m,this.onMessage=v,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{let P;vy(),this.mySock=new zo(this.connURL,[],P)}catch(P){this.log_("Error instantiating WebSocket.");const w=P.message||P.data;w&&this.log_(w),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=P=>{this.handleIncomingFrame(P)},this.mySock.onerror=P=>{this.log_("WebSocket error.  Closing connection.");const w=P.message||P.data;w&&this.log_(w),this.onClosed_()}}start(){}static forceDisallow(){ii.forceDisallow_=!0}static isAvailable(){let v=!1;if(typeof navigator<"u"&&navigator.userAgent){const m=/Android ([0-9]{0,}\.[0-9]{0,})/,P=navigator.userAgent.match(m);P&&P.length>1&&parseFloat(P[1])<4.4&&(v=!0)}return!v&&zo!==null&&!ii.forceDisallow_}static previouslyFailed(){return Bs.isInMemoryStorage||Bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bs.remove("previous_websocket_failure")}appendFrame_(v){if(this.frames.push(v),this.frames.length===this.totalFrames){const m=this.frames.join("");this.frames=null;const P=sa(m);this.onMessage(P)}}handleNewFrameCount_(v){this.totalFrames=v,this.frames=[]}extractFrameCount_(v){if(gt(this.frames===null,"We already have a frame buffer"),v.length<=6){const m=Number(v);if(!isNaN(m))return this.handleNewFrameCount_(m),null}return this.handleNewFrameCount_(1),v}handleIncomingFrame(v){if(this.mySock===null)return;const m=v.data;if(this.bytesReceived+=m.length,this.stats_.incrementCounter("bytes_received",m.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(m);else{const P=this.extractFrameCount_(m);P!==null&&this.appendFrame_(P)}}send(v){this.resetKeepAlive();const m=ge(v);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const P=Qp(m,_C);P.length>1&&this.sendString_(String(P.length));for(let w=0;w<P.length;w++)this.sendString_(P[w])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(t2))}sendString_(v){try{this.mySock.send(v)}catch(m){this.log_("Exception thrown from WebSocket.send():",m.message||m.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ii.responsesRequiredToBeHealthy=2;ii.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static get ALL_TRANSPORTS(){return[Mn,ii]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(v){this.initTransports_(v)}initTransports_(v){const m=ii&&ii.isAvailable();let P=m&&!ii.previouslyFailed();if(v.webSocketOnly&&(m||Ve("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),P=!0),P)this.transports_=[ii];else{const w=this.transports_=[];for(const F of oa.ALL_TRANSPORTS)F&&F.isAvailable()&&w.push(F);oa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}oa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=6e4,i2=5e3,s2=10*1024,n2=100*1024,Jh="t",Yd="d",r2="s",Xd="r",a2="e",Kd="o",jd="a",$d="n",Jd="p",o2="h";class h2{constructor(v,m,P,w,F,c,S,t,o,g){this.id=v,this.repoInfo_=m,this.applicationId_=P,this.appCheckToken_=w,this.authToken_=F,this.onMessage_=c,this.onReady_=S,this.onDisconnect_=t,this.onKill_=o,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ja("c:"+this.id+":"),this.transportManager_=new oa(m),this.log_("Connection created"),this.start_()}start_(){const v=this.transportManager_.initialTransport();this.conn_=new v(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=v.responsesRequiredToBeHealthy||0;const m=this.connReceiver_(this.conn_),P=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(m,P)},Math.floor(0));const w=v.healthyTimeout||0;w>0&&(this.healthyTimeout_=Jr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>n2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>s2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(w)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(v){return m=>{v===this.conn_?this.onConnectionLost_(m):v===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(v){return m=>{this.state_!==2&&(v===this.rx_?this.onPrimaryMessageReceived_(m):v===this.secondaryConn_?this.onSecondaryMessageReceived_(m):this.log_("message on old connection"))}}sendRequest(v){const m={t:"d",d:v};this.sendData_(m)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(v){if(Jh in v){const m=v[Jh];m===jd?this.upgradeIfSecondaryHealthy_():m===Xd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):m===Kd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(v){const m=Nr("t",v),P=Nr("d",v);if(m==="c")this.onSecondaryControl_(P);else if(m==="d")this.pendingDataMessages.push(P);else throw new Error("Unknown protocol layer: "+m)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$d,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(v){const m=Nr("t",v),P=Nr("d",v);m==="c"?this.onControl_(P):m==="d"&&this.onDataMessage_(P)}onDataMessage_(v){this.onPrimaryResponse_(),this.onMessage_(v)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(v){const m=Nr(Jh,v);if(Yd in v){const P=v[Yd];if(m===o2){const w={...P};this.repoInfo_.isUsingEmulator&&(w.h=this.repoInfo_.host),this.onHandshake_(w)}else if(m===$d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let w=0;w<this.pendingDataMessages.length;++w)this.onDataMessage_(this.pendingDataMessages[w]);this.pendingDataMessages=[],this.tryCleanupConnection()}else m===r2?this.onConnectionShutdown_(P):m===Xd?this.onReset_(P):m===a2?Pl("Server Error: "+P):m===Kd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pl("Unknown control packet command: "+m)}}onHandshake_(v){const m=v.ts,P=v.v,w=v.h;this.sessionId=v.s,this.repoInfo_.host=w,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,m),vu!==P&&Ve("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const v=this.transportManager_.upgradeTransport();v&&this.startUpgrade_(v)}startUpgrade_(v){this.secondaryConn_=new v(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=v.responsesRequiredToBeHealthy||0;const m=this.connReceiver_(this.secondaryConn_),P=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(m,P),Jr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(e2))}onReset_(v){this.log_("Reset packet received.  New host: "+v),this.repoInfo_.host=v,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(v,m){this.log_("Realtime connection established."),this.conn_=v,this.state_=1,this.onReady_&&(this.onReady_(m,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jd,d:{}}}))}onSecondaryConnectionLost_(){const v=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===v||this.rx_===v)&&this.close()}onConnectionLost_(v){this.conn_=null,!v&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(v){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(v),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(v){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(v)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{put(v,m,P,w){}merge(v,m,P,w){}refreshAuthToken(v){}refreshAppCheckToken(v){}onDisconnectPut(v,m,P){}onDisconnectMerge(v,m,P){}onDisconnectCancel(v,m){}reportStats(v){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(v){this.allowedEvents_=v,this.listeners_={},gt(Array.isArray(v)&&v.length>0,"Requires a non-empty array")}trigger(v,...m){if(Array.isArray(this.listeners_[v])){const P=[...this.listeners_[v]];for(let w=0;w<P.length;w++)P[w].callback.apply(P[w].context,m)}}on(v,m,P){this.validateEventType_(v),this.listeners_[v]=this.listeners_[v]||[],this.listeners_[v].push({callback:m,context:P});const w=this.getInitialEvent(v);w&&m.apply(P,w)}off(v,m,P){this.validateEventType_(v);const w=this.listeners_[v]||[];for(let F=0;F<w.length;F++)if(w[F].callback===m&&(!P||P===w[F].context)){w.splice(F,1);return}}validateEventType_(v){gt(this.allowedEvents_.find(m=>m===v),"Unknown event: "+v)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends gg{static getInstance(){return new Ho}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(v){return gt(v==="online","Unknown event type: "+v),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=32,Zd=768;class ee{constructor(v,m){if(m===void 0){this.pieces_=v.split("/");let P=0;for(let w=0;w<this.pieces_.length;w++)this.pieces_[w].length>0&&(this.pieces_[P]=this.pieces_[w],P++);this.pieces_.length=P,this.pieceNum_=0}else this.pieces_=v,this.pieceNum_=m}toString(){let v="";for(let m=this.pieceNum_;m<this.pieces_.length;m++)this.pieces_[m]!==""&&(v+="/"+this.pieces_[m]);return v||"/"}}function $t(){return new ee("")}function Nt(E){return E.pieceNum_>=E.pieces_.length?null:E.pieces_[E.pieceNum_]}function xs(E){return E.pieces_.length-E.pieceNum_}function te(E){let v=E.pieceNum_;return v<E.pieces_.length&&v++,new ee(E.pieces_,v)}function mg(E){return E.pieceNum_<E.pieces_.length?E.pieces_[E.pieces_.length-1]:null}function l2(E){let v="";for(let m=E.pieceNum_;m<E.pieces_.length;m++)E.pieces_[m]!==""&&(v+="/"+encodeURIComponent(String(E.pieces_[m])));return v||"/"}function xg(E,v=0){return E.pieces_.slice(E.pieceNum_+v)}function yg(E){if(E.pieceNum_>=E.pieces_.length)return null;const v=[];for(let m=E.pieceNum_;m<E.pieces_.length-1;m++)v.push(E.pieces_[m]);return new ee(v,0)}function ve(E,v){const m=[];for(let P=E.pieceNum_;P<E.pieces_.length;P++)m.push(E.pieces_[P]);if(v instanceof ee)for(let P=v.pieceNum_;P<v.pieces_.length;P++)m.push(v.pieces_[P]);else{const P=v.split("/");for(let w=0;w<P.length;w++)P[w].length>0&&m.push(P[w])}return new ee(m,0)}function Dt(E){return E.pieceNum_>=E.pieces_.length}function je(E,v){const m=Nt(E),P=Nt(v);if(m===null)return v;if(m===P)return je(te(E),te(v));throw new Error("INTERNAL ERROR: innerPath ("+v+") is not within outerPath ("+E+")")}function Tg(E,v){if(xs(E)!==xs(v))return!1;for(let m=E.pieceNum_,P=v.pieceNum_;m<=E.pieces_.length;m++,P++)if(E.pieces_[m]!==v.pieces_[P])return!1;return!0}function ni(E,v){let m=E.pieceNum_,P=v.pieceNum_;if(xs(E)>xs(v))return!1;for(;m<E.pieces_.length;){if(E.pieces_[m]!==v.pieces_[P])return!1;++m,++P}return!0}class u2{constructor(v,m){this.errorPrefix_=m,this.parts_=xg(v,0),this.byteLength_=Math.max(1,this.parts_.length);for(let P=0;P<this.parts_.length;P++)this.byteLength_+=sh(this.parts_[P]);Eg(this)}}function f2(E,v){E.parts_.length>0&&(E.byteLength_+=1),E.parts_.push(v),E.byteLength_+=sh(v),Eg(E)}function d2(E){const v=E.parts_.pop();E.byteLength_-=sh(v),E.parts_.length>0&&(E.byteLength_-=1)}function Eg(E){if(E.byteLength_>Zd)throw new Error(E.errorPrefix_+"has a key path longer than "+Zd+" bytes ("+E.byteLength_+").");if(E.parts_.length>kd)throw new Error(E.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kd+") or object contains a cycle "+Is(E))}function Is(E){return E.parts_.length===0?"":"in property '"+E.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends gg{static getInstance(){return new mu}constructor(){super(["visible"]);let v,m;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(m="visibilitychange",v="hidden"):typeof document.mozHidden<"u"?(m="mozvisibilitychange",v="mozHidden"):typeof document.msHidden<"u"?(m="msvisibilitychange",v="msHidden"):typeof document.webkitHidden<"u"&&(m="webkitvisibilitychange",v="webkitHidden")),this.visible_=!0,m&&document.addEventListener(m,()=>{const P=!document[v];P!==this.visible_&&(this.visible_=P,this.trigger("visible",P))},!1)}getInitialEvent(v){return gt(v==="visible","Unknown event type: "+v),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=1e3,c2=60*5*1e3,Qd=30*1e3,v2=1.3,p2=3e4,g2="server_kill",qd=3;class bi extends pg{constructor(v,m,P,w,F,c,S,t){if(super(),this.repoInfo_=v,this.applicationId_=m,this.onDataUpdate_=P,this.onConnectStatus_=w,this.onServerInfoUpdate_=F,this.authTokenProvider_=c,this.appCheckTokenProvider_=S,this.authOverride_=t,this.id=bi.nextPersistentConnectionId_++,this.log_=ja("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Br,this.maxReconnectDelay_=c2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,t)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mu.getInstance().on("visible",this.onVisible_,this),v.host.indexOf("fblocal")===-1&&Ho.getInstance().on("online",this.onOnline_,this)}sendRequest(v,m,P){const w=++this.requestNumber_,F={r:w,a:v,b:m};this.log_(ge(F)),gt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(F),P&&(this.requestCBHash_[w]=P)}get(v){this.initConnection_();const m=new jl,w={action:"g",request:{p:v._path.toString(),q:v._queryObject},onComplete:c=>{const S=c.d;c.s==="ok"?m.resolve(S):m.reject(S)}};this.outstandingGets_.push(w),this.outstandingGetCount_++;const F=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(F),m.promise}listen(v,m,P,w){this.initConnection_();const F=v._queryIdentifier,c=v._path.toString();this.log_("Listen called for "+c+" "+F),this.listens.has(c)||this.listens.set(c,new Map),gt(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"listen() called for non-default but complete query"),gt(!this.listens.get(c).has(F),"listen() called twice for same path/queryId.");const S={onComplete:w,hashFn:m,query:v,tag:P};this.listens.get(c).set(F,S),this.connected_&&this.sendListen_(S)}sendGet_(v){const m=this.outstandingGets_[v];this.sendRequest("g",m.request,P=>{delete this.outstandingGets_[v],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),m.onComplete&&m.onComplete(P)})}sendListen_(v){const m=v.query,P=m._path.toString(),w=m._queryIdentifier;this.log_("Listen on "+P+" for "+w);const F={p:P},c="q";v.tag&&(F.q=m._queryObject,F.t=v.tag),F.h=v.hashFn(),this.sendRequest(c,F,S=>{const t=S.d,o=S.s;bi.warnOnListenWarnings_(t,m),(this.listens.get(P)&&this.listens.get(P).get(w))===v&&(this.log_("listen response",S),o!=="ok"&&this.removeListen_(P,w),v.onComplete&&v.onComplete(o,t))})}static warnOnListenWarnings_(v,m){if(v&&typeof v=="object"&&zi(v,"w")){const P=ur(v,"w");if(Array.isArray(P)&&~P.indexOf("no_index")){const w='".indexOn": "'+m._queryParams.getIndex().toString()+'"',F=m._path.toString();Ve(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${w} at ${F} to your security rules for better performance.`)}}}refreshAuthToken(v){this.authToken_=v,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(v)}reduceReconnectDelayIfAdminCredential_(v){(v&&v.length===40||Ty(v))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qd)}refreshAppCheckToken(v){this.appCheckToken_=v,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const v=this.authToken_,m=yy(v)?"auth":"gauth",P={cred:v};this.authOverride_===null?P.noauth=!0:typeof this.authOverride_=="object"&&(P.authvar=this.authOverride_),this.sendRequest(m,P,w=>{const F=w.s,c=w.d||"error";this.authToken_===v&&(F==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(F,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},v=>{const m=v.s,P=v.d||"error";m==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(m,P)})}unlisten(v,m){const P=v._path.toString(),w=v._queryIdentifier;this.log_("Unlisten called for "+P+" "+w),gt(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(P,w)&&this.connected_&&this.sendUnlisten_(P,w,v._queryObject,m)}sendUnlisten_(v,m,P,w){this.log_("Unlisten on "+v+" for "+m);const F={p:v},c="n";w&&(F.q=P,F.t=w),this.sendRequest(c,F)}onDisconnectPut(v,m,P){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",v,m,P):this.onDisconnectRequestQueue_.push({pathString:v,action:"o",data:m,onComplete:P})}onDisconnectMerge(v,m,P){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",v,m,P):this.onDisconnectRequestQueue_.push({pathString:v,action:"om",data:m,onComplete:P})}onDisconnectCancel(v,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",v,null,m):this.onDisconnectRequestQueue_.push({pathString:v,action:"oc",data:null,onComplete:m})}sendOnDisconnect_(v,m,P,w){const F={p:m,d:P};this.log_("onDisconnect "+v,F),this.sendRequest(v,F,c=>{w&&setTimeout(()=>{w(c.s,c.d)},Math.floor(0))})}put(v,m,P,w){this.putInternal("p",v,m,P,w)}merge(v,m,P,w){this.putInternal("m",v,m,P,w)}putInternal(v,m,P,w,F){this.initConnection_();const c={p:m,d:P};F!==void 0&&(c.h=F),this.outstandingPuts_.push({action:v,request:c,onComplete:w}),this.outstandingPutCount_++;const S=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(S):this.log_("Buffering put: "+m)}sendPut_(v){const m=this.outstandingPuts_[v].action,P=this.outstandingPuts_[v].request,w=this.outstandingPuts_[v].onComplete;this.outstandingPuts_[v].queued=this.connected_,this.sendRequest(m,P,F=>{this.log_(m+" response",F),delete this.outstandingPuts_[v],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),w&&w(F.s,F.d)})}reportStats(v){if(this.connected_){const m={c:v};this.log_("reportStats",m),this.sendRequest("s",m,P=>{if(P.s!=="ok"){const F=P.d;this.log_("reportStats","Error sending stats: "+F)}})}}onDataMessage_(v){if("r"in v){this.log_("from server: "+ge(v));const m=v.r,P=this.requestCBHash_[m];P&&(delete this.requestCBHash_[m],P(v.b))}else{if("error"in v)throw"A server-side error has occurred: "+v.error;"a"in v&&this.onDataPush_(v.a,v.b)}}onDataPush_(v,m){this.log_("handleServerMessage",v,m),v==="d"?this.onDataUpdate_(m.p,m.d,!1,m.t):v==="m"?this.onDataUpdate_(m.p,m.d,!0,m.t):v==="c"?this.onListenRevoked_(m.p,m.q):v==="ac"?this.onAuthRevoked_(m.s,m.d):v==="apc"?this.onAppCheckRevoked_(m.s,m.d):v==="sd"?this.onSecurityDebugPacket_(m):Pl("Unrecognized action received from server: "+ge(v)+`
Are you using the latest client?`)}onReady_(v,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(v),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(v){gt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(v))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(v){v&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Br,this.realtime_||this.scheduleConnect_(0)),this.visible_=v}onOnline_(v){v?(this.log_("Browser went online."),this.reconnectDelay_=Br,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>p2&&(this.reconnectDelay_=Br),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const v=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let m=Math.max(0,this.reconnectDelay_-v);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*v2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const v=this.onDataMessage_.bind(this),m=this.onReady_.bind(this),P=this.onRealtimeDisconnect_.bind(this),w=this.id+":"+bi.nextConnectionId_++,F=this.lastSessionId;let c=!1,S=null;const t=function(){S?S.close():(c=!0,P())},o=function(a){gt(S,"sendRequest call when we're not connected not allowed."),S.sendRequest(a)};this.realtime_={close:t,sendRequest:o};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,n]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);c?xe("getToken() completed but was canceled"):(xe("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=n&&n.token,S=new h2(w,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,v,m,P,r=>{Ve(r+" ("+this.repoInfo_.toString()+")"),this.interrupt(g2)},F))}catch(a){this.log_("Failed to get token: "+a),c||(this.repoInfo_.nodeAdmin&&Ve(a),t())}}}interrupt(v){xe("Interrupting connection for reason: "+v),this.interruptReasons_[v]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(v){xe("Resuming connection for reason: "+v),delete this.interruptReasons_[v],vl(this.interruptReasons_)&&(this.reconnectDelay_=Br,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(v){const m=v-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:m})}cancelSentTransactions_(){for(let v=0;v<this.outstandingPuts_.length;v++){const m=this.outstandingPuts_[v];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[v],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(v,m){let P;m?P=m.map(F=>cu(F)).join("$"):P="default";const w=this.removeListen_(v,P);w&&w.onComplete&&w.onComplete("permission_denied")}removeListen_(v,m){const P=new ee(v).toString();let w;if(this.listens.has(P)){const F=this.listens.get(P);w=F.get(m),F.delete(m),F.size===0&&this.listens.delete(P)}else w=void 0;return w}onAuthRevoked_(v,m){xe("Auth token revoked: "+v+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(v==="invalid_token"||v==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qd&&(this.reconnectDelay_=Qd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(v,m){xe("App check token revoked: "+v+"/"+m),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(v==="invalid_token"||v==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(v){this.securityDebugCallback_?this.securityDebugCallback_(v):"msg"in v&&console.log("FIREBASE: "+v.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const v of this.listens.values())for(const m of v.values())this.sendListen_(m);for(let v=0;v<this.outstandingPuts_.length;v++)this.outstandingPuts_[v]&&this.sendPut_(v);for(;this.onDisconnectRequestQueue_.length;){const v=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(v.action,v.pathString,v.data,v.onComplete)}for(let v=0;v<this.outstandingGets_.length;v++)this.outstandingGets_[v]&&this.sendGet_(v)}sendConnectStats_(){const v={};let m="js";v["sdk."+m+"."+$p.replace(/\./g,"-")]=1,kl()?v["framework.cordova"]=1:Gv()&&(v["framework.reactnative"]=1),this.reportStats(v)}shouldReconnect_(){const v=Ho.getInstance().currentlyOnline();return vl(this.interruptReasons_)&&v}}bi.nextPersistentConnectionId_=0;bi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(v,m){this.name=v,this.node=m}static Wrap(v,m){return new Bt(v,m)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{getCompare(){return this.compare.bind(this)}indexedValueChanged(v,m){const P=new Bt(fr,v),w=new Bt(fr,m);return this.compare(P,w)!==0}minPost(){return Bt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co;class Sg extends uh{static get __EMPTY_NODE(){return co}static set __EMPTY_NODE(v){co=v}compare(v,m){return xr(v.name,m.name)}isDefinedOn(v){throw pr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(v,m){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(un,co)}makePost(v,m){return gt(typeof v=="string","KeyIndex indexValue must always be a string."),new Bt(v,co)}toString(){return".key"}}const bn=new Sg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(v,m,P,w,F=null){this.isReverse_=w,this.resultGenerator_=F,this.nodeStack_=[];let c=1;for(;!v.isEmpty();)if(v=v,c=m?P(v.key,m):1,w&&(c*=-1),c<0)this.isReverse_?v=v.left:v=v.right;else if(c===0){this.nodeStack_.push(v);break}else this.nodeStack_.push(v),this.isReverse_?v=v.right:v=v.left}getNext(){if(this.nodeStack_.length===0)return null;let v=this.nodeStack_.pop(),m;if(this.resultGenerator_?m=this.resultGenerator_(v.key,v.value):m={key:v.key,value:v.value},this.isReverse_)for(v=v.left;!v.isEmpty();)this.nodeStack_.push(v),v=v.right;else for(v=v.right;!v.isEmpty();)this.nodeStack_.push(v),v=v.left;return m}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const v=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(v.key,v.value):{key:v.key,value:v.value}}}class ce{constructor(v,m,P,w,F){this.key=v,this.value=m,this.color=P??ce.RED,this.left=w??Le.EMPTY_NODE,this.right=F??Le.EMPTY_NODE}copy(v,m,P,w,F){return new ce(v??this.key,m??this.value,P??this.color,w??this.left,F??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(v){return this.left.inorderTraversal(v)||!!v(this.key,this.value)||this.right.inorderTraversal(v)}reverseTraversal(v){return this.right.reverseTraversal(v)||v(this.key,this.value)||this.left.reverseTraversal(v)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(v,m,P){let w=this;const F=P(v,w.key);return F<0?w=w.copy(null,null,null,w.left.insert(v,m,P),null):F===0?w=w.copy(null,m,null,null,null):w=w.copy(null,null,null,null,w.right.insert(v,m,P)),w.fixUp_()}removeMin_(){if(this.left.isEmpty())return Le.EMPTY_NODE;let v=this;return!v.left.isRed_()&&!v.left.left.isRed_()&&(v=v.moveRedLeft_()),v=v.copy(null,null,null,v.left.removeMin_(),null),v.fixUp_()}remove(v,m){let P,w;if(P=this,m(v,P.key)<0)!P.left.isEmpty()&&!P.left.isRed_()&&!P.left.left.isRed_()&&(P=P.moveRedLeft_()),P=P.copy(null,null,null,P.left.remove(v,m),null);else{if(P.left.isRed_()&&(P=P.rotateRight_()),!P.right.isEmpty()&&!P.right.isRed_()&&!P.right.left.isRed_()&&(P=P.moveRedRight_()),m(v,P.key)===0){if(P.right.isEmpty())return Le.EMPTY_NODE;w=P.right.min_(),P=P.copy(w.key,w.value,null,null,P.right.removeMin_())}P=P.copy(null,null,null,null,P.right.remove(v,m))}return P.fixUp_()}isRed_(){return this.color}fixUp_(){let v=this;return v.right.isRed_()&&!v.left.isRed_()&&(v=v.rotateLeft_()),v.left.isRed_()&&v.left.left.isRed_()&&(v=v.rotateRight_()),v.left.isRed_()&&v.right.isRed_()&&(v=v.colorFlip_()),v}moveRedLeft_(){let v=this.colorFlip_();return v.right.left.isRed_()&&(v=v.copy(null,null,null,null,v.right.rotateRight_()),v=v.rotateLeft_(),v=v.colorFlip_()),v}moveRedRight_(){let v=this.colorFlip_();return v.left.left.isRed_()&&(v=v.rotateRight_(),v=v.colorFlip_()),v}rotateLeft_(){const v=this.copy(null,null,ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,v,null)}rotateRight_(){const v=this.copy(null,null,ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,v)}colorFlip_(){const v=this.left.copy(null,null,!this.left.color,null,null),m=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,v,m)}checkMaxDepth_(){const v=this.check_();return Math.pow(2,v)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const v=this.left.check_();if(v!==this.right.check_())throw new Error("Black depths differ");return v+(this.isRed_()?0:1)}}ce.RED=!0;ce.BLACK=!1;class m2{copy(v,m,P,w,F){return this}insert(v,m,P){return new ce(v,m,null)}remove(v,m){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(v){return!1}reverseTraversal(v){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Le{constructor(v,m=Le.EMPTY_NODE){this.comparator_=v,this.root_=m}insert(v,m){return new Le(this.comparator_,this.root_.insert(v,m,this.comparator_).copy(null,null,ce.BLACK,null,null))}remove(v){return new Le(this.comparator_,this.root_.remove(v,this.comparator_).copy(null,null,ce.BLACK,null,null))}get(v){let m,P=this.root_;for(;!P.isEmpty();){if(m=this.comparator_(v,P.key),m===0)return P.value;m<0?P=P.left:m>0&&(P=P.right)}return null}getPredecessorKey(v){let m,P=this.root_,w=null;for(;!P.isEmpty();)if(m=this.comparator_(v,P.key),m===0){if(P.left.isEmpty())return w?w.key:null;for(P=P.left;!P.right.isEmpty();)P=P.right;return P.key}else m<0?P=P.left:m>0&&(w=P,P=P.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(v){return this.root_.inorderTraversal(v)}reverseTraversal(v){return this.root_.reverseTraversal(v)}getIterator(v){return new vo(this.root_,null,this.comparator_,!1,v)}getIteratorFrom(v,m){return new vo(this.root_,v,this.comparator_,!1,m)}getReverseIteratorFrom(v,m){return new vo(this.root_,v,this.comparator_,!0,m)}getReverseIterator(v){return new vo(this.root_,null,this.comparator_,!0,v)}}Le.EMPTY_NODE=new m2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(E,v){return xr(E.name,v.name)}function xu(E,v){return xr(E,v)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml;function y2(E){Ml=E}const Cg=function(E){return typeof E=="number"?"number:"+qp(E):"string:"+E},Ag=function(E){if(E.isLeafNode()){const v=E.val();gt(typeof v=="string"||typeof v=="number"||typeof v=="object"&&zi(v,".sv"),"Priority must be a string or number.")}else gt(E===Ml||E.isEmpty(),"priority of unexpected type.");gt(E===Ml||E.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d;class de{static set __childrenNodeConstructor(v){_d=v}static get __childrenNodeConstructor(){return _d}constructor(v,m=de.__childrenNodeConstructor.EMPTY_NODE){this.value_=v,this.priorityNode_=m,this.lazyHash_=null,gt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ag(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(v){return new de(this.value_,v)}getImmediateChild(v){return v===".priority"?this.priorityNode_:de.__childrenNodeConstructor.EMPTY_NODE}getChild(v){return Dt(v)?this:Nt(v)===".priority"?this.priorityNode_:de.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(v,m){return null}updateImmediateChild(v,m){return v===".priority"?this.updatePriority(m):m.isEmpty()&&v!==".priority"?this:de.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(v,m).updatePriority(this.priorityNode_)}updateChild(v,m){const P=Nt(v);return P===null?m:m.isEmpty()&&P!==".priority"?this:(gt(P!==".priority"||xs(v)===1,".priority must be the last token in a path"),this.updateImmediateChild(P,de.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(v),m)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(v,m){return!1}val(v){return v&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let v="";this.priorityNode_.isEmpty()||(v+="priority:"+Cg(this.priorityNode_.val())+":");const m=typeof this.value_;v+=m+":",m==="number"?v+=qp(this.value_):v+=this.value_,this.lazyHash_=kp(v)}return this.lazyHash_}getValue(){return this.value_}compareTo(v){return v===de.__childrenNodeConstructor.EMPTY_NODE?1:v instanceof de.__childrenNodeConstructor?-1:(gt(v.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(v))}compareToLeafNode_(v){const m=typeof v.value_,P=typeof this.value_,w=de.VALUE_TYPE_ORDER.indexOf(m),F=de.VALUE_TYPE_ORDER.indexOf(P);return gt(w>=0,"Unknown leaf type: "+m),gt(F>=0,"Unknown leaf type: "+P),w===F?P==="object"?0:this.value_<v.value_?-1:this.value_===v.value_?0:1:F-w}withIndex(){return this}isIndexed(){return!0}equals(v){if(v===this)return!0;if(v.isLeafNode()){const m=v;return this.value_===m.value_&&this.priorityNode_.equals(m.priorityNode_)}else return!1}}de.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg,Rg;function T2(E){Pg=E}function E2(E){Rg=E}class S2 extends uh{compare(v,m){const P=v.node.getPriority(),w=m.node.getPriority(),F=P.compareTo(w);return F===0?xr(v.name,m.name):F}isDefinedOn(v){return!v.getPriority().isEmpty()}indexedValueChanged(v,m){return!v.getPriority().equals(m.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(un,new de("[PRIORITY-POST]",Rg))}makePost(v,m){const P=Pg(v);return new Bt(m,new de("[PRIORITY-POST]",P))}toString(){return".priority"}}const Ee=new S2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=Math.log(2);class A2{constructor(v){const m=F=>parseInt(Math.log(F)/C2,10),P=F=>parseInt(Array(F+1).join("1"),2);this.count=m(v+1),this.current_=this.count-1;const w=P(this.count);this.bits_=v+1&w}nextBitIsOne(){const v=!(this.bits_&1<<this.current_);return this.current_--,v}}const Yo=function(E,v,m,P){E.sort(v);const w=function(t,o){const g=o-t;let a,n;if(g===0)return null;if(g===1)return a=E[t],n=m?m(a):a,new ce(n,a.node,ce.BLACK,null,null);{const r=parseInt(g/2,10)+t,e=w(t,r),s=w(r+1,o);return a=E[r],n=m?m(a):a,new ce(n,a.node,ce.BLACK,e,s)}},F=function(t){let o=null,g=null,a=E.length;const n=function(e,s){const h=a-e,i=a;a-=e;const l=w(h+1,i),u=E[h],f=m?m(u):u;r(new ce(f,u.node,s,null,l))},r=function(e){o?(o.left=e,o=e):(g=e,o=e)};for(let e=0;e<t.count;++e){const s=t.nextBitIsOne(),h=Math.pow(2,t.count-(e+1));s?n(h,ce.BLACK):(n(h,ce.BLACK),n(h,ce.RED))}return g},c=new A2(E.length),S=F(c);return new Le(P||v,S)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh;const Rn={};class Ni{static get Default(){return gt(Rn&&Ee,"ChildrenNode.ts has not been loaded"),kh=kh||new Ni({".priority":Rn},{".priority":Ee}),kh}constructor(v,m){this.indexes_=v,this.indexSet_=m}get(v){const m=ur(this.indexes_,v);if(!m)throw new Error("No index defined for "+v);return m instanceof Le?m:null}hasIndex(v){return zi(this.indexSet_,v.toString())}addIndex(v,m){gt(v!==bn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const P=[];let w=!1;const F=m.getIterator(Bt.Wrap);let c=F.getNext();for(;c;)w=w||v.isDefinedOn(c.node),P.push(c),c=F.getNext();let S;w?S=Yo(P,v.getCompare()):S=Rn;const t=v.toString(),o={...this.indexSet_};o[t]=v;const g={...this.indexes_};return g[t]=S,new Ni(g,o)}addToIndexes(v,m){const P=Lo(this.indexes_,(w,F)=>{const c=ur(this.indexSet_,F);if(gt(c,"Missing index implementation for "+F),w===Rn)if(c.isDefinedOn(v.node)){const S=[],t=m.getIterator(Bt.Wrap);let o=t.getNext();for(;o;)o.name!==v.name&&S.push(o),o=t.getNext();return S.push(v),Yo(S,c.getCompare())}else return Rn;else{const S=m.get(v.name);let t=w;return S&&(t=t.remove(new Bt(v.name,S))),t.insert(v,v.node)}});return new Ni(P,this.indexSet_)}removeFromIndexes(v,m){const P=Lo(this.indexes_,w=>{if(w===Rn)return w;{const F=m.get(v.name);return F?w.remove(new Bt(v.name,F)):w}});return new Ni(P,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br;class Yt{static get EMPTY_NODE(){return br||(br=new Yt(new Le(xu),null,Ni.Default))}constructor(v,m,P){this.children_=v,this.priorityNode_=m,this.indexMap_=P,this.lazyHash_=null,this.priorityNode_&&Ag(this.priorityNode_),this.children_.isEmpty()&&gt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||br}updatePriority(v){return this.children_.isEmpty()?this:new Yt(this.children_,v,this.indexMap_)}getImmediateChild(v){if(v===".priority")return this.getPriority();{const m=this.children_.get(v);return m===null?br:m}}getChild(v){const m=Nt(v);return m===null?this:this.getImmediateChild(m).getChild(te(v))}hasChild(v){return this.children_.get(v)!==null}updateImmediateChild(v,m){if(gt(m,"We should always be passing snapshot nodes"),v===".priority")return this.updatePriority(m);{const P=new Bt(v,m);let w,F;m.isEmpty()?(w=this.children_.remove(v),F=this.indexMap_.removeFromIndexes(P,this.children_)):(w=this.children_.insert(v,m),F=this.indexMap_.addToIndexes(P,this.children_));const c=w.isEmpty()?br:this.priorityNode_;return new Yt(w,c,F)}}updateChild(v,m){const P=Nt(v);if(P===null)return m;{gt(Nt(v)!==".priority"||xs(v)===1,".priority must be the last token in a path");const w=this.getImmediateChild(P).updateChild(te(v),m);return this.updateImmediateChild(P,w)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(v){if(this.isEmpty())return null;const m={};let P=0,w=0,F=!0;if(this.forEachChild(Ee,(c,S)=>{m[c]=S.val(v),P++,F&&Yt.INTEGER_REGEXP_.test(c)?w=Math.max(w,Number(c)):F=!1}),!v&&F&&w<2*P){const c=[];for(const S in m)c[S]=m[S];return c}else return v&&!this.getPriority().isEmpty()&&(m[".priority"]=this.getPriority().val()),m}hash(){if(this.lazyHash_===null){let v="";this.getPriority().isEmpty()||(v+="priority:"+Cg(this.getPriority().val())+":"),this.forEachChild(Ee,(m,P)=>{const w=P.hash();w!==""&&(v+=":"+m+":"+w)}),this.lazyHash_=v===""?"":kp(v)}return this.lazyHash_}getPredecessorChildName(v,m,P){const w=this.resolveIndex_(P);if(w){const F=w.getPredecessorKey(new Bt(v,m));return F?F.name:null}else return this.children_.getPredecessorKey(v)}getFirstChildName(v){const m=this.resolveIndex_(v);if(m){const P=m.minKey();return P&&P.name}else return this.children_.minKey()}getFirstChild(v){const m=this.getFirstChildName(v);return m?new Bt(m,this.children_.get(m)):null}getLastChildName(v){const m=this.resolveIndex_(v);if(m){const P=m.maxKey();return P&&P.name}else return this.children_.maxKey()}getLastChild(v){const m=this.getLastChildName(v);return m?new Bt(m,this.children_.get(m)):null}forEachChild(v,m){const P=this.resolveIndex_(v);return P?P.inorderTraversal(w=>m(w.name,w.node)):this.children_.inorderTraversal(m)}getIterator(v){return this.getIteratorFrom(v.minPost(),v)}getIteratorFrom(v,m){const P=this.resolveIndex_(m);if(P)return P.getIteratorFrom(v,w=>w);{const w=this.children_.getIteratorFrom(v.name,Bt.Wrap);let F=w.peek();for(;F!=null&&m.compare(F,v)<0;)w.getNext(),F=w.peek();return w}}getReverseIterator(v){return this.getReverseIteratorFrom(v.maxPost(),v)}getReverseIteratorFrom(v,m){const P=this.resolveIndex_(m);if(P)return P.getReverseIteratorFrom(v,w=>w);{const w=this.children_.getReverseIteratorFrom(v.name,Bt.Wrap);let F=w.peek();for(;F!=null&&m.compare(F,v)>0;)w.getNext(),F=w.peek();return w}}compareTo(v){return this.isEmpty()?v.isEmpty()?0:-1:v.isLeafNode()||v.isEmpty()?1:v===Ja?-1:0}withIndex(v){if(v===bn||this.indexMap_.hasIndex(v))return this;{const m=this.indexMap_.addIndex(v,this.children_);return new Yt(this.children_,this.priorityNode_,m)}}isIndexed(v){return v===bn||this.indexMap_.hasIndex(v)}equals(v){if(v===this)return!0;if(v.isLeafNode())return!1;{const m=v;if(this.getPriority().equals(m.getPriority()))if(this.children_.count()===m.children_.count()){const P=this.getIterator(Ee),w=m.getIterator(Ee);let F=P.getNext(),c=w.getNext();for(;F&&c;){if(F.name!==c.name||!F.node.equals(c.node))return!1;F=P.getNext(),c=w.getNext()}return F===null&&c===null}else return!1;else return!1}}resolveIndex_(v){return v===bn?null:this.indexMap_.get(v.toString())}}Yt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class P2 extends Yt{constructor(){super(new Le(xu),Yt.EMPTY_NODE,Ni.Default)}compareTo(v){return v===this?0:1}equals(v){return v===this}getPriority(){return this}getImmediateChild(v){return Yt.EMPTY_NODE}isEmpty(){return!1}}const Ja=new P2;Object.defineProperties(Bt,{MIN:{value:new Bt(fr,Yt.EMPTY_NODE)},MAX:{value:new Bt(un,Ja)}});Sg.__EMPTY_NODE=Yt.EMPTY_NODE;de.__childrenNodeConstructor=Yt;y2(Ja);E2(Ja);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=!0;function ye(E,v=null){if(E===null)return Yt.EMPTY_NODE;if(typeof E=="object"&&".priority"in E&&(v=E[".priority"]),gt(v===null||typeof v=="string"||typeof v=="number"||typeof v=="object"&&".sv"in v,"Invalid priority type found: "+typeof v),typeof E=="object"&&".value"in E&&E[".value"]!==null&&(E=E[".value"]),typeof E!="object"||".sv"in E){const m=E;return new de(m,ye(v))}if(!(E instanceof Array)&&R2){const m=[];let P=!1;if(ke(E,(c,S)=>{if(c.substring(0,1)!=="."){const t=ye(S);t.isEmpty()||(P=P||!t.getPriority().isEmpty(),m.push(new Bt(c,t)))}}),m.length===0)return Yt.EMPTY_NODE;const F=Yo(m,x2,c=>c.name,xu);if(P){const c=Yo(m,Ee.getCompare());return new Yt(F,ye(v),new Ni({".priority":c},{".priority":Ee}))}else return new Yt(F,ye(v),Ni.Default)}else{let m=Yt.EMPTY_NODE;return ke(E,(P,w)=>{if(zi(E,P)&&P.substring(0,1)!=="."){const F=ye(w);(F.isLeafNode()||!F.isEmpty())&&(m=m.updateImmediateChild(P,F))}}),m.updatePriority(ye(v))}}T2(ye);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2 extends uh{constructor(v){super(),this.indexPath_=v,gt(!Dt(v)&&Nt(v)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(v){return v.getChild(this.indexPath_)}isDefinedOn(v){return!v.getChild(this.indexPath_).isEmpty()}compare(v,m){const P=this.extractChild(v.node),w=this.extractChild(m.node),F=P.compareTo(w);return F===0?xr(v.name,m.name):F}makePost(v,m){const P=ye(v),w=Yt.EMPTY_NODE.updateChild(this.indexPath_,P);return new Bt(m,w)}maxPost(){const v=Yt.EMPTY_NODE.updateChild(this.indexPath_,Ja);return new Bt(un,v)}toString(){return xg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2 extends uh{compare(v,m){const P=v.node.compareTo(m.node);return P===0?xr(v.name,m.name):P}isDefinedOn(v){return!0}indexedValueChanged(v,m){return!v.equals(m)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(v,m){const P=ye(v);return new Bt(m,P)}toString(){return".value"}}const I2=new w2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(E){return{type:"value",snapshotNode:E}}function L2(E,v){return{type:"child_added",snapshotNode:v,childName:E}}function D2(E,v){return{type:"child_removed",snapshotNode:v,childName:E}}function tc(E,v,m){return{type:"child_changed",snapshotNode:v,childName:E,oldSnap:m}}function F2(E,v){return{type:"child_moved",snapshotNode:v,childName:E}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ee}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return gt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return gt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fr}hasEnd(){return this.endSet_}getIndexEndValue(){return gt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return gt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:un}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return gt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ee}copy(){const v=new yu;return v.limitSet_=this.limitSet_,v.limit_=this.limit_,v.startSet_=this.startSet_,v.startAfterSet_=this.startAfterSet_,v.indexStartValue_=this.indexStartValue_,v.startNameSet_=this.startNameSet_,v.indexStartName_=this.indexStartName_,v.endSet_=this.endSet_,v.endBeforeSet_=this.endBeforeSet_,v.indexEndValue_=this.indexEndValue_,v.endNameSet_=this.endNameSet_,v.indexEndName_=this.indexEndName_,v.index_=this.index_,v.viewFrom_=this.viewFrom_,v}}function ec(E){const v={};if(E.isDefault())return v;let m;if(E.index_===Ee?m="$priority":E.index_===I2?m="$value":E.index_===bn?m="$key":(gt(E.index_ instanceof M2,"Unrecognized index type!"),m=E.index_.toString()),v.orderBy=ge(m),E.startSet_){const P=E.startAfterSet_?"startAfter":"startAt";v[P]=ge(E.indexStartValue_),E.startNameSet_&&(v[P]+=","+ge(E.indexStartName_))}if(E.endSet_){const P=E.endBeforeSet_?"endBefore":"endAt";v[P]=ge(E.indexEndValue_),E.endNameSet_&&(v[P]+=","+ge(E.indexEndName_))}return E.limitSet_&&(E.isViewFromLeft()?v.limitToFirst=E.limit_:v.limitToLast=E.limit_),v}function ic(E){const v={};if(E.startSet_&&(v.sp=E.indexStartValue_,E.startNameSet_&&(v.sn=E.indexStartName_),v.sin=!E.startAfterSet_),E.endSet_&&(v.ep=E.indexEndValue_,E.endNameSet_&&(v.en=E.indexEndName_),v.ein=!E.endBeforeSet_),E.limitSet_){v.l=E.limit_;let m=E.viewFrom_;m===""&&(E.isViewFromLeft()?m="l":m="r"),v.vf=m}return E.index_!==Ee&&(v.i=E.index_.toString()),v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends pg{reportStats(v){throw new Error("Method not implemented.")}static getListenId_(v,m){return m!==void 0?"tag$"+m:(gt(v._queryParams.isDefault(),"should have a tag if it's not a default query."),v._path.toString())}constructor(v,m,P,w){super(),this.repoInfo_=v,this.onDataUpdate_=m,this.authTokenProvider_=P,this.appCheckTokenProvider_=w,this.log_=ja("p:rest:"),this.listens_={}}listen(v,m,P,w){const F=v._path.toString();this.log_("Listen called for "+F+" "+v._queryIdentifier);const c=Xo.getListenId_(v,P),S={};this.listens_[c]=S;const t=ec(v._queryParams);this.restRequest_(F+".json",t,(o,g)=>{let a=g;if(o===404&&(a=null,o=null),o===null&&this.onDataUpdate_(F,a,!1,P),ur(this.listens_,c)===S){let n;o?o===401?n="permission_denied":n="rest_error:"+o:n="ok",w(n,null)}})}unlisten(v,m){const P=Xo.getListenId_(v,m);delete this.listens_[P]}get(v){const m=ec(v._queryParams),P=v._path.toString(),w=new jl;return this.restRequest_(P+".json",m,(F,c)=>{let S=c;F===404&&(S=null,F=null),F===null?(this.onDataUpdate_(P,S,!1,null),w.resolve(S)):w.reject(new Error(S))}),w.promise}refreshAuthToken(v){}restRequest_(v,m={},P){return m.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([w,F])=>{w&&w.accessToken&&(m.auth=w.accessToken),F&&F.token&&(m.ac=F.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+v+"?ns="+this.repoInfo_.namespace+gr(m);this.log_("Sending REST request for "+c);const S=new XMLHttpRequest;S.onreadystatechange=()=>{if(P&&S.readyState===4){this.log_("REST Response for "+c+" received. status:",S.status,"response:",S.responseText);let t=null;if(S.status>=200&&S.status<300){try{t=sa(S.responseText)}catch{Ve("Failed to parse JSON response for "+c+": "+S.responseText)}P(null,t)}else S.status!==401&&S.status!==404&&Ve("Got unsuccessful REST response for "+c+" Status: "+S.status),P(S.status);P=null}},S.open("GET",c,!0),S.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(v){return this.rootNode_.getChild(v)}updateSnapshot(v,m){this.rootNode_=this.rootNode_.updateChild(v,m)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return{value:null,children:new Map}}function Mg(E,v,m){if(Dt(v))E.value=m,E.children.clear();else if(E.value!==null)E.value=E.value.updateChild(v,m);else{const P=Nt(v);E.children.has(P)||E.children.set(P,Ko());const w=E.children.get(P);v=te(v),Mg(w,v,m)}}function wl(E,v,m){E.value!==null?m(v,E.value):B2(E,(P,w)=>{const F=new ee(v.toString()+"/"+P);wl(w,F,m)})}function B2(E,v){E.children.forEach((m,P)=>{v(P,m)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(v){this.collection_=v,this.last_=null}get(){const v=this.collection_.get(),m={...v};return this.last_&&ke(this.last_,(P,w)=>{m[P]=m[P]-w}),this.last_=v,m}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=10*1e3,G2=30*1e3,U2=5*60*1e3;class V2{constructor(v,m){this.server_=m,this.statsToReport_={},this.statsListener_=new b2(v);const P=sc+(G2-sc)*Math.random();Jr(this.reportStats_.bind(this),Math.floor(P))}reportStats_(){const v=this.statsListener_.get(),m={};let P=!1;ke(v,(w,F)=>{F>0&&zi(this.statsToReport_,w)&&(m[w]=F,P=!0)}),P&&this.server_.reportStats(m),Jr(this.reportStats_.bind(this),Math.floor(Math.random()*2*U2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si;(function(E){E[E.OVERWRITE=0]="OVERWRITE",E[E.MERGE=1]="MERGE",E[E.ACK_USER_WRITE=2]="ACK_USER_WRITE",E[E.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Si||(Si={}));function wg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ig(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Og(E){return{fromUser:!1,fromServer:!0,queryId:E,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(v,m,P){this.path=v,this.affectedTree=m,this.revert=P,this.type=Si.ACK_USER_WRITE,this.source=wg()}operationForChild(v){if(Dt(this.path)){if(this.affectedTree.value!=null)return gt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const m=this.affectedTree.subtree(new ee(v));return new jo($t(),m,this.revert)}}else return gt(Nt(this.path)===v,"operationForChild called for unrelated child."),new jo(te(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(v,m,P){this.source=v,this.path=m,this.snap=P,this.type=Si.OVERWRITE}operationForChild(v){return Dt(this.path)?new fn(this.source,$t(),this.snap.getImmediateChild(v)):new fn(this.source,te(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(v,m,P){this.source=v,this.path=m,this.children=P,this.type=Si.MERGE}operationForChild(v){if(Dt(this.path)){const m=this.children.subtree(new ee(v));return m.isEmpty()?null:m.value?new fn(this.source,$t(),m.value):new ha(this.source,$t(),m)}else return gt(Nt(this.path)===v,"Can't get a merge for a child not on the path of the operation"),new ha(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(v,m,P){this.node_=v,this.fullyInitialized_=m,this.filtered_=P}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(v){if(Dt(v))return this.isFullyInitialized()&&!this.filtered_;const m=Nt(v);return this.isCompleteForChild(m)}isCompleteForChild(v){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(v)}getNode(){return this.node_}}function W2(E,v,m,P){const w=[],F=[];return v.forEach(c=>{c.type==="child_changed"&&E.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&F.push(F2(c.childName,c.snapshotNode))}),Gr(E,w,"child_removed",v,P,m),Gr(E,w,"child_added",v,P,m),Gr(E,w,"child_moved",F,P,m),Gr(E,w,"child_changed",v,P,m),Gr(E,w,"value",v,P,m),w}function Gr(E,v,m,P,w,F){const c=P.filter(S=>S.type===m);c.sort((S,t)=>H2(E,S,t)),c.forEach(S=>{const t=z2(E,S,F);w.forEach(o=>{o.respondsTo(S.type)&&v.push(o.createEvent(t,E.query_))})})}function z2(E,v,m){return v.type==="value"||v.type==="child_removed"||(v.prevName=m.getPredecessorChildName(v.childName,v.snapshotNode,E.index_)),v}function H2(E,v,m){if(v.childName==null||m.childName==null)throw pr("Should only compare child_ events.");const P=new Bt(v.childName,v.snapshotNode),w=new Bt(m.childName,m.snapshotNode);return E.index_.compare(P,w)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(E,v){return{eventCache:E,serverCache:v}}function kr(E,v,m,P){return Lg(new Tu(v,m,P),E.serverCache)}function Dg(E,v,m,P){return Lg(E.eventCache,new Tu(v,m,P))}function Il(E){return E.eventCache.isFullyInitialized()?E.eventCache.getNode():null}function dn(E){return E.serverCache.isFullyInitialized()?E.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh;const Y2=()=>(Zh||(Zh=new Le(IC)),Zh);class _t{static fromObject(v){let m=new _t(null);return ke(v,(P,w)=>{m=m.set(new ee(P),w)}),m}constructor(v,m=Y2()){this.value=v,this.children=m}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(v,m){if(this.value!=null&&m(this.value))return{path:$t(),value:this.value};if(Dt(v))return null;{const P=Nt(v),w=this.children.get(P);if(w!==null){const F=w.findRootMostMatchingPathAndValue(te(v),m);return F!=null?{path:ve(new ee(P),F.path),value:F.value}:null}else return null}}findRootMostValueAndPath(v){return this.findRootMostMatchingPathAndValue(v,()=>!0)}subtree(v){if(Dt(v))return this;{const m=Nt(v),P=this.children.get(m);return P!==null?P.subtree(te(v)):new _t(null)}}set(v,m){if(Dt(v))return new _t(m,this.children);{const P=Nt(v),F=(this.children.get(P)||new _t(null)).set(te(v),m),c=this.children.insert(P,F);return new _t(this.value,c)}}remove(v){if(Dt(v))return this.children.isEmpty()?new _t(null):new _t(null,this.children);{const m=Nt(v),P=this.children.get(m);if(P){const w=P.remove(te(v));let F;return w.isEmpty()?F=this.children.remove(m):F=this.children.insert(m,w),this.value===null&&F.isEmpty()?new _t(null):new _t(this.value,F)}else return this}}get(v){if(Dt(v))return this.value;{const m=Nt(v),P=this.children.get(m);return P?P.get(te(v)):null}}setTree(v,m){if(Dt(v))return m;{const P=Nt(v),F=(this.children.get(P)||new _t(null)).setTree(te(v),m);let c;return F.isEmpty()?c=this.children.remove(P):c=this.children.insert(P,F),new _t(this.value,c)}}fold(v){return this.fold_($t(),v)}fold_(v,m){const P={};return this.children.inorderTraversal((w,F)=>{P[w]=F.fold_(ve(v,w),m)}),m(v,this.value,P)}findOnPath(v,m){return this.findOnPath_(v,$t(),m)}findOnPath_(v,m,P){const w=this.value?P(m,this.value):!1;if(w)return w;if(Dt(v))return null;{const F=Nt(v),c=this.children.get(F);return c?c.findOnPath_(te(v),ve(m,F),P):null}}foreachOnPath(v,m){return this.foreachOnPath_(v,$t(),m)}foreachOnPath_(v,m,P){if(Dt(v))return this;{this.value&&P(m,this.value);const w=Nt(v),F=this.children.get(w);return F?F.foreachOnPath_(te(v),ve(m,w),P):new _t(null)}}foreach(v){this.foreach_($t(),v)}foreach_(v,m){this.children.inorderTraversal((P,w)=>{w.foreach_(ve(v,P),m)}),this.value&&m(v,this.value)}foreachChild(v){this.children.inorderTraversal((m,P)=>{P.value&&v(m,P.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(v){this.writeTree_=v}static empty(){return new oi(new _t(null))}}function Zr(E,v,m){if(Dt(v))return new oi(new _t(m));{const P=E.writeTree_.findRootMostValueAndPath(v);if(P!=null){const w=P.path;let F=P.value;const c=je(w,v);return F=F.updateChild(c,m),new oi(E.writeTree_.set(w,F))}else{const w=new _t(m),F=E.writeTree_.setTree(v,w);return new oi(F)}}}function nc(E,v,m){let P=E;return ke(m,(w,F)=>{P=Zr(P,ve(v,w),F)}),P}function rc(E,v){if(Dt(v))return oi.empty();{const m=E.writeTree_.setTree(v,new _t(null));return new oi(m)}}function Ol(E,v){return Tn(E,v)!=null}function Tn(E,v){const m=E.writeTree_.findRootMostValueAndPath(v);return m!=null?E.writeTree_.get(m.path).getChild(je(m.path,v)):null}function ac(E){const v=[],m=E.writeTree_.value;return m!=null?m.isLeafNode()||m.forEachChild(Ee,(P,w)=>{v.push(new Bt(P,w))}):E.writeTree_.children.inorderTraversal((P,w)=>{w.value!=null&&v.push(new Bt(P,w.value))}),v}function ps(E,v){if(Dt(v))return E;{const m=Tn(E,v);return m!=null?new oi(new _t(m)):new oi(E.writeTree_.subtree(v))}}function Ll(E){return E.writeTree_.isEmpty()}function dr(E,v){return Fg($t(),E.writeTree_,v)}function Fg(E,v,m){if(v.value!=null)return m.updateChild(E,v.value);{let P=null;return v.children.inorderTraversal((w,F)=>{w===".priority"?(gt(F.value!==null,"Priority writes must always be leaf nodes"),P=F.value):m=Fg(ve(E,w),F,m)}),!m.getChild(E).isEmpty()&&P!==null&&(m=m.updateChild(ve(E,".priority"),P)),m}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(E,v){return Vg(v,E)}function X2(E,v,m,P,w){gt(P>E.lastWriteId,"Stacking an older write on top of newer ones"),w===void 0&&(w=!0),E.allWrites.push({path:v,snap:m,writeId:P,visible:w}),w&&(E.visibleWrites=Zr(E.visibleWrites,v,m)),E.lastWriteId=P}function K2(E,v){for(let m=0;m<E.allWrites.length;m++){const P=E.allWrites[m];if(P.writeId===v)return P}return null}function j2(E,v){const m=E.allWrites.findIndex(S=>S.writeId===v);gt(m>=0,"removeWrite called with nonexistent writeId.");const P=E.allWrites[m];E.allWrites.splice(m,1);let w=P.visible,F=!1,c=E.allWrites.length-1;for(;w&&c>=0;){const S=E.allWrites[c];S.visible&&(c>=m&&$2(S,P.path)?w=!1:ni(P.path,S.path)&&(F=!0)),c--}if(w){if(F)return J2(E),!0;if(P.snap)E.visibleWrites=rc(E.visibleWrites,P.path);else{const S=P.children;ke(S,t=>{E.visibleWrites=rc(E.visibleWrites,ve(P.path,t))})}return!0}else return!1}function $2(E,v){if(E.snap)return ni(E.path,v);for(const m in E.children)if(E.children.hasOwnProperty(m)&&ni(ve(E.path,m),v))return!0;return!1}function J2(E){E.visibleWrites=Bg(E.allWrites,k2,$t()),E.allWrites.length>0?E.lastWriteId=E.allWrites[E.allWrites.length-1].writeId:E.lastWriteId=-1}function k2(E){return E.visible}function Bg(E,v,m){let P=oi.empty();for(let w=0;w<E.length;++w){const F=E[w];if(v(F)){const c=F.path;let S;if(F.snap)ni(m,c)?(S=je(m,c),P=Zr(P,S,F.snap)):ni(c,m)&&(S=je(c,m),P=Zr(P,$t(),F.snap.getChild(S)));else if(F.children){if(ni(m,c))S=je(m,c),P=nc(P,S,F.children);else if(ni(c,m))if(S=je(c,m),Dt(S))P=nc(P,$t(),F.children);else{const t=ur(F.children,Nt(S));if(t){const o=t.getChild(te(S));P=Zr(P,$t(),o)}}}else throw pr("WriteRecord should have .snap or .children")}}return P}function bg(E,v,m,P,w){if(!P&&!w){const F=Tn(E.visibleWrites,v);if(F!=null)return F;{const c=ps(E.visibleWrites,v);if(Ll(c))return m;if(m==null&&!Ol(c,$t()))return null;{const S=m||Yt.EMPTY_NODE;return dr(c,S)}}}else{const F=ps(E.visibleWrites,v);if(!w&&Ll(F))return m;if(!w&&m==null&&!Ol(F,$t()))return null;{const c=function(o){return(o.visible||w)&&(!P||!~P.indexOf(o.writeId))&&(ni(o.path,v)||ni(v,o.path))},S=Bg(E.allWrites,c,v),t=m||Yt.EMPTY_NODE;return dr(S,t)}}}function Z2(E,v,m){let P=Yt.EMPTY_NODE;const w=Tn(E.visibleWrites,v);if(w)return w.isLeafNode()||w.forEachChild(Ee,(F,c)=>{P=P.updateImmediateChild(F,c)}),P;if(m){const F=ps(E.visibleWrites,v);return m.forEachChild(Ee,(c,S)=>{const t=dr(ps(F,new ee(c)),S);P=P.updateImmediateChild(c,t)}),ac(F).forEach(c=>{P=P.updateImmediateChild(c.name,c.node)}),P}else{const F=ps(E.visibleWrites,v);return ac(F).forEach(c=>{P=P.updateImmediateChild(c.name,c.node)}),P}}function Q2(E,v,m,P,w){gt(P||w,"Either existingEventSnap or existingServerSnap must exist");const F=ve(v,m);if(Ol(E.visibleWrites,F))return null;{const c=ps(E.visibleWrites,F);return Ll(c)?w.getChild(m):dr(c,w.getChild(m))}}function q2(E,v,m,P){const w=ve(v,m),F=Tn(E.visibleWrites,w);if(F!=null)return F;if(P.isCompleteForChild(m)){const c=ps(E.visibleWrites,w);return dr(c,P.getNode().getImmediateChild(m))}else return null}function _2(E,v){return Tn(E.visibleWrites,v)}function tA(E,v,m,P,w,F,c){let S;const t=ps(E.visibleWrites,v),o=Tn(t,$t());if(o!=null)S=o;else if(m!=null)S=dr(t,m);else return[];if(S=S.withIndex(c),!S.isEmpty()&&!S.isLeafNode()){const g=[],a=c.getCompare(),n=F?S.getReverseIteratorFrom(P,c):S.getIteratorFrom(P,c);let r=n.getNext();for(;r&&g.length<w;)a(r,P)!==0&&g.push(r),r=n.getNext();return g}else return[]}function eA(){return{visibleWrites:oi.empty(),allWrites:[],lastWriteId:-1}}function Dl(E,v,m,P){return bg(E.writeTree,E.treePath,v,m,P)}function Gg(E,v){return Z2(E.writeTree,E.treePath,v)}function oc(E,v,m,P){return Q2(E.writeTree,E.treePath,v,m,P)}function $o(E,v){return _2(E.writeTree,ve(E.treePath,v))}function iA(E,v,m,P,w,F){return tA(E.writeTree,E.treePath,v,m,P,w,F)}function Eu(E,v,m){return q2(E.writeTree,E.treePath,v,m)}function Ug(E,v){return Vg(ve(E.treePath,v),E.writeTree)}function Vg(E,v){return{treePath:E,writeTree:v}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.changeMap=new Map}trackChildChange(v){const m=v.type,P=v.childName;gt(m==="child_added"||m==="child_changed"||m==="child_removed","Only child changes supported for tracking"),gt(P!==".priority","Only non-priority child changes can be tracked.");const w=this.changeMap.get(P);if(w){const F=w.type;if(m==="child_added"&&F==="child_removed")this.changeMap.set(P,tc(P,v.snapshotNode,w.snapshotNode));else if(m==="child_removed"&&F==="child_added")this.changeMap.delete(P);else if(m==="child_removed"&&F==="child_changed")this.changeMap.set(P,D2(P,w.oldSnap));else if(m==="child_changed"&&F==="child_added")this.changeMap.set(P,L2(P,v.snapshotNode));else if(m==="child_changed"&&F==="child_changed")this.changeMap.set(P,tc(P,v.snapshotNode,w.oldSnap));else throw pr("Illegal combination of changes: "+v+" occurred after "+w)}else this.changeMap.set(P,v)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{getCompleteChild(v){return null}getChildAfterChild(v,m,P){return null}}const Wg=new nA;class Su{constructor(v,m,P=null){this.writes_=v,this.viewCache_=m,this.optCompleteServerCache_=P}getCompleteChild(v){const m=this.viewCache_.eventCache;if(m.isCompleteForChild(v))return m.getNode().getImmediateChild(v);{const P=this.optCompleteServerCache_!=null?new Tu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Eu(this.writes_,v,P)}}getChildAfterChild(v,m,P){const w=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dn(this.viewCache_),F=iA(this.writes_,w,m,1,P,v);return F.length===0?null:F[0]}}function rA(E,v){gt(v.eventCache.getNode().isIndexed(E.filter.getIndex()),"Event snap not indexed"),gt(v.serverCache.getNode().isIndexed(E.filter.getIndex()),"Server snap not indexed")}function aA(E,v,m,P,w){const F=new sA;let c,S;if(m.type===Si.OVERWRITE){const o=m;o.source.fromUser?c=Fl(E,v,o.path,o.snap,P,w,F):(gt(o.source.fromServer,"Unknown source."),S=o.source.tagged||v.serverCache.isFiltered()&&!Dt(o.path),c=Jo(E,v,o.path,o.snap,P,w,S,F))}else if(m.type===Si.MERGE){const o=m;o.source.fromUser?c=hA(E,v,o.path,o.children,P,w,F):(gt(o.source.fromServer,"Unknown source."),S=o.source.tagged||v.serverCache.isFiltered(),c=Nl(E,v,o.path,o.children,P,w,S,F))}else if(m.type===Si.ACK_USER_WRITE){const o=m;o.revert?c=fA(E,v,o.path,P,w,F):c=lA(E,v,o.path,o.affectedTree,P,w,F)}else if(m.type===Si.LISTEN_COMPLETE)c=uA(E,v,m.path,P,F);else throw pr("Unknown operation type: "+m.type);const t=F.getChanges();return oA(v,c,t),{viewCache:c,changes:t}}function oA(E,v,m){const P=v.eventCache;if(P.isFullyInitialized()){const w=P.getNode().isLeafNode()||P.getNode().isEmpty(),F=Il(E);(m.length>0||!E.eventCache.isFullyInitialized()||w&&!P.getNode().equals(F)||!P.getNode().getPriority().equals(F.getPriority()))&&m.push(O2(Il(v)))}}function zg(E,v,m,P,w,F){const c=v.eventCache;if($o(P,m)!=null)return v;{let S,t;if(Dt(m))if(gt(v.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),v.serverCache.isFiltered()){const o=dn(v),g=o instanceof Yt?o:Yt.EMPTY_NODE,a=Gg(P,g);S=E.filter.updateFullNode(v.eventCache.getNode(),a,F)}else{const o=Dl(P,dn(v));S=E.filter.updateFullNode(v.eventCache.getNode(),o,F)}else{const o=Nt(m);if(o===".priority"){gt(xs(m)===1,"Can't have a priority with additional path components");const g=c.getNode();t=v.serverCache.getNode();const a=oc(P,m,g,t);a!=null?S=E.filter.updatePriority(g,a):S=c.getNode()}else{const g=te(m);let a;if(c.isCompleteForChild(o)){t=v.serverCache.getNode();const n=oc(P,m,c.getNode(),t);n!=null?a=c.getNode().getImmediateChild(o).updateChild(g,n):a=c.getNode().getImmediateChild(o)}else a=Eu(P,o,v.serverCache);a!=null?S=E.filter.updateChild(c.getNode(),o,a,g,w,F):S=c.getNode()}}return kr(v,S,c.isFullyInitialized()||Dt(m),E.filter.filtersNodes())}}function Jo(E,v,m,P,w,F,c,S){const t=v.serverCache;let o;const g=c?E.filter:E.filter.getIndexedFilter();if(Dt(m))o=g.updateFullNode(t.getNode(),P,null);else if(g.filtersNodes()&&!t.isFiltered()){const r=t.getNode().updateChild(m,P);o=g.updateFullNode(t.getNode(),r,null)}else{const r=Nt(m);if(!t.isCompleteForPath(m)&&xs(m)>1)return v;const e=te(m),h=t.getNode().getImmediateChild(r).updateChild(e,P);r===".priority"?o=g.updatePriority(t.getNode(),h):o=g.updateChild(t.getNode(),r,h,e,Wg,null)}const a=Dg(v,o,t.isFullyInitialized()||Dt(m),g.filtersNodes()),n=new Su(w,a,F);return zg(E,a,m,w,n,S)}function Fl(E,v,m,P,w,F,c){const S=v.eventCache;let t,o;const g=new Su(w,v,F);if(Dt(m))o=E.filter.updateFullNode(v.eventCache.getNode(),P,c),t=kr(v,o,!0,E.filter.filtersNodes());else{const a=Nt(m);if(a===".priority")o=E.filter.updatePriority(v.eventCache.getNode(),P),t=kr(v,o,S.isFullyInitialized(),S.isFiltered());else{const n=te(m),r=S.getNode().getImmediateChild(a);let e;if(Dt(n))e=P;else{const s=g.getCompleteChild(a);s!=null?mg(n)===".priority"&&s.getChild(yg(n)).isEmpty()?e=s:e=s.updateChild(n,P):e=Yt.EMPTY_NODE}if(r.equals(e))t=v;else{const s=E.filter.updateChild(S.getNode(),a,e,n,g,c);t=kr(v,s,S.isFullyInitialized(),E.filter.filtersNodes())}}}return t}function hc(E,v){return E.eventCache.isCompleteForChild(v)}function hA(E,v,m,P,w,F,c){let S=v;return P.foreach((t,o)=>{const g=ve(m,t);hc(v,Nt(g))&&(S=Fl(E,S,g,o,w,F,c))}),P.foreach((t,o)=>{const g=ve(m,t);hc(v,Nt(g))||(S=Fl(E,S,g,o,w,F,c))}),S}function lc(E,v,m){return m.foreach((P,w)=>{v=v.updateChild(P,w)}),v}function Nl(E,v,m,P,w,F,c,S){if(v.serverCache.getNode().isEmpty()&&!v.serverCache.isFullyInitialized())return v;let t=v,o;Dt(m)?o=P:o=new _t(null).setTree(m,P);const g=v.serverCache.getNode();return o.children.inorderTraversal((a,n)=>{if(g.hasChild(a)){const r=v.serverCache.getNode().getImmediateChild(a),e=lc(E,r,n);t=Jo(E,t,new ee(a),e,w,F,c,S)}}),o.children.inorderTraversal((a,n)=>{const r=!v.serverCache.isCompleteForChild(a)&&n.value===null;if(!g.hasChild(a)&&!r){const e=v.serverCache.getNode().getImmediateChild(a),s=lc(E,e,n);t=Jo(E,t,new ee(a),s,w,F,c,S)}}),t}function lA(E,v,m,P,w,F,c){if($o(w,m)!=null)return v;const S=v.serverCache.isFiltered(),t=v.serverCache;if(P.value!=null){if(Dt(m)&&t.isFullyInitialized()||t.isCompleteForPath(m))return Jo(E,v,m,t.getNode().getChild(m),w,F,S,c);if(Dt(m)){let o=new _t(null);return t.getNode().forEachChild(bn,(g,a)=>{o=o.set(new ee(g),a)}),Nl(E,v,m,o,w,F,S,c)}else return v}else{let o=new _t(null);return P.foreach((g,a)=>{const n=ve(m,g);t.isCompleteForPath(n)&&(o=o.set(g,t.getNode().getChild(n)))}),Nl(E,v,m,o,w,F,S,c)}}function uA(E,v,m,P,w){const F=v.serverCache,c=Dg(v,F.getNode(),F.isFullyInitialized()||Dt(m),F.isFiltered());return zg(E,c,m,P,Wg,w)}function fA(E,v,m,P,w,F){let c;if($o(P,m)!=null)return v;{const S=new Su(P,v,w),t=v.eventCache.getNode();let o;if(Dt(m)||Nt(m)===".priority"){let g;if(v.serverCache.isFullyInitialized())g=Dl(P,dn(v));else{const a=v.serverCache.getNode();gt(a instanceof Yt,"serverChildren would be complete if leaf node"),g=Gg(P,a)}g=g,o=E.filter.updateFullNode(t,g,F)}else{const g=Nt(m);let a=Eu(P,g,v.serverCache);a==null&&v.serverCache.isCompleteForChild(g)&&(a=t.getImmediateChild(g)),a!=null?o=E.filter.updateChild(t,g,a,te(m),S,F):v.eventCache.getNode().hasChild(g)?o=E.filter.updateChild(t,g,Yt.EMPTY_NODE,te(m),S,F):o=t,o.isEmpty()&&v.serverCache.isFullyInitialized()&&(c=Dl(P,dn(v)),c.isLeafNode()&&(o=E.filter.updateFullNode(o,c,F)))}return c=v.serverCache.isFullyInitialized()||$o(P,$t())!=null,kr(v,o,c,E.filter.filtersNodes())}}function dA(E,v){const m=dn(E.viewCache_);return m&&(E.query._queryParams.loadsAllData()||!Dt(v)&&!m.getImmediateChild(Nt(v)).isEmpty())?m.getChild(v):null}function uc(E,v,m,P){v.type===Si.MERGE&&v.source.queryId!==null&&(gt(dn(E.viewCache_),"We should always have a full cache before handling merges"),gt(Il(E.viewCache_),"Missing event cache, even though we have a server cache"));const w=E.viewCache_,F=aA(E.processor_,w,v,m,P);return rA(E.processor_,F.viewCache),gt(F.viewCache.serverCache.isFullyInitialized()||!w.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),E.viewCache_=F.viewCache,cA(E,F.changes,F.viewCache.eventCache.getNode())}function cA(E,v,m,P){const w=E.eventRegistrations_;return W2(E.eventGenerator_,v,m,w)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc;function vA(E){gt(!fc,"__referenceConstructor has already been defined"),fc=E}function Cu(E,v,m,P){const w=v.source.queryId;if(w!==null){const F=E.views.get(w);return gt(F!=null,"SyncTree gave us an op for an invalid query."),uc(F,v,m,P)}else{let F=[];for(const c of E.views.values())F=F.concat(uc(c,v,m,P));return F}}function Au(E,v){let m=null;for(const P of E.views.values())m=m||dA(P,v);return m}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc;function pA(E){gt(!dc,"__referenceConstructor has already been defined"),dc=E}class cc{constructor(v){this.listenProvider_=v,this.syncPointTree_=new _t(null),this.pendingWriteTree_=eA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gA(E,v,m,P,w){return X2(E.pendingWriteTree_,v,m,P,w),w?dh(E,new fn(wg(),v,m)):[]}function wn(E,v,m=!1){const P=K2(E.pendingWriteTree_,v);if(j2(E.pendingWriteTree_,v)){let F=new _t(null);return P.snap!=null?F=F.set($t(),!0):ke(P.children,c=>{F=F.set(new ee(c),!0)}),dh(E,new jo(P.path,F,m))}else return[]}function fh(E,v,m){return dh(E,new fn(Ig(),v,m))}function mA(E,v,m){const P=_t.fromObject(m);return dh(E,new ha(Ig(),v,P))}function xA(E,v,m,P){const w=Kg(E,P);if(w!=null){const F=jg(w),c=F.path,S=F.queryId,t=je(c,v),o=new fn(Og(S),t,m);return $g(E,c,o)}else return[]}function yA(E,v,m,P){const w=Kg(E,P);if(w){const F=jg(w),c=F.path,S=F.queryId,t=je(c,v),o=_t.fromObject(m),g=new ha(Og(S),t,o);return $g(E,c,g)}else return[]}function Hg(E,v,m){const w=E.pendingWriteTree_,F=E.syncPointTree_.findOnPath(v,(c,S)=>{const t=je(c,v),o=Au(S,t);if(o)return o});return bg(w,v,F,m,!0)}function dh(E,v){return Yg(v,E.syncPointTree_,null,Ng(E.pendingWriteTree_,$t()))}function Yg(E,v,m,P){if(Dt(E.path))return Xg(E,v,m,P);{const w=v.get($t());m==null&&w!=null&&(m=Au(w,$t()));let F=[];const c=Nt(E.path),S=E.operationForChild(c),t=v.children.get(c);if(t&&S){const o=m?m.getImmediateChild(c):null,g=Ug(P,c);F=F.concat(Yg(S,t,o,g))}return w&&(F=F.concat(Cu(w,E,P,m))),F}}function Xg(E,v,m,P){const w=v.get($t());m==null&&w!=null&&(m=Au(w,$t()));let F=[];return v.children.inorderTraversal((c,S)=>{const t=m?m.getImmediateChild(c):null,o=Ug(P,c),g=E.operationForChild(c);g&&(F=F.concat(Xg(g,S,t,o)))}),w&&(F=F.concat(Cu(w,E,P,m))),F}function Kg(E,v){return E.tagToQueryMap.get(v)}function jg(E){const v=E.indexOf("$");return gt(v!==-1&&v<E.length-1,"Bad queryKey."),{queryId:E.substr(v+1),path:new ee(E.substr(0,v))}}function $g(E,v,m){const P=E.syncPointTree_.get(v);gt(P,"Missing sync point for query tag that we're tracking");const w=Ng(E.pendingWriteTree_,v);return Cu(P,m,w,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(v){this.node_=v}getImmediateChild(v){const m=this.node_.getImmediateChild(v);return new Pu(m)}node(){return this.node_}}class Ru{constructor(v,m){this.syncTree_=v,this.path_=m}getImmediateChild(v){const m=ve(this.path_,v);return new Ru(this.syncTree_,m)}node(){return Hg(this.syncTree_,this.path_)}}const TA=function(E){return E=E||{},E.timestamp=E.timestamp||new Date().getTime(),E},vc=function(E,v,m){if(!E||typeof E!="object")return E;if(gt(".sv"in E,"Unexpected leaf node or priority contents"),typeof E[".sv"]=="string")return EA(E[".sv"],v,m);if(typeof E[".sv"]=="object")return SA(E[".sv"],v);gt(!1,"Unexpected server value: "+JSON.stringify(E,null,2))},EA=function(E,v,m){switch(E){case"timestamp":return m.timestamp;default:gt(!1,"Unexpected server value: "+E)}},SA=function(E,v,m){E.hasOwnProperty("increment")||gt(!1,"Unexpected server value: "+JSON.stringify(E,null,2));const P=E.increment;typeof P!="number"&&gt(!1,"Unexpected increment value: "+P);const w=v.node();if(gt(w!==null&&typeof w<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!w.isLeafNode())return P;const c=w.getValue();return typeof c!="number"?P:c+P},CA=function(E,v,m,P){return Mu(v,new Ru(m,E),P)},AA=function(E,v,m){return Mu(E,new Pu(v),m)};function Mu(E,v,m){const P=E.getPriority().val(),w=vc(P,v.getImmediateChild(".priority"),m);let F;if(E.isLeafNode()){const c=E,S=vc(c.getValue(),v,m);return S!==c.getValue()||w!==c.getPriority().val()?new de(S,ye(w)):E}else{const c=E;return F=c,w!==c.getPriority().val()&&(F=F.updatePriority(new de(w))),c.forEachChild(Ee,(S,t)=>{const o=Mu(t,v.getImmediateChild(S),m);o!==t&&(F=F.updateImmediateChild(S,o))}),F}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(v="",m=null,P={children:{},childCount:0}){this.name=v,this.parent=m,this.node=P}}function Iu(E,v){let m=v instanceof ee?v:new ee(v),P=E,w=Nt(m);for(;w!==null;){const F=ur(P.node.children,w)||{children:{},childCount:0};P=new wu(w,P,F),m=te(m),w=Nt(m)}return P}function yr(E){return E.node.value}function Jg(E,v){E.node.value=v,Bl(E)}function kg(E){return E.node.childCount>0}function PA(E){return yr(E)===void 0&&!kg(E)}function ch(E,v){ke(E.node.children,(m,P)=>{v(new wu(m,E,P))})}function Zg(E,v,m,P){m&&v(E),ch(E,w=>{Zg(w,v,!0)})}function RA(E,v,m){let P=E.parent;for(;P!==null;){if(v(P))return!0;P=P.parent}return!1}function ka(E){return new ee(E.parent===null?E.name:ka(E.parent)+"/"+E.name)}function Bl(E){E.parent!==null&&MA(E.parent,E.name,E)}function MA(E,v,m){const P=PA(m),w=zi(E.node.children,v);P&&w?(delete E.node.children[v],E.node.childCount--,Bl(E)):!P&&!w&&(E.node.children[v]=m.node,E.node.childCount++,Bl(E))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=/[\[\].#$\/\u0000-\u001F\u007F]/,IA=/[\[\].#$\u0000-\u001F\u007F]/,Qh=10*1024*1024,Qg=function(E){return typeof E=="string"&&E.length!==0&&!wA.test(E)},OA=function(E){return typeof E=="string"&&E.length!==0&&!IA.test(E)},LA=function(E){return E&&(E=E.replace(/^\/*\.info(\/|$)/,"/")),OA(E)},qg=function(E,v,m){const P=m instanceof ee?new u2(m,E):m;if(v===void 0)throw new Error(E+"contains undefined "+Is(P));if(typeof v=="function")throw new Error(E+"contains a function "+Is(P)+" with contents = "+v.toString());if(Zp(v))throw new Error(E+"contains "+v.toString()+" "+Is(P));if(typeof v=="string"&&v.length>Qh/3&&sh(v)>Qh)throw new Error(E+"contains a string greater than "+Qh+" utf8 bytes "+Is(P)+" ('"+v.substring(0,50)+"...')");if(v&&typeof v=="object"){let w=!1,F=!1;if(ke(v,(c,S)=>{if(c===".value")w=!0;else if(c!==".priority"&&c!==".sv"&&(F=!0,!Qg(c)))throw new Error(E+" contains an invalid key ("+c+") "+Is(P)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);f2(P,c),qg(E,S,P),d2(P)}),w&&F)throw new Error(E+' contains ".value" child '+Is(P)+" in addition to actual children.")}},DA=function(E,v){const m=v.path.toString();if(typeof v.repoInfo.host!="string"||v.repoInfo.host.length===0||!Qg(v.repoInfo.namespace)&&v.repoInfo.host.split(":")[0]!=="localhost"||m.length!==0&&!LA(m))throw new Error(Py(E,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function NA(E,v){let m=null;for(let P=0;P<v.length;P++){const w=v[P],F=w.getPath();m!==null&&!Tg(F,m.path)&&(E.eventLists_.push(m),m=null),m===null&&(m={events:[],path:F}),m.events.push(w)}m&&E.eventLists_.push(m)}function En(E,v,m){NA(E,m),BA(E,P=>ni(P,v)||ni(v,P))}function BA(E,v){E.recursionDepth_++;let m=!0;for(let P=0;P<E.eventLists_.length;P++){const w=E.eventLists_[P];if(w){const F=w.path;v(F)?(bA(E.eventLists_[P]),E.eventLists_[P]=null):m=!1}}m&&(E.eventLists_=[]),E.recursionDepth_--}function bA(E){for(let v=0;v<E.events.length;v++){const m=E.events[v];if(m!==null){E.events[v]=null;const P=m.getEventRunner();$r&&xe("event: "+m.toString()),$a(P)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="repo_interrupt",UA=25;class VA{constructor(v,m,P,w){this.repoInfo_=v,this.forceRestClient_=m,this.authTokenProvider_=P,this.appCheckProvider_=w,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ko(),this.transactionQueueTree_=new wu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WA(E,v,m){if(E.stats_=pu(E.repoInfo_),E.forceRestClient_||BC())E.server_=new Xo(E.repoInfo_,(P,w,F,c)=>{pc(E,P,w,F,c)},E.authTokenProvider_,E.appCheckProvider_),setTimeout(()=>gc(E,!0),0);else{if(typeof m<"u"&&m!==null){if(typeof m!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ge(m)}catch(P){throw new Error("Invalid authOverride provided: "+P)}}E.persistentConnection_=new bi(E.repoInfo_,v,(P,w,F,c)=>{pc(E,P,w,F,c)},P=>{gc(E,P)},P=>{HA(E,P)},E.authTokenProvider_,E.appCheckProvider_,m),E.server_=E.persistentConnection_}E.authTokenProvider_.addTokenChangeListener(P=>{E.server_.refreshAuthToken(P)}),E.appCheckProvider_.addTokenChangeListener(P=>{E.server_.refreshAppCheckToken(P.token)}),E.statsReporter_=WC(E.repoInfo_,()=>new V2(E.stats_,E.server_)),E.infoData_=new N2,E.infoSyncTree_=new cc({startListening:(P,w,F,c)=>{let S=[];const t=E.infoData_.getNode(P._path);return t.isEmpty()||(S=fh(E.infoSyncTree_,P._path,t),setTimeout(()=>{c("ok")},0)),S},stopListening:()=>{}}),Ou(E,"connected",!1),E.serverSyncTree_=new cc({startListening:(P,w,F,c)=>(E.server_.listen(P,F,w,(S,t)=>{const o=c(S,t);En(E.eventQueue_,P._path,o)}),[]),stopListening:(P,w)=>{E.server_.unlisten(P,w)}})}function zA(E){const m=E.infoData_.getNode(new ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+m}function _g(E){return TA({timestamp:zA(E)})}function pc(E,v,m,P,w){E.dataUpdateCount++;const F=new ee(v);m=E.interceptServerDataCallback_?E.interceptServerDataCallback_(v,m):m;let c=[];if(w)if(P){const t=Lo(m,o=>ye(o));c=yA(E.serverSyncTree_,F,t,w)}else{const t=ye(m);c=xA(E.serverSyncTree_,F,t,w)}else if(P){const t=Lo(m,o=>ye(o));c=mA(E.serverSyncTree_,F,t)}else{const t=ye(m);c=fh(E.serverSyncTree_,F,t)}let S=F;c.length>0&&(S=Du(E,F)),En(E.eventQueue_,S,c)}function gc(E,v){Ou(E,"connected",v),v===!1&&XA(E)}function HA(E,v){ke(v,(m,P)=>{Ou(E,m,P)})}function Ou(E,v,m){const P=new ee("/.info/"+v),w=ye(m);E.infoData_.updateSnapshot(P,w);const F=fh(E.infoSyncTree_,P,w);En(E.eventQueue_,P,F)}function YA(E){return E.nextWriteId_++}function XA(E){tm(E,"onDisconnectEvents");const v=_g(E),m=Ko();wl(E.onDisconnect_,$t(),(w,F)=>{const c=CA(w,F,E.serverSyncTree_,v);Mg(m,w,c)});let P=[];wl(m,$t(),(w,F)=>{P=P.concat(fh(E.serverSyncTree_,w,F));const c=JA(E,w);Du(E,c)}),E.onDisconnect_=Ko(),En(E.eventQueue_,$t(),P)}function KA(E){E.persistentConnection_&&E.persistentConnection_.interrupt(GA)}function tm(E,...v){let m="";E.persistentConnection_&&(m=E.persistentConnection_.id+":"),xe(m,...v)}function em(E,v,m){return Hg(E.serverSyncTree_,v,m)||Yt.EMPTY_NODE}function Lu(E,v=E.transactionQueueTree_){if(v||vh(E,v),yr(v)){const m=sm(E,v);gt(m.length>0,"Sending zero length transaction queue"),m.every(w=>w.status===0)&&jA(E,ka(v),m)}else kg(v)&&ch(v,m=>{Lu(E,m)})}function jA(E,v,m){const P=m.map(o=>o.currentWriteId),w=em(E,v,P);let F=w;const c=w.hash();for(let o=0;o<m.length;o++){const g=m[o];gt(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const a=je(v,g.path);F=F.updateChild(a,g.currentOutputSnapshotRaw)}const S=F.val(!0),t=v;E.server_.put(t.toString(),S,o=>{tm(E,"transaction put response",{path:t.toString(),status:o});let g=[];if(o==="ok"){const a=[];for(let n=0;n<m.length;n++)m[n].status=2,g=g.concat(wn(E.serverSyncTree_,m[n].currentWriteId)),m[n].onComplete&&a.push(()=>m[n].onComplete(null,!0,m[n].currentOutputSnapshotResolved)),m[n].unwatcher();vh(E,Iu(E.transactionQueueTree_,v)),Lu(E,E.transactionQueueTree_),En(E.eventQueue_,v,g);for(let n=0;n<a.length;n++)$a(a[n])}else{if(o==="datastale")for(let a=0;a<m.length;a++)m[a].status===3?m[a].status=4:m[a].status=0;else{Ve("transaction at "+t.toString()+" failed: "+o);for(let a=0;a<m.length;a++)m[a].status=4,m[a].abortReason=o}Du(E,v)}},c)}function Du(E,v){const m=im(E,v),P=ka(m),w=sm(E,m);return $A(E,w,P),P}function $A(E,v,m){if(v.length===0)return;const P=[];let w=[];const c=v.filter(S=>S.status===0).map(S=>S.currentWriteId);for(let S=0;S<v.length;S++){const t=v[S],o=je(m,t.path);let g=!1,a;if(gt(o!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),t.status===4)g=!0,a=t.abortReason,w=w.concat(wn(E.serverSyncTree_,t.currentWriteId,!0));else if(t.status===0)if(t.retryCount>=UA)g=!0,a="maxretry",w=w.concat(wn(E.serverSyncTree_,t.currentWriteId,!0));else{const n=em(E,t.path,c);t.currentInputSnapshot=n;const r=v[S].update(n.val());if(r!==void 0){qg("transaction failed: Data returned ",r,t.path);let e=ye(r);typeof r=="object"&&r!=null&&zi(r,".priority")||(e=e.updatePriority(n.getPriority()));const h=t.currentWriteId,i=_g(E),l=AA(e,n,i);t.currentOutputSnapshotRaw=e,t.currentOutputSnapshotResolved=l,t.currentWriteId=YA(E),c.splice(c.indexOf(h),1),w=w.concat(gA(E.serverSyncTree_,t.path,l,t.currentWriteId,t.applyLocally)),w=w.concat(wn(E.serverSyncTree_,h,!0))}else g=!0,a="nodata",w=w.concat(wn(E.serverSyncTree_,t.currentWriteId,!0))}En(E.eventQueue_,m,w),w=[],g&&(v[S].status=2,function(n){setTimeout(n,Math.floor(0))}(v[S].unwatcher),v[S].onComplete&&(a==="nodata"?P.push(()=>v[S].onComplete(null,!1,v[S].currentInputSnapshot)):P.push(()=>v[S].onComplete(new Error(a),!1,null))))}vh(E,E.transactionQueueTree_);for(let S=0;S<P.length;S++)$a(P[S]);Lu(E,E.transactionQueueTree_)}function im(E,v){let m,P=E.transactionQueueTree_;for(m=Nt(v);m!==null&&yr(P)===void 0;)P=Iu(P,m),v=te(v),m=Nt(v);return P}function sm(E,v){const m=[];return nm(E,v,m),m.sort((P,w)=>P.order-w.order),m}function nm(E,v,m){const P=yr(v);if(P)for(let w=0;w<P.length;w++)m.push(P[w]);ch(v,w=>{nm(E,w,m)})}function vh(E,v){const m=yr(v);if(m){let P=0;for(let w=0;w<m.length;w++)m[w].status!==2&&(m[P]=m[w],P++);m.length=P,Jg(v,m.length>0?m:void 0)}ch(v,P=>{vh(E,P)})}function JA(E,v){const m=ka(im(E,v)),P=Iu(E.transactionQueueTree_,v);return RA(P,w=>{qh(E,w)}),qh(E,P),Zg(P,w=>{qh(E,w)}),m}function qh(E,v){const m=yr(v);if(m){const P=[];let w=[],F=-1;for(let c=0;c<m.length;c++)m[c].status===3||(m[c].status===1?(gt(F===c-1,"All SENT items should be at beginning of queue."),F=c,m[c].status=3,m[c].abortReason="set"):(gt(m[c].status===0,"Unexpected transaction status in abort"),m[c].unwatcher(),w=w.concat(wn(E.serverSyncTree_,m[c].currentWriteId,!0)),m[c].onComplete&&P.push(m[c].onComplete.bind(null,new Error("set"),!1,null))));F===-1?Jg(v,void 0):m.length=F+1,En(E.eventQueue_,ka(v),w);for(let c=0;c<P.length;c++)$a(P[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(E){let v="";const m=E.split("/");for(let P=0;P<m.length;P++)if(m[P].length>0){let w=m[P];try{w=decodeURIComponent(w.replace(/\+/g," "))}catch{}v+="/"+w}return v}function ZA(E){const v={};E.charAt(0)==="?"&&(E=E.substring(1));for(const m of E.split("&")){if(m.length===0)continue;const P=m.split("=");P.length===2?v[decodeURIComponent(P[0])]=decodeURIComponent(P[1]):Ve(`Invalid query segment '${m}' in query '${E}'`)}return v}const mc=function(E,v){const m=QA(E),P=m.namespace;m.domain==="firebase.com"&&Wi(m.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!P||P==="undefined")&&m.domain!=="localhost"&&Wi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),m.secure||MC();const w=m.scheme==="ws"||m.scheme==="wss";return{repoInfo:new hg(m.host,m.secure,P,w,v,"",P!==m.subdomain),path:new ee(m.pathString)}},QA=function(E){let v="",m="",P="",w="",F="",c=!0,S="https",t=443;if(typeof E=="string"){let o=E.indexOf("//");o>=0&&(S=E.substring(0,o-1),E=E.substring(o+2));let g=E.indexOf("/");g===-1&&(g=E.length);let a=E.indexOf("?");a===-1&&(a=E.length),v=E.substring(0,Math.min(g,a)),g<a&&(w=kA(E.substring(g,a)));const n=ZA(E.substring(Math.min(E.length,a)));o=v.indexOf(":"),o>=0?(c=S==="https"||S==="wss",t=parseInt(v.substring(o+1),10)):o=v.length;const r=v.slice(0,o);if(r.toLowerCase()==="localhost")m="localhost";else if(r.split(".").length<=2)m=r;else{const e=v.indexOf(".");P=v.substring(0,e).toLowerCase(),m=v.substring(e+1),F=P}"ns"in n&&(F=n.ns)}return{host:v,port:t,domain:m,subdomain:P,secure:c,scheme:S,pathString:w,namespace:F}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(v,m,P,w){this._repo=v,this._path=m,this._queryParams=P,this._orderByCalled=w}get key(){return Dt(this._path)?null:mg(this._path)}get ref(){return new Tr(this._repo,this._path)}get _queryIdentifier(){const v=ic(this._queryParams),m=cu(v);return m==="{}"?"default":m}get _queryObject(){return ic(this._queryParams)}isEqual(v){if(v=We(v),!(v instanceof Fu))return!1;const m=this._repo===v._repo,P=Tg(this._path,v._path),w=this._queryIdentifier===v._queryIdentifier;return m&&P&&w}toJSON(){return this.toString()}toString(){return this._repo.toString()+l2(this._path)}}class Tr extends Fu{constructor(v,m){super(v,m,new yu,!1)}get parent(){const v=yg(this._path);return v===null?null:new Tr(this._repo,v)}get root(){let v=this;for(;v.parent!==null;)v=v.parent;return v}}vA(Tr);pA(Tr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FIREBASE_DATABASE_EMULATOR_HOST",bl={};let _A=!1;function tP(E,v,m,P){const w=v.lastIndexOf(":"),F=v.substring(0,w),c=mn(F);E.repoInfo_=new hg(v,c,E.repoInfo_.namespace,E.repoInfo_.webSocketOnly,E.repoInfo_.nodeAdmin,E.repoInfo_.persistenceKey,E.repoInfo_.includeNamespaceInQueryParams,!0,m),P&&(E.authTokenProvider_=P)}function eP(E,v,m,P,w){let F=P||E.options.databaseURL;F===void 0&&(E.options.projectId||Wi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xe("Using default host for project ",E.options.projectId),F=`${E.options.projectId}-default-rtdb.firebaseio.com`);let c=mc(F,w),S=c.repoInfo,t;typeof process<"u"&&Gd&&(t=Gd[qA]),t?(F=`http://${t}?ns=${S.namespace}`,c=mc(F,w),S=c.repoInfo):c.repoInfo.secure;const o=new GC(E.name,E.options,v);DA("Invalid Firebase Database URL",c),Dt(c.path)||Wi("Database URL must point to the root of a Firebase Database (not including a child path).");const g=sP(S,E,o,new bC(E,m));return new nP(g,E)}function iP(E,v){const m=bl[v];(!m||m[E.key]!==E)&&Wi(`Database ${v}(${E.repoInfo_}) has already been deleted.`),KA(E),delete m[E.key]}function sP(E,v,m,P){let w=bl[v.name];w||(w={},bl[v.name]=w);let F=w[E.toURLString()];return F&&Wi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),F=new VA(E,_A,m,P),w[E.toURLString()]=F,F}class nP{constructor(v,m){this._repoInternal=v,this.app=m,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tr(this._repo,$t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(v){this._rootInternal===null&&Wi("Cannot call "+v+" on a deleted database.")}}function rP(E=nh(),v){const m=Ts(E,"database").getImmediate({identifier:v});if(!m._instanceStarted){const P=Dv("database");P&&aP(m,...P)}return m}function aP(E,v,m,P={}){E=We(E),E._checkNotDeleted("useEmulator");const w=`${v}:${m}`,F=E._repoInternal;if(E._instanceStarted){if(w===E._repoInternal.repoInfo_.host&&Gi(P,F.repoInfo_.emulatorOptions))return;Wi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(F.repoInfo_.nodeAdmin)P.mockUserToken&&Wi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Mo(Mo.OWNER);else if(P.mockUserToken){const S=typeof P.mockUserToken=="string"?P.mockUserToken:Bv(P.mockUserToken,E.app.options.projectId);c=new Mo(S)}mn(v)&&($l(v),Jl("Database",!0)),tP(F,w,P,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(E){EC(yn),hi(new $e("database",(v,{instanceIdentifier:m})=>{const P=v.getProvider("app").getImmediate(),w=v.getProvider("auth-internal"),F=v.getProvider("app-check-internal");return eP(P,w,F,m)},"PUBLIC").setMultipleInstances(!0)),De(Ud,Vd,E),De(Ud,Vd,"esm2020")}bi.prototype.simpleListen=function(E,v){this.sendRequest("q",{p:E},v)};bi.prototype.echo=function(E,v){this.sendRequest("echo",{d:E},v)};oP();var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nu;(function(){var E;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function v(x,y){function T(){}T.prototype=y.prototype,x.F=y.prototype,x.prototype=new T,x.prototype.constructor=x,x.D=function(C,A,R){for(var M=Array(arguments.length-2),L=2;L<arguments.length;L++)M[L-2]=arguments[L];return y.prototype[A].apply(C,M)}}function m(){this.blockSize=-1}function P(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}v(P,m),P.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function w(x,y,T){T||(T=0);const C=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)C[A]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(A=0;A<16;++A)C[A]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=x.g[0],T=x.g[1],A=x.g[2];let R=x.g[3],M;M=y+(R^T&(A^R))+C[0]+3614090360&4294967295,y=T+(M<<7&4294967295|M>>>25),M=R+(A^y&(T^A))+C[1]+3905402710&4294967295,R=y+(M<<12&4294967295|M>>>20),M=A+(T^R&(y^T))+C[2]+606105819&4294967295,A=R+(M<<17&4294967295|M>>>15),M=T+(y^A&(R^y))+C[3]+3250441966&4294967295,T=A+(M<<22&4294967295|M>>>10),M=y+(R^T&(A^R))+C[4]+4118548399&4294967295,y=T+(M<<7&4294967295|M>>>25),M=R+(A^y&(T^A))+C[5]+1200080426&4294967295,R=y+(M<<12&4294967295|M>>>20),M=A+(T^R&(y^T))+C[6]+2821735955&4294967295,A=R+(M<<17&4294967295|M>>>15),M=T+(y^A&(R^y))+C[7]+4249261313&4294967295,T=A+(M<<22&4294967295|M>>>10),M=y+(R^T&(A^R))+C[8]+1770035416&4294967295,y=T+(M<<7&4294967295|M>>>25),M=R+(A^y&(T^A))+C[9]+2336552879&4294967295,R=y+(M<<12&4294967295|M>>>20),M=A+(T^R&(y^T))+C[10]+4294925233&4294967295,A=R+(M<<17&4294967295|M>>>15),M=T+(y^A&(R^y))+C[11]+2304563134&4294967295,T=A+(M<<22&4294967295|M>>>10),M=y+(R^T&(A^R))+C[12]+1804603682&4294967295,y=T+(M<<7&4294967295|M>>>25),M=R+(A^y&(T^A))+C[13]+4254626195&4294967295,R=y+(M<<12&4294967295|M>>>20),M=A+(T^R&(y^T))+C[14]+2792965006&4294967295,A=R+(M<<17&4294967295|M>>>15),M=T+(y^A&(R^y))+C[15]+1236535329&4294967295,T=A+(M<<22&4294967295|M>>>10),M=y+(A^R&(T^A))+C[1]+4129170786&4294967295,y=T+(M<<5&4294967295|M>>>27),M=R+(T^A&(y^T))+C[6]+3225465664&4294967295,R=y+(M<<9&4294967295|M>>>23),M=A+(y^T&(R^y))+C[11]+643717713&4294967295,A=R+(M<<14&4294967295|M>>>18),M=T+(R^y&(A^R))+C[0]+3921069994&4294967295,T=A+(M<<20&4294967295|M>>>12),M=y+(A^R&(T^A))+C[5]+3593408605&4294967295,y=T+(M<<5&4294967295|M>>>27),M=R+(T^A&(y^T))+C[10]+38016083&4294967295,R=y+(M<<9&4294967295|M>>>23),M=A+(y^T&(R^y))+C[15]+3634488961&4294967295,A=R+(M<<14&4294967295|M>>>18),M=T+(R^y&(A^R))+C[4]+3889429448&4294967295,T=A+(M<<20&4294967295|M>>>12),M=y+(A^R&(T^A))+C[9]+568446438&4294967295,y=T+(M<<5&4294967295|M>>>27),M=R+(T^A&(y^T))+C[14]+3275163606&4294967295,R=y+(M<<9&4294967295|M>>>23),M=A+(y^T&(R^y))+C[3]+4107603335&4294967295,A=R+(M<<14&4294967295|M>>>18),M=T+(R^y&(A^R))+C[8]+1163531501&4294967295,T=A+(M<<20&4294967295|M>>>12),M=y+(A^R&(T^A))+C[13]+2850285829&4294967295,y=T+(M<<5&4294967295|M>>>27),M=R+(T^A&(y^T))+C[2]+4243563512&4294967295,R=y+(M<<9&4294967295|M>>>23),M=A+(y^T&(R^y))+C[7]+1735328473&4294967295,A=R+(M<<14&4294967295|M>>>18),M=T+(R^y&(A^R))+C[12]+2368359562&4294967295,T=A+(M<<20&4294967295|M>>>12),M=y+(T^A^R)+C[5]+4294588738&4294967295,y=T+(M<<4&4294967295|M>>>28),M=R+(y^T^A)+C[8]+2272392833&4294967295,R=y+(M<<11&4294967295|M>>>21),M=A+(R^y^T)+C[11]+1839030562&4294967295,A=R+(M<<16&4294967295|M>>>16),M=T+(A^R^y)+C[14]+4259657740&4294967295,T=A+(M<<23&4294967295|M>>>9),M=y+(T^A^R)+C[1]+2763975236&4294967295,y=T+(M<<4&4294967295|M>>>28),M=R+(y^T^A)+C[4]+1272893353&4294967295,R=y+(M<<11&4294967295|M>>>21),M=A+(R^y^T)+C[7]+4139469664&4294967295,A=R+(M<<16&4294967295|M>>>16),M=T+(A^R^y)+C[10]+3200236656&4294967295,T=A+(M<<23&4294967295|M>>>9),M=y+(T^A^R)+C[13]+681279174&4294967295,y=T+(M<<4&4294967295|M>>>28),M=R+(y^T^A)+C[0]+3936430074&4294967295,R=y+(M<<11&4294967295|M>>>21),M=A+(R^y^T)+C[3]+3572445317&4294967295,A=R+(M<<16&4294967295|M>>>16),M=T+(A^R^y)+C[6]+76029189&4294967295,T=A+(M<<23&4294967295|M>>>9),M=y+(T^A^R)+C[9]+3654602809&4294967295,y=T+(M<<4&4294967295|M>>>28),M=R+(y^T^A)+C[12]+3873151461&4294967295,R=y+(M<<11&4294967295|M>>>21),M=A+(R^y^T)+C[15]+530742520&4294967295,A=R+(M<<16&4294967295|M>>>16),M=T+(A^R^y)+C[2]+3299628645&4294967295,T=A+(M<<23&4294967295|M>>>9),M=y+(A^(T|~R))+C[0]+4096336452&4294967295,y=T+(M<<6&4294967295|M>>>26),M=R+(T^(y|~A))+C[7]+1126891415&4294967295,R=y+(M<<10&4294967295|M>>>22),M=A+(y^(R|~T))+C[14]+2878612391&4294967295,A=R+(M<<15&4294967295|M>>>17),M=T+(R^(A|~y))+C[5]+4237533241&4294967295,T=A+(M<<21&4294967295|M>>>11),M=y+(A^(T|~R))+C[12]+1700485571&4294967295,y=T+(M<<6&4294967295|M>>>26),M=R+(T^(y|~A))+C[3]+2399980690&4294967295,R=y+(M<<10&4294967295|M>>>22),M=A+(y^(R|~T))+C[10]+4293915773&4294967295,A=R+(M<<15&4294967295|M>>>17),M=T+(R^(A|~y))+C[1]+2240044497&4294967295,T=A+(M<<21&4294967295|M>>>11),M=y+(A^(T|~R))+C[8]+1873313359&4294967295,y=T+(M<<6&4294967295|M>>>26),M=R+(T^(y|~A))+C[15]+4264355552&4294967295,R=y+(M<<10&4294967295|M>>>22),M=A+(y^(R|~T))+C[6]+2734768916&4294967295,A=R+(M<<15&4294967295|M>>>17),M=T+(R^(A|~y))+C[13]+1309151649&4294967295,T=A+(M<<21&4294967295|M>>>11),M=y+(A^(T|~R))+C[4]+4149444226&4294967295,y=T+(M<<6&4294967295|M>>>26),M=R+(T^(y|~A))+C[11]+3174756917&4294967295,R=y+(M<<10&4294967295|M>>>22),M=A+(y^(R|~T))+C[2]+718787259&4294967295,A=R+(M<<15&4294967295|M>>>17),M=T+(R^(A|~y))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(A+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}P.prototype.v=function(x,y){y===void 0&&(y=x.length);const T=y-this.blockSize,C=this.C;let A=this.h,R=0;for(;R<y;){if(A==0)for(;R<=T;)w(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<y;)if(C[A++]=x.charCodeAt(R++),A==this.blockSize){w(this,C),A=0;break}}else for(;R<y;)if(C[A++]=x[R++],A==this.blockSize){w(this,C),A=0;break}}this.h=A,this.o+=y},P.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var T=x.length-8;T<x.length;++T)x[T]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,T=0;T<4;++T)for(let C=0;C<32;C+=8)x[y++]=this.g[T]>>>C&255;return x};function F(x,y){var T=S;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=y(x)}function c(x,y){this.h=y;const T=[];let C=!0;for(let A=x.length-1;A>=0;A--){const R=x[A]|0;C&&R==y||(T[A]=R,C=!1)}this.g=T}var S={};function t(x){return-128<=x&&x<128?F(x,function(y){return new c([y|0],y<0?-1:0)}):new c([x|0],x<0?-1:0)}function o(x){if(isNaN(x)||!isFinite(x))return a;if(x<0)return h(o(-x));const y=[];let T=1;for(let C=0;x>=T;C++)y[C]=x/T|0,T*=4294967296;return new c(y,0)}function g(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return h(g(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=o(Math.pow(y,8));let C=a;for(let R=0;R<x.length;R+=8){var A=Math.min(8,x.length-R);const M=parseInt(x.substring(R,R+A),y);A<8?(A=o(Math.pow(y,A)),C=C.j(A).add(o(M))):(C=C.j(T),C=C.add(o(M)))}return C}var a=t(0),n=t(1),r=t(16777216);E=c.prototype,E.m=function(){if(s(this))return-h(this).m();let x=0,y=1;for(let T=0;T<this.g.length;T++){const C=this.i(T);x+=(C>=0?C:4294967296+C)*y,y*=4294967296}return x},E.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(e(this))return"0";if(s(this))return"-"+h(this).toString(x);const y=o(Math.pow(x,6));var T=this;let C="";for(;;){const A=f(T,y).g;T=i(T,A.j(y));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(x);if(T=A,e(T))return R+C;for(;R.length<6;)R="0"+R;C=R+C}},E.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function e(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function s(x){return x.h==-1}E.l=function(x){return x=i(this,x),s(x)?-1:e(x)?0:1};function h(x){const y=x.g.length,T=[];for(let C=0;C<y;C++)T[C]=~x.g[C];return new c(T,~x.h).add(n)}E.abs=function(){return s(this)?h(this):this},E.add=function(x){const y=Math.max(this.g.length,x.g.length),T=[];let C=0;for(let A=0;A<=y;A++){let R=C+(this.i(A)&65535)+(x.i(A)&65535),M=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);C=M>>>16,R&=65535,M&=65535,T[A]=M<<16|R}return new c(T,T[T.length-1]&-2147483648?-1:0)};function i(x,y){return x.add(h(y))}E.j=function(x){if(e(this)||e(x))return a;if(s(this))return s(x)?h(this).j(h(x)):h(h(this).j(x));if(s(x))return h(this.j(h(x)));if(this.l(r)<0&&x.l(r)<0)return o(this.m()*x.m());const y=this.g.length+x.g.length,T=[];for(var C=0;C<2*y;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<x.g.length;A++){const R=this.i(C)>>>16,M=this.i(C)&65535,L=x.i(A)>>>16,I=x.i(A)&65535;T[2*C+2*A]+=M*I,l(T,2*C+2*A),T[2*C+2*A+1]+=R*I,l(T,2*C+2*A+1),T[2*C+2*A+1]+=M*L,l(T,2*C+2*A+1),T[2*C+2*A+2]+=R*L,l(T,2*C+2*A+2)}for(x=0;x<y;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=y;x<2*y;x++)T[x]=0;return new c(T,0)};function l(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function u(x,y){this.g=x,this.h=y}function f(x,y){if(e(y))throw Error("division by zero");if(e(x))return new u(a,a);if(s(x))return y=f(h(x),y),new u(h(y.g),h(y.h));if(s(y))return y=f(x,h(y)),new u(h(y.g),y.h);if(x.g.length>30){if(s(x)||s(y))throw Error("slowDivide_ only works with positive integers.");for(var T=n,C=y;C.l(x)<=0;)T=d(T),C=d(C);var A=p(T,1),R=p(C,1);for(C=p(C,2),T=p(T,2);!e(C);){var M=R.add(C);M.l(x)<=0&&(A=A.add(T),R=M),C=p(C,1),T=p(T,1)}return y=i(x,A.j(y)),new u(A,y)}for(A=a;x.l(y)>=0;){for(T=Math.max(1,Math.floor(x.m()/y.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),R=o(T),M=R.j(y);s(M)||M.l(x)>0;)T-=C,R=o(T),M=R.j(y);e(R)&&(R=n),A=A.add(R),x=i(x,M)}return new u(A,x)}E.B=function(x){return f(this,x).h},E.and=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let C=0;C<y;C++)T[C]=this.i(C)&x.i(C);return new c(T,this.h&x.h)},E.or=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let C=0;C<y;C++)T[C]=this.i(C)|x.i(C);return new c(T,this.h|x.h)},E.xor=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let C=0;C<y;C++)T[C]=this.i(C)^x.i(C);return new c(T,this.h^x.h)};function d(x){const y=x.g.length+1,T=[];for(let C=0;C<y;C++)T[C]=x.i(C)<<1|x.i(C-1)>>>31;return new c(T,x.h)}function p(x,y){const T=y>>5;y%=32;const C=x.g.length-T,A=[];for(let R=0;R<C;R++)A[R]=y>0?x.i(R+T)>>>y|x.i(R+T+1)<<32-y:x.i(R+T);return new c(A,x.h)}P.prototype.digest=P.prototype.A,P.prototype.reset=P.prototype.u,P.prototype.update=P.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=o,c.fromString=g,Nu=c}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var E,v=Object.defineProperty;function m(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof po=="object"&&po];for(var K=0;K<N.length;++K){var J=N[K];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var P=m(this);function w(N,K){if(K)t:{var J=P;N=N.split(".");for(var q=0;q<N.length-1;q++){var st=N[q];if(!(st in J))break t;J=J[st]}N=N[N.length-1],q=J[N],K=K(q),K!=q&&K!=null&&v(J,N,{configurable:!0,writable:!0,value:K})}}w("Symbol.dispose",function(N){return N||Symbol("Symbol.dispose")}),w("Array.prototype.values",function(N){return N||function(){return this[Symbol.iterator]()}}),w("Object.entries",function(N){return N||function(K){var J=[],q;for(q in K)Object.prototype.hasOwnProperty.call(K,q)&&J.push([q,K[q]]);return J}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var F=F||{},c=this||self;function S(N){var K=typeof N;return K=="object"&&N!=null||K=="function"}function t(N,K,J){return N.call.apply(N.bind,arguments)}function o(N,K,J){return o=t,o.apply(null,arguments)}function g(N,K){var J=Array.prototype.slice.call(arguments,1);return function(){var q=J.slice();return q.push.apply(q,arguments),N.apply(this,q)}}function a(N,K){function J(){}J.prototype=K.prototype,N.Z=K.prototype,N.prototype=new J,N.prototype.constructor=N,N.Ob=function(q,st,at){for(var vt=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)vt[Ot-2]=arguments[Ot];return K.prototype[st].apply(q,vt)}}var n=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?N=>N&&AsyncContext.Snapshot.wrap(N):N=>N;function r(N){const K=N.length;if(K>0){const J=Array(K);for(let q=0;q<K;q++)J[q]=N[q];return J}return[]}function e(N,K){for(let q=1;q<arguments.length;q++){const st=arguments[q];var J=typeof st;if(J=J!="object"?J:st?Array.isArray(st)?"array":J:"null",J=="array"||J=="object"&&typeof st.length=="number"){J=N.length||0;const at=st.length||0;N.length=J+at;for(let vt=0;vt<at;vt++)N[J+vt]=st[vt]}else N.push(st)}}class s{constructor(K,J){this.i=K,this.j=J,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function h(N){c.setTimeout(()=>{throw N},0)}function i(){var N=x;let K=null;return N.g&&(K=N.g,N.g=N.g.next,N.g||(N.h=null),K.next=null),K}class l{constructor(){this.h=this.g=null}add(K,J){const q=u.get();q.set(K,J),this.h?this.h.next=q:this.g=q,this.h=q}}var u=new s(()=>new f,N=>N.reset());class f{constructor(){this.next=this.g=this.h=null}set(K,J){this.h=K,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let d,p=!1,x=new l,y=()=>{const N=Promise.resolve(void 0);d=()=>{N.then(T)}};function T(){for(var N;N=i();){try{N.h.call(N.g)}catch(J){h(J)}var K=u;K.j(N),K.h<100&&(K.h++,N.next=K.g,K.g=N)}p=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(N,K){this.type=N,this.g=this.target=K,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var N=!1,K=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const J=()=>{};c.addEventListener("test",J,K),c.removeEventListener("test",J,K)}catch{}return N}();function M(N){return/^[\s\xa0]*$/.test(N)}function L(N,K){A.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N&&this.init(N,K)}a(L,A),L.prototype.init=function(N,K){const J=this.type=N.type,q=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;this.target=N.target||N.srcElement,this.g=K,K=N.relatedTarget,K||(J=="mouseover"?K=N.fromElement:J=="mouseout"&&(K=N.toElement)),this.relatedTarget=K,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=N.pointerType,this.state=N.state,this.i=N,N.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var I="closure_listenable_"+(Math.random()*1e6|0),O=0;function D(N,K,J,q,st){this.listener=N,this.proxy=null,this.src=K,this.type=J,this.capture=!!q,this.ha=st,this.key=++O,this.da=this.fa=!1}function B(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function V(N,K,J){for(const q in N)K.call(J,N[q],q,N)}function W(N,K){for(const J in N)K.call(void 0,N[J],J,N)}function Y(N){const K={};for(const J in N)K[J]=N[J];return K}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(N,K){let J,q;for(let st=1;st<arguments.length;st++){q=arguments[st];for(J in q)N[J]=q[J];for(let at=0;at<X.length;at++)J=X[at],Object.prototype.hasOwnProperty.call(q,J)&&(N[J]=q[J])}}function z(N){this.src=N,this.g={},this.h=0}z.prototype.add=function(N,K,J,q,st){const at=N.toString();N=this.g[at],N||(N=this.g[at]=[],this.h++);const vt=b(N,K,q,st);return vt>-1?(K=N[vt],J||(K.fa=!1)):(K=new D(K,this.src,at,!!q,st),K.fa=J,N.push(K)),K};function G(N,K){const J=K.type;if(J in N.g){var q=N.g[J],st=Array.prototype.indexOf.call(q,K,void 0),at;(at=st>=0)&&Array.prototype.splice.call(q,st,1),at&&(B(K),N.g[J].length==0&&(delete N.g[J],N.h--))}}function b(N,K,J,q){for(let st=0;st<N.length;++st){const at=N[st];if(!at.da&&at.listener==K&&at.capture==!!J&&at.ha==q)return st}return-1}var H="closure_lm_"+(Math.random()*1e6|0),j={};function $(N,K,J,q,st){if(Array.isArray(K)){for(let at=0;at<K.length;at++)$(N,K[at],J,q,st);return null}return J=ut(J),N&&N[I]?N.J(K,J,S(q)?!!q.capture:!1,st):k(N,K,J,!1,q,st)}function k(N,K,J,q,st,at){if(!K)throw Error("Invalid event type");const vt=S(st)?!!st.capture:!!st;let Ot=ot(N);if(Ot||(N[H]=Ot=new z(N)),J=Ot.add(K,J,q,vt,at),J.proxy)return J;if(q=Q(),J.proxy=q,q.src=N,q.listener=J,N.addEventListener)R||(st=vt),st===void 0&&(st=!1),N.addEventListener(K.toString(),q,st);else if(N.attachEvent)N.attachEvent(et(K.toString()),q);else if(N.addListener&&N.removeListener)N.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Q(){function N(J){return K.call(N.src,N.listener,J)}const K=it;return N}function _(N,K,J,q,st){if(Array.isArray(K))for(var at=0;at<K.length;at++)_(N,K[at],J,q,st);else q=S(q)?!!q.capture:!!q,J=ut(J),N&&N[I]?(N=N.i,at=String(K).toString(),at in N.g&&(K=N.g[at],J=b(K,J,q,st),J>-1&&(B(K[J]),Array.prototype.splice.call(K,J,1),K.length==0&&(delete N.g[at],N.h--)))):N&&(N=ot(N))&&(K=N.g[K.toString()],N=-1,K&&(N=b(K,J,q,st)),(J=N>-1?K[N]:null)&&tt(J))}function tt(N){if(typeof N!="number"&&N&&!N.da){var K=N.src;if(K&&K[I])G(K.i,N);else{var J=N.type,q=N.proxy;K.removeEventListener?K.removeEventListener(J,q,N.capture):K.detachEvent?K.detachEvent(et(J),q):K.addListener&&K.removeListener&&K.removeListener(q),(J=ot(K))?(G(J,N),J.h==0&&(J.src=null,K[H]=null)):B(N)}}}function et(N){return N in j?j[N]:j[N]="on"+N}function it(N,K){if(N.da)N=!0;else{K=new L(K,this);const J=N.listener,q=N.ha||N.src;N.fa&&tt(N),N=J.call(q,K)}return N}function ot(N){return N=N[H],N instanceof z?N:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(N){return typeof N=="function"?N:(N[nt]||(N[nt]=function(K){return N.handleEvent(K)}),N[nt])}function ct(){C.call(this),this.i=new z(this),this.M=this,this.G=null}a(ct,C),ct.prototype[I]=!0,ct.prototype.removeEventListener=function(N,K,J,q){_(this,N,K,J,q)};function pt(N,K){var J,q=N.G;if(q)for(J=[];q;q=q.G)J.push(q);if(N=N.M,q=K.type||K,typeof K=="string")K=new A(K,N);else if(K instanceof A)K.target=K.target||N;else{var st=K;K=new A(q,N),U(K,st)}st=!0;let at,vt;if(J)for(vt=J.length-1;vt>=0;vt--)at=K.g=J[vt],st=mt(at,q,!0,K)&&st;if(at=K.g=N,st=mt(at,q,!0,K)&&st,st=mt(at,q,!1,K)&&st,J)for(vt=0;vt<J.length;vt++)at=K.g=J[vt],st=mt(at,q,!1,K)&&st}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var N=this.i;for(const K in N.g){const J=N.g[K];for(let q=0;q<J.length;q++)B(J[q]);delete N.g[K],N.h--}}this.G=null},ct.prototype.J=function(N,K,J,q){return this.i.add(String(N),K,!1,J,q)},ct.prototype.K=function(N,K,J,q){return this.i.add(String(N),K,!0,J,q)};function mt(N,K,J,q){if(K=N.i.g[String(K)],!K)return!0;K=K.concat();let st=!0;for(let at=0;at<K.length;++at){const vt=K[at];if(vt&&!vt.da&&vt.capture==J){const Ot=vt.listener,le=vt.ha||vt.src;vt.fa&&G(N.i,vt),st=Ot.call(le,q)!==!1&&st}}return st&&!q.defaultPrevented}function ht(N,K){if(typeof N!="function")if(N&&typeof N.handleEvent=="function")N=o(N.handleEvent,N);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:c.setTimeout(N,K||0)}function ft(N){N.g=ht(()=>{N.g=null,N.i&&(N.i=!1,ft(N))},N.l);const K=N.h;N.h=null,N.m.apply(null,K)}class dt extends C{constructor(K,J){super(),this.m=K,this.l=J,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ct(N){C.call(this),this.h=N,this.g={}}a(Ct,C);var Lt=[];function Xt(N){V(N.g,function(K,J){this.g.hasOwnProperty(J)&&tt(K)},N),N.g={}}Ct.prototype.N=function(){Ct.Z.N.call(this),Xt(this)},Ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mt=c.JSON.stringify,It=c.JSON.parse,kt=class{stringify(N){return c.JSON.stringify(N,void 0)}parse(N){return c.JSON.parse(N,void 0)}};function ne(){}function Ut(){}var zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){A.call(this,"d")}a(Zt,A);function ae(){A.call(this,"c")}a(ae,A);var we={},fi=null;function Ze(){return fi=fi||new ct}we.Ia="serverreachability";function di(N){A.call(this,we.Ia,N)}a(di,A);function Ne(N){const K=Ze();pt(K,new di(K))}we.STAT_EVENT="statevent";function zu(N,K){A.call(this,we.STAT_EVENT,N),this.stat=K}a(zu,A);function Se(N){const K=Ze();pt(K,new zu(K,N))}we.Ja="timingevent";function Hu(N,K){A.call(this,we.Ja,N),this.size=K}a(Hu,A);function Er(N,K){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){N()},K)}function Sr(){this.g=!0}Sr.prototype.ua=function(){this.g=!1};function cm(N,K,J,q,st,at){N.info(function(){if(N.g)if(at){var vt="",Ot=at.split("&");for(let Jt=0;Jt<Ot.length;Jt++){var le=Ot[Jt].split("=");if(le.length>1){const fe=le[0];le=le[1];const vi=fe.split("_");vt=vi.length>=2&&vi[1]=="type"?vt+(fe+"="+le+"&"):vt+(fe+"=redacted&")}}}else vt=null;else vt=at;return"XMLHTTP REQ ("+q+") [attempt "+st+"]: "+K+`
`+J+`
`+vt})}function vm(N,K,J,q,st,at,vt){N.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+st+"]: "+K+`
`+J+`
`+at+" "+vt})}function Sn(N,K,J,q){N.info(function(){return"XMLHTTP TEXT ("+K+"): "+gm(N,J)+(q?" "+q:"")})}function pm(N,K){N.info(function(){return"TIMEOUT: "+K})}Sr.prototype.info=function(){};function gm(N,K){if(!N.g)return K;if(!K)return null;try{const at=JSON.parse(K);if(at){for(N=0;N<at.length;N++)if(Array.isArray(at[N])){var J=at[N];if(!(J.length<2)){var q=J[1];if(Array.isArray(q)&&!(q.length<1)){var st=q[0];if(st!="noop"&&st!="stop"&&st!="close")for(let vt=1;vt<q.length;vt++)q[vt]=""}}}}return Mt(at)}catch{return K}}var mh={NO_ERROR:0,TIMEOUT:8},mm={},Yu;function xh(){}a(xh,ne),xh.prototype.g=function(){return new XMLHttpRequest},Yu=new xh;function Cr(N){return encodeURIComponent(String(N))}function xm(N){var K=1;N=N.split(":");const J=[];for(;K>0&&N.length;)J.push(N.shift()),K--;return N.length&&J.push(N.join(":")),J}function Hi(N,K,J,q){this.j=N,this.i=K,this.l=J,this.S=q||1,this.V=new Ct(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xu}function Xu(){this.i=null,this.g="",this.h=!1}var Ku={},yh={};function Th(N,K,J){N.M=1,N.A=_a(ci(K)),N.u=J,N.R=!0,ju(N,null)}function ju(N,K){N.F=Date.now(),qa(N),N.B=ci(N.A);var J=N.B,q=N.S;Array.isArray(q)||(q=[String(q)]),af(J.i,"t",q),N.C=0,J=N.j.L,N.h=new Xu,N.g=Af(N.j,J?K:null,!N.u),N.P>0&&(N.O=new dt(o(N.Y,N,N.g),N.P)),K=N.V,J=N.g,q=N.ba;var st="readystatechange";Array.isArray(st)||(st&&(Lt[0]=st.toString()),st=Lt);for(let at=0;at<st.length;at++){const vt=$(J,st[at],q||K.handleEvent,!1,K.h||K);if(!vt)break;K.g[vt.key]=vt}K=N.J?Y(N.J):{},N.u?(N.v||(N.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.B,N.v,N.u,K)):(N.v="GET",N.g.ea(N.B,N.v,null,K)),Ne(),cm(N.i,N.v,N.B,N.l,N.S,N.u)}Hi.prototype.ba=function(N){N=N.target;const K=this.O;K&&Ki(N)==3?K.j():this.Y(N)},Hi.prototype.Y=function(N){try{if(N==this.g)t:{const Ot=Ki(this.g),le=this.g.ya(),Jt=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||cf(this.g)))){this.K||Ot!=4||le==7||(le==8||Jt<=0?Ne(3):Ne(2)),Eh(this);var K=this.g.ca();this.X=K;var J=ym(this);if(this.o=K==200,vm(this.i,this.v,this.B,this.l,this.S,Ot,K),this.o){if(this.U&&!this.L){e:{if(this.g){var q,st=this.g;if((q=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(q)){var at=q;break e}}at=null}if(N=at)Sn(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sh(this,N);else{this.o=!1,this.m=3,Se(12),As(this),Ar(this);break t}}if(this.R){N=!0;let fe;for(;!this.K&&this.C<J.length;)if(fe=Tm(this,J),fe==yh){Ot==4&&(this.m=4,Se(14),N=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==Ku){this.m=4,Se(15),Sn(this.i,this.l,J,"[Invalid Chunk]"),N=!1;break}else Sn(this.i,this.l,fe,null),Sh(this,fe);if($u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||J.length!=0||this.h.h||(this.m=1,Se(16),N=!1),this.o=this.o&&N,!N)Sn(this.i,this.l,J,"[Invalid Chunked Response]"),As(this),Ar(this);else if(J.length>0&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.aa&&!vt.P&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Oh(vt),vt.P=!0,Se(11))}}else Sn(this.i,this.l,J,null),Sh(this,J);Ot==4&&As(this),this.o&&!this.K&&(Ot==4?Tf(this.j,this):(this.o=!1,qa(this)))}else Nm(this.g),K==400&&J.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),As(this),Ar(this)}}}catch{}finally{}};function ym(N){if(!$u(N))return N.g.la();const K=cf(N.g);if(K==="")return"";let J="";const q=K.length,st=Ki(N.g)==4;if(!N.h.i){if(typeof TextDecoder>"u")return As(N),Ar(N),"";N.h.i=new c.TextDecoder}for(let at=0;at<q;at++)N.h.h=!0,J+=N.h.i.decode(K[at],{stream:!(st&&at==q-1)});return K.length=0,N.h.g+=J,N.C=0,N.h.g}function $u(N){return N.g?N.v=="GET"&&N.M!=2&&N.j.Aa:!1}function Tm(N,K){var J=N.C,q=K.indexOf(`
`,J);return q==-1?yh:(J=Number(K.substring(J,q)),isNaN(J)?Ku:(q+=1,q+J>K.length?yh:(K=K.slice(q,q+J),N.C=q+J,K)))}Hi.prototype.cancel=function(){this.K=!0,As(this)};function qa(N){N.T=Date.now()+N.H,Ju(N,N.H)}function Ju(N,K){if(N.D!=null)throw Error("WatchDog timer not null");N.D=Er(o(N.aa,N),K)}function Eh(N){N.D&&(c.clearTimeout(N.D),N.D=null)}Hi.prototype.aa=function(){this.D=null;const N=Date.now();N-this.T>=0?(pm(this.i,this.B),this.M!=2&&(Ne(),Se(17)),As(this),this.m=2,Ar(this)):Ju(this,this.T-N)};function Ar(N){N.j.I==0||N.K||Tf(N.j,N)}function As(N){Eh(N);var K=N.O;K&&typeof K.dispose=="function"&&K.dispose(),N.O=null,Xt(N.V),N.g&&(K=N.g,N.g=null,K.abort(),K.dispose())}function Sh(N,K){try{var J=N.j;if(J.I!=0&&(J.g==N||Ch(J.h,N))){if(!N.L&&Ch(J.h,N)&&J.I==3){try{var q=J.Ba.g.parse(K)}catch{q=null}if(Array.isArray(q)&&q.length==3){var st=q;if(st[0]==0){t:if(!J.v){if(J.g)if(J.g.F+3e3<N.F)no(J),io(J);else break t;Ih(J),Se(18)}}else J.xa=st[1],0<J.xa-J.K&&st[2]<37500&&J.F&&J.A==0&&!J.C&&(J.C=Er(o(J.Va,J),6e3));Qu(J.h)<=1&&J.ta&&(J.ta=void 0)}else Rs(J,11)}else if((N.L||J.g==N)&&no(J),!M(K))for(st=J.Ba.g.parse(K),K=0;K<st.length;K++){let Jt=st[K];const fe=Jt[0];if(!(fe<=J.K))if(J.K=fe,Jt=Jt[1],J.I==2)if(Jt[0]=="c"){J.M=Jt[1],J.ba=Jt[2];const vi=Jt[3];vi!=null&&(J.ka=vi,J.j.info("VER="+J.ka));const Ms=Jt[4];Ms!=null&&(J.za=Ms,J.j.info("SVER="+J.za));const ji=Jt[5];ji!=null&&typeof ji=="number"&&ji>0&&(q=1.5*ji,J.O=q,J.j.info("backChannelRequestTimeoutMs_="+q)),q=J;const $i=N.g;if($i){const ro=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var at=q.h;at.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Ah(at,at.h),at.h=null))}if(q.G){const Lh=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(q.wa=Lh,qt(q.J,q.G,Lh))}}J.I=3,J.l&&J.l.ra(),J.aa&&(J.T=Date.now()-N.F,J.j.info("Handshake RTT: "+J.T+"ms")),q=J;var vt=N;if(q.na=Cf(q,q.L?q.ba:null,q.W),vt.L){qu(q.h,vt);var Ot=vt,le=q.O;le&&(Ot.H=le),Ot.D&&(Eh(Ot),qa(Ot)),q.g=vt}else xf(q);J.i.length>0&&so(J)}else Jt[0]!="stop"&&Jt[0]!="close"||Rs(J,7);else J.I==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Rs(J,7):wh(J):Jt[0]!="noop"&&J.l&&J.l.qa(Jt),J.A=0)}}Ne(4)}catch{}}var Em=class{constructor(N,K){this.g=N,this.map=K}};function ku(N){this.l=N||10,c.PerformanceNavigationTiming?(N=c.performance.getEntriesByType("navigation"),N=N.length>0&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zu(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Qu(N){return N.h?1:N.g?N.g.size:0}function Ch(N,K){return N.h?N.h==K:N.g?N.g.has(K):!1}function Ah(N,K){N.g?N.g.add(K):N.h=K}function qu(N,K){N.h&&N.h==K?N.h=null:N.g&&N.g.has(K)&&N.g.delete(K)}ku.prototype.cancel=function(){if(this.i=_u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function _u(N){if(N.h!=null)return N.i.concat(N.h.G);if(N.g!=null&&N.g.size!==0){let K=N.i;for(const J of N.g.values())K=K.concat(J.G);return K}return r(N.i)}var tf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sm(N,K){if(N){N=N.split("&");for(let J=0;J<N.length;J++){const q=N[J].indexOf("=");let st,at=null;q>=0?(st=N[J].substring(0,q),at=N[J].substring(q+1)):st=N[J],K(st,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function Yi(N){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;N instanceof Yi?(this.l=N.l,Pr(this,N.j),this.o=N.o,this.g=N.g,Rr(this,N.u),this.h=N.h,Ph(this,of(N.i)),this.m=N.m):N&&(K=String(N).match(tf))?(this.l=!1,Pr(this,K[1]||"",!0),this.o=Mr(K[2]||""),this.g=Mr(K[3]||"",!0),Rr(this,K[4]),this.h=Mr(K[5]||"",!0),Ph(this,K[6]||"",!0),this.m=Mr(K[7]||"")):(this.l=!1,this.i=new Ir(null,this.l))}Yi.prototype.toString=function(){const N=[];var K=this.j;K&&N.push(wr(K,ef,!0),":");var J=this.g;return(J||K=="file")&&(N.push("//"),(K=this.o)&&N.push(wr(K,ef,!0),"@"),N.push(Cr(J).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.u,J!=null&&N.push(":",String(J))),(J=this.h)&&(this.g&&J.charAt(0)!="/"&&N.push("/"),N.push(wr(J,J.charAt(0)=="/"?Pm:Am,!0))),(J=this.i.toString())&&N.push("?",J),(J=this.m)&&N.push("#",wr(J,Mm)),N.join("")},Yi.prototype.resolve=function(N){const K=ci(this);let J=!!N.j;J?Pr(K,N.j):J=!!N.o,J?K.o=N.o:J=!!N.g,J?K.g=N.g:J=N.u!=null;var q=N.h;if(J)Rr(K,N.u);else if(J=!!N.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var st=K.h.lastIndexOf("/");st!=-1&&(q=K.h.slice(0,st+1)+q)}if(st=q,st==".."||st==".")q="";else if(st.indexOf("./")!=-1||st.indexOf("/.")!=-1){q=st.lastIndexOf("/",0)==0,st=st.split("/");const at=[];for(let vt=0;vt<st.length;){const Ot=st[vt++];Ot=="."?q&&vt==st.length&&at.push(""):Ot==".."?((at.length>1||at.length==1&&at[0]!="")&&at.pop(),q&&vt==st.length&&at.push("")):(at.push(Ot),q=!0)}q=at.join("/")}else q=st}return J?K.h=q:J=N.i.toString()!=="",J?Ph(K,of(N.i)):J=!!N.m,J&&(K.m=N.m),K};function ci(N){return new Yi(N)}function Pr(N,K,J){N.j=J?Mr(K,!0):K,N.j&&(N.j=N.j.replace(/:$/,""))}function Rr(N,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);N.u=K}else N.u=null}function Ph(N,K,J){K instanceof Ir?(N.i=K,wm(N.i,N.l)):(J||(K=wr(K,Rm)),N.i=new Ir(K,N.l))}function qt(N,K,J){N.i.set(K,J)}function _a(N){return qt(N,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),N}function Mr(N,K){return N?K?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function wr(N,K,J){return typeof N=="string"?(N=encodeURI(N).replace(K,Cm),J&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Cm(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var ef=/[#\/\?@]/g,Am=/[#\?:]/g,Pm=/[#\?]/g,Rm=/[#\?@]/g,Mm=/#/g;function Ir(N,K){this.h=this.g=null,this.i=N||null,this.j=!!K}function Ps(N){N.g||(N.g=new Map,N.h=0,N.i&&Sm(N.i,function(K,J){N.add(decodeURIComponent(K.replace(/\+/g," ")),J)}))}E=Ir.prototype,E.add=function(N,K){Ps(this),this.i=null,N=Cn(this,N);let J=this.g.get(N);return J||this.g.set(N,J=[]),J.push(K),this.h+=1,this};function sf(N,K){Ps(N),K=Cn(N,K),N.g.has(K)&&(N.i=null,N.h-=N.g.get(K).length,N.g.delete(K))}function nf(N,K){return Ps(N),K=Cn(N,K),N.g.has(K)}E.forEach=function(N,K){Ps(this),this.g.forEach(function(J,q){J.forEach(function(st){N.call(K,st,q,this)},this)},this)};function rf(N,K){Ps(N);let J=[];if(typeof K=="string")nf(N,K)&&(J=J.concat(N.g.get(Cn(N,K))));else for(N=Array.from(N.g.values()),K=0;K<N.length;K++)J=J.concat(N[K]);return J}E.set=function(N,K){return Ps(this),this.i=null,N=Cn(this,N),nf(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[K]),this.h+=1,this},E.get=function(N,K){return N?(N=rf(this,N),N.length>0?String(N[0]):K):K};function af(N,K,J){sf(N,K),J.length>0&&(N.i=null,N.g.set(Cn(N,K),r(J)),N.h+=J.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],K=Array.from(this.g.keys());for(let q=0;q<K.length;q++){var J=K[q];const st=Cr(J);J=rf(this,J);for(let at=0;at<J.length;at++){let vt=st;J[at]!==""&&(vt+="="+Cr(J[at])),N.push(vt)}}return this.i=N.join("&")};function of(N){const K=new Ir;return K.i=N.i,N.g&&(K.g=new Map(N.g),K.h=N.h),K}function Cn(N,K){return K=String(K),N.j&&(K=K.toLowerCase()),K}function wm(N,K){K&&!N.j&&(Ps(N),N.i=null,N.g.forEach(function(J,q){const st=q.toLowerCase();q!=st&&(sf(this,q),af(this,st,J))},N)),N.j=K}function Im(N,K){const J=new Sr;if(c.Image){const q=new Image;q.onload=g(Xi,J,"TestLoadImage: loaded",!0,K,q),q.onerror=g(Xi,J,"TestLoadImage: error",!1,K,q),q.onabort=g(Xi,J,"TestLoadImage: abort",!1,K,q),q.ontimeout=g(Xi,J,"TestLoadImage: timeout",!1,K,q),c.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=N}else K(!1)}function Om(N,K){const J=new Sr,q=new AbortController,st=setTimeout(()=>{q.abort(),Xi(J,"TestPingServer: timeout",!1,K)},1e4);fetch(N,{signal:q.signal}).then(at=>{clearTimeout(st),at.ok?Xi(J,"TestPingServer: ok",!0,K):Xi(J,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(st),Xi(J,"TestPingServer: error",!1,K)})}function Xi(N,K,J,q,st){try{st&&(st.onload=null,st.onerror=null,st.onabort=null,st.ontimeout=null),q(J)}catch{}}function Lm(){this.g=new kt}function Rh(N){this.i=N.Sb||null,this.h=N.ab||!1}a(Rh,ne),Rh.prototype.g=function(){return new to(this.i,this.h)};function to(N,K){ct.call(this),this.H=N,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}a(to,ct),E=to.prototype,E.open=function(N,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=N,this.D=K,this.readyState=1,Lr(this)},E.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};N&&(K.body=N),(this.H||c).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},E.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},E.Pa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hf(this)}else N.text().then(this.Oa.bind(this),this.ga.bind(this))};function hf(N){N.j.read().then(N.Ma.bind(N)).catch(N.ga.bind(N))}E.Ma=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var K=N.value?N.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!N.done}))&&(this.response=this.responseText+=K)}N.done?Or(this):Lr(this),this.readyState==3&&hf(this)}},E.Oa=function(N){this.g&&(this.response=this.responseText=N,Or(this))},E.Na=function(N){this.g&&(this.response=N,Or(this))},E.ga=function(){this.g&&Or(this)};function Or(N){N.readyState=4,N.l=null,N.j=null,N.B=null,Lr(N)}E.setRequestHeader=function(N,K){this.A.append(N,K)},E.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},E.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],K=this.h.entries();for(var J=K.next();!J.done;)J=J.value,N.push(J[0]+": "+J[1]),J=K.next();return N.join(`\r
`)};function Lr(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function lf(N){let K="";return V(N,function(J,q){K+=q,K+=":",K+=J,K+=`\r
`}),K}function Mh(N,K,J){t:{for(q in J){var q=!1;break t}q=!0}q||(J=lf(J),typeof N=="string"?J!=null&&Cr(J):qt(N,K,J))}function re(N){ct.call(this),this.headers=new Map,this.L=N||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}a(re,ct);var Dm=/^https?$/i,Fm=["POST","PUT"];E=re.prototype,E.Fa=function(N){this.H=N},E.ea=function(N,K,J,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);K=K?K.toUpperCase():"GET",this.D=N,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yu.g(),this.g.onreadystatechange=n(o(this.Ca,this));try{this.B=!0,this.g.open(K,String(N),!0),this.B=!1}catch(at){uf(this,at);return}if(N=J||"",J=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var st in q)J.set(st,q[st]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const at of q.keys())J.set(at,q.get(at));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(J.keys()).find(at=>at.toLowerCase()=="content-type"),st=c.FormData&&N instanceof c.FormData,!(Array.prototype.indexOf.call(Fm,K,void 0)>=0)||q||st||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,vt]of J)this.g.setRequestHeader(at,vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(N),this.v=!1}catch(at){uf(this,at)}};function uf(N,K){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=K,N.o=5,ff(N),eo(N)}function ff(N){N.A||(N.A=!0,pt(N,"complete"),pt(N,"error"))}E.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=N||7,pt(this,"complete"),pt(this,"abort"),eo(this))},E.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eo(this,!0)),re.Z.N.call(this)},E.Ca=function(){this.u||(this.B||this.v||this.j?df(this):this.Xa())},E.Xa=function(){df(this)};function df(N){if(N.h&&typeof F<"u"){if(N.v&&Ki(N)==4)setTimeout(N.Ca.bind(N),0);else if(pt(N,"readystatechange"),Ki(N)==4){N.h=!1;try{const at=N.ca();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break t;default:K=!1}var J;if(!(J=K)){var q;if(q=at===0){let vt=String(N.D).match(tf)[1]||null;!vt&&c.self&&c.self.location&&(vt=c.self.location.protocol.slice(0,-1)),q=!Dm.test(vt?vt.toLowerCase():"")}J=q}if(J)pt(N,"complete"),pt(N,"success");else{N.o=6;try{var st=Ki(N)>2?N.g.statusText:""}catch{st=""}N.l=st+" ["+N.ca()+"]",ff(N)}}finally{eo(N)}}}}function eo(N,K){if(N.g){N.m&&(clearTimeout(N.m),N.m=null);const J=N.g;N.g=null,K||pt(N,"ready");try{J.onreadystatechange=null}catch{}}}E.isActive=function(){return!!this.g};function Ki(N){return N.g?N.g.readyState:0}E.ca=function(){try{return Ki(this)>2?this.g.status:-1}catch{return-1}},E.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},E.La=function(N){if(this.g){var K=this.g.responseText;return N&&K.indexOf(N)==0&&(K=K.substring(N.length)),It(K)}};function cf(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.F){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function Nm(N){const K={};N=(N.g&&Ki(N)>=2&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<N.length;q++){if(M(N[q]))continue;var J=xm(N[q]);const st=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const at=K[st]||[];K[st]=at,at.push(J)}W(K,function(q){return q.join(", ")})}E.ya=function(){return this.o},E.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(N,K,J){return J&&J.internalChannelParams&&J.internalChannelParams[N]||K}function vf(N){this.za=0,this.i=[],this.j=new Sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dr("failFast",!1,N),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dr("baseRetryDelayMs",5e3,N),this.Za=Dr("retryDelaySeedMs",1e4,N),this.Ta=Dr("forwardChannelMaxRetries",2,N),this.va=Dr("forwardChannelRequestTimeoutMs",2e4,N),this.ma=N&&N.xmlHttpFactory||void 0,this.Ua=N&&N.Rb||void 0,this.Aa=N&&N.useFetchStreams||!1,this.O=void 0,this.L=N&&N.supportsCrossDomainXhr||!1,this.M="",this.h=new ku(N&&N.concurrentRequestLimit),this.Ba=new Lm,this.S=N&&N.fastHandshake||!1,this.R=N&&N.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=N&&N.Pb||!1,N&&N.ua&&this.j.ua(),N&&N.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&N&&N.detectBufferingProxy||!1,this.ia=void 0,N&&N.longPollingTimeout&&N.longPollingTimeout>0&&(this.ia=N.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}E=vf.prototype,E.ka=8,E.I=1,E.connect=function(N,K,J,q){Se(0),this.W=N,this.H=K||{},J&&q!==void 0&&(this.H.OSID=J,this.H.OAID=q),this.F=this.X,this.J=Cf(this,null,this.W),so(this)};function wh(N){if(pf(N),N.I==3){var K=N.V++,J=ci(N.J);if(qt(J,"SID",N.M),qt(J,"RID",K),qt(J,"TYPE","terminate"),Fr(N,J),K=new Hi(N,N.j,K),K.M=2,K.A=_a(ci(J)),J=!1,c.navigator&&c.navigator.sendBeacon)try{J=c.navigator.sendBeacon(K.A.toString(),"")}catch{}!J&&c.Image&&(new Image().src=K.A,J=!0),J||(K.g=Af(K.j,null),K.g.ea(K.A)),K.F=Date.now(),qa(K)}Sf(N)}function io(N){N.g&&(Oh(N),N.g.cancel(),N.g=null)}function pf(N){io(N),N.v&&(c.clearTimeout(N.v),N.v=null),no(N),N.h.cancel(),N.m&&(typeof N.m=="number"&&c.clearTimeout(N.m),N.m=null)}function so(N){if(!Zu(N.h)&&!N.m){N.m=!0;var K=N.Ea;d||y(),p||(d(),p=!0),x.add(K,N),N.D=0}}function Bm(N,K){return Qu(N.h)>=N.h.j-(N.m?1:0)?!1:N.m?(N.i=K.G.concat(N.i),!0):N.I==1||N.I==2||N.D>=(N.Sa?0:N.Ta)?!1:(N.m=Er(o(N.Ea,N,K),Ef(N,N.D)),N.D++,!0)}E.Ea=function(N){if(this.m)if(this.m=null,this.I==1){if(!N){this.V=Math.floor(Math.random()*1e5),N=this.V++;const st=new Hi(this,this.j,N);let at=this.o;if(this.U&&(at?(at=Y(at),U(at,this.U)):at=this.U),this.u!==null||this.R||(st.J=at,at=null),this.S)t:{for(var K=0,J=0;J<this.i.length;J++){e:{var q=this.i[J];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break e}q=void 0}if(q===void 0)break;if(K+=q,K>4096){K=J;break t}if(K===4096||J===this.i.length-1){K=J+1;break t}}K=1e3}else K=1e3;K=mf(this,st,K),J=ci(this.J),qt(J,"RID",N),qt(J,"CVER",22),this.G&&qt(J,"X-HTTP-Session-Id",this.G),Fr(this,J),at&&(this.R?K="headers="+Cr(lf(at))+"&"+K:this.u&&Mh(J,this.u,at)),Ah(this.h,st),this.Ra&&qt(J,"TYPE","init"),this.S?(qt(J,"$req",K),qt(J,"SID","null"),st.U=!0,Th(st,J,null)):Th(st,J,K),this.I=2}}else this.I==3&&(N?gf(this,N):this.i.length==0||Zu(this.h)||gf(this))};function gf(N,K){var J;K?J=K.l:J=N.V++;const q=ci(N.J);qt(q,"SID",N.M),qt(q,"RID",J),qt(q,"AID",N.K),Fr(N,q),N.u&&N.o&&Mh(q,N.u,N.o),J=new Hi(N,N.j,J,N.D+1),N.u===null&&(J.J=N.o),K&&(N.i=K.G.concat(N.i)),K=mf(N,J,1e3),J.H=Math.round(N.va*.5)+Math.round(N.va*.5*Math.random()),Ah(N.h,J),Th(J,q,K)}function Fr(N,K){N.H&&V(N.H,function(J,q){qt(K,q,J)}),N.l&&V({},function(J,q){qt(K,q,J)})}function mf(N,K,J){J=Math.min(N.i.length,J);const q=N.l?o(N.l.Ka,N.l,N):null;t:{var st=N.i;let Ot=-1;for(;;){const le=["count="+J];Ot==-1?J>0?(Ot=st[0].g,le.push("ofs="+Ot)):Ot=0:le.push("ofs="+Ot);let Jt=!0;for(let fe=0;fe<J;fe++){var at=st[fe].g;const vi=st[fe].map;if(at-=Ot,at<0)Ot=Math.max(0,st[fe].g-100),Jt=!1;else try{at="req"+at+"_"||"";try{var vt=vi instanceof Map?vi:Object.entries(vi);for(const[Ms,ji]of vt){let $i=ji;S(ji)&&($i=Mt(ji)),le.push(at+Ms+"="+encodeURIComponent($i))}}catch(Ms){throw le.push(at+"type="+encodeURIComponent("_badmap")),Ms}}catch{q&&q(vi)}}if(Jt){vt=le.join("&");break t}}vt=void 0}return N=N.i.splice(0,J),K.G=N,vt}function xf(N){if(!N.g&&!N.v){N.Y=1;var K=N.Da;d||y(),p||(d(),p=!0),x.add(K,N),N.A=0}}function Ih(N){return N.g||N.v||N.A>=3?!1:(N.Y++,N.v=Er(o(N.Da,N),Ef(N,N.A)),N.A++,!0)}E.Da=function(){if(this.v=null,yf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var N=4*this.T;this.j.info("BP detection timer enabled: "+N),this.B=Er(o(this.Wa,this),N)}},E.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),io(this),yf(this))};function Oh(N){N.B!=null&&(c.clearTimeout(N.B),N.B=null)}function yf(N){N.g=new Hi(N,N.j,"rpc",N.Y),N.u===null&&(N.g.J=N.o),N.g.P=0;var K=ci(N.na);qt(K,"RID","rpc"),qt(K,"SID",N.M),qt(K,"AID",N.K),qt(K,"CI",N.F?"0":"1"),!N.F&&N.ia&&qt(K,"TO",N.ia),qt(K,"TYPE","xmlhttp"),Fr(N,K),N.u&&N.o&&Mh(K,N.u,N.o),N.O&&(N.g.H=N.O);var J=N.g;N=N.ba,J.M=1,J.A=_a(ci(K)),J.u=null,J.R=!0,ju(J,N)}E.Va=function(){this.C!=null&&(this.C=null,io(this),Ih(this),Se(19))};function no(N){N.C!=null&&(c.clearTimeout(N.C),N.C=null)}function Tf(N,K){var J=null;if(N.g==K){no(N),Oh(N),N.g=null;var q=2}else if(Ch(N.h,K))J=K.G,qu(N.h,K),q=1;else return;if(N.I!=0){if(K.o)if(q==1){J=K.u?K.u.length:0,K=Date.now()-K.F;var st=N.D;q=Ze(),pt(q,new Hu(q,J)),so(N)}else xf(N);else if(st=K.m,st==3||st==0&&K.X>0||!(q==1&&Bm(N,K)||q==2&&Ih(N)))switch(J&&J.length>0&&(K=N.h,K.i=K.i.concat(J)),st){case 1:Rs(N,5);break;case 4:Rs(N,10);break;case 3:Rs(N,6);break;default:Rs(N,2)}}}function Ef(N,K){let J=N.Qa+Math.floor(Math.random()*N.Za);return N.isActive()||(J*=2),J*K}function Rs(N,K){if(N.j.info("Error code "+K),K==2){var J=o(N.bb,N),q=N.Ua;const st=!q;q=new Yi(q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pr(q,"https"),_a(q),st?Im(q.toString(),J):Om(q.toString(),J)}else Se(2);N.I=0,N.l&&N.l.pa(K),Sf(N),pf(N)}E.bb=function(N){N?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function Sf(N){if(N.I=0,N.ja=[],N.l){const K=_u(N.h);(K.length!=0||N.i.length!=0)&&(e(N.ja,K),e(N.ja,N.i),N.h.i.length=0,r(N.i),N.i.length=0),N.l.oa()}}function Cf(N,K,J){var q=J instanceof Yi?ci(J):new Yi(J);if(q.g!="")K&&(q.g=K+"."+q.g),Rr(q,q.u);else{var st=c.location;q=st.protocol,K=K?K+"."+st.hostname:st.hostname,st=+st.port;const at=new Yi(null);q&&Pr(at,q),K&&(at.g=K),st&&Rr(at,st),J&&(at.h=J),q=at}return J=N.G,K=N.wa,J&&K&&qt(q,J,K),qt(q,"VER",N.ka),Fr(N,q),q}function Af(N,K,J){if(K&&!N.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=N.Aa&&!N.ma?new re(new Rh({ab:J})):new re(N.ma),K.Fa(N.L),K}E.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pf(){}E=Pf.prototype,E.ra=function(){},E.qa=function(){},E.pa=function(){},E.oa=function(){},E.isActive=function(){return!0},E.Ka=function(){};function ze(N,K){ct.call(this),this.g=new vf(K),this.l=N,this.h=K&&K.messageUrlParams||null,N=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(N?N["X-WebChannel-Content-Type"]=K.messageContentType:N={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(N?N["X-WebChannel-Client-Profile"]=K.sa:N={"X-WebChannel-Client-Profile":K.sa}),this.g.U=N,(N=K&&K.Qb)&&!M(N)&&(this.g.u=N),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!M(K)&&(this.g.G=K,N=this.h,N!==null&&K in N&&(N=this.h,K in N&&delete N[K])),this.j=new An(this)}a(ze,ct),ze.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){wh(this.g)},ze.prototype.o=function(N){var K=this.g;if(typeof N=="string"){var J={};J.__data__=N,N=J}else this.v&&(J={},J.__data__=Mt(N),N=J);K.i.push(new Em(K.Ya++,N)),K.I==3&&so(K)},ze.prototype.N=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,ze.Z.N.call(this)};function Rf(N){Zt.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var K=N.__sm__;if(K){t:{for(const J in K){N=J;break t}N=void 0}(this.i=N)&&(N=this.i,K=K!==null&&N in K?K[N]:void 0),this.data=K}else this.data=N}a(Rf,Zt);function Mf(){ae.call(this),this.status=1}a(Mf,ae);function An(N){this.g=N}a(An,Pf),An.prototype.ra=function(){pt(this.g,"a")},An.prototype.qa=function(N){pt(this.g,new Rf(N))},An.prototype.pa=function(N){pt(this.g,new Mf)},An.prototype.oa=function(){pt(this.g,"b")},ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,mh.NO_ERROR=0,mh.TIMEOUT=8,mh.HTTP_ERROR=6,mm.COMPLETE="complete",Ut.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",ct.prototype.listen=ct.prototype.J,re.prototype.listenOnce=re.prototype.K,re.prototype.getLastError=re.prototype.Ha,re.prototype.getLastErrorCode=re.prototype.ya,re.prototype.getStatus=re.prototype.ca,re.prototype.getResponseJson=re.prototype.La,re.prototype.getResponseText=re.prototype.la,re.prototype.send=re.prototype.ea,re.prototype.setWithCredentials=re.prototype.Fa}).apply(typeof po<"u"?po:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(v){this.uid=v}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(v){return v.uid===this.uid}}Pe.UNAUTHENTICATED=new Pe(null),Pe.GOOGLE_CREDENTIALS=new Pe("google-credentials-uid"),Pe.FIRST_PARTY=new Pe("first-party-uid"),Pe.MOCK_USER=new Pe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.8.0";function hP(E){Za=E}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Wa("@firebase/firestore");function ri(E,...v){if(cr.logLevel<=Wt.DEBUG){const m=v.map(Bu);cr.debug(`Firestore (${Za}): ${E}`,...m)}}function rm(E,...v){if(cr.logLevel<=Wt.ERROR){const m=v.map(Bu);cr.error(`Firestore (${Za}): ${E}`,...m)}}function lP(E,...v){if(cr.logLevel<=Wt.WARN){const m=v.map(Bu);cr.warn(`Firestore (${Za}): ${E}`,...m)}}function Bu(E){if(typeof E=="string")return E;try{return function(m){return JSON.stringify(m)}(E)}catch{return E}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(E,v,m){let P="Unexpected state";typeof v=="string"?P=v:m=v,am(E,P,m)}function am(E,v,m){let P=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${v} (ID: ${E.toString(16)})`;if(m!==void 0)try{P+=" CONTEXT: "+JSON.stringify(m)}catch{P+=" CONTEXT: "+m}throw rm(P),new Error(P)}function Qr(E,v,m,P){let w="Unexpected state";typeof m=="string"?w=m:P=m,E||am(v,w,P)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Gt extends ui{constructor(v,m){super(v,m),this.code=v,this.message=m,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((v,m)=>{this.resolve=v,this.reject=m})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(v,m){this.user=m,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${v}`)}}class uP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(v,m){v.enqueueRetryable(()=>m(Pe.UNAUTHENTICATED))}shutdown(){}}class fP{constructor(v){this.token=v,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(v,m){this.changeListener=m,v.enqueueRetryable(()=>m(this.token.user))}shutdown(){this.changeListener=null}}class dP{constructor(v){this.t=v,this.currentUser=Pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(v,m){Qr(this.o===void 0,42304);let P=this.i;const w=t=>this.i!==P?(P=this.i,m(t)):Promise.resolve();let F=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),F.resolve(),F=new qr,v.enqueueRetryable(()=>w(this.currentUser))};const c=()=>{const t=F;v.enqueueRetryable(async()=>{await t.promise,await w(this.currentUser)})},S=t=>{ri("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(t=>S(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?S(t):(ri("FirebaseAuthCredentialsProvider","Auth not yet detected"),F.resolve(),F=new qr)}},0),c()}getToken(){const v=this.i,m=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(m).then(P=>this.i!==v?(ri("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):P?(Qr(typeof P.accessToken=="string",31837,{l:P}),new om(P.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const v=this.auth&&this.auth.getUid();return Qr(v===null||typeof v=="string",2055,{h:v}),new Pe(v)}}class cP{constructor(v,m,P){this.P=v,this.T=m,this.I=P,this.type="FirstParty",this.user=Pe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const v=this.A();return v&&this.R.set("Authorization",v),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class vP{constructor(v,m,P){this.P=v,this.T=m,this.I=P}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(v,m){v.enqueueRetryable(()=>m(Pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yc{constructor(v){this.value=v,this.type="AppCheck",this.headers=new Map,v&&v.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pP{constructor(v,m){this.V=m,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Oe(v)&&v.settings.appCheckToken&&(this.p=v.settings.appCheckToken)}start(v,m){Qr(this.o===void 0,3512);const P=F=>{F.error!=null&&ri("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${F.error.message}`);const c=F.token!==this.m;return this.m=F.token,ri("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?m(F.token):Promise.resolve()};this.o=F=>{v.enqueueRetryable(()=>P(F))};const w=F=>{ri("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=F,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(F=>w(F)),setTimeout(()=>{if(!this.appCheck){const F=this.V.getImmediate({optional:!0});F?w(F):ri("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yc(this.p));const v=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(v).then(m=>m?(Qr(typeof m.token=="string",44558,{tokenResult:m}),this.m=m.token,new yc(m.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(E){const v=typeof self<"u"&&(self.crypto||self.msCrypto),m=new Uint8Array(E);if(v&&typeof v.getRandomValues=="function")v.getRandomValues(m);else for(let P=0;P<E;P++)m[P]=Math.floor(256*Math.random());return m}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{static newId(){const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",m=62*Math.floor(4.129032258064516);let P="";for(;P.length<20;){const w=gP(40);for(let F=0;F<w.length;++F)P.length<20&&w[F]<m&&(P+=v.charAt(w[F]%62))}return P}}function ys(E,v){return E<v?-1:E>v?1:0}function xP(E,v){const m=Math.min(E.length,v.length);for(let P=0;P<m;P++){const w=E.charAt(P),F=v.charAt(P);if(w!==F)return _h(w)===_h(F)?ys(w,F):_h(w)?1:-1}return ys(E.length,v.length)}const yP=55296,TP=57343;function _h(E){const v=E.charCodeAt(0);return v>=yP&&v<=TP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="__name__";class pi{constructor(v,m,P){m===void 0?m=0:m>v.length&&la(637,{offset:m,range:v.length}),P===void 0?P=v.length-m:P>v.length-m&&la(1746,{length:P,range:v.length-m}),this.segments=v,this.offset=m,this.len=P}get length(){return this.len}isEqual(v){return pi.comparator(this,v)===0}child(v){const m=this.segments.slice(this.offset,this.limit());return v instanceof pi?v.forEach(P=>{m.push(P)}):m.push(v),this.construct(m)}limit(){return this.offset+this.length}popFirst(v){return v=v===void 0?1:v,this.construct(this.segments,this.offset+v,this.length-v)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(v){return this.segments[this.offset+v]}isEmpty(){return this.length===0}isPrefixOf(v){if(v.length<this.length)return!1;for(let m=0;m<this.length;m++)if(this.get(m)!==v.get(m))return!1;return!0}isImmediateParentOf(v){if(this.length+1!==v.length)return!1;for(let m=0;m<this.length;m++)if(this.get(m)!==v.get(m))return!1;return!0}forEach(v){for(let m=this.offset,P=this.limit();m<P;m++)v(this.segments[m])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(v,m){const P=Math.min(v.length,m.length);for(let w=0;w<P;w++){const F=pi.compareSegments(v.get(w),m.get(w));if(F!==0)return F}return ys(v.length,m.length)}static compareSegments(v,m){const P=pi.isNumericId(v),w=pi.isNumericId(m);return P&&!w?-1:!P&&w?1:P&&w?pi.extractNumericId(v).compare(pi.extractNumericId(m)):xP(v,m)}static isNumericId(v){return v.startsWith("__id")&&v.endsWith("__")}static extractNumericId(v){return Nu.fromString(v.substring(4,v.length-2))}}class ei extends pi{construct(v,m,P){return new ei(v,m,P)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...v){const m=[];for(const P of v){if(P.indexOf("//")>=0)throw new Gt(bt.INVALID_ARGUMENT,`Invalid segment (${P}). Paths must not contain // in them.`);m.push(...P.split("/").filter(w=>w.length>0))}return new ei(m)}static emptyPath(){return new ei([])}}const EP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Os extends pi{construct(v,m,P){return new Os(v,m,P)}static isValidIdentifier(v){return EP.test(v)}canonicalString(){return this.toArray().map(v=>(v=v.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Os.isValidIdentifier(v)||(v="`"+v+"`"),v)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tc}static keyField(){return new Os([Tc])}static fromServerFormat(v){const m=[];let P="",w=0;const F=()=>{if(P.length===0)throw new Gt(bt.INVALID_ARGUMENT,`Invalid field path (${v}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);m.push(P),P=""};let c=!1;for(;w<v.length;){const S=v[w];if(S==="\\"){if(w+1===v.length)throw new Gt(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+v);const t=v[w+1];if(t!=="\\"&&t!=="."&&t!=="`")throw new Gt(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+v);P+=t,w+=2}else S==="`"?(c=!c,w++):S!=="."||c?(P+=S,w++):(F(),w++)}if(F(),c)throw new Gt(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+v);return new Os(m)}static emptyPath(){return new Os([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(v){this.path=v}static fromPath(v){return new bs(ei.fromString(v))}static fromName(v){return new bs(ei.fromString(v).popFirst(5))}static empty(){return new bs(ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(v){return this.path.length>=2&&this.path.get(this.path.length-2)===v}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(v){return v!==null&&ei.comparator(this.path,v.path)===0}toString(){return this.path.toString()}static comparator(v,m){return ei.comparator(v.path,m.path)}static isDocumentKey(v){return v.length%2==0}static fromSegments(v){return new bs(new ei(v.slice()))}}function SP(E,v,m,P){if(v===!0&&P===!0)throw new Gt(bt.INVALID_ARGUMENT,`${E} and ${m} cannot be used together.`)}function CP(E){return typeof E=="object"&&E!==null&&(Object.getPrototypeOf(E)===Object.prototype||Object.getPrototypeOf(E)===null)}function AP(E){if(E===void 0)return"undefined";if(E===null)return"null";if(typeof E=="string")return E.length>20&&(E=`${E.substring(0,20)}...`),JSON.stringify(E);if(typeof E=="number"||typeof E=="boolean")return""+E;if(typeof E=="object"){if(E instanceof Array)return"an array";{const v=function(P){return P.constructor?P.constructor.name:null}(E);return v?`a custom ${v} object`:"an object"}}return typeof E=="function"?"a function":la(12329,{type:typeof E})}function PP(E,v){if("_delegate"in E&&(E=E._delegate),!(E instanceof v)){if(v.name===E.constructor.name)throw new Gt(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const m=AP(E);throw new Gt(bt.INVALID_ARGUMENT,`Expected type '${v.name}', but it was: ${m}`)}}return E}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(E,v){const m={typeString:E};return v&&(m.value=v),m}function Qa(E,v){if(!CP(E))throw new Gt(bt.INVALID_ARGUMENT,"JSON must be an object");let m;for(const P in v)if(v[P]){const w=v[P].typeString,F="value"in v[P]?{value:v[P].value}:void 0;if(!(P in E)){m=`JSON missing required field: '${P}'`;break}const c=E[P];if(w&&typeof c!==w){m=`JSON field '${P}' must be a ${w}.`;break}if(F!==void 0&&c!==F.value){m=`Expected '${P}' field to equal '${F.value}'`;break}}if(m)throw new Gt(bt.INVALID_ARGUMENT,m);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-62135596800,Sc=1e6;class Ti{static now(){return Ti.fromMillis(Date.now())}static fromDate(v){return Ti.fromMillis(v.getTime())}static fromMillis(v){const m=Math.floor(v/1e3),P=Math.floor((v-1e3*m)*Sc);return new Ti(m,P)}constructor(v,m){if(this.seconds=v,this.nanoseconds=m,m<0)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+m);if(m>=1e9)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+m);if(v<Ec)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+v);if(v>=253402300800)throw new Gt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+v)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sc}_compareTo(v){return this.seconds===v.seconds?ys(this.nanoseconds,v.nanoseconds):ys(this.seconds,v.seconds)}isEqual(v){return v.seconds===this.seconds&&v.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ti._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(v){if(Qa(v,Ti._jsonSchema))return new Ti(v.seconds,v.nanoseconds)}valueOf(){const v=this.seconds-Ec;return String(v).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ti._jsonSchemaVersion="firestore/timestamp/1.0",Ti._jsonSchema={type:he("string",Ti._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};function RP(E){return E.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(v){this.binaryString=v}static fromBase64String(v){const m=function(w){try{return atob(w)}catch(F){throw typeof DOMException<"u"&&F instanceof DOMException?new MP("Invalid base64 string: "+F):F}}(v);return new cn(m)}static fromUint8Array(v){const m=function(w){let F="";for(let c=0;c<w.length;++c)F+=String.fromCharCode(w[c]);return F}(v);return new cn(m)}[Symbol.iterator](){let v=0;return{next:()=>v<this.binaryString.length?{value:this.binaryString.charCodeAt(v++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(m){return btoa(m)}(this.binaryString)}toUint8Array(){return function(m){const P=new Uint8Array(m.length);for(let w=0;w<m.length;w++)P[w]=m.charCodeAt(w);return P}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(v){return ys(this.binaryString,v.binaryString)}isEqual(v){return this.binaryString===v.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const Gl="(default)";class ko{constructor(v,m){this.projectId=v,this.database=m||Gl}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database===Gl}isEqual(v){return v instanceof ko&&v.projectId===this.projectId&&v.database===this.database}}function wP(E,v){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Gt(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(E.options.projectId,v)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(v,m=null,P=[],w=[],F=null,c="F",S=null,t=null){this.path=v,this.collectionGroup=m,this.explicitOrderBy=P,this.filters=w,this.limit=F,this.limitType=c,this.startAt=S,this.endAt=t,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function OP(E){return new IP(E)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cc,Ft;(Ft=Cc||(Cc={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Nu([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=1048576;function tl(){return typeof document<"u"?document:null}class FP{constructor(v,m,P=1e3,w=1.5,F=6e4){this.Ci=v,this.timerId=m,this.R_=P,this.A_=w,this.V_=F,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(v){this.cancel();const m=Math.floor(this.d_+this.y_()),P=Math.max(0,Date.now()-this.f_),w=Math.max(0,m-P);w>0&&ri("ExponentialBackoff",`Backing off for ${w} ms (base delay: ${this.d_} ms, delay with jitter: ${m} ms, last attempt: ${P} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,w,()=>(this.f_=Date.now(),v())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(v,m,P,w,F){this.asyncQueue=v,this.timerId=m,this.targetTimeMs=P,this.op=w,this.removalCallback=F,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(v,m,P,w,F){const c=Date.now()+P,S=new bu(v,m,c,w,F);return S.start(P),S}start(v){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),v)}skipDelay(){return this.handleDelayElapsed()}cancel(v){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Gt(bt.CANCELLED,"Operation cancelled"+(v?": "+v:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(v=>this.deferred.resolve(v))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Ac,Pc;(Pc=Ac||(Ac={})).Ma="default",Pc.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(E){const v={};return E.timeoutSeconds!==void 0&&(v.timeoutSeconds=E.timeoutSeconds),v}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="ComponentProvider",Rc=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="firestore.googleapis.com",Mc=!0;class wc{constructor(v){if(v.host===void 0){if(v.ssl!==void 0)throw new Gt(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hm,this.ssl=Mc}else this.host=v.host,this.ssl=v.ssl??Mc;if(this.isUsingEmulator=v.emulatorOptions!==void 0,this.credentials=v.credentials,this.ignoreUndefinedProperties=!!v.ignoreUndefinedProperties,this.localCache=v.localCache,v.cacheSizeBytes===void 0)this.cacheSizeBytes=LP;else{if(v.cacheSizeBytes!==-1&&v.cacheSizeBytes<DP)throw new Gt(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=v.cacheSizeBytes}SP("experimentalForceLongPolling",v.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",v.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!v.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:v.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!v.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NP(v.experimentalLongPollingOptions??{}),function(P){if(P.timeoutSeconds!==void 0){if(isNaN(P.timeoutSeconds))throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${P.timeoutSeconds} (must not be NaN)`);if(P.timeoutSeconds<5)throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${P.timeoutSeconds} (minimum allowed value is 5)`);if(P.timeoutSeconds>30)throw new Gt(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${P.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!v.useFetchStreams}isEqual(v){return this.host===v.host&&this.ssl===v.ssl&&this.credentials===v.credentials&&this.cacheSizeBytes===v.cacheSizeBytes&&this.experimentalForceLongPolling===v.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===v.experimentalAutoDetectLongPolling&&function(P,w){return P.timeoutSeconds===w.timeoutSeconds}(this.experimentalLongPollingOptions,v.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===v.ignoreUndefinedProperties&&this.useFetchStreams===v.useFetchStreams}}class lm{constructor(v,m,P,w){this._authCredentials=v,this._appCheckCredentials=m,this._databaseId=P,this._app=w,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Gt(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(v){if(this._settingsFrozen)throw new Gt(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wc(v),this._emulatorOptions=v.emulatorOptions||{},v.credentials!==void 0&&(this._authCredentials=function(P){if(!P)return new uP;switch(P.type){case"firstParty":return new vP(P.sessionIndex||"0",P.iamToken||null,P.authTokenFactory||null);case"provider":return P.client;default:throw new Gt(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(v.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(m){const P=Rc.get(m);P&&(ri(BP,"Removing Datastore"),Rc.delete(m),P.terminate())}(this),Promise.resolve()}}function bP(E,v,m,P={}){var o;E=PP(E,lm);const w=mn(v),F=E._getSettings(),c={...F,emulatorOptions:E._getEmulatorOptions()},S=`${v}:${m}`;w&&($l(`https://${S}`),Jl("Firestore",!0)),F.host!==hm&&F.host!==S&&lP("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const t={...F,host:S,ssl:w,emulatorOptions:P};if(!Gi(t,c)&&(E._setSettings(t),P.mockUserToken)){let g,a;if(typeof P.mockUserToken=="string")g=P.mockUserToken,a=Pe.MOCK_USER;else{g=Bv(P.mockUserToken,(o=E._app)==null?void 0:o.options.projectId);const n=P.mockUserToken.sub||P.mockUserToken.user_id;if(!n)throw new Gt(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Pe(n)}E._authCredentials=new fP(new om(g,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(v,m,P){this.converter=m,this._query=P,this.type="query",this.firestore=v}withConverter(v){return new Gu(this.firestore,v,this._query)}}class Ci{constructor(v,m,P){this.converter=m,this._key=P,this.type="document",this.firestore=v}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(v){return new Ci(this.firestore,v,this._key)}toJSON(){return{type:Ci._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(v,m,P){if(Qa(m,Ci._jsonSchema))return new Ci(v,P||null,new bs(ei.fromString(m.referencePath)))}}Ci._jsonSchemaVersion="firestore/documentReference/1.0",Ci._jsonSchema={type:he("string",Ci._jsonSchemaVersion),referencePath:he("string")};class Uu extends Gu{constructor(v,m,P){super(v,m,OP(P)),this._path=P,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const v=this._path.popLast();return v.isEmpty()?null:new Ci(this.firestore,null,new bs(v))}withConverter(v){return new Uu(this.firestore,v,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="AsyncQueue";class Oc{constructor(v=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FP(this,"async_queue_retry"),this._c=()=>{const P=tl();P&&ri(Ic,"Visibility state changed to "+P.visibilityState),this.M_.w_()},this.ac=v;const m=tl();m&&typeof m.addEventListener=="function"&&m.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(v){this.enqueue(v)}enqueueAndForgetEvenWhileRestricted(v){this.uc(),this.cc(v)}enterRestrictedMode(v){if(!this.ec){this.ec=!0,this.sc=v||!1;const m=tl();m&&typeof m.removeEventListener=="function"&&m.removeEventListener("visibilitychange",this._c)}}enqueue(v){if(this.uc(),this.ec)return new Promise(()=>{});const m=new qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(v().then(m.resolve,m.reject),m.promise)).then(()=>m.promise)}enqueueRetryable(v){this.enqueueAndForget(()=>(this.Yu.push(v),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(v){if(!RP(v))throw v;ri(Ic,"Operation failed with retryable error: "+v)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(v){const m=this.ac.then(()=>(this.rc=!0,v().catch(P=>{throw this.nc=P,this.rc=!1,rm("INTERNAL UNHANDLED ERROR: ",Lc(P)),P}).then(P=>(this.rc=!1,P))));return this.ac=m,m}enqueueAfterDelay(v,m,P){this.uc(),this.oc.indexOf(v)>-1&&(m=0);const w=bu.createAndSchedule(this,v,m,P,F=>this.hc(F));return this.tc.push(w),w}uc(){this.nc&&la(47125,{Pc:Lc(this.nc)})}verifyOperationInProgress(){}async Tc(){let v;do v=this.ac,await v;while(v!==this.ac)}Ic(v){for(const m of this.tc)if(m.timerId===v)return!0;return!1}Ec(v){return this.Tc().then(()=>{this.tc.sort((m,P)=>m.targetTimeMs-P.targetTimeMs);for(const m of this.tc)if(m.skipDelay(),v!=="all"&&m.timerId===v)break;return this.Tc()})}Rc(v){this.oc.push(v)}hc(v){const m=this.tc.indexOf(v);this.tc.splice(m,1)}}function Lc(E){let v=E.message||"";return E.stack&&(v=E.stack.includes(E.message)?E.stack:E.message+`
`+E.stack),v}class GP extends lm{constructor(v,m,P,w){super(v,m,P,w),this.type="firestore",this._queue=new Oc,this._persistenceKey=(w==null?void 0:w.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const v=this._firestoreClient.terminate();this._queue=new Oc(v),this._firestoreClient=void 0,await v}}}function UP(E,v){const m=typeof E=="object"?E:nh(),P=typeof E=="string"?E:Gl,w=Ts(m,"firestore").getImmediate({identifier:P});if(!w._initialized){const F=Dv("firestore");F&&bP(w,...F)}return w}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(v){this._byteString=v}static fromBase64String(v){try{return new Li(cn.fromBase64String(v))}catch(m){throw new Gt(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+m)}}static fromUint8Array(v){return new Li(cn.fromUint8Array(v))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(v){return this._byteString.isEqual(v._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(v){if(Qa(v,Li._jsonSchema))return Li.fromBase64String(v.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:he("string",Li._jsonSchemaVersion),bytes:he("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(...v){for(let m=0;m<v.length;++m)if(v[m].length===0)throw new Gt(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(v)}isEqual(v){return this._internalPath.isEqual(v._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(v,m){if(!isFinite(v)||v<-90||v>90)throw new Gt(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+v);if(!isFinite(m)||m<-180||m>180)throw new Gt(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+m);this._lat=v,this._long=m}get latitude(){return this._lat}get longitude(){return this._long}isEqual(v){return this._lat===v._lat&&this._long===v._long}_compareTo(v){return ys(this._lat,v._lat)||ys(this._long,v._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:en._jsonSchemaVersion}}static fromJSON(v){if(Qa(v,en._jsonSchema))return new en(v.latitude,v.longitude)}}en._jsonSchemaVersion="firestore/geoPoint/1.0",en._jsonSchema={type:he("string",en._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(v){this._values=(v||[]).map(m=>m)}toArray(){return this._values.map(v=>v)}isEqual(v){return function(P,w){if(P.length!==w.length)return!1;for(let F=0;F<P.length;++F)if(P[F]!==w[F])return!1;return!0}(this._values,v._values)}toJSON(){return{type:sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(v){if(Qa(v,sn._jsonSchema)){if(Array.isArray(v.vectorValues)&&v.vectorValues.every(m=>typeof m=="number"))return new sn(v.vectorValues);throw new Gt(bt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sn._jsonSchemaVersion="firestore/vectorValue/1.0",sn._jsonSchema={type:he("string",sn._jsonSchemaVersion),vectorValues:he("object")};function fm(E,v,m){if((v=We(v))instanceof um)return v._internalPath;if(typeof v=="string")return WP(E,v);throw Ul("Field path arguments must be of type string or ",E)}const VP=new RegExp("[~\\*/\\[\\]]");function WP(E,v,m){if(v.search(VP)>=0)throw Ul(`Invalid field path (${v}). Paths must not contain '~', '*', '/', '[', or ']'`,E);try{return new um(...v.split("."))._internalPath}catch{throw Ul(`Invalid field path (${v}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,E)}}function Ul(E,v,m,P,w){let F=`Function ${v}() called with invalid data`;F+=". ";let c="";return new Gt(bt.INVALID_ARGUMENT,F+E+c)}const Dc="@firebase/firestore",Fc="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(v,m,P,w,F){this._firestore=v,this._userDataWriter=m,this._key=P,this._document=w,this._converter=F}get id(){return this._key.path.lastSegment()}get ref(){return new Ci(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const v=new zP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(v)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var v;return((v=this._document)==null?void 0:v.data.clone().value.mapValue.fields)??void 0}get(v){if(this._document){const m=this._document.data.field(fm("DocumentSnapshot.get",v));if(m!==null)return this._userDataWriter.convertValue(m)}}}class zP extends dm{data(){return super.data()}}class go{constructor(v,m){this.hasPendingWrites=v,this.fromCache=m}isEqual(v){return this.hasPendingWrites===v.hasPendingWrites&&this.fromCache===v.fromCache}}class Gn extends dm{constructor(v,m,P,w,F,c){super(v,m,P,w,c),this._firestore=v,this._firestoreImpl=v,this.metadata=F}exists(){return super.exists()}data(v={}){if(this._document){if(this._converter){const m=new wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(m,v)}return this._userDataWriter.convertValue(this._document.data.value,v.serverTimestamps)}}get(v,m={}){if(this._document){const P=this._document.data.field(fm("DocumentSnapshot.get",v));if(P!==null)return this._userDataWriter.convertValue(P,m.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(bt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const v=this._document,m={};return m.type=Gn._jsonSchemaVersion,m.bundle="",m.bundleSource="DocumentSnapshot",m.bundleName=this._key.toString(),!v||!v.isValidDocument()||!v.isFoundDocument()?m:(this._userDataWriter.convertObjectMap(v.data.value.mapValue.fields,"previous"),m.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),m)}}Gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gn._jsonSchema={type:he("string",Gn._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class wo extends Gn{data(v={}){return super.data(v)}}class _r{constructor(v,m,P,w){this._firestore=v,this._userDataWriter=m,this._snapshot=w,this.metadata=new go(w.hasPendingWrites,w.fromCache),this.query=P}get docs(){const v=[];return this.forEach(m=>v.push(m)),v}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(v,m){this._snapshot.docs.forEach(P=>{v.call(m,new wo(this._firestore,this._userDataWriter,P.key,P,new go(this._snapshot.mutatedKeys.has(P.key),this._snapshot.fromCache),this.query.converter))})}docChanges(v={}){const m=!!v.includeMetadataChanges;if(m&&this._snapshot.excludesMetadataChanges)throw new Gt(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===m||(this._cachedChanges=function(w,F){if(w._snapshot.oldDocs.isEmpty()){let c=0;return w._snapshot.docChanges.map(S=>{const t=new wo(w._firestore,w._userDataWriter,S.doc.key,S.doc,new go(w._snapshot.mutatedKeys.has(S.doc.key),w._snapshot.fromCache),w.query.converter);return S.doc,{type:"added",doc:t,oldIndex:-1,newIndex:c++}})}{let c=w._snapshot.oldDocs;return w._snapshot.docChanges.filter(S=>F||S.type!==3).map(S=>{const t=new wo(w._firestore,w._userDataWriter,S.doc.key,S.doc,new go(w._snapshot.mutatedKeys.has(S.doc.key),w._snapshot.fromCache),w.query.converter);let o=-1,g=-1;return S.type!==0&&(o=c.indexOf(S.doc.key),c=c.delete(S.doc.key)),S.type!==1&&(c=c.add(S.doc),g=c.indexOf(S.doc.key)),{type:HP(S.type),doc:t,oldIndex:o,newIndex:g}})}}(this,m),this._cachedChangesIncludeMetadataChanges=m),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(bt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const v={};v.type=_r._jsonSchemaVersion,v.bundleSource="QuerySnapshot",v.bundleName=mP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const m=[],P=[],w=[];return this.docs.forEach(F=>{F._document!==null&&(m.push(F._document),P.push(this._userDataWriter.convertObjectMap(F._document.data.value.mapValue.fields,"previous")),w.push(F.ref.path))}),v.bundle=(this._firestore,this.query._query,v.bundleName,"NOT SUPPORTED"),v}}function HP(E){switch(E){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return la(61501,{type:E})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r._jsonSchemaVersion="firestore/querySnapshot/1.0",_r._jsonSchema={type:he("string",_r._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};(function(v,m=!0){hP(yn),hi(new $e("firestore",(P,{instanceIdentifier:w,options:F})=>{const c=P.getProvider("app").getImmediate(),S=new GP(new dP(P.getProvider("auth-internal")),new pP(c,P.getProvider("app-check-internal")),wP(c,w),c);return F={useFetchStreams:m,...F},S._setSettings(F),S},"PUBLIC").setMultipleInstances(!0)),De(Dc,Fc,v),De(Dc,Fc,"esm2020")})();const YP={apiKey:"AIzaSyAR40dSceiosMi272iB9supALgpsKlNLxA",authDomain:"new-trail-dungen.firebaseapp.com",projectId:"new-trail-dungen",storageBucket:"new-trail-dungen.firebasestorage.app",messagingSenderId:"1056979270186",appId:"1:1056979270186:web:0bc18469a82db5fc456153",measurementId:"G-8TWYNF7VRX"},ph=Xv(YP);let XP=null;if(typeof window<"u")try{XP=gC(ph)}catch(E){console.warn("Analytics initialization failed:",E)}const gh=ZE(ph);rP(ph);UP(ph);console.log(" Firebase initialized successfully");console.log(" Firebase Auth initialized with domain:",gh.app.options.authDomain);async function KP(E,v){try{if(!E||!v)throw new Error("Email and password are required.");if(v.length<6)throw new Error("Password must be at least 6 characters long.");console.log(" Registering user:",E);const m=await bT(gh,E,v);return console.log(" Registration successful:",m.user.email),m}catch(m){const P=Vu(m);throw console.error(" Registration error:",P),new Error(P)}}async function jP(E,v){try{if(!E||!v)throw new Error("Email and password are required.");console.log(" Logging in user:",E);const m=await GT(gh,E,v);return console.log(" Login successful:",m.user.email),m}catch(m){const P=Vu(m);throw console.error(" Login error:",P),new Error(P)}}async function $P(){try{const E=new Oi;E.addScope("profile"),E.addScope("email"),E.setCustomParameters({prompt:"select_account"}),console.log(" Attempting Google Sign-In...");const v=await rE(gh,E);return console.log(" Google Sign-In successful:",v.user.email),v}catch(E){if(E.code==="auth/popup-closed-by-user"||E.code==="auth/popup-blocked"){const m="Sign-in popup was blocked or closed. Please try again.";throw console.error(" Google Sign-In error:",m),new Error(m)}const v=Vu(E);throw console.error(" Google Sign-In error:",v),new Error(v)}}function Vu(E){if(!E.code)return E.message||"An unexpected error occurred. Please try again.";switch(E.code){case"auth/email-already-in-use":return"This email is already registered. Please try logging in instead.";case"auth/invalid-email":return"Invalid email address. Please check and try again.";case"auth/weak-password":return"Password is too weak. Please use at least 6 characters.";case"auth/user-not-found":return"No account found with this email. Please register first.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please check your credentials.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";case"auth/operation-not-allowed":return"This sign-in method is not enabled. Please contact support.";case"auth/popup-closed-by-user":return"Sign-in popup was closed. Please try again.";case"auth/popup-blocked":return"Sign-in popup was blocked. Please allow popups and try again.";case"auth/requests-to-this-api-identitytoolkit-method-google.cloud.identitytoolkit.v1.AuthenticationService.SignUp are blocked":case"auth/blocked":return`Authentication service is temporarily unavailable. Please check:
1. Identity Toolkit API is enabled in Google Cloud Console
2. API key restrictions allow localhost
3. Firebase project configuration is correct`;case"auth/invalid-api-key":return"Invalid API key. Please check your Firebase configuration.";default:return E.message||`Authentication error: ${E.code}`}}class JP extends yt.Scene{constructor(){super(ue.AUTH_SCENE);wt(this,"isLoginMode",!0)}create(){const{width:m,height:P}=this.scale,w=Math.floor(m/20);this.add.text(m/2,P*.15,"THE TRIAL DUNGEON",{fontSize:`${w}px`,color:"#fff",fontFamily:"Arial",align:"center"}).setOrigin(.5);const F=Math.min(300,m*.35),c=Math.floor(m/200),S=Math.floor(m/80),t=Math.floor(m/100),o=Math.floor(m/70),g=this.add.dom(m/2,P*.45).createFromHTML(`
      <div style="
        color: white;
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: ${F}px;
      ">
        <input type="email" id="email" placeholder="Email" style="padding: ${c}px; font-size: ${S}px;">
        <input type="password" id="password" placeholder="Password" style="padding: ${c}px; font-size: ${S}px;">
        <button id="submitBtn" style="
          padding: ${t}px;
          font-size: ${o}px;
          cursor: pointer;
          background: #4CAF50;
          color: white;
          border: none;
        ">Login</button>
        <button id="googleBtn" style="
          padding: ${t}px;
          font-size: ${o}px;
          cursor: pointer;
          background: #db4437;
          color: white;
          border: none;
        ">Sign in with Google</button>
        <p id="toggleText" style="
          cursor: pointer;
          text-align: center;
          text-decoration: underline;
          font-size: ${S}px;
        ">Need an account? Register</p>
        <p id="errorMessage" style="
          color: red;
          font-size: ${Math.floor(S*.8)}px;
          text-align: center;
        "></p>
      </div>
    `),a=g.getChildByID("email"),n=g.getChildByID("password"),r=g.getChildByID("submitBtn"),e=g.getChildByID("googleBtn"),s=g.getChildByID("toggleText"),h=g.getChildByID("errorMessage");s.addEventListener("click",()=>{this.isLoginMode=!this.isLoginMode,r.innerText=this.isLoginMode?"Login":"Register",s.innerText=this.isLoginMode?"Need an account? Register":"Have an account? Login",h.innerText=""}),r.addEventListener("click",async()=>{const i=a.value.trim(),l=n.value.trim();if(h.innerText="",!i||!l){h.innerText="Please enter email and password.";return}r.disabled=!0,e.disabled=!0,r.innerText=this.isLoginMode?"Logging in...":"Registering...";try{this.isLoginMode?await jP(i,l):await KP(i,l),this.scene.start(ue.INTRO_SCENE)}catch(u){h.innerText=u.message||"An error occurred. Please try again."}finally{r.disabled=!1,e.disabled=!1,r.innerText=this.isLoginMode?"Login":"Register"}}),e.addEventListener("click",async()=>{h.innerText="",r.disabled=!0,e.disabled=!0,e.innerText="Signing in...";try{await $P(),this.scene.start(ue.INTRO_SCENE)}catch(i){h.innerText=i.message||"Google sign-in failed. Please try again."}finally{r.disabled=!1,e.disabled=!1,e.innerText="Sign in with Google"}})}}class kP extends Nc.Scene{constructor(){super(ue.LOADING);wt(this,"progressBar");wt(this,"progressBox");wt(this,"loadingText");wt(this,"percentText");wt(this,"assetText")}preload(){this.createLoadingUI(),this.load.pack(Bc.MAIN,"assets/data/assets.json"),this.load.on("progress",m=>{this.percentText.setText(Math.floor(m*100)+"%"),this.progressBar.clear(),this.progressBar.fillStyle(16777215,1),this.progressBar.fillRect(this.cameras.main.width/4+10,this.cameras.main.height/2-20,(this.cameras.main.width/2-20)*m,30)}),this.load.on("fileprogress",m=>{this.assetText.setText("Loading asset: "+m.key)}),this.load.on("complete",()=>{this.cleanup();const m=this.sound.add("BG_MUSIC",{loop:!0,volume:.9});this.input.once("pointerdown",()=>{m.play(),this.game.registry.set("bgMusic",m)}),this.scene.start(ue.AUTH_SCENE)})}createLoadingUI(){const m=this.cameras.main.width,P=this.cameras.main.height;this.progressBar=this.add.graphics(),this.progressBox=this.add.graphics(),this.progressBox.fillStyle(2236962,.8),this.progressBox.fillRect(m/4,P/2-30,m/2,50),this.loadingText=this.make.text({x:m/2,y:P/2-50,text:"Loading...",style:{font:"20px monospace",color:"#ffffff"}}).setOrigin(.5),this.percentText=this.make.text({x:m/2,y:P/2-5,text:"0%",style:{font:"18px monospace",color:"#ffffff"}}).setOrigin(.5),this.assetText=this.make.text({x:m/2,y:P/2+50,text:"",style:{font:"18px monospace",color:"#ffffff"}}).setOrigin(.5)}cleanup(){this.progressBar.destroy(),this.progressBox.destroy(),this.loadingText.destroy(),this.percentText.destroy(),this.assetText.destroy()}}class ZP extends Nc.Scene{constructor(){super(ue.INTRO_SCENE)}create(){const{width:v,height:m}=this.scale;this.cameras.main.setBackgroundColor("#1a1a2e");const P=this.add.image(v/2,m*.38,"bg-image");P.setOrigin(.5);const w=v*.8,F=m*.3,c=w/P.width,S=F/P.height,t=Math.min(c,S);P.setScale(t);const o=this.add.text(v/2,m*.18,`THE TRIAL
DUNGEON`,{fontFamily:"Arial Black",fontSize:"30px",fontStyle:"bold",color:"#00ff88",stroke:"#000000",strokeThickness:5,align:"center",lineSpacing:4}).setOrigin(.5);this.add.text(v/2,m*.62,"Descend into the darkness...",{fontFamily:"Arial",fontSize:"9px",color:"#aaaaaa",fontStyle:"italic"}).setOrigin(.5),this.createButton(v/2,m*.78,"PLAY GAME").on("pointerdown",()=>{const a={level:Ht.instance.data.currentArea.name||"Level 1",roomId:Ht.instance.data.currentArea.startRoomId||"room-01",doorId:Ht.instance.data.currentArea.startDoorId||"door-01"};this.scene.start(ue.GAME_SCENE,a),this.scene.launch(ue.UI_SCENE)}),this.tweens.add({targets:o,scale:1.04,duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createButton(v,m,P){const w=this.add.text(v,m,P,{fontFamily:"Arial Black",fontSize:"9px",color:"#ffffff",backgroundColor:"#aac5b5",padding:{x:20,y:10}}).setOrigin(.5).setInteractive({useHandCursor:!0});return w.on("pointerover",()=>{w.setBackgroundColor("#be6937").setColor("#000000").setScale(1.05)}),w.on("pointerout",()=>{w.setBackgroundColor("#81bd22").setColor("#ffffff").setScale(1)}),w}}class Vl{static async generateMCQQuestion(v="computer science algorithms"){var P,w,F,c,S;if(!this.API_KEY)return console.error("Gemini API key not found. Please set VITE_GEMINI_API_KEY in your .env file"),null;const m=`Generate a multiple-choice question (MCQ) on the topic: "${v}".
Provide exactly 4 answer choices, with only one correct answer.
The question should be about algorithms, data structures, or programming concepts.

Output as valid JSON with this exact format:
{
  "question": "Your question here",
  "options": ["Option A", "Option B", "Option C", "Option D"],
  "correctAnswer": 0
}

Where correctAnswer is the index (0-3) of the correct option.
Only return the JSON, no additional text or markdown formatting.`;try{const t=await fetch(`${this.API_URL}?key=${this.API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:m}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:500}})});if(!t.ok)throw new Error(`Gemini API error: ${t.status} ${t.statusText}`);const g=(S=(c=(F=(w=(P=(await t.json()).candidates)==null?void 0:P[0])==null?void 0:w.content)==null?void 0:F.parts)==null?void 0:c[0])==null?void 0:S.text;if(!g)throw new Error("No text generated in Gemini response");const a=g.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),n=JSON.parse(a);if(!n.question||!Array.isArray(n.options)||n.options.length!==4)throw new Error("Invalid question format from Gemini");if(n.correctAnswer<0||n.correctAnswer>3)throw new Error("Invalid correctAnswer index");return{question:n.question,options:n.options,correctAnswer:n.correctAnswer}}catch(t){return console.error("Error generating MCQ from Gemini API:",t),null}}static async generateMCQQuestions(v=3,m="computer science algorithms"){const P=[];for(let w=0;w<v;w++){const F=await this.generateMCQQuestion(m);F?P.push(F):(console.warn(`Failed to generate question ${w+1}, using fallback`),P.push(this.getFallbackQuestion(w))),w<v-1&&await new Promise(c=>setTimeout(c,500))}return P}static getFallbackQuestion(v){const m=[{question:"What is the time complexity of binary search?",options:["O(n)","O(log n)","O(n log n)","O(1)"],correctAnswer:1},{question:"Which data structure uses LIFO (Last In First Out)?",options:["Queue","Stack","Tree","Graph"],correctAnswer:1},{question:"What is the time complexity of finding an element in a hash table?",options:["O(n)","O(log n)","O(1)","O(n log n)"],correctAnswer:2}];return m[v%m.length]}}wt(Vl,"API_URL","https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent"),wt(Vl,"API_KEY","AIzaSyDrJpyokEvzWyqYLjDPL0lpjUWh1kk_aEY");class QP extends yt.Scene{constructor(){super("SageTrialScene");wt(this,"currentQuestionIndex",0);wt(this,"selectedAnswer",null);wt(this,"questionsAnswered",0);wt(this,"weaponLevel",1);wt(this,"weaponText");wt(this,"hintText");wt(this,"questionText");wt(this,"optionButtons",[]);wt(this,"optionTexts",[]);wt(this,"submitButton");wt(this,"submitText");wt(this,"loadingText");wt(this,"questions",[])}create(){console.log("SageTrialScene: create() called");try{const{width:m,height:P}=this.scale;console.log(`SageTrialScene: width=${m}, height=${P}`),this.add.rectangle(m/2,P/2,m,P,0);const w=m/2,F=P-10;if(this.textures.exists(Rt.SAGE)){const d=this.add.image(w,F,Rt.SAGE),p=Math.min(40/d.width,40/d.height);d.setScale(p),d.setOrigin(.5,1)}else console.warn(`SAGE asset ${Rt.SAGE} not found, using placeholder`),this.add.rectangle(w,F,30,40,11032055);const c=m/2,S=20,t=m*.85;this.add.rectangle(c,S,t,35,1710638,.9),this.questionText=this.add.text(c,S,"",{fontSize:"9px",color:"#ffffff",align:"center",wordWrap:{width:t-15}}).setOrigin(.5);const g=60,a=m/2,n=m*.75;this.createOptionButtons(a,g,n);const r=g+115;this.createSubmitButton(a,r),this.loadingText=this.add.text(a,g,"Generating questions...",{fontSize:"10px",color:"#ffffff"}).setOrigin(.5),this.generateQuestions();const e=m*.8,s=P*.5,h=60,i=50;this.add.rectangle(e,s,h,i,1723694,.95),this.add.rectangle(e,s,h-3,i-3,862232,.98),this.add.text(e,s-30,"Weapon",{fontSize:"8px",color:"#ffffff"}).setOrigin(.5),this.weaponText=this.add.text(e,s+5,"",{fontSize:"12px",color:"#ffffff",align:"center"}).setOrigin(.5),this.updateWeaponBoard();const l=m*.2,u=P*.4;let f;this.textures.exists(Rt.POT)?(f=this.add.image(l,u,Rt.POT),f.setScale(.4),f.setOrigin(.5,1)):(console.warn(`POT asset ${Rt.POT} not found, using placeholder`),f=this.add.rectangle(l,u,20,20,4674921),f.setOrigin(.5,1)),this.hintText=this.add.text(l,u+3,"0/3",{fontSize:"8px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5,0),console.log("SageTrialScene: Successfully created")}catch(m){console.error("SageTrialScene: Error in create()",m)}}async generateQuestions(){console.log("Generating questions from Gemini API...");try{this.loadingText&&this.loadingText.setVisible(!0),this.optionButtons.forEach(P=>P.setVisible(!1)),this.submitButton.setVisible(!1);const m=await Vl.generateMCQQuestions(3,"computer science algorithms");if(m.length>0)this.questions=m,console.log(`Successfully generated ${this.questions.length} questions from Gemini API`),this.loadingText&&this.loadingText.setVisible(!1),this.optionButtons.forEach(P=>P.setVisible(!0)),this.submitButton.setVisible(!0),this.displayQuestion();else throw new Error("No questions generated from API")}catch(m){console.error("Error generating questions:",m),this.questions=[{question:"What is the time complexity of binary search?",options:["O(n)","O(log n)","O(n log n)","O(1)"],correctAnswer:1},{question:"Which data structure uses LIFO (Last In First Out)?",options:["Queue","Stack","Tree","Graph"],correctAnswer:1},{question:"What is the time complexity of finding an element in a hash table?",options:["O(n)","O(log n)","O(1)","O(n log n)"],correctAnswer:2}],this.loadingText?(this.loadingText.setText("Using fallback questions"),this.time.delayedCall(2e3,()=>{this.loadingText.setVisible(!1),this.optionButtons.forEach(P=>P.setVisible(!0)),this.submitButton.setVisible(!0),this.displayQuestion()})):this.displayQuestion()}}createOptionButtons(m,P,w){for(let S=0;S<4;S++){const t=P+S*24,o=this.add.rectangle(m,t,w,20,2899536).setInteractive({useHandCursor:!0}).setStrokeStyle(1,8359053),g=this.add.text(m,t,"",{fontSize:"8px",color:"#ffffff",align:"center",wordWrap:{width:w-12}}).setOrigin(.5);this.optionButtons.push(o),this.optionTexts.push(g),o.on("pointerdown",()=>{this.selectAnswer(S)})}}createSubmitButton(m,P){this.submitButton=this.add.rectangle(m,P,80,24,2600544).setInteractive({useHandCursor:!0}),this.submitText=this.add.text(m,P,"SUBMIT",{fontSize:"9px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.submitButton.on("pointerdown",()=>{this.submitAnswer()}),this.submitButton.setAlpha(.5),this.submitButton.disableInteractive()}displayQuestion(){if(console.log(`Displaying question ${this.currentQuestionIndex+1} of ${this.questions.length}`),this.currentQuestionIndex>=this.questions.length){console.log("All questions answered, completing trial"),this.completeTrial();return}if(!this.questionText){console.error("questionText is not initialized");return}const m=this.questions[this.currentQuestionIndex];this.questionText.setText(m.question);for(let P=0;P<4;P++)m.options[P]&&this.optionTexts[P]&&this.optionButtons[P]?(this.optionTexts[P].setText(`${String.fromCharCode(65+P)}. ${m.options[P]}`),this.optionButtons[P].setAlpha(1),this.optionButtons[P].setFillStyle(2899536),this.optionButtons[P].setStrokeStyle(1,8359053),this.optionButtons[P].setInteractive({useHandCursor:!0}),this.optionButtons[P].setVisible(!0),this.optionTexts[P].setVisible(!0)):this.optionButtons[P]&&this.optionTexts[P]&&(this.optionButtons[P].setVisible(!1),this.optionTexts[P].setVisible(!1));this.selectedAnswer=null,this.submitButton&&(this.submitButton.setAlpha(.5),this.submitButton.disableInteractive()),this.hintText&&this.hintText.setText(`Q: ${this.currentQuestionIndex+1}/3`)}selectAnswer(m){this.optionButtons.forEach((P,w)=>{P.setStrokeStyle(2,8359053),P.setAlpha(1)}),this.optionButtons[m].setStrokeStyle(3,3447003),this.optionButtons[m].setAlpha(.8),this.selectedAnswer=m,this.submitButton.setAlpha(1),this.submitButton.setInteractive({useHandCursor:!0})}submitAnswer(){if(this.selectedAnswer===null)return;console.log(`Submitting answer for question ${this.currentQuestionIndex+1}, selected: ${this.selectedAnswer}`),this.submitButton.disableInteractive(),this.submitButton.setAlpha(.5);const m=this.questions[this.currentQuestionIndex];this.selectedAnswer===m.correctAnswer?(this.optionButtons[this.selectedAnswer].setFillStyle(2600544),this.questionsAnswered++,console.log(`Correct answer! Total correct: ${this.questionsAnswered}`)):(this.optionButtons[this.selectedAnswer].setFillStyle(15158332),this.optionButtons[m.correctAnswer].setFillStyle(2600544),console.log(`Wrong answer. Correct was: ${m.correctAnswer}`)),this.optionButtons.forEach(w=>{w.disableInteractive()}),this.time.delayedCall(1500,()=>{console.log(`Moving to next question. Current index: ${this.currentQuestionIndex}, Total questions: ${this.questions.length}`),this.currentQuestionIndex++,this.optionButtons.forEach(w=>{w.setFillStyle(2899536),w.setStrokeStyle(1,8359053),w.setAlpha(1),w.setInteractive({useHandCursor:!0})}),this.selectedAnswer=null,this.displayQuestion()})}completeTrial(){this.questionsAnswered>=3?this.weaponLevel=3:this.questionsAnswered>=2?this.weaponLevel=2:this.weaponLevel=1,this.questionText.setText("Trial Complete! Weapon Granted!"),this.hintText.setText(`Weapon Level: ${this.weaponLevel}`),this.optionButtons.forEach(m=>m.setVisible(!1)),this.optionTexts.forEach(m=>m.setVisible(!1)),this.submitButton.setVisible(!1),this.submitText.setVisible(!1),this.time.delayedCall(3e3,()=>{this.scene.start(ue.GAME_SCENE)})}updateWeaponBoard(){this.weaponText&&this.weaponText.setText(`Lv ${this.weaponLevel}`)}}const qP={type:yt.WEBGL,pixelArt:!0,scale:{parent:"game-container",width:256,height:192,mode:yt.Scale.FIT,autoCenter:yt.Scale.CENTER_BOTH},backgroundColor:"#000000",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:[Xm,kP,JP,ZP,Tx,_x,ty,QP],dom:{createContainer:!0}};new yt.Game(qP);
